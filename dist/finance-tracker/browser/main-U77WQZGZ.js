var AL=Object.create;var wb=Object.defineProperty,ML=Object.defineProperties,kL=Object.getOwnPropertyDescriptor,PL=Object.getOwnPropertyDescriptors,OL=Object.getOwnPropertyNames,jI=Object.getOwnPropertySymbols,NL=Object.getPrototypeOf,HI=Object.prototype.hasOwnProperty,RL=Object.prototype.propertyIsEnumerable;var UI=(n,e,t)=>e in n?wb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,C=(n,e)=>{for(var t in e||={})HI.call(e,t)&&UI(n,t,e[t]);if(jI)for(var t of jI(e))RL.call(e,t)&&UI(n,t,e[t]);return n},J=(n,e)=>ML(n,PL(e));var FL=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var LL=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of OL(e))!HI.call(n,i)&&i!==t&&wb(n,i,{get:()=>e[i],enumerable:!(r=kL(e,i))||r.enumerable});return n};var BL=(n,e,t)=>(t=n!=null?AL(NL(n)):{},LL(e||!n||!n.__esModule?wb(t,"default",{value:n,enumerable:!0}):t,n));var EL=FL((vm,$I)=>{"use strict";(function(n,e){typeof vm=="object"&&typeof $I=="object"?$I.exports=e():typeof define=="function"&&define.amd?define([],e):typeof vm=="object"?vm.AirDatepicker=e():n.AirDatepicker=e()})(vm,function(){return(function(){"use strict";var n={d:function(L,_){for(var S in _)n.o(_,S)&&!n.o(L,S)&&Object.defineProperty(L,S,{enumerable:!0,get:_[S]})},o:function(L,_){return Object.prototype.hasOwnProperty.call(L,_)}},e={};n.d(e,{default:function(){return gn}});var t={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},r={classes:"",inline:!1,locale:{days:["\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430"],daysShort:["\u0412\u043E\u0441","\u041F\u043E\u043D","\u0412\u0442\u043E","\u0421\u0440\u0435","\u0427\u0435\u0442","\u041F\u044F\u0442","\u0421\u0443\u0431"],daysMin:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],monthsShort:["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"],today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",clear:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:t.days,minView:t.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function i(L){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof L=="string"?_.querySelector(L):L}function s(){let{tagName:L="div",className:_="",innerHtml:S="",id:b="",attrs:O={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=document.createElement(L);return _&&k.classList.add(..._.split(" ")),b&&(k.id=b),S&&(k.innerHTML=S),O&&o(k,O),k}function o(L,_){for(let[S,b]of Object.entries(_))b!==void 0&&L.setAttribute(S,b);return L}function a(L){return new Date(L.getFullYear(),L.getMonth()+1,0).getDate()}function u(L){let _=L.getHours(),{hours:S,dayPeriod:b}=c(_);return{year:L.getFullYear(),month:L.getMonth(),fullMonth:L.getMonth()+1<10?"0"+(L.getMonth()+1):L.getMonth()+1,date:L.getDate(),fullDate:L.getDate()<10?"0"+L.getDate():L.getDate(),day:L.getDay(),hours:_,fullHours:l(_),hours12:S,dayPeriod:b,fullHours12:l(S),minutes:L.getMinutes(),fullMinutes:L.getMinutes()<10?"0"+L.getMinutes():L.getMinutes()}}function c(L){return{dayPeriod:L>11?"pm":"am",hours:L%12==0?12:L%12}}function l(L){return L<10?"0"+L:L}function d(L){let _=10*Math.floor(L.getFullYear()/10);return[_,_+9]}function h(){let L=[];for(var _=arguments.length,S=new Array(_),b=0;b<_;b++)S[b]=arguments[b];return S.forEach(O=>{if(typeof O=="object")for(let k in O)O[k]&&L.push(k);else O&&L.push(O)}),L.join(" ")}function f(L,_){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.days;if(!L||!_)return!1;let b=u(L),O=u(_);return{[t.days]:b.date===O.date&&b.month===O.month&&b.year===O.year,[t.months]:b.month===O.month&&b.year===O.year,[t.years]:b.year===O.year}[S]}function p(L,_,S){let b=v(L,!1).getTime(),O=v(_,!1).getTime();return S?b>=O:b>O}function g(L,_){return!p(L,_,!0)}function v(L){let _=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],S=new Date(L.getTime());return typeof _!="boolean"||_||(function(b){b.setHours(0,0,0,0)})(S),S}function y(L,_,S){L.length?L.forEach(b=>{b.addEventListener(_,S)}):L.addEventListener(_,S)}function E(L,_){return!(!L||L===document||L instanceof DocumentFragment)&&(L.matches(_)?L:E(L.parentNode,_))}function M(L,_,S){return L>S?S:L<_?_:L}function T(L){for(var _=arguments.length,S=new Array(_>1?_-1:0),b=1;b<_;b++)S[b-1]=arguments[b];return S.filter(O=>O).forEach(O=>{for(let[k,I]of Object.entries(O))if(I!==void 0&&I.toString()==="[object Object]"){let F=L[k]!==void 0?L[k].toString():void 0,j=I.toString(),G=Array.isArray(I)?[]:{};L[k]=L[k]?F!==j?G:L[k]:G,T(L[k],I)}else L[k]=I}),L}function R(L){let _=L;return L instanceof Date||(typeof L=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(L)&&(L+="T00:00:00"),_=new Date(L)),isNaN(_.getTime())&&(console.log(`Unable to convert value "${L}" to Date object`),_=!1),_}function U(L){let _="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+_+")("+L+")($|<|"+_+")","g")}function q(L,_,S){return(_=(function(b){var O=(function(k,I){if(typeof k!="object"||k===null)return k;var F=k[Symbol.toPrimitive];if(F!==void 0){var j=F.call(k,"string");if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)})(b);return typeof O=="symbol"?O:String(O)})(_))in L?Object.defineProperty(L,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):L[_]=S,L}class H{constructor(){let{type:_,date:S,dp:b,opts:O,body:k}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};q(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),q(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),q(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),q(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),q(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),q(this,"onChangeFocusDate",I=>{if(!I)return void(this.focused&&this.removeFocus());let F=f(I,this.date,this.type);F?this.focus():!F&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),q(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell)),this.type=_,this.singleType=this.type.slice(0,-1),this.date=S,this.dp=b,this.opts=O,this.body=k,this.customData=!1,this.init()}init(){var _,S;let{onRenderCell:b}=this.opts;b&&(this.customData=b({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),(_=this.customData)!==null&&_!==void 0&&_.disabled?this.dp.disableDate(this.date):((S=this.customData)===null||S===void 0?void 0:S.disabled)===!1&&this.dp.enableDate(this.date)}_bindDatepickerEvents(){this.dp.on(t.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(t.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(t.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(t.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var _;let{year:S,month:b,fullMonth:O,date:k,fullDate:I}=u(this.date),F=((_=this.customData)===null||_===void 0?void 0:_.attrs)||{};this.$cell=s({attrs:C({"data-year":S,"data-month":b,"data-date":k,"data-iso-date":`${S}-${O}-${I}`},F)}),this.$cell.adpCell=this}_getClassName(){var _;let S=new Date,{selectOtherMonths:b,selectOtherYears:O}=this.opts,{minDate:k,maxDate:I,isDateDisabled:F}=this.dp,{day:j}=u(this.date),G=this._isOutOfMinMaxRange(),se=F(this.date),re=h("air-datepicker-cell",`-${this.singleType}-`,{"-current-":f(S,this.date,this.type),"-min-date-":k&&f(k,this.date,this.type),"-max-date-":I&&f(I,this.date,this.type)}),ae="";switch(this.type){case t.days:ae=h({"-weekend-":this.dp.isWeekend(j),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!b||G||se});break;case t.months:ae=h({"-disabled-":G});break;case t.years:ae=h({"-other-decade-":this.isOtherDecade,"-disabled-":G||this.isOtherDecade&&!O})}return h(re,ae,(_=this.customData)===null||_===void 0?void 0:_.classes).split(" ")}_getHtml(){var _;let{year:S,month:b,date:O}=u(this.date),{showOtherMonths:k,showOtherYears:I}=this.opts;if((_=this.customData)!==null&&_!==void 0&&_.html)return this.customData.html;switch(this.type){case t.days:return!k&&this.isOtherMonth?"":O;case t.months:return this.dp.locale[this.opts.monthsField][b];case t.years:return!I&&this.isOtherDecade?"":S}}_isOutOfMinMaxRange(){let{minDate:_,maxDate:S}=this.dp,{type:b,date:O}=this,{month:k,year:I,date:F}=u(O),j=b===t.days,G=b===t.years,se=!!_&&new Date(I,G?_.getMonth():k,j?F:_.getDate()),re=!!S&&new Date(I,G?S.getMonth():k,j?F:S.getDate());return _&&S?g(se,_)||p(re,S):_?g(se,_):S?p(re,S):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{selectedDates:_,focusDate:S,rangeDateTo:b,rangeDateFrom:O}=this.dp,k=_.length;if(this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),!k)return;let I=O,F=b;if(k===1&&S){let ae=p(S,_[0]);I=ae?_[0]:S,F=ae?S:_[0]}let j=h({"-in-range-":I&&F&&(G=this.date,se=I,re=F,p(G,se)&&g(G,re)),"-range-from-":I&&f(this.date,I,this.type),"-range-to-":F&&f(this.date,F,this.type)});var G,se,re;j&&this.$cell.classList.add(...j.split(" "))}_handleSelectedStatus(){let _=this.dp._checkIfDateIsSelected(this.date,this.type);_?this.select():!_&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){f(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function K(L,_,S){return(_=(function(b){var O=(function(k,I){if(typeof k!="object"||k===null)return k;var F=k[Symbol.toPrimitive];if(F!==void 0){var j=F.call(k,"string");if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)})(b);return typeof O=="symbol"?O:String(O)})(_))in L?Object.defineProperty(L,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):L[_]=S,L}let pe={[t.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${t.days}-"></div>`,[t.months]:`<div class="air-datepicker-body--cells -${t.months}-"></div>`,[t.years]:`<div class="air-datepicker-body--cells -${t.years}-"></div>`},Ce=".air-datepicker-cell";class De{constructor(_){let{dp:S,type:b,opts:O}=_;K(this,"handleClick",k=>{let I=k.target.closest(Ce).adpCell;if(I.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let F=this.dp._checkIfDateIsSelected(I.date,I.type);F?this.dp._handleAlreadySelectedDates(F,I.date):this.dp.selectDate(I.date)}),K(this,"handleDayNameClick",k=>{let I=k.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(I),datepicker:this.dp})}),K(this,"onChangeCurrentView",k=>{k!==this.type?this.hide():(this.show(),this.render())}),K(this,"onMouseOverCell",k=>{let I=E(k.target,Ce);this.dp.setFocusDate(!!I&&I.adpCell.date)}),K(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),K(this,"onClickBody",k=>{let{onClickDayName:I}=this.opts,F=k.target;F.closest(Ce)&&this.handleClick(k),I&&F.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(k)}),K(this,"onMouseDown",k=>{this.pressed=!0;let I=E(k.target,Ce),F=I&&I.adpCell;f(F.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),f(F.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),K(this,"onMouseMove",k=>{if(!this.pressed||!this.dp.isMinViewReached)return;k.preventDefault();let I=E(k.target,Ce),F=I&&I.adpCell,{selectedDates:j,rangeDateTo:G,rangeDateFrom:se}=this.dp;if(!F||F.isDisabled)return;let{date:re}=F;if(j.length===2){if(this.rangeFromFocused&&!p(re,G)){let{hours:ae,minutes:Lt}=u(se);re.setHours(ae),re.setMinutes(Lt),this.dp.rangeDateFrom=re,this.dp.replaceDate(se,re)}if(this.rangeToFocused&&!g(re,se)){let{hours:ae,minutes:Lt}=u(G);re.setHours(ae),re.setMinutes(Lt),this.dp.rangeDateTo=re,this.dp.replaceDate(G,re)}}}),K(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),K(this,"onChangeViewDate",(k,I)=>{if(!this.isVisible)return;let F=d(k),j=d(I);switch(this.dp.currentView){case t.days:if(f(k,I,t.months))return;break;case t.months:if(f(k,I,t.years))return;break;case t.years:if(F[0]===j[0]&&F[1]===j[1])return}this.render()}),K(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(k=>{this.$cells.appendChild(k.render())})}),this.dp=S,this.type=b,this.opts=O,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===t.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:_,dynamicRange:S}=this.opts;y(this.$el,"mouseover",this.onMouseOverCell),y(this.$el,"mouseout",this.onMouseOutCell),y(this.$el,"click",this.onClickBody),_&&S&&(y(this.$el,"mousedown",this.onMouseDown),y(this.$el,"mousemove",this.onMouseMove),y(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(t.eventChangeViewDate,this.onChangeViewDate),this.dp.on(t.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=s({className:`air-datepicker-body -${this.type}-`,innerHtml:pe[this.type]}),this.$names=i(".air-datepicker-body--day-names",this.$el),this.$cells=i(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,S="",b=this.dp.isWeekend,{onClickDayName:O}=this.opts,k=_,I=0;for(;I<7;){let F=k%7;S+=`<div class="${h("air-datepicker-body--day-name",{[t.cssClassWeekend]:b(F),"-clickable-":!!O})}" data-day-index='${F}'>${this.dp.locale.daysMin[F]}</div>`,I++,k++}return S}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(_){let{type:S,dp:b,opts:O}=this;return new H({type:S,dp:b,opts:O,date:_,body:this})}_generateCells(){De.getDatesFunction(this.type)(this.dp,_=>{this.cells.push(this._generateCell(_))})}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(_=>_.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(t.eventChangeViewDate,this.onChangeViewDate),this.dp.off(t.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(_,S){let{viewDate:b,opts:{fixedHeight:O},locale:{firstDay:k}}=_,I=a(b),{year:F,month:j}=u(b),G=new Date(F,j,1),se=new Date(F,j,I),re=G.getDay()-k,ae=6-se.getDay()+k;re=re<0?re+7:re,ae=ae>6?ae-7:ae;let Lt=(function(La,bb){let{year:ym,month:IL,date:TL}=u(La);return new Date(ym,IL,TL-bb)})(G,re),hr=I+re+ae,kn=Lt.getDate(),{year:Qi,month:Rd}=u(Lt),Ra=0;O&&(hr=42);let Fa=[];for(;Ra<hr;){let La=new Date(Qi,Rd,kn+Ra);S&&S(La),Fa.push(La),Ra++}return Fa}static getMonthsDates(_,S){let{year:b}=_.parsedViewDate,O=0,k=[];for(;O<12;){let I=new Date(b,O);k.push(I),S&&S(I),O++}return k}static getYearsDates(_,S){let b=d(_.viewDate),O=b[0]-1,k=b[1]+1,I=O,F=[];for(;I<=k;){let j=new Date(I,0);F.push(j),S&&S(j),I++}return F}static getDatesFunction(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.days;return{[t.days]:De.getDaysDates,[t.months]:De.getMonthsDates,[t.years]:De.getYearsDates}[_]}}function Ct(L,_,S){return(_=(function(b){var O=(function(k,I){if(typeof k!="object"||k===null)return k;var F=k[Symbol.toPrimitive];if(F!==void 0){var j=F.call(k,"string");if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)})(b);return typeof O=="symbol"?O:String(O)})(_))in L?Object.defineProperty(L,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):L[_]=S,L}class Hn{constructor(_){let{dp:S,opts:b}=_;Ct(this,"onClickNav",O=>{let k=E(O.target,".air-datepicker-nav--action");if(!k)return;let I=k.dataset.action;this.dp[I]()}),Ct(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),Ct(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),Ct(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),Ct(this,"update",()=>{let{prevHtml:O,nextHtml:k}=this.opts;this.$prev.innerHTML=O,this.$next.innerHTML=k,this._resetNavStatus(),this.render(),this.handleNavStatus()}),Ct(this,"renderDelay",()=>{setTimeout(this.render)}),Ct(this,"render",()=>{this.$title.innerHTML=this._getTitle(),(function(O,k){for(let I in k)k[I]?O.classList.add(I):O.classList.remove(I)})(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=S,this.opts=b,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=i(".air-datepicker-nav--title",this.$el),this.$prev=i('[data-action="prev"]',this.$el),this.$next=i('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(t.eventChangeViewDate,this.onChangeViewDate),this.dp.on(t.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(t.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(t.eventChangeTime,this.render))}destroy(){this.dp.off(t.eventChangeViewDate,this.onChangeViewDate),this.dp.off(t.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(t.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(t.eventChangeTime,this.render))}_createElement(){this.$el=s({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:_,opts:S}=this,b=S.navTitles[_.currentView];return typeof b=="function"?b(_):_.formatDate(_.viewDate,b)}handleNavStatus(){let{disableNavWhenOutOfRange:_}=this.opts,{minDate:S,maxDate:b}=this.dp;if(!S&&!b||!_)return;let{year:O,month:k}=this.dp.parsedViewDate,I=!!S&&u(S),F=!!b&&u(b);switch(this.dp.currentView){case t.days:S&&I.month>=k&&I.year>=O&&this._disableNav("prev"),b&&F.month<=k&&F.year<=O&&this._disableNav("next");break;case t.months:S&&I.year>=O&&this._disableNav("prev"),b&&F.year<=O&&this._disableNav("next");break;case t.years:{let j=d(this.dp.viewDate);S&&I.year>=j[0]&&this._disableNav("prev"),b&&F.year<=j[1]&&this._disableNav("next");break}}}_disableNav(_){i('[data-action="'+_+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(_){for(var S=arguments.length,b=new Array(S>1?S-1:0),O=1;O<S;O++)b[O-1]=arguments[O];_.length?_.forEach(k=>{k.classList.remove(...b)}):_.classList.remove(...b)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:_,nextHtml:S}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${_}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${S}</div>`}get isNavIsFunction(){let{navTitles:_}=this.opts;return Object.keys(_).find(S=>typeof _[S]=="function")}}var tt={today:{content:L=>L.locale.today,onClick:L=>L.setViewDate(new Date)},clear:{content:L=>L.locale.clear,onClick:L=>L.clear()}};class _t{constructor(_){let{dp:S,opts:b}=_;this.dp=S,this.opts=b,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=s({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:_}=this.opts;Array.isArray(_)||(_=[_]),_.forEach(S=>{let b=S;typeof S=="string"&&tt[S]&&(b=tt[S]);let O=this.createButton(b);b.onClick&&this.attachEventToButton(O,b.onClick),this.$el.appendChild(O)})}attachEventToButton(_,S){_.addEventListener("click",()=>{S(this.dp)})}createButton(_){let{content:S,className:b,tagName:O="button",attrs:k={}}=_;return s({tagName:O,innerHtml:`<span tabindex='-1'>${typeof S=="function"?S(this.dp):S}</span>`,className:h("air-datepicker-button",b),attrs:k})}render(){this.generateButtons()}}function dt(L,_,S){return(_=(function(b){var O=(function(k,I){if(typeof k!="object"||k===null)return k;var F=k[Symbol.toPrimitive];if(F!==void 0){var j=F.call(k,"string");if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)})(b);return typeof O=="symbol"?O:String(O)})(_))in L?Object.defineProperty(L,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):L[_]=S,L}class Pr{constructor(){let{opts:_,dp:S}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};dt(this,"toggleTimepickerIsActive",O=>{this.dp.timepickerIsActive=O}),dt(this,"onChangeSelectedDate",O=>{let{date:k,updateTime:I=!1}=O;k&&(this.setMinMaxTime(k),this.setCurrentTime(!!I&&k),this.addTimeToDate(k))}),dt(this,"onChangeLastSelectedDate",O=>{O&&(this.setTime(O),this.render())}),dt(this,"onChangeInputRange",O=>{let k=O.target;this[k.getAttribute("name")]=k.value,this.updateText(),this.dp.trigger(t.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),dt(this,"onMouseEnterLeave",O=>{let k=O.target.getAttribute("name"),I=this.$minutesText;k==="hours"&&(I=this.$hoursText),I.classList.toggle("-focus-")}),dt(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),dt(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=_,this.dp=S;let{timeFormat:b}=this.dp.locale;b&&(b.match(U("h"))||b.match(U("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(t.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(t.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let _="input";navigator.userAgent.match(/trident/gi)&&(_="change"),y(this.$ranges,_,this.onChangeInputRange),y(this.$ranges,"mouseenter",this.onMouseEnterLeave),y(this.$ranges,"mouseleave",this.onMouseEnterLeave),y(this.$ranges,"focus",this.onFocus),y(this.$ranges,"mousedown",this.onFocus),y(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=s({className:h("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(t.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(t.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:_,hours:S,displayHours:b,minutes:O,minHours:k,minMinutes:I,maxHours:F,maxMinutes:j,dayPeriod:G,opts:{hoursStep:se,minutesStep:re}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${l(b)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${l(O)}</span>   `+(_?`<span class='air-datepicker-time--current-ampm'>${G}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${S}" min="${k}" max="${F}" step="${se}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${O}" min="${I}" max="${j}" step="${re}"/>   </div></div>`}defineDOM(){let _=S=>i(S,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=_('[name="hours"]'),this.$minutes=_('[name="minutes"]'),this.$hoursText=_(".air-datepicker-time--current-hours"),this.$minutesText=_(".air-datepicker-time--current-minutes"),this.$ampm=_(".air-datepicker-time--current-ampm")}setTime(_){this.setMinMaxTime(_),this.setCurrentTime(_)}addTimeToDate(_){_&&(_.setHours(this.hours),_.setMinutes(this.minutes))}setMinMaxTime(_){if(this.setMinMaxTimeFromOptions(),_){let{minDate:S,maxDate:b}=this.dp;S&&f(_,S)&&this.setMinTimeFromMinDate(S),b&&f(_,b)&&this.setMaxTimeFromMaxDate(b)}}setCurrentTime(_){let{hours:S,minutes:b}=_?u(_):this;this.hours=M(S,this.minHours,this.maxHours),this.minutes=M(b,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:_,minMinutes:S,maxHours:b,maxMinutes:O}=this.opts;this.minHours=M(_,0,23),this.minMinutes=M(S,0,59),this.maxHours=M(b,0,23),this.maxMinutes=M(O,0,59)}setMinTimeFromMinDate(_){let{lastSelectedDate:S}=this.dp;this.minHours=_.getHours(),S&&S.getHours()>_.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=_.getMinutes()}setMaxTimeFromMaxDate(_){let{lastSelectedDate:S}=this.dp;this.maxHours=_.getHours(),S&&S.getHours()<_.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=_.getMinutes()}updateSliders(){o(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,o(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=l(this.displayHours),this.$minutesText.innerHTML=l(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(_){this._hours=_;let{hours:S,dayPeriod:b}=c(_);this.displayHours=this.ampm?S:_,this.dayPeriod=b}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function At(L,_,S){return(_=(function(b){var O=(function(k,I){if(typeof k!="object"||k===null)return k;var F=k[Symbol.toPrimitive];if(F!==void 0){var j=F.call(k,"string");if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)})(b);return typeof O=="symbol"?O:String(O)})(_))in L?Object.defineProperty(L,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):L[_]=S,L}class wo{constructor(_){let{dp:S,opts:b}=_;At(this,"pressedKeys",new Set),At(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],O=>O.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],O=>O.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],O=>O.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],O=>O.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],O=>O.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],O=>O.year-=10],[["Control","Shift","ArrowUp"],(O,k)=>k.up()]])),At(this,"handleHotKey",O=>{let k=this.hotKeys.get(O),I=u(this.getInitialFocusDate());k(I,this.dp);let{year:F,month:j,date:G}=I,se=a(new Date(F,j));se<G&&(G=se);let re=this.dp.getClampedDate(new Date(F,j,G));this.dp.setFocusDate(re,{viewDateTransition:!0})}),At(this,"isHotKeyPressed",()=>{let O=!1,k=this.pressedKeys.size,I=F=>this.pressedKeys.has(F);for(let[F]of this.hotKeys){if(O)break;if(Array.isArray(F[0]))F.forEach(j=>{O||k!==j.length||(O=j.every(I)&&F)});else{if(k!==F.length)continue;O=F.every(I)&&F}}return O}),At(this,"isArrow",O=>O>=37&&O<=40),At(this,"onKeyDown",O=>{if(!this.dp.visible&&!this.dp.treatAsInline)return;let{key:k,which:I}=O,{dp:F,dp:{focusDate:j},opts:G}=this;this.registerKey(k);let se=this.isHotKeyPressed();if(se)return O.preventDefault(),void this.handleHotKey(se);if(this.isArrow(I))return O.preventDefault(),void this.focusNextCell(k);if(k==="Enter"){if(F.currentView!==G.minView)return void F.down();if(j){let re=F._checkIfDateIsSelected(j);return void(re?F._handleAlreadySelectedDates(re,j):F.selectDate(j))}}k==="Escape"&&this.dp.hide()}),At(this,"onKeyUp",O=>{this.removeKey(O.key)}),this.dp=S,this.opts=b,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:_}=this.dp;_.addEventListener("keydown",this.onKeyDown),_.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:_}=this.dp;_.removeEventListener("keydown",this.onKeyDown),_.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:_,currentView:S,selectedDates:b,parsedViewDate:{year:O,month:k}}=this.dp,I=_||b[b.length-1];if(!I)switch(S){case t.days:I=new Date(O,k,new Date().getDate());break;case t.months:I=new Date(O,k,1);break;case t.years:I=new Date(O,0,1)}return I}focusNextCell(_){let S=this.getInitialFocusDate(),{currentView:b}=this.dp,{days:O,months:k,years:I}=t,F=u(S),j=F.year,G=F.month,se=F.date;switch(_){case"ArrowLeft":b===O&&(se-=1),b===k&&(G-=1),b===I&&(j-=1);break;case"ArrowUp":b===O&&(se-=7),b===k&&(G-=3),b===I&&(j-=4);break;case"ArrowRight":b===O&&(se+=1),b===k&&(G+=1),b===I&&(j+=1);break;case"ArrowDown":b===O&&(se+=7),b===k&&(G+=3),b===I&&(j+=4)}let re=this.dp.getClampedDate(new Date(j,G,se));this.dp.setFocusDate(re,{viewDateTransition:!0})}registerKey(_){this.pressedKeys.add(_)}removeKey(_){this.pressedKeys.delete(_)}}let Ec={on(L,_){this.__events||(this.__events={}),this.__events[L]?this.__events[L].push(_):this.__events[L]=[_]},off(L,_){this.__events&&this.__events[L]&&(this.__events[L]=this.__events[L].filter(S=>S!==_))},removeAllEvents(){this.__events={}},trigger(L){for(var _=arguments.length,S=new Array(_>1?_-1:0),b=1;b<_;b++)S[b-1]=arguments[b];this.__events&&this.__events[L]&&this.__events[L].forEach(O=>{O(...S)})}};function Ie(L,_,S){return(_=(function(b){var O=(function(k,I){if(typeof k!="object"||k===null)return k;var F=k[Symbol.toPrimitive];if(F!==void 0){var j=F.call(k,"string");if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)})(b);return typeof O=="symbol"?O:String(O)})(_))in L?Object.defineProperty(L,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):L[_]=S,L}let ei="",mn="",Vs=!1;class gn{static buildGlobalContainer(_){Vs=!0,ei=s({className:_,id:_}),i("body").appendChild(ei)}constructor(_,S){var b=this;if(Ie(this,"viewIndexes",[t.days,t.months,t.years]),Ie(this,"next",()=>{let{year:I,month:F}=this.parsedViewDate;switch(this.currentView){case t.days:this.setViewDate(new Date(I,F+1,1));break;case t.months:this.setViewDate(new Date(I+1,F,1));break;case t.years:this.setViewDate(new Date(I+10,0,1))}}),Ie(this,"prev",()=>{let{year:I,month:F}=this.parsedViewDate;switch(this.currentView){case t.days:this.setViewDate(new Date(I,F-1,1));break;case t.months:this.setViewDate(new Date(I-1,F,1));break;case t.years:this.setViewDate(new Date(I-10,0,1))}}),Ie(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),Ie(this,"setPosition",function(I){let F=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(I=I||b.opts.position)=="function")return void(b.customHide=I({$datepicker:b.$datepicker,$target:b.$el,$pointer:b.$pointer,isViewChange:F,done:b._finishHide}));let j,G,{isMobile:se}=b.opts,re=b.$el.getBoundingClientRect(),ae=b.$el.getBoundingClientRect(),Lt=b.$datepicker.offsetParent,hr=b.$el.offsetParent,kn=b.$datepicker.getBoundingClientRect(),Qi=I.split(" "),Rd=window.scrollY,Ra=window.scrollX,Fa=b.opts.offset,La=Qi[0],bb=Qi[1];if(se)b.$datepicker.style.cssText="left: 50%; top: 50%";else{if(Lt===hr&&Lt!==document.body&&(ae={top:b.$el.offsetTop,left:b.$el.offsetLeft,width:re.width,height:b.$el.offsetHeight},Rd=0,Ra=0),Lt!==hr&&Lt!==document.body){let ym=Lt.getBoundingClientRect();ae={top:re.top-ym.top,left:re.left-ym.left,width:re.width,height:re.height},Rd=0,Ra=0}switch(La){case"top":j=ae.top-kn.height-Fa;break;case"right":G=ae.left+ae.width+Fa;break;case"bottom":j=ae.top+ae.height+Fa;break;case"left":G=ae.left-kn.width-Fa}switch(bb){case"top":j=ae.top;break;case"right":G=ae.left+ae.width-kn.width;break;case"bottom":j=ae.top+ae.height-kn.height;break;case"left":G=ae.left;break;case"center":/left|right/.test(La)?j=ae.top+ae.height/2-kn.height/2:G=ae.left+ae.width/2-kn.width/2}b.$datepicker.style.cssText=`left: ${G+Ra}px; top: ${j+Rd}px`}}),Ie(this,"_setInputValue",()=>{let{opts:I,$altField:F,locale:{dateFormat:j}}=this,{altFieldDateFormat:G,altField:se}=I;se&&F&&(F.value=this._getInputValue(G)),this.$el.value=this._getInputValue(j),this.$el.dispatchEvent(new Event("change"))}),Ie(this,"_getInputValue",I=>{let{selectedDates:F,opts:j}=this,{multipleDates:G,multipleDatesSeparator:se}=j;if(!F.length)return"";let re=typeof I=="function",ae=re?I(G?F:F[0]):F.map(Lt=>this.formatDate(Lt,I));return ae=re?ae:ae.join(se),ae}),Ie(this,"_checkIfDateIsSelected",function(I){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.days,j=!1;return b.selectedDates.some(G=>{let se=f(I,G,F);return j=se&&G,se}),j}),Ie(this,"_scheduleCallAfterTransition",I=>{this._cancelScheduledCall(),I&&I(!1),this._onTransitionEnd=()=>{I&&I(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),Ie(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),Ie(this,"setViewDate",I=>{if(!((I=R(I))instanceof Date)||f(I,this.viewDate))return;let F=this.viewDate;this.viewDate=I;let{onChangeViewDate:j}=this.opts;if(j){let{month:G,year:se}=this.parsedViewDate;j({month:G,year:se,decade:this.curDecade})}this.trigger(t.eventChangeViewDate,I,F)}),Ie(this,"setFocusDate",function(I){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!I||(I=R(I))instanceof Date)&&(b.focusDate=I,b.trigger(t.eventChangeFocusDate,I,F))}),Ie(this,"setCurrentView",function(I){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b.viewIndexes.includes(I)){if(b.currentView=I,b.elIsInput&&b.visible&&b.setPosition(void 0,!0),b.trigger(t.eventChangeCurrentView,I),!b.views[I]){let j=b.views[I]=new De({dp:b,opts:b.opts,type:I});b.shouldUpdateDOM&&b.$content.appendChild(j.$el)}b.opts.onChangeView&&!F.silent&&b.opts.onChangeView(I)}}),Ie(this,"_updateLastSelectedDate",I=>{this.lastSelectedDate=I,this.trigger(t.eventChangeLastSelectedDate,I)}),Ie(this,"destroy",()=>{if(this.isDestroyed)return;let{showEvent:I,isMobile:F}=this.opts,j=this.$datepicker.parentNode;j&&j.removeChild(this.$datepicker),this.$el.removeEventListener(I,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),F&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0}),Ie(this,"update",function(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=T({},b.opts),{silent:G}=F;T(b.opts,I);let{timepicker:se,buttons:re,range:ae,selectedDates:Lt,isMobile:hr}=b.opts,kn=b.visible||b.treatAsInline;b._createMinMaxDates(),b._limitViewDateByMaxMinDates(),b._handleLocale(),Lt&&(b.selectedDates=[],b.selectDate(Lt,{silent:G})),I.view&&b.setCurrentView(I.view,{silent:G}),b._setInputValue(),j.range&&!ae?(b.rangeDateTo=!1,b.rangeDateFrom=!1):!j.range&&ae&&b.selectedDates.length&&(b.rangeDateFrom=b.selectedDates[0],b.rangeDateTo=b.selectedDates[1]),j.timepicker&&!se?(kn&&b.timepicker.destroy(),b.timepicker=!1,b.$timepicker.parentNode.removeChild(b.$timepicker)):!j.timepicker&&se&&b._addTimepicker(),!j.buttons&&re?b._addButtons():j.buttons&&!re?(b.buttons.destroy(),b.$buttons.parentNode.removeChild(b.$buttons)):kn&&j.buttons&&re&&b.buttons.clearHtml().render(),!j.isMobile&&hr?(b.treatAsInline||mn||b._createMobileOverlay(),b._addMobileAttributes(),b.visible&&b._showMobileOverlay()):j.isMobile&&!hr&&(b._removeMobileAttributes(),b.visible&&(mn.classList.remove("-active-"),typeof b.opts.position!="function"&&b.setPosition())),kn&&(b.nav.update(),b.views[b.currentView].render(),b.currentView===t.days&&b.views[b.currentView].renderDayNames())}),Ie(this,"disableDate",(I,F)=>{(Array.isArray(I)?I:[I]).forEach(j=>{let G=R(j);if(!G)return;let se=F?"delete":"add";this.disabledDates[se](this.formatDate(G,"yyyy-MM-dd"));let re=this.getCell(G,this.currentViewSingular);re&&re.adpCell.render()},[])}),Ie(this,"enableDate",I=>{this.disableDate(I,!0)}),Ie(this,"isDateDisabled",I=>{let F=R(I);return this.disabledDates.has(this.formatDate(F,"yyyy-MM-dd"))}),Ie(this,"isOtherMonth",I=>{let{month:F}=u(I);return F!==this.parsedViewDate.month}),Ie(this,"isOtherYear",I=>{let{year:F}=u(I);return F!==this.parsedViewDate.year}),Ie(this,"isOtherDecade",I=>{let{year:F}=u(I),[j,G]=d(this.viewDate);return F<j||F>G}),Ie(this,"_onChangeSelectedDate",I=>{let{silent:F}=I;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!F&&this._triggerOnSelect()})}),Ie(this,"_onChangeFocusedDate",function(I){let{viewDateTransition:F}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!I)return;let j=!1;F&&(j=b.isOtherMonth(I)||b.isOtherYear(I)||b.isOtherDecade(I)),j&&b.setViewDate(I),b.opts.onFocus&&b.opts.onFocus({datepicker:b,date:I})}),Ie(this,"_onChangeTime",I=>{let{hours:F,minutes:j}=I,G=new Date,{lastSelectedDate:se,opts:{onSelect:re}}=this,ae=se;se||(ae=G);let Lt=this.getCell(ae,this.currentViewSingular),hr=Lt&&Lt.adpCell;hr&&hr.isDisabled||(ae.setHours(F),ae.setMinutes(j),se?(this._setInputValue(),re&&this._triggerOnSelect()):this.selectDate(ae))}),Ie(this,"_onFocus",I=>{this.visible||this.show()}),Ie(this,"_onBlur",I=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),Ie(this,"_onMouseDown",I=>{this.inFocus=!0}),Ie(this,"_onMouseUp",I=>{this.inFocus=!1,this.$el.focus()}),Ie(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),Ie(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),Ie(this,"getViewDates",function(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.days;return De.getDatesFunction(I)(b)}),Ie(this,"isWeekend",I=>this.opts.weekends.includes(I)),Ie(this,"getClampedDate",I=>{let{minDate:F,maxDate:j}=this,G=I;return j&&p(I,j)?G=j:F&&g(I,F)&&(G=F),G}),this.$el=i(_),!this.$el)return;this.$datepicker=s({className:"air-datepicker"}),this.opts=T({},r,S),this.$customContainer=!!this.opts.container&&i(this.opts.container),this.$altField=i(this.opts.altField||!1);let{view:O,startDate:k}=this.opts;k||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=R(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=O,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:_,treatAsInline:S,opts:{inline:b,isMobile:O,selectedDates:k,keyboardNav:I,onlyTimepicker:F}}=this,j=i("body");(!Vs||Vs&&ei&&!j.contains(ei))&&!b&&this.elIsInput&&!this.$customContainer&&gn.buildGlobalContainer(gn.defaultGlobalContainerId),!O||mn||S||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(b||this._bindEvents(),I&&!F&&(this.keyboardNav=new wo({dp:this,opts:_}))),k&&this.selectDate(k,{silent:!0}),this.opts.visible&&!S&&this.show(),O&&!S&&this.$el.setAttribute("readonly",!0),S&&this._createComponents()}_createMobileOverlay(){mn=s({className:"air-datepicker-overlay"}),ei.appendChild(mn)}_createComponents(){let{opts:_,treatAsInline:S,opts:{inline:b,buttons:O,timepicker:k,position:I,classes:F,onlyTimepicker:j,isMobile:G}}=this;this._buildBaseHtml(),this.elIsInput&&(b||this._setPositionClasses(I)),!b&&this.elIsInput||this.$datepicker.classList.add("-inline-"),F&&this.$datepicker.classList.add(...F.split(" ")),j&&this.$datepicker.classList.add("-only-timepicker-"),G&&!S&&this._addMobileAttributes(),this.views[this.currentView]=new De({dp:this,type:this.currentView,opts:_}),this.nav=new Hn({dp:this,opts:_}),k&&this._addTimepicker(),O&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let _ in this.views)this.views[_].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){mn.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){mn.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:_,maxDate:S}=this.opts;this.minDate=!!_&&R(_),this.maxDate=!!S&&R(S)}_addTimepicker(){this.$timepicker=s({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new Pr({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=s({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new _t({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(t.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(t.eventChangeFocusDate,this._onChangeFocusedDate),this.on(t.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:_}=this.opts;var S,b;this.elIsInput?_?(S=this.$datepicker,(b=this.$el).parentNode.insertBefore(S,b.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=i(".air-datepicker--content",this.$datepicker),this.$pointer=i(".air-datepicker--pointer",this.$datepicker),this.$nav=i(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:_,dateFormat:S,firstDay:b,timepicker:O,onlyTimepicker:k,timeFormat:I,dateTimeSeparator:F}=this.opts;var j;this.locale=(j=_,JSON.parse(JSON.stringify(j))),S&&(this.locale.dateFormat=S),I!==void 0&&I!==""&&(this.locale.timeFormat=I);let{timeFormat:G}=this.locale;if(b!==""&&(this.locale.firstDay=b),O&&typeof S!="function"){let se=G?F:"";this.locale.dateFormat=[this.locale.dateFormat,G||""].join(se)}k&&typeof S!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(_){if(typeof _=="function")return void this.$datepicker.classList.add("-custom-position-");let S=(_=_.split(" "))[0],b=`air-datepicker -${S}-${_[1]}- -from-${S}-`;this.$datepicker.classList.add(...b.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:_,minDate:S,maxDate:b}=this;b&&p(_,b)&&this.setViewDate(b),S&&g(_,S)&&this.setViewDate(S)}formatDate(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,S=arguments.length>1?arguments[1]:void 0;if(_=R(_),!(_ instanceof Date))return;let b=S,O=this.locale,k=u(_),I=k.dayPeriod,F=d(_),j=gn.replacer,G={T:_.getTime(),m:k.minutes,mm:k.fullMinutes,h:k.hours12,hh:k.fullHours12,H:k.hours,HH:k.fullHours,aa:I,AA:I.toUpperCase(),E:O.daysShort[k.day],EEEE:O.days[k.day],d:k.date,dd:k.fullDate,M:k.month+1,MM:k.fullMonth,MMM:O.monthsShort[k.month],MMMM:O.months[k.month],yy:k.year.toString().slice(-2),yyyy:k.year,yyyy1:F[0],yyyy2:F[1]};for(let[se,re]of Object.entries(G))b=j(b,U(se),re);return b}down(_){this._handleUpDownActions(_,"down")}up(_){this._handleUpDownActions(_,"up")}selectDate(_){let S,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:O,parsedViewDate:k,selectedDates:I}=this,{updateTime:F,silent:j}=b,{moveToOtherMonthsOnSelect:G,moveToOtherYearsOnSelect:se,multipleDates:re,range:ae,autoClose:Lt,onBeforeSelect:hr}=this.opts,kn=I.length;if(Array.isArray(_))return _.forEach(Qi=>{this.selectDate(Qi,b)}),new Promise(Qi=>{setTimeout(Qi)});if((_=R(_))instanceof Date){if(hr&&!j&&!hr({date:_,datepicker:this}))return Promise.resolve();if(O===t.days&&_.getMonth()!==k.month&&G&&(S=new Date(_.getFullYear(),_.getMonth(),1)),O===t.years&&_.getFullYear()!==k.year&&se&&(S=new Date(_.getFullYear(),0,1)),S&&this.setViewDate(S),re&&!ae){if(kn===re)return;this._checkIfDateIsSelected(_)||I.push(_)}else if(ae)switch(kn){case 1:I.push(_),this.rangeDateTo||(this.rangeDateTo=_),p(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=_),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[_],this.rangeDateFrom=_,this.rangeDateTo="";break;default:this.selectedDates=[_],this.rangeDateFrom=_}else this.selectedDates=[_];return this.trigger(t.eventChangeSelectedDate,{action:t.actionSelectDate,silent:b?.silent,date:_,updateTime:F}),this._updateLastSelectedDate(_),Lt&&!this.timepickerIsActive&&this.visible&&(re||ae?ae&&kn===1&&this.hide():this.hide()),new Promise(Qi=>{setTimeout(Qi)})}}unselectDate(_){let S=this.selectedDates,b=this;if((_=R(_))instanceof Date)return S.some((O,k)=>{if(f(O,_))return S.splice(k,1),b.selectedDates.length?(b.rangeDateTo="",b.rangeDateFrom=S[0],b._updateLastSelectedDate(b.selectedDates[b.selectedDates.length-1])):(b.rangeDateFrom="",b.rangeDateTo="",b._updateLastSelectedDate(!1)),this.trigger(t.eventChangeSelectedDate,{action:t.actionUnselectDate,date:_}),!0})}replaceDate(_,S){let b=this.selectedDates.find(k=>f(k,_,this.currentView)),O=this.selectedDates.indexOf(b);O<0||f(this.selectedDates[O],S,this.currentView)||(this.selectedDates[O]=S,this.trigger(t.eventChangeSelectedDate,{action:t.actionSelectDate,date:S,updateTime:!0}),this._updateLastSelectedDate(S))}clear(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(t.eventChangeSelectedDate,{action:t.actionUnselectDate,silent:_.silent}),new Promise(S=>{setTimeout(S)})}show(){let{onShow:_,isMobile:S}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,_&&this._scheduleCallAfterTransition(_),S&&this._showMobileOverlay()}hide(){let{onHide:_,isMobile:S}=this.opts,b=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(O=>{!this.customHide&&(O&&b||!O&&!b)&&this._finishHide(),_&&_(O)}),S&&mn.classList.remove("-active-")}_triggerOnSelect(){let _=[],S=[],{selectedDates:b,locale:O,opts:{onSelect:k,multipleDates:I,range:F}}=this,j=I||F,G=typeof O.dateFormat=="function";b.length&&(_=b.map(v),S=G?I?O.dateFormat(_):_.map(se=>O.dateFormat(se)):_.map(se=>this.formatDate(se,O.dateFormat))),k({date:j?_:_[0],formattedDate:j?S:S[0],datepicker:this})}_handleAlreadySelectedDates(_,S){let{selectedDates:b,rangeDateFrom:O,rangeDateTo:k}=this,{range:I,toggleSelected:F}=this.opts,j=b.length,G=typeof F=="function"?F({datepicker:this,date:S}):F,se=!!(I&&j===1&&_),re=se?v(S):S;I&&!G&&(j!==2&&this.selectDate(re),j===2&&f(O,k))||(G?this.unselectDate(re):this._updateLastSelectedDate(se?re:_))}_handleUpDownActions(_,S){if(!((_=R(_||this.focusDate||this.viewDate))instanceof Date))return;let b=S==="up"?this.viewIndex+1:this.viewIndex-1;b>2&&(b=2),b<0&&(b=0),this.setViewDate(new Date(_.getFullYear(),_.getMonth(),1)),this.setCurrentView(this.viewIndexes[b])}getCell(_){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.day;if(!((_=R(_))instanceof Date))return;let{year:b,month:O,date:k}=u(_),I=`[data-year="${b}"]`,F=`[data-month="${O}"]`,j={[t.day]:`${I}${F}[data-date="${k}"]`,[t.month]:`${I}${F}`,[t.year]:`${I}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(j[S]):void 0}_showMobileOverlay(){mn.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((_,S)=>parseFloat(S)+_,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return u(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return d(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===t.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===t.days}get $container(){return this.$customContainer||ei}static replacer(_,S,b){return _.replace(S,function(O,k,I,F){return k+b+F})}}var VI;return Ie(gn,"defaults",r),Ie(gn,"version","3.6.0"),Ie(gn,"defaultGlobalContainerId","air-datepicker-global-container"),VI=gn.prototype,Object.assign(VI,Ec),e.default})()})});var zI=new RegExp(`(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=(["']?)([^\\]"']*)\\5)?\\])|(\\))|(\\s*,\\s*)`,"g"),$c=class n{element=null;classNames=[];attrs=[];notSelectors=[];static parse(e){let t=[],r=(u,c)=>{c.notSelectors.length>0&&!c.element&&c.classNames.length==0&&c.attrs.length==0&&(c.element="*"),u.push(c)},i=new n,s,o=i,a=!1;for(zI.lastIndex=0;s=zI.exec(e);){if(s[1]){if(a)throw new Error("Nesting :not in a selector is not allowed");a=!0,o=new n,i.notSelectors.push(o)}let u=s[2];if(u){let l=s[3];l==="#"?o.addAttribute("id",u.slice(1)):l==="."?o.addClassName(u.slice(1)):o.setElement(u)}let c=s[4];if(c&&o.addAttribute(o.unescapeAttribute(c),s[6]),s[7]&&(a=!1,o=i),s[8]){if(a)throw new Error("Multiple selectors in :not are not supported");r(t,i),i=o=new n}}return r(t,i),t}unescapeAttribute(e){let t="",r=!1;for(let i=0;i<e.length;i++){let s=e.charAt(i);if(s==="\\"){r=!0;continue}if(s==="$"&&!r)throw new Error(`Error in attribute selector "${e}". Unescaped "$" is not supported. Please escape with "\\$".`);r=!1,t+=s}return t}escapeAttribute(e){return e.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}isElementSelector(){return this.hasElementSelector()&&this.classNames.length==0&&this.attrs.length==0&&this.notSelectors.length===0}hasElementSelector(){return!!this.element}setElement(e=null){this.element=e}getAttrs(){let e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}addAttribute(e,t=""){this.attrs.push(e,t&&t.toLowerCase()||"")}addClassName(e){this.classNames.push(e.toLowerCase())}toString(){let e=this.element||"";if(this.classNames&&this.classNames.forEach(t=>e+=`.${t}`),this.attrs)for(let t=0;t<this.attrs.length;t+=2){let r=this.escapeAttribute(this.attrs[t]),i=this.attrs[t+1];e+=`[${r}${i?"="+i:""}]`}return this.notSelectors.forEach(t=>e+=`:not(${t})`),e}},$m=class n{static createNotMatcher(e){let t=new n;return t.addSelectables(e,null),t}_elementMap=new Map;_elementPartialMap=new Map;_classMap=new Map;_classPartialMap=new Map;_attrValueMap=new Map;_attrValuePartialMap=new Map;_listContexts=[];addSelectables(e,t){let r=null;e.length>1&&(r=new Hb(e),this._listContexts.push(r));for(let i=0;i<e.length;i++)this._addSelectable(e[i],t,r)}_addSelectable(e,t,r){let i=this,s=e.element,o=e.classNames,a=e.attrs,u=new zb(e,t,r);if(s&&(a.length===0&&o.length===0?this._addTerminal(i._elementMap,s,u):i=this._addPartial(i._elementPartialMap,s)),o)for(let c=0;c<o.length;c++){let l=a.length===0&&c===o.length-1,d=o[c];l?this._addTerminal(i._classMap,d,u):i=this._addPartial(i._classPartialMap,d)}if(a)for(let c=0;c<a.length;c+=2){let l=c===a.length-2,d=a[c],h=a[c+1];if(l){let f=i._attrValueMap,p=f.get(d);p||(p=new Map,f.set(d,p)),this._addTerminal(p,h,u)}else{let f=i._attrValuePartialMap,p=f.get(d);p||(p=new Map,f.set(d,p)),i=this._addPartial(p,h)}}}_addTerminal(e,t,r){let i=e.get(t);i||(i=[],e.set(t,i)),i.push(r)}_addPartial(e,t){let r=e.get(t);return r||(r=new n,e.set(t,r)),r}match(e,t){let r=!1,i=e.element,s=e.classNames,o=e.attrs;for(let a=0;a<this._listContexts.length;a++)this._listContexts[a].alreadyMatched=!1;if(r=this._matchTerminal(this._elementMap,i,e,t)||r,r=this._matchPartial(this._elementPartialMap,i,e,t)||r,s)for(let a=0;a<s.length;a++){let u=s[a];r=this._matchTerminal(this._classMap,u,e,t)||r,r=this._matchPartial(this._classPartialMap,u,e,t)||r}if(o)for(let a=0;a<o.length;a+=2){let u=o[a],c=o[a+1],l=this._attrValueMap.get(u);c&&(r=this._matchTerminal(l,"",e,t)||r),r=this._matchTerminal(l,c,e,t)||r;let d=this._attrValuePartialMap.get(u);c&&(r=this._matchPartial(d,"",e,t)||r),r=this._matchPartial(d,c,e,t)||r}return r}_matchTerminal(e,t,r,i){if(!e||typeof t!="string")return!1;let s=e.get(t)||[],o=e.get("*");if(o&&(s=s.concat(o)),s.length===0)return!1;let a,u=!1;for(let c=0;c<s.length;c++)a=s[c],u=a.finalize(r,i)||u;return u}_matchPartial(e,t,r,i){if(!e||typeof t!="string")return!1;let s=e.get(t);return s?s.match(r,i):!1}},Hb=class{selectors;alreadyMatched=!1;constructor(e){this.selectors=e}},zb=class{selector;cbContext;listContext;notSelectors;constructor(e,t,r){this.selector=e,this.cbContext=t,this.listContext=r,this.notSelectors=e.notSelectors}finalize(e,t){let r=!0;return this.notSelectors.length>0&&(!this.listContext||!this.listContext.alreadyMatched)&&(r=!$m.createNotMatcher(this.notSelectors).match(e,null)),r&&t&&(!this.listContext||!this.listContext.alreadyMatched)&&(this.listContext&&(this.listContext.alreadyMatched=!0),t(this.selector,this.cbContext)),r}},Vm=class{registry;constructor(e){this.registry=e}match(e){return this.registry.has(e)?this.registry.get(e):[]}};var Va=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Va||{}),mE=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(mE||{}),zd=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(zd||{}),qI={name:"custom-elements"},WI={name:"no-errors-schema"};var it=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n[n.ATTRIBUTE_NO_BINDING=6]="ATTRIBUTE_NO_BINDING",n})(it||{});function $L(n){let e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return[n.element&&n.element!=="*"?n.element:"",...n.attrs,...e]}function VL(n){let e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return n.element?[5,n.element,...n.attrs,...e]:n.attrs.length?[3,...n.attrs,...e]:n.classNames&&n.classNames.length?[9,...n.classNames]:[]}function jL(n){let e=$L(n),t=n.notSelectors&&n.notSelectors.length?n.notSelectors.map(r=>VL(r)):[];return e.concat(...t)}function gE(n){return n?$c.parse(n).map(jL):[]}var js=(function(n){return n[n.Directive=0]="Directive",n[n.Component=1]="Component",n[n.Injectable=2]="Injectable",n[n.Pipe=3]="Pipe",n[n.NgModule=4]="NgModule",n})(js||{});var jm;function UL(n){return WL(qL(n.nodes).join("")+`[${n.meaning}]`)}function HL(n){return n.id||FA(n)}function FA(n){let e=new qb,t=n.nodes.map(r=>r.visit(e,null));return LA(t.join(""),n.meaning)}var Um=class{visitText(e,t){return e.value}visitContainer(e,t){return`[${e.children.map(r=>r.visit(this)).join(", ")}]`}visitIcu(e,t){let r=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expression}, ${e.type}, ${r.join(", ")}}`}visitTagPlaceholder(e,t){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(r=>r.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,t){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,t){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}visitBlockPlaceholder(e,t){return`<ph block name="${e.startName}">${e.children.map(r=>r.visit(this)).join(", ")}</ph name="${e.closeName}">`}},zL=new Um;function qL(n){return n.map(e=>e.visit(zL,null))}var qb=class extends Um{visitIcu(e){let t=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.type}, ${t.join(", ")}}`}};function WL(n){jm??=new TextEncoder;let e=[...jm.encode(n)],t=KL(e,vE.Big),r=e.length*8,i=new Uint32Array(80),s=1732584193,o=4023233417,a=2562383102,u=271733878,c=3285377520;t[r>>5]|=128<<24-r%32,t[(r+64>>9<<4)+15]=r;for(let l=0;l<t.length;l+=16){let d=s,h=o,f=a,p=u,g=c;for(let v=0;v<80;v++){v<16?i[v]=t[l+v]:i[v]=Eb(i[v-3]^i[v-8]^i[v-14]^i[v-16],1);let y=GL(v,o,a,u),E=y[0],M=y[1],T=[Eb(s,5),E,c,M,i[v]].reduce(Cc);c=u,u=a,a=Eb(o,30),o=s,s=T}s=Cc(s,d),o=Cc(o,h),a=Cc(a,f),u=Cc(u,p),c=Cc(c,g)}return Fd(s)+Fd(o)+Fd(a)+Fd(u)+Fd(c)}function Fd(n){return(n>>>0).toString(16).padStart(8,"0")}function GL(n,e,t,r){return n<20?[e&t|~e&r,1518500249]:n<40?[e^t^r,1859775393]:n<60?[e&t|e&r|t&r,2400959708]:[e^t^r,3395469782]}function GI(n){jm??=new TextEncoder;let e=jm.encode(n),t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=YI(t,e.length,0),i=YI(t,e.length,102072);return r==0&&(i==0||i==1)&&(r=r^319790063,i=i^-1801410264),BigInt.asUintN(32,BigInt(r))<<BigInt(32)|BigInt.asUintN(32,BigInt(i))}function LA(n,e=""){let t=GI(n);return e&&(t=BigInt.asUintN(64,t<<BigInt(1))|t>>BigInt(63)&BigInt(1),t+=GI(e)),BigInt.asUintN(63,t).toString()}function YI(n,e,t){let r=2654435769,i=2654435769,s=0,o=e-12;for(;s<=o;s+=12){r+=n.getUint32(s,!0),i+=n.getUint32(s+4,!0),t+=n.getUint32(s+8,!0);let u=KI(r,i,t);r=u[0],i=u[1],t=u[2]}let a=e-s;return t+=e,a>=4?(r+=n.getUint32(s,!0),s+=4,a>=8?(i+=n.getUint32(s,!0),s+=4,a>=9&&(t+=n.getUint8(s++)<<8),a>=10&&(t+=n.getUint8(s++)<<16),a===11&&(t+=n.getUint8(s++)<<24)):(a>=5&&(i+=n.getUint8(s++)),a>=6&&(i+=n.getUint8(s++)<<8),a===7&&(i+=n.getUint8(s++)<<16))):(a>=1&&(r+=n.getUint8(s++)),a>=2&&(r+=n.getUint8(s++)<<8),a===3&&(r+=n.getUint8(s++)<<16)),KI(r,i,t)[2]}function KI(n,e,t){return n-=e,n-=t,n^=t>>>13,e-=t,e-=n,e^=n<<8,t-=n,t-=e,t^=e>>>13,n-=e,n-=t,n^=t>>>12,e-=t,e-=n,e^=n<<16,t-=n,t-=e,t^=e>>>5,n-=e,n-=t,n^=t>>>3,e-=t,e-=n,e^=n<<10,t-=n,t-=e,t^=e>>>15,[n,e,t]}var vE=(function(n){return n[n.Little=0]="Little",n[n.Big=1]="Big",n})(vE||{});function Cc(n,e){return YL(n,e)[1]}function YL(n,e){let t=(n&65535)+(e&65535),r=(n>>>16)+(e>>>16)+(t>>>16);return[r>>>16,r<<16|t&65535]}function Eb(n,e){return n<<e|n>>>32-e}function KL(n,e){let t=n.length+3>>>2,r=[];for(let i=0;i<t;i++)r[i]=QL(n,i*4,e);return r}function QI(n,e){return e>=n.length?0:n[e]}function QL(n,e,t){let r=0;if(t===vE.Big)for(let i=0;i<4;i++)r+=QI(n,e+i)<<24-8*i;else for(let i=0;i<4;i++)r+=QI(n,e+i)<<8*i;return r}var BA=(function(n){return n[n.None=0]="None",n[n.Const=1]="Const",n})(BA||{}),Hm=class{modifiers;constructor(e=BA.None){this.modifiers=e}hasModifier(e){return(this.modifiers&e)!==0}},Qs=(function(n){return n[n.Dynamic=0]="Dynamic",n[n.Bool=1]="Bool",n[n.String=2]="String",n[n.Int=3]="Int",n[n.Number=4]="Number",n[n.Function=5]="Function",n[n.Inferred=6]="Inferred",n[n.None=7]="None",n})(Qs||{}),is=class extends Hm{name;constructor(e,t){super(t),this.name=e}visitType(e,t){return e.visitBuiltinType(this,t)}},ai=class extends Hm{value;typeParams;constructor(e,t,r=null){super(t),this.value=e,this.typeParams=r}visitType(e,t){return e.visitExpressionType(this,t)}};var Xh=new is(Qs.Dynamic),Lr=new is(Qs.Inferred),XL=new is(Qs.Bool),hse=new is(Qs.Int),yE=new is(Qs.Number),_E=new is(Qs.String),fse=new is(Qs.Function),ss=new is(Qs.None),nh=(function(n){return n[n.Minus=0]="Minus",n[n.Plus=1]="Plus",n})(nh||{}),z=(function(n){return n[n.Equals=0]="Equals",n[n.NotEquals=1]="NotEquals",n[n.Assign=2]="Assign",n[n.Identical=3]="Identical",n[n.NotIdentical=4]="NotIdentical",n[n.Minus=5]="Minus",n[n.Plus=6]="Plus",n[n.Divide=7]="Divide",n[n.Multiply=8]="Multiply",n[n.Modulo=9]="Modulo",n[n.And=10]="And",n[n.Or=11]="Or",n[n.BitwiseOr=12]="BitwiseOr",n[n.BitwiseAnd=13]="BitwiseAnd",n[n.Lower=14]="Lower",n[n.LowerEquals=15]="LowerEquals",n[n.Bigger=16]="Bigger",n[n.BiggerEquals=17]="BiggerEquals",n[n.NullishCoalesce=18]="NullishCoalesce",n[n.Exponentiation=19]="Exponentiation",n[n.In=20]="In",n[n.AdditionAssignment=21]="AdditionAssignment",n[n.SubtractionAssignment=22]="SubtractionAssignment",n[n.MultiplicationAssignment=23]="MultiplicationAssignment",n[n.DivisionAssignment=24]="DivisionAssignment",n[n.RemainderAssignment=25]="RemainderAssignment",n[n.ExponentiationAssignment=26]="ExponentiationAssignment",n[n.AndAssignment=27]="AndAssignment",n[n.OrAssignment=28]="OrAssignment",n[n.NullishCoalesceAssignment=29]="NullishCoalesceAssignment",n})(z||{});function ZL(n,e){return n==null||e==null?n==e:n.isEquivalent(e)}function $A(n,e,t){let r=n.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function jr(n,e){return $A(n,e,(t,r)=>t.isEquivalent(r))}var Je=class{type;sourceSpan;constructor(e,t){this.type=e||null,this.sourceSpan=t||null}prop(e,t){return new Ur(this,e,null,t)}key(e,t,r){return new Gs(this,e,t,r)}callFn(e,t,r){return new _r(this,e,null,t,r)}instantiate(e,t,r){return new ih(this,e,t,r)}conditional(e,t=null,r){return new os(this,e,t,null,r)}equals(e,t){return new Fe(z.Equals,this,e,null,t)}notEquals(e,t){return new Fe(z.NotEquals,this,e,null,t)}identical(e,t){return new Fe(z.Identical,this,e,null,t)}notIdentical(e,t){return new Fe(z.NotIdentical,this,e,null,t)}minus(e,t){return new Fe(z.Minus,this,e,null,t)}plus(e,t){return new Fe(z.Plus,this,e,null,t)}divide(e,t){return new Fe(z.Divide,this,e,null,t)}multiply(e,t){return new Fe(z.Multiply,this,e,null,t)}modulo(e,t){return new Fe(z.Modulo,this,e,null,t)}power(e,t){return new Fe(z.Exponentiation,this,e,null,t)}and(e,t){return new Fe(z.And,this,e,null,t)}bitwiseOr(e,t){return new Fe(z.BitwiseOr,this,e,null,t)}bitwiseAnd(e,t){return new Fe(z.BitwiseAnd,this,e,null,t)}or(e,t){return new Fe(z.Or,this,e,null,t)}lower(e,t){return new Fe(z.Lower,this,e,null,t)}lowerEquals(e,t){return new Fe(z.LowerEquals,this,e,null,t)}bigger(e,t){return new Fe(z.Bigger,this,e,null,t)}biggerEquals(e,t){return new Fe(z.BiggerEquals,this,e,null,t)}isBlank(e){return this.equals(rB,e)}nullishCoalesce(e,t){return new Fe(z.NullishCoalesce,this,e,null,t)}toStmt(){return new Nn(this,null)}},ui=class n extends Je{name;constructor(e,t,r){super(t,r),this.name=e}isEquivalent(e){return e instanceof n&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadVarExpr(this,t)}clone(){return new n(this.name,this.type,this.sourceSpan)}set(e){return new Fe(z.Assign,this,e,null,this.sourceSpan)}},Vc=class n extends Je{expr;constructor(e,t,r){super(t,r),this.expr=e}visitExpression(e,t){return e.visitTypeofExpr(this,t)}isEquivalent(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr.clone())}},zm=class n extends Je{expr;constructor(e,t,r){super(t,r),this.expr=e}visitExpression(e,t){return e.visitVoidExpr(this,t)}isEquivalent(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr.clone())}},Oe=class n extends Je{node;constructor(e,t,r){super(t,r),this.node=e}isEquivalent(e){return e instanceof n&&this.node===e.node}isConstant(){return!1}visitExpression(e,t){return e.visitWrappedNodeExpr(this,t)}clone(){return new n(this.node,this.type,this.sourceSpan)}},_r=class n extends Je{fn;args;pure;constructor(e,t,r,i,s=!1){super(r,i),this.fn=e,this.args=t,this.pure=s}get receiver(){return this.fn}isEquivalent(e){return e instanceof n&&this.fn.isEquivalent(e.fn)&&jr(this.args,e.args)&&this.pure===e.pure}isConstant(){return!1}visitExpression(e,t){return e.visitInvokeFunctionExpr(this,t)}clone(){return new n(this.fn.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan,this.pure)}},rh=class n extends Je{tag;template;constructor(e,t,r,i){super(r,i),this.tag=e,this.template=t}isEquivalent(e){return e instanceof n&&this.tag.isEquivalent(e.tag)&&this.template.isEquivalent(e.template)}isConstant(){return!1}visitExpression(e,t){return e.visitTaggedTemplateLiteralExpr(this,t)}clone(){return new n(this.tag.clone(),this.template.clone(),this.type,this.sourceSpan)}},ih=class n extends Je{classExpr;args;constructor(e,t,r,i){super(r,i),this.classExpr=e,this.args=t}isEquivalent(e){return e instanceof n&&this.classExpr.isEquivalent(e.classExpr)&&jr(this.args,e.args)}isConstant(){return!1}visitExpression(e,t){return e.visitInstantiateExpr(this,t)}clone(){return new n(this.classExpr.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan)}},jc=class n extends Je{body;flags;constructor(e,t,r){super(null,r),this.body=e,this.flags=t}isEquivalent(e){return e instanceof n&&this.body===e.body&&this.flags===e.flags}isConstant(){return!0}visitExpression(e,t){return e.visitRegularExpressionLiteral(this,t)}clone(){return new n(this.body,this.flags,this.sourceSpan)}},wn=class n extends Je{value;constructor(e,t,r){super(t,r),this.value=e}isEquivalent(e){return e instanceof n&&this.value===e.value}isConstant(){return!0}visitExpression(e,t){return e.visitLiteralExpr(this,t)}clone(){return new n(this.value,this.type,this.sourceSpan)}},sh=class n extends Je{elements;expressions;constructor(e,t,r){super(null,r),this.elements=e,this.expressions=t}isEquivalent(e){return e instanceof n&&$A(this.elements,e.elements,(t,r)=>t.text===r.text)&&jr(this.expressions,e.expressions)}isConstant(){return!1}visitExpression(e,t){return e.visitTemplateLiteralExpr(this,t)}clone(){return new n(this.elements.map(e=>e.clone()),this.expressions.map(e=>e.clone()))}},qm=class n extends Je{text;rawText;constructor(e,t,r){super(_E,t),this.text=e,this.rawText=r??Wb(Om(e))}visitExpression(e,t){return e.visitTemplateLiteralElementExpr(this,t)}isEquivalent(e){return e instanceof n&&e.text===this.text&&e.rawText===this.rawText}isConstant(){return!0}clone(){return new n(this.text,this.sourceSpan,this.rawText)}},Ya=class{text;sourceSpan;constructor(e,t){this.text=e,this.sourceSpan=t}},Fc=class{text;sourceSpan;associatedMessage;constructor(e,t,r){this.text=e,this.sourceSpan=t,this.associatedMessage=r}},JL="|",XI="@@",eB="\u241F",Wm=class n extends Je{metaBlock;messageParts;placeHolderNames;expressions;constructor(e,t,r,i,s){super(_E,s),this.metaBlock=e,this.messageParts=t,this.placeHolderNames=r,this.expressions=i}isEquivalent(e){return!1}isConstant(){return!1}visitExpression(e,t){return e.visitLocalizedString(this,t)}clone(){return new n(this.metaBlock,this.messageParts,this.placeHolderNames,this.expressions.map(e=>e.clone()),this.sourceSpan)}serializeI18nHead(){let e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e=`${this.metaBlock.meaning}${JL}${e}`),this.metaBlock.customId&&(e=`${e}${XI}${this.metaBlock.customId}`),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach(t=>{e=`${e}${eB}${t}`}),ZI(e,this.messageParts[0].text,this.getMessagePartSourceSpan(0))}getMessagePartSourceSpan(e){return this.messageParts[e]?.sourceSpan??this.sourceSpan}getPlaceholderSourceSpan(e){return this.placeHolderNames[e]?.sourceSpan??this.expressions[e]?.sourceSpan??this.sourceSpan}serializeI18nTemplatePart(e){let t=this.placeHolderNames[e-1],r=this.messageParts[e],i=t.text;return t.associatedMessage?.legacyIds.length===0&&(i+=`${XI}${LA(t.associatedMessage.messageString,t.associatedMessage.meaning)}`),ZI(i,r.text,this.getMessagePartSourceSpan(e))}},Om=n=>n.replace(/\\/g,"\\\\"),tB=n=>n.replace(/^:/,"\\:"),nB=n=>n.replace(/:/g,"\\:"),Wb=n=>n.replace(/`/g,"\\`").replace(/\${/g,"$\\{");function ZI(n,e,t){return n===""?{cooked:e,raw:Wb(tB(Om(e))),range:t}:{cooked:`:${n}:${e}`,raw:Wb(`:${nB(Om(n))}:${Om(e)}`),range:t}}var ru=class n extends Je{value;typeParams;constructor(e,t,r=null,i){super(t,i),this.value=e,this.typeParams=r}isEquivalent(e){return e instanceof n&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName}isConstant(){return!1}visitExpression(e,t){return e.visitExternalExpr(this,t)}clone(){return new n(this.value,this.type,this.typeParams,this.sourceSpan)}};var os=class n extends Je{condition;falseCase;trueCase;constructor(e,t,r=null,i,s){super(i||t.type,s),this.condition=e,this.falseCase=r,this.trueCase=t}isEquivalent(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&ZL(this.falseCase,e.falseCase)}isConstant(){return!1}visitExpression(e,t){return e.visitConditionalExpr(this,t)}clone(){return new n(this.condition.clone(),this.trueCase.clone(),this.falseCase?.clone(),this.type,this.sourceSpan)}};var oh=class n extends Je{condition;constructor(e,t){super(XL,t),this.condition=e}isEquivalent(e){return e instanceof n&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,t){return e.visitNotExpr(this,t)}clone(){return new n(this.condition.clone(),this.sourceSpan)}},cn=class n{name;type;constructor(e,t=null){this.name=e,this.type=t}isEquivalent(e){return this.name===e.name}clone(){return new n(this.name,this.type)}},Mo=class n extends Je{params;statements;name;constructor(e,t,r,i,s){super(r,i),this.params=e,this.statements=t,this.name=s}isEquivalent(e){return(e instanceof n||e instanceof ah)&&jr(this.params,e.params)&&jr(this.statements,e.statements)}isConstant(){return!1}visitExpression(e,t){return e.visitFunctionExpr(this,t)}toDeclStmt(e,t){return new ah(e,this.params,this.statements,this.type,t,this.sourceSpan)}clone(){return new n(this.params.map(e=>e.clone()),this.statements,this.type,this.sourceSpan,this.name)}},iu=class n extends Je{params;body;constructor(e,t,r,i){super(r,i),this.params=e,this.body=t}isEquivalent(e){return!(e instanceof n)||!jr(this.params,e.params)?!1:this.body instanceof Je&&e.body instanceof Je?this.body.isEquivalent(e.body):Array.isArray(this.body)&&Array.isArray(e.body)?jr(this.body,e.body):!1}isConstant(){return!1}visitExpression(e,t){return e.visitArrowFunctionExpr(this,t)}clone(){return new n(this.params.map(e=>e.clone()),Array.isArray(this.body)?this.body:this.body.clone(),this.type,this.sourceSpan)}toDeclStmt(e,t){return new qt(e,this,Lr,t,this.sourceSpan)}},su=class n extends Je{operator;expr;parens;constructor(e,t,r,i,s=!0){super(r||yE,i),this.operator=e,this.expr=t,this.parens=s}isEquivalent(e){return e instanceof n&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}visitExpression(e,t){return e.visitUnaryOperatorExpr(this,t)}clone(){return new n(this.operator,this.expr.clone(),this.type,this.sourceSpan,this.parens)}},Si=class n extends Je{expr;constructor(e,t,r){super(t,r),this.expr=e}visitExpression(e,t){return e.visitParenthesizedExpr(this,t)}isEquivalent(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr.clone())}},Fe=class n extends Je{operator;rhs;lhs;constructor(e,t,r,i,s){super(i||t.type,s),this.operator=e,this.rhs=r,this.lhs=t}isEquivalent(e){return e instanceof n&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}isConstant(){return!1}visitExpression(e,t){return e.visitBinaryOperatorExpr(this,t)}clone(){return new n(this.operator,this.lhs.clone(),this.rhs.clone(),this.type,this.sourceSpan)}isAssignment(){let e=this.operator;return e===z.Assign||e===z.AdditionAssignment||e===z.SubtractionAssignment||e===z.MultiplicationAssignment||e===z.DivisionAssignment||e===z.RemainderAssignment||e===z.ExponentiationAssignment||e===z.AndAssignment||e===z.OrAssignment||e===z.NullishCoalesceAssignment}},Ur=class n extends Je{receiver;name;constructor(e,t,r,i){super(r,i),this.receiver=e,this.name=t}get index(){return this.name}isEquivalent(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadPropExpr(this,t)}set(e){return new Fe(z.Assign,this.receiver.prop(this.name),e,null,this.sourceSpan)}clone(){return new n(this.receiver.clone(),this.name,this.type,this.sourceSpan)}},Gs=class n extends Je{receiver;index;constructor(e,t,r,i){super(r,i),this.receiver=e,this.index=t}isEquivalent(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}isConstant(){return!1}visitExpression(e,t){return e.visitReadKeyExpr(this,t)}set(e){return new Fe(z.Assign,this.receiver.key(this.index),e,null,this.sourceSpan)}clone(){return new n(this.receiver.clone(),this.index.clone(),this.type,this.sourceSpan)}},Ii=class n extends Je{entries;constructor(e,t,r){super(t,r),this.entries=e}isConstant(){return this.entries.every(e=>e.isConstant())}isEquivalent(e){return e instanceof n&&jr(this.entries,e.entries)}visitExpression(e,t){return e.visitLiteralArrayExpr(this,t)}clone(){return new n(this.entries.map(e=>e.clone()),this.type,this.sourceSpan)}},Uc=class n{key;value;quoted;constructor(e,t,r){this.key=e,this.value=t,this.quoted=r}isEquivalent(e){return this.key===e.key&&this.value.isEquivalent(e.value)}clone(){return new n(this.key,this.value.clone(),this.quoted)}},as=class n extends Je{entries;valueType=null;constructor(e,t,r){super(t,r),this.entries=e,t&&(this.valueType=t.valueType)}isEquivalent(e){return e instanceof n&&jr(this.entries,e.entries)}isConstant(){return this.entries.every(e=>e.value.isConstant())}visitExpression(e,t){return e.visitLiteralMapExpr(this,t)}clone(){let e=this.entries.map(t=>t.clone());return new n(e,this.type,this.sourceSpan)}};var Hc=new wn(null,null,null),rB=new wn(null,Lr,null),an=(function(n){return n[n.None=0]="None",n[n.Final=1]="Final",n[n.Private=2]="Private",n[n.Exported=4]="Exported",n[n.Static=8]="Static",n})(an||{}),Gb=class{text;multiline;trailingNewline;constructor(e,t,r){this.text=e,this.multiline=t,this.trailingNewline=r}toString(){return this.multiline?` ${this.text} `:this.text}},Gm=class extends Gb{tags;constructor(e){super("",!0,!0),this.tags=e}toString(){return uB(this.tags)}},ou=class{modifiers;sourceSpan;leadingComments;constructor(e=an.None,t=null,r){this.modifiers=e,this.sourceSpan=t,this.leadingComments=r}hasModifier(e){return(this.modifiers&e)!==0}addLeadingComment(e){this.leadingComments=this.leadingComments??[],this.leadingComments.push(e)}},qt=class n extends ou{name;value;type;constructor(e,t,r,i,s,o){super(i,s,o),this.name=e,this.value=t,this.type=r||t&&t.type||null}isEquivalent(e){return e instanceof n&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}visitStatement(e,t){return e.visitDeclareVarStmt(this,t)}},ah=class n extends ou{name;params;statements;type;constructor(e,t,r,i,s,o,a){super(s,o,a),this.name=e,this.params=t,this.statements=r,this.type=i||null}isEquivalent(e){return e instanceof n&&jr(this.params,e.params)&&jr(this.statements,e.statements)}visitStatement(e,t){return e.visitDeclareFunctionStmt(this,t)}},Nn=class n extends ou{expr;constructor(e,t,r){super(an.None,t,r),this.expr=e}isEquivalent(e){return e instanceof n&&this.expr.isEquivalent(e.expr)}visitStatement(e,t){return e.visitExpressionStmt(this,t)}},_n=class n extends ou{value;constructor(e,t=null,r){super(an.None,t,r),this.value=e}isEquivalent(e){return e instanceof n&&this.value.isEquivalent(e.value)}visitStatement(e,t){return e.visitReturnStmt(this,t)}},Ym=class n extends ou{condition;trueCase;falseCase;constructor(e,t,r=[],i,s){super(an.None,i,s),this.condition=e,this.trueCase=t,this.falseCase=r}isEquivalent(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&jr(this.trueCase,e.trueCase)&&jr(this.falseCase,e.falseCase)}visitStatement(e,t){return e.visitIfStmt(this,t)}};function iB(n=[]){return new Gm(n)}function ke(n,e,t){return new ui(n,e,t)}function ee(n,e=null,t){return new ru(n,null,e,t)}function bn(n,e,t){return new ai(n,e,t)}function Zh(n){return new Vc(n)}function Ge(n,e,t){return new Ii(n,e,t)}function Qn(n,e=null){return new as(n.map(t=>new Uc(t.key,t.value,t.quoted)),e,null)}function sB(n,e){return new oh(n,e)}function ko(n,e,t,r,i){return new Mo(n,e,t,r,i)}function Ti(n,e,t,r){return new iu(n,e,t,r)}function Yg(n,e,t,r,i){return new Ym(n,e,t,r,i)}function oB(n,e,t,r){return new rh(n,e,t,r)}function N(n,e,t){return new wn(n,e,t)}function aB(n,e,t,r,i){return new Wm(n,e,t,r,i)}function JI(n){let e="";if(n.tagName&&(e+=` @${n.tagName}`),n.text){if(n.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');e+=" "+n.text.replace(/@/g,"\\@")}return e}function uB(n){if(n.length===0)return"";if(n.length===1&&n[0].tagName&&!n[0].text)return`*${JI(n[0])} `;let e=`*
`;for(let t of n)e+=" *",e+=JI(t).replace(/\n/g,`
 * `),e+=`
`;return e+=" ",e}var cB="_c",eT=ke("<unknown>"),lB={},dB=50,Km=class n extends Je{resolved;original;shared=!1;constructor(e){super(e.type),this.resolved=e,this.original=e}visitExpression(e,t){return t===lB?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}isEquivalent(e){return e instanceof n&&this.resolved.isEquivalent(e.resolved)}isConstant(){return!0}clone(){throw new Error("Not supported.")}fixup(e){this.resolved=e,this.shared=!0}},Qm=class{isClosureCompilerEnabled;statements=[];literals=new Map;literalFactories=new Map;sharedConstants=new Map;_claimedNames=new Map;nextNameIndex=0;constructor(e=!1){this.isClosureCompilerEnabled=e}getConstLiteral(e,t){if(e instanceof wn&&!tT(e)||e instanceof Km)return e;let r=Ka.INSTANCE.keyOf(e),i=this.literals.get(r),s=!1;if(i||(i=new Km(e),this.literals.set(r,i),s=!0),!s&&!i.shared||s&&t){let o=this.freshName(),a,u;this.isClosureCompilerEnabled&&tT(e)?(a=new Mo([],[new _n(e)]),u=ke(o).callFn([])):(a=e,u=ke(o)),this.statements.push(new qt(o,a,Lr,an.Final)),i.fixup(u)}return i}getSharedConstant(e,t){let r=e.keyOf(t);if(!this.sharedConstants.has(r)){let i=this.freshName();this.sharedConstants.set(r,ke(i)),this.statements.push(e.toSharedConstantDeclaration(i,t))}return this.sharedConstants.get(r)}getLiteralFactory(e){if(e instanceof Ii){let t=e.entries.map(i=>i.isConstant()?i:eT),r=Ka.INSTANCE.keyOf(Ge(t));return this._getLiteralFactory(r,e.entries,i=>Ge(i))}else{let t=Qn(e.entries.map(i=>({key:i.key,value:i.value.isConstant()?i.value:eT,quoted:i.quoted}))),r=Ka.INSTANCE.keyOf(t);return this._getLiteralFactory(r,e.entries.map(i=>i.value),i=>Qn(i.map((s,o)=>({key:e.entries[o].key,value:s,quoted:e.entries[o].quoted}))))}}getSharedFunctionReference(e,t,r=!0){let i=e instanceof iu;for(let o of this.statements)if(i&&o instanceof qt&&o.value?.isEquivalent(e)||!i&&o instanceof ah&&e instanceof Mo&&e.isEquivalent(o))return ke(o.name);let s=r?this.uniqueName(t):t;return this.statements.push(e instanceof Mo?e.toDeclStmt(s,an.Final):new qt(s,e,Lr,an.Final,e.sourceSpan)),ke(s)}_getLiteralFactory(e,t,r){let i=this.literalFactories.get(e),s=t.filter(o=>!o.isConstant());if(!i){let o=t.map((l,d)=>l.isConstant()?this.getConstLiteral(l,!0):ke(`a${d}`)),a=o.filter(hB).map(l=>new cn(l.name,Xh)),u=Ti(a,r(o),Lr),c=this.freshName();this.statements.push(new qt(c,u,Lr,an.Final)),i=ke(c),this.literalFactories.set(e,i)}return{literalFactory:i,literalFactoryArguments:s}}uniqueName(e,t=!0){let r=this._claimedNames.get(e)??0,i=r===0&&!t?`${e}`:`${e}${r}`;return this._claimedNames.set(e,r+1),i}freshName(){return this.uniqueName(cB)}},Ka=class n{static INSTANCE=new n;keyOf(e){if(e instanceof wn&&typeof e.value=="string")return`"${e.value}"`;if(e instanceof wn)return String(e.value);if(e instanceof jc)return`/${e.body}/${e.flags??""}`;if(e instanceof Ii){let t=[];for(let r of e.entries)t.push(this.keyOf(r));return`[${t.join(",")}]`}else if(e instanceof as){let t=[];for(let r of e.entries){let i=r.key;r.quoted&&(i=`"${i}"`),t.push(i+":"+this.keyOf(r.value))}return`{${t.join(",")}}`}else{if(e instanceof ru)return`import("${e.value.moduleName}", ${e.value.name})`;if(e instanceof ui)return`read(${e.name})`;if(e instanceof Vc)return`typeof(${this.keyOf(e.expr)})`;throw new Error(`${this.constructor.name} does not handle expressions of type ${e.constructor.name}`)}}};function hB(n){return n instanceof ui}function tT(n){return n instanceof wn&&typeof n.value=="string"&&n.value.length>=dB}var A="@angular/core",w=(()=>{class n{static NEW_METHOD="factory";static TRANSFORM_METHOD="transform";static PATCH_DEPS="patchedDeps";static core={name:null,moduleName:A};static namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:A};static namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:A};static namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:A};static element={name:"\u0275\u0275element",moduleName:A};static elementStart={name:"\u0275\u0275elementStart",moduleName:A};static elementEnd={name:"\u0275\u0275elementEnd",moduleName:A};static domElement={name:"\u0275\u0275domElement",moduleName:A};static domElementStart={name:"\u0275\u0275domElementStart",moduleName:A};static domElementEnd={name:"\u0275\u0275domElementEnd",moduleName:A};static domElementContainer={name:"\u0275\u0275domElementContainer",moduleName:A};static domElementContainerStart={name:"\u0275\u0275domElementContainerStart",moduleName:A};static domElementContainerEnd={name:"\u0275\u0275domElementContainerEnd",moduleName:A};static domTemplate={name:"\u0275\u0275domTemplate",moduleName:A};static domListener={name:"\u0275\u0275domListener",moduleName:A};static advance={name:"\u0275\u0275advance",moduleName:A};static syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:A};static syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:A};static attribute={name:"\u0275\u0275attribute",moduleName:A};static classProp={name:"\u0275\u0275classProp",moduleName:A};static elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:A};static elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:A};static elementContainer={name:"\u0275\u0275elementContainer",moduleName:A};static styleMap={name:"\u0275\u0275styleMap",moduleName:A};static classMap={name:"\u0275\u0275classMap",moduleName:A};static styleProp={name:"\u0275\u0275styleProp",moduleName:A};static interpolate={name:"\u0275\u0275interpolate",moduleName:A};static interpolate1={name:"\u0275\u0275interpolate1",moduleName:A};static interpolate2={name:"\u0275\u0275interpolate2",moduleName:A};static interpolate3={name:"\u0275\u0275interpolate3",moduleName:A};static interpolate4={name:"\u0275\u0275interpolate4",moduleName:A};static interpolate5={name:"\u0275\u0275interpolate5",moduleName:A};static interpolate6={name:"\u0275\u0275interpolate6",moduleName:A};static interpolate7={name:"\u0275\u0275interpolate7",moduleName:A};static interpolate8={name:"\u0275\u0275interpolate8",moduleName:A};static interpolateV={name:"\u0275\u0275interpolateV",moduleName:A};static nextContext={name:"\u0275\u0275nextContext",moduleName:A};static resetView={name:"\u0275\u0275resetView",moduleName:A};static templateCreate={name:"\u0275\u0275template",moduleName:A};static defer={name:"\u0275\u0275defer",moduleName:A};static deferWhen={name:"\u0275\u0275deferWhen",moduleName:A};static deferOnIdle={name:"\u0275\u0275deferOnIdle",moduleName:A};static deferOnImmediate={name:"\u0275\u0275deferOnImmediate",moduleName:A};static deferOnTimer={name:"\u0275\u0275deferOnTimer",moduleName:A};static deferOnHover={name:"\u0275\u0275deferOnHover",moduleName:A};static deferOnInteraction={name:"\u0275\u0275deferOnInteraction",moduleName:A};static deferOnViewport={name:"\u0275\u0275deferOnViewport",moduleName:A};static deferPrefetchWhen={name:"\u0275\u0275deferPrefetchWhen",moduleName:A};static deferPrefetchOnIdle={name:"\u0275\u0275deferPrefetchOnIdle",moduleName:A};static deferPrefetchOnImmediate={name:"\u0275\u0275deferPrefetchOnImmediate",moduleName:A};static deferPrefetchOnTimer={name:"\u0275\u0275deferPrefetchOnTimer",moduleName:A};static deferPrefetchOnHover={name:"\u0275\u0275deferPrefetchOnHover",moduleName:A};static deferPrefetchOnInteraction={name:"\u0275\u0275deferPrefetchOnInteraction",moduleName:A};static deferPrefetchOnViewport={name:"\u0275\u0275deferPrefetchOnViewport",moduleName:A};static deferHydrateWhen={name:"\u0275\u0275deferHydrateWhen",moduleName:A};static deferHydrateNever={name:"\u0275\u0275deferHydrateNever",moduleName:A};static deferHydrateOnIdle={name:"\u0275\u0275deferHydrateOnIdle",moduleName:A};static deferHydrateOnImmediate={name:"\u0275\u0275deferHydrateOnImmediate",moduleName:A};static deferHydrateOnTimer={name:"\u0275\u0275deferHydrateOnTimer",moduleName:A};static deferHydrateOnHover={name:"\u0275\u0275deferHydrateOnHover",moduleName:A};static deferHydrateOnInteraction={name:"\u0275\u0275deferHydrateOnInteraction",moduleName:A};static deferHydrateOnViewport={name:"\u0275\u0275deferHydrateOnViewport",moduleName:A};static deferEnableTimerScheduling={name:"\u0275\u0275deferEnableTimerScheduling",moduleName:A};static conditionalCreate={name:"\u0275\u0275conditionalCreate",moduleName:A};static conditionalBranchCreate={name:"\u0275\u0275conditionalBranchCreate",moduleName:A};static conditional={name:"\u0275\u0275conditional",moduleName:A};static repeater={name:"\u0275\u0275repeater",moduleName:A};static repeaterCreate={name:"\u0275\u0275repeaterCreate",moduleName:A};static repeaterTrackByIndex={name:"\u0275\u0275repeaterTrackByIndex",moduleName:A};static repeaterTrackByIdentity={name:"\u0275\u0275repeaterTrackByIdentity",moduleName:A};static componentInstance={name:"\u0275\u0275componentInstance",moduleName:A};static text={name:"\u0275\u0275text",moduleName:A};static enableBindings={name:"\u0275\u0275enableBindings",moduleName:A};static disableBindings={name:"\u0275\u0275disableBindings",moduleName:A};static getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:A};static textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:A};static textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:A};static textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:A};static textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:A};static textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:A};static textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:A};static textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:A};static textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:A};static textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:A};static textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:A};static restoreView={name:"\u0275\u0275restoreView",moduleName:A};static pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:A};static pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:A};static pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:A};static pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:A};static pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:A};static pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:A};static pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:A};static pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:A};static pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:A};static pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:A};static pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:A};static pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:A};static pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:A};static pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:A};static pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:A};static domProperty={name:"\u0275\u0275domProperty",moduleName:A};static ariaProperty={name:"\u0275\u0275ariaProperty",moduleName:A};static property={name:"\u0275\u0275property",moduleName:A};static control={name:"\u0275\u0275control",moduleName:A};static controlCreate={name:"\u0275\u0275controlCreate",moduleName:A};static animationEnterListener={name:"\u0275\u0275animateEnterListener",moduleName:A};static animationLeaveListener={name:"\u0275\u0275animateLeaveListener",moduleName:A};static animationEnter={name:"\u0275\u0275animateEnter",moduleName:A};static animationLeave={name:"\u0275\u0275animateLeave",moduleName:A};static i18n={name:"\u0275\u0275i18n",moduleName:A};static i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:A};static i18nExp={name:"\u0275\u0275i18nExp",moduleName:A};static i18nStart={name:"\u0275\u0275i18nStart",moduleName:A};static i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:A};static i18nApply={name:"\u0275\u0275i18nApply",moduleName:A};static i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:A};static pipe={name:"\u0275\u0275pipe",moduleName:A};static projection={name:"\u0275\u0275projection",moduleName:A};static projectionDef={name:"\u0275\u0275projectionDef",moduleName:A};static reference={name:"\u0275\u0275reference",moduleName:A};static inject={name:"\u0275\u0275inject",moduleName:A};static injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:A};static directiveInject={name:"\u0275\u0275directiveInject",moduleName:A};static invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:A};static invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:A};static templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:A};static forwardRef={name:"forwardRef",moduleName:A};static resolveForwardRef={name:"resolveForwardRef",moduleName:A};static replaceMetadata={name:"\u0275\u0275replaceMetadata",moduleName:A};static getReplaceMetadataURL={name:"\u0275\u0275getReplaceMetadataURL",moduleName:A};static \u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:A};static declareInjectable={name:"\u0275\u0275ngDeclareInjectable",moduleName:A};static InjectableDeclaration={name:"\u0275\u0275InjectableDeclaration",moduleName:A};static resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:A};static resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:A};static resolveBody={name:"\u0275\u0275resolveBody",moduleName:A};static getComponentDepsFactory={name:"\u0275\u0275getComponentDepsFactory",moduleName:A};static defineComponent={name:"\u0275\u0275defineComponent",moduleName:A};static declareComponent={name:"\u0275\u0275ngDeclareComponent",moduleName:A};static setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:A};static ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:A};static ViewEncapsulation={name:"ViewEncapsulation",moduleName:A};static ComponentDeclaration={name:"\u0275\u0275ComponentDeclaration",moduleName:A};static FactoryDeclaration={name:"\u0275\u0275FactoryDeclaration",moduleName:A};static declareFactory={name:"\u0275\u0275ngDeclareFactory",moduleName:A};static FactoryTarget={name:"\u0275\u0275FactoryTarget",moduleName:A};static defineDirective={name:"\u0275\u0275defineDirective",moduleName:A};static declareDirective={name:"\u0275\u0275ngDeclareDirective",moduleName:A};static DirectiveDeclaration={name:"\u0275\u0275DirectiveDeclaration",moduleName:A};static InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:A};static InjectorDeclaration={name:"\u0275\u0275InjectorDeclaration",moduleName:A};static defineInjector={name:"\u0275\u0275defineInjector",moduleName:A};static declareInjector={name:"\u0275\u0275ngDeclareInjector",moduleName:A};static NgModuleDeclaration={name:"\u0275\u0275NgModuleDeclaration",moduleName:A};static ModuleWithProviders={name:"ModuleWithProviders",moduleName:A};static defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:A};static declareNgModule={name:"\u0275\u0275ngDeclareNgModule",moduleName:A};static setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:A};static registerNgModuleType={name:"\u0275\u0275registerNgModuleType",moduleName:A};static PipeDeclaration={name:"\u0275\u0275PipeDeclaration",moduleName:A};static definePipe={name:"\u0275\u0275definePipe",moduleName:A};static declarePipe={name:"\u0275\u0275ngDeclarePipe",moduleName:A};static declareClassMetadata={name:"\u0275\u0275ngDeclareClassMetadata",moduleName:A};static declareClassMetadataAsync={name:"\u0275\u0275ngDeclareClassMetadataAsync",moduleName:A};static setClassMetadata={name:"\u0275setClassMetadata",moduleName:A};static setClassMetadataAsync={name:"\u0275setClassMetadataAsync",moduleName:A};static setClassDebugInfo={name:"\u0275setClassDebugInfo",moduleName:A};static queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:A};static viewQuery={name:"\u0275\u0275viewQuery",moduleName:A};static loadQuery={name:"\u0275\u0275loadQuery",moduleName:A};static contentQuery={name:"\u0275\u0275contentQuery",moduleName:A};static viewQuerySignal={name:"\u0275\u0275viewQuerySignal",moduleName:A};static contentQuerySignal={name:"\u0275\u0275contentQuerySignal",moduleName:A};static queryAdvance={name:"\u0275\u0275queryAdvance",moduleName:A};static twoWayProperty={name:"\u0275\u0275twoWayProperty",moduleName:A};static twoWayBindingSet={name:"\u0275\u0275twoWayBindingSet",moduleName:A};static twoWayListener={name:"\u0275\u0275twoWayListener",moduleName:A};static declareLet={name:"\u0275\u0275declareLet",moduleName:A};static storeLet={name:"\u0275\u0275storeLet",moduleName:A};static readContextLet={name:"\u0275\u0275readContextLet",moduleName:A};static attachSourceLocations={name:"\u0275\u0275attachSourceLocations",moduleName:A};static NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:A};static InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:A};static ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:A};static HostDirectivesFeature={name:"\u0275\u0275HostDirectivesFeature",moduleName:A};static ExternalStylesFeature={name:"\u0275\u0275ExternalStylesFeature",moduleName:A};static listener={name:"\u0275\u0275listener",moduleName:A};static getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:A};static sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:A};static sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:A};static validateAttribute={name:"\u0275\u0275validateAttribute",moduleName:A};static sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:A};static sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:A};static sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:A};static sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:A};static trustConstantHtml={name:"\u0275\u0275trustConstantHtml",moduleName:A};static trustConstantResourceUrl={name:"\u0275\u0275trustConstantResourceUrl",moduleName:A};static inputDecorator={name:"Input",moduleName:A};static outputDecorator={name:"Output",moduleName:A};static viewChildDecorator={name:"ViewChild",moduleName:A};static viewChildrenDecorator={name:"ViewChildren",moduleName:A};static contentChildDecorator={name:"ContentChild",moduleName:A};static contentChildrenDecorator={name:"ContentChildren",moduleName:A};static InputSignalBrandWriteType={name:"\u0275INPUT_SIGNAL_BRAND_WRITE_TYPE",moduleName:A};static UnwrapDirectiveSignalInputs={name:"\u0275UnwrapDirectiveSignalInputs",moduleName:A};static unwrapWritableSignal={name:"\u0275unwrapWritableSignal",moduleName:A};static assertType={name:"\u0275assertType",moduleName:A}}return n})(),fB=/-+([a-z0-9])/g;function pB(n){return n.replace(fB,(...e)=>e[1].toUpperCase())}function mB(n,e){return VA(n,":",e)}function gB(n,e){return VA(n,".",e)}function VA(n,e,t){let r=n.indexOf(e);return r==-1?t:[n.slice(0,r).trim(),n.slice(r+1).trim()]}function vB(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r>=55296&&r<=56319&&n.length>t+1){let i=n.charCodeAt(t+1);i>=56320&&i<=57343&&(t++,r=(r-55296<<10)+i-56320+65536)}r<=127?e.push(r):r<=2047?e.push(r>>6&31|192,r&63|128):r<=65535?e.push(r>>12|224,r>>6&63|128,r&63|128):r<=2097151&&e.push(r>>18&7|240,r>>12&63|128,r>>6&63|128,r&63|128)}return e}function jA(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(jA).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;if(!n.toString)return"object";let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}var Yb=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Qd=globalThis,yB=/^([1-9]|1[0-8])\./;function UA(n){return n.startsWith("0.")?!0:!yB.test(n)}var _B=3,bB="# sourceMappingURL=data:application/json;base64,",Kb=class{file;sourcesContent=new Map;lines=[];lastCol0=0;hasMappings=!1;constructor(e=null){this.file=e}addSource(e,t=null){return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(e,t,r,i){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(t!=null&&!this.sourcesContent.has(t))throw new Error(`Unknown source file "${t}"`);if(e==null)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(r==null||i==null))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:r,sourceCol0:i}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;let e=new Map,t=[],r=[];Array.from(this.sourcesContent.keys()).forEach((c,l)=>{e.set(c,l),t.push(c),r.push(this.sourcesContent.get(c)||null)});let i="",s=0,o=0,a=0,u=0;return this.lines.forEach(c=>{s=0,i+=c.map(l=>{let d=_m(l.col0-s);return s=l.col0,l.sourceUrl!=null&&(d+=_m(e.get(l.sourceUrl)-o),o=e.get(l.sourceUrl),d+=_m(l.sourceLine0-a),a=l.sourceLine0,d+=_m(l.sourceCol0-u),u=l.sourceCol0),d}).join(","),i+=";"}),i=i.slice(0,-1),{file:this.file||"",version:_B,sourceRoot:"",sources:t,sourcesContent:r,mappings:i}}toJsComment(){return this.hasMappings?"//"+bB+wB(JSON.stringify(this,null,0)):""}};function wB(n){let e="",t=vB(n);for(let r=0;r<t.length;){let i=t[r++],s=r<t.length?t[r++]:null,o=r<t.length?t[r++]:null;e+=qd(i>>2),e+=qd((i&3)<<4|(s===null?0:s>>4)),e+=s===null?"=":qd((s&15)<<2|(o===null?0:o>>6)),e+=s===null||o===null?"=":qd(o&63)}return e}function _m(n){n=n<0?(-n<<1)+1:n<<1;let e="";do{let t=n&31;n=n>>5,n>0&&(t=t|32),e+=qd(t)}while(n>0);return e}var EB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function qd(n){if(n<0||n>=64)throw new Error("Can only encode value in the range [0, 63]");return EB[n]}var CB=/'|\\|\n|\r|\$/g,xB=/^[$A-Z_][0-9A-Z_$]*$/i,Qb="  ",Xm=class{indent;partsLength=0;parts=[];srcSpans=[];constructor(e){this.indent=e}},DB=new Map([[z.And,"&&"],[z.Bigger,">"],[z.BiggerEquals,">="],[z.BitwiseOr,"|"],[z.BitwiseAnd,"&"],[z.Divide,"/"],[z.Assign,"="],[z.Equals,"=="],[z.Identical,"==="],[z.Lower,"<"],[z.LowerEquals,"<="],[z.Minus,"-"],[z.Modulo,"%"],[z.Exponentiation,"**"],[z.Multiply,"*"],[z.NotEquals,"!="],[z.NotIdentical,"!=="],[z.NullishCoalesce,"??"],[z.Or,"||"],[z.Plus,"+"],[z.In,"in"],[z.AdditionAssignment,"+="],[z.SubtractionAssignment,"-="],[z.MultiplicationAssignment,"*="],[z.DivisionAssignment,"/="],[z.RemainderAssignment,"%="],[z.ExponentiationAssignment,"**="],[z.AndAssignment,"&&="],[z.OrAssignment,"||="],[z.NullishCoalesceAssignment,"??="]]),Xb=class n{_indent;static createRoot(){return new n(0)}_lines;constructor(e){this._indent=e,this._lines=[new Xm(e)]}get _currentLine(){return this._lines[this._lines.length-1]}println(e,t=""){this.print(e||null,t,!0)}lineIsEmpty(){return this._currentLine.parts.length===0}lineLength(){return this._currentLine.indent*Qb.length+this._currentLine.partsLength}print(e,t,r=!1){t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),r&&this._lines.push(new Xm(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}toSource(){return this.sourceLines.map(e=>e.parts.length>0?nT(e.indent)+e.parts.join(""):"").join(`
`)}toSourceMapGenerator(e,t=0){let r=new Kb(e),i=!1,s=()=>{i||(r.addSource(e," ").addMapping(0,e,0,0),i=!0)};for(let o=0;o<t;o++)r.addLine(),s();return this.sourceLines.forEach((o,a)=>{r.addLine();let u=o.srcSpans,c=o.parts,l=o.indent*Qb.length,d=0;for(;d<u.length&&!u[d];)l+=c[d].length,d++;for(d<u.length&&a===0&&l===0?i=!0:s();d<u.length;){let h=u[d],f=h.start.file,p=h.start.line,g=h.start.col;for(r.addSource(f.url,f.content).addMapping(l,f.url,p,g),l+=c[d].length,d++;d<u.length&&(h===u[d]||!u[d]);)l+=c[d].length,d++}}),r}spanOf(e,t){let r=this._lines[e];if(r){let i=t-nT(r.indent).length;for(let s=0;s<r.parts.length;s++){let o=r.parts[s];if(o.length>i)return r.srcSpans[s];i-=o.length}}return null}get sourceLines(){return this._lines.length&&this._lines[this._lines.length-1].parts.length===0?this._lines.slice(0,-1):this._lines}},Zb=class{_escapeDollarInStrings;lastIfCondition=null;constructor(e){this._escapeDollarInStrings=e}printLeadingComments(e,t){if(e.leadingComments!==void 0)for(let r of e.leadingComments)r instanceof Gm?t.print(e,`/*${r.toString()}*/`,r.trailingNewline):r.multiline?t.print(e,`/* ${r.text} */`,r.trailingNewline):r.text.split(`
`).forEach(i=>{t.println(e,`// ${i}`)})}visitExpressionStmt(e,t){return this.printLeadingComments(e,t),e.expr.visitExpression(this,t),t.println(e,";"),null}visitReturnStmt(e,t){return this.printLeadingComments(e,t),t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}visitIfStmt(e,t){this.printLeadingComments(e,t),t.print(e,"if ("),this.lastIfCondition=e.condition,e.condition.visitExpression(this,t),this.lastIfCondition=null,t.print(e,") {");let r=e.falseCase!=null&&e.falseCase.length>0;return e.trueCase.length<=1&&!r?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),r&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}visitInvokeFunctionExpr(e,t){let r=e.fn instanceof iu;return r&&t.print(e.fn,"("),e.fn.visitExpression(this,t),r&&t.print(e.fn,")"),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitTaggedTemplateLiteralExpr(e,t){return e.tag.visitExpression(this,t),e.template.visitExpression(this,t),null}visitTemplateLiteralExpr(e,t){t.print(e,"`");for(let r=0;r<e.elements.length;r++){e.elements[r].visitExpression(this,t);let i=r<e.expressions.length?e.expressions[r]:null;i!==null&&(t.print(i,"${"),i.visitExpression(this,t),t.print(i,"}"))}t.print(e,"`")}visitTemplateLiteralElementExpr(e,t){t.print(e,e.rawText)}visitWrappedNodeExpr(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}visitVoidExpr(e,t){t.print(e,"void "),e.expr.visitExpression(this,t)}visitReadVarExpr(e,t){return t.print(e,e.name),null}visitInstantiateExpr(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitLiteralExpr(e,t){let r=e.value;return typeof r=="string"?t.print(e,za(r,this._escapeDollarInStrings)):t.print(e,`${r}`),null}visitRegularExpressionLiteral(e,t){return t.print(e,`/${e.body}/${e.flags||""}`),null}visitLocalizedString(e,t){let r=e.serializeI18nHead();t.print(e,"$localize `"+r.raw);for(let i=1;i<e.messageParts.length;i++)t.print(e,"${"),e.expressions[i-1].visitExpression(this,t),t.print(e,`}${e.serializeI18nTemplatePart(i).raw}`);return t.print(e,"`"),null}visitConditionalExpr(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}visitDynamicImportExpr(e,t){t.print(e,`import(${e.url})`)}visitNotExpr(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}visitUnaryOperatorExpr(e,t){let r;switch(e.operator){case nh.Plus:r="+";break;case nh.Minus:r="-";break;default:throw new Error(`Unknown operator ${e.operator}`)}let i=e!==this.lastIfCondition;return i&&t.print(e,"("),t.print(e,r),e.expr.visitExpression(this,t),i&&t.print(e,")"),null}visitBinaryOperatorExpr(e,t){let r=DB.get(e.operator);if(!r)throw new Error(`Unknown operator ${e.operator}`);let i=e!==this.lastIfCondition;return i&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e,` ${r} `),e.rhs.visitExpression(this,t),i&&t.print(e,")"),null}visitReadPropExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}visitReadKeyExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}visitLiteralArrayExpr(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}visitLiteralMapExpr(e,t){return t.print(e,"{"),this.visitAllObjects(r=>{t.print(e,`${za(r.key,this._escapeDollarInStrings,r.quoted)}:`),r.value.visitExpression(this,t)},e.entries,t,","),t.print(e,"}"),null}visitCommaExpr(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}visitParenthesizedExpr(e,t){e.expr.visitExpression(this,t)}visitAllExpressions(e,t,r){this.visitAllObjects(i=>i.visitExpression(this,t),e,t,r)}visitAllObjects(e,t,r,i){let s=!1;for(let o=0;o<t.length;o++)o>0&&(r.lineLength()>80?(r.print(null,i,!0),s||(r.incIndent(),r.incIndent(),s=!0)):r.print(null,i,!1)),e(t[o]);s&&(r.decIndent(),r.decIndent())}visitAllStatements(e,t){e.forEach(r=>r.visitStatement(this,t))}};function za(n,e,t=!0){if(n==null)return null;let r=n.replace(CB,(...s)=>s[0]=="$"?e?"\\$":"$":s[0]==`
`?"\\n":s[0]=="\r"?"\\r":`\\${s[0]}`);return t||!xB.test(r)?`'${r}'`:r}function nT(n){let e="";for(let t=0;t<n;t++)e+=Qb;return e}function Kg(n,e){if(e===0)return bn(n);let t=[];for(let r=0;r<e;r++)t.push(Xh);return bn(n,void 0,t)}function SB(n,e){let t=za(e,!1,!1);return t!==e?`${n}[${t}]`:`${n}.${e}`}function IB(n){return TB("ngJitMode",n)}function TB(n,e){let t=new ru({name:n,moduleName:null}),r=new Fe(z.Identical,new Vc(t),N("undefined")),i=new Fe(z.Or,r,t,void 0,void 0);return new Fe(z.And,i,e)}function Xt(n){let e=new Oe(n);return{value:e,type:e}}function qa(n,e){let t=Ge(n.map(r=>r.value));return e?Ti([],t):t}function bE(n,e){return{expression:n,forwardRef:e}}function AB({expression:n,forwardRef:e}){switch(e){case 0:case 1:return n;case 2:return MB(n)}}function MB(n){return ee(w.forwardRef).callFn([Ti([],n)])}var Zm=(function(n){return n[n.Class=0]="Class",n[n.Function=1]="Function",n})(Zm||{});function ja(n){let e=ke("__ngFactoryType__"),t=null,r=iT(n)?e:new Fe(z.Or,e,n.type.value),i=null;n.deps!==null?n.deps!=="invalid"&&(i=new ih(r,rT(n.deps,n.target))):(t=ke(`\u0275${n.name}_BaseFactory`),i=t.callFn([r]));let s=[],o=null;function a(c){let l=ke("__ngConditionalFactory__");s.push(new qt(l.name,Hc,Lr));let d=i!==null?l.set(i).toStmt():ee(w.invalidFactory).callFn([]).toStmt();return s.push(Yg(e,[d],[l.set(c).toStmt()])),l}if(iT(n)){let c=rT(n.delegateDeps,n.target),l=new(n.delegateType===Zm.Class?ih:_r)(n.delegate,c);o=a(l)}else RB(n)?o=a(n.expression):o=i;if(o===null)s.push(ee(w.invalidFactory).callFn([]).toStmt());else if(t!==null){let c=ee(w.getInheritedFactory).callFn([n.type.value]),l=new Fe(z.Or,t,t.set(c));s.push(new _n(l.callFn([r])))}else s.push(new _n(o));let u=ko([new cn(e.name,Xh)],s,Lr,void 0,`${n.name}_Factory`);return t!==null&&(u=Ti([],[new qt(t.name),new _n(u)]).callFn([],void 0,!0)),{expression:u,statements:[],type:kB(n)}}function kB(n){let e=n.deps!==null&&n.deps!=="invalid"?OB(n.deps):ss;return bn(ee(w.FactoryDeclaration,[Kg(n.type.type,n.typeArgumentCount),e]))}function rT(n,e){return n.map((t,r)=>PB(t,e,r))}function PB(n,e,t){if(n.token===null)return ee(w.invalidFactoryDep).callFn([N(t)]);if(n.attributeNameType===null){let r=0|(n.self?2:0)|(n.skipSelf?4:0)|(n.host?1:0)|(n.optional?8:0)|(e===js.Pipe?16:0),i=r!==0||n.optional?N(r):null,s=[n.token];i&&s.push(i);let o=FB(e);return ee(o).callFn(s)}else return ee(w.injectAttribute).callFn([n.token])}function OB(n){let e=!1,t=n.map(r=>{let i=NB(r);return i!==null?(e=!0,i):N(null)});return e?bn(Ge(t)):ss}function NB(n){let e=[];return n.attributeNameType!==null&&e.push({key:"attribute",value:n.attributeNameType,quoted:!1}),n.optional&&e.push({key:"optional",value:N(!0),quoted:!1}),n.host&&e.push({key:"host",value:N(!0),quoted:!1}),n.self&&e.push({key:"self",value:N(!0),quoted:!1}),n.skipSelf&&e.push({key:"skipSelf",value:N(!0),quoted:!1}),e.length>0?Qn(e):null}function iT(n){return n.delegateType!==void 0}function RB(n){return n.expression!==void 0}function FB(n){switch(n){case js.Component:case js.Directive:case js.Pipe:return w.directiveInject;case js.NgModule:case js.Injectable:default:return w.inject}}var au=class{start;end;constructor(e,t){this.start=e,this.end=t}toAbsolute(e){return new Br(e+this.start,e+this.end)}},mt=class{span;sourceSpan;constructor(e,t){this.span=e,this.sourceSpan=t}toString(){return"AST"}},uh=class extends mt{nameSpan;constructor(e,t,r){super(e,t),this.nameSpan=r}},zn=class extends mt{visit(e,t=null){}},Ai=class extends mt{visit(e,t=null){return e.visitImplicitReceiver(this,t)}},Po=class extends Ai{visit(e,t=null){return e.visitThisReceiver?.(this,t)}},zc=class extends mt{expressions;constructor(e,t,r){super(e,t),this.expressions=r}visit(e,t=null){return e.visitChain(this,t)}},Jm=class extends mt{condition;trueExp;falseExp;constructor(e,t,r,i,s){super(e,t),this.condition=r,this.trueExp=i,this.falseExp=s}visit(e,t=null){return e.visitConditional(this,t)}},ns=class extends uh{receiver;name;constructor(e,t,r,i,s){super(e,t,r),this.receiver=i,this.name=s}visit(e,t=null){return e.visitPropertyRead(this,t)}},ch=class extends uh{receiver;name;constructor(e,t,r,i,s){super(e,t,r),this.receiver=i,this.name=s}visit(e,t=null){return e.visitSafePropertyRead(this,t)}},uu=class extends mt{receiver;key;constructor(e,t,r,i){super(e,t),this.receiver=r,this.key=i}visit(e,t=null){return e.visitKeyedRead(this,t)}},lh=class extends mt{receiver;key;constructor(e,t,r,i){super(e,t),this.receiver=r,this.key=i}visit(e,t=null){return e.visitSafeKeyedRead(this,t)}},Nm=(function(n){return n[n.ReferencedByName=0]="ReferencedByName",n[n.ReferencedDirectly=1]="ReferencedDirectly",n})(Nm||{}),eg=class extends uh{exp;name;args;type;constructor(e,t,r,i,s,o,a){super(e,t,a),this.exp=r,this.name=i,this.args=s,this.type=o}visit(e,t=null){return e.visitPipe(this,t)}},mr=class extends mt{value;constructor(e,t,r){super(e,t),this.value=r}visit(e,t=null){return e.visitLiteralPrimitive(this,t)}},dh=class extends mt{expressions;constructor(e,t,r){super(e,t),this.expressions=r}visit(e,t=null){return e.visitLiteralArray(this,t)}},cu=class extends mt{keys;values;constructor(e,t,r,i){super(e,t),this.keys=r,this.values=i}visit(e,t=null){return e.visitLiteralMap(this,t)}},Jh=class extends mt{strings;expressions;constructor(e,t,r,i){super(e,t),this.strings=r,this.expressions=i}visit(e,t=null){return e.visitInterpolation(this,t)}},qn=class extends mt{operation;left;right;constructor(e,t,r,i,s){super(e,t),this.operation=r,this.left=i,this.right=s}visit(e,t=null){return e.visitBinary(this,t)}static isAssignmentOperation(e){return e==="="||e==="+="||e==="-="||e==="*="||e==="/="||e==="%="||e==="**="||e==="&&="||e==="||="||e==="??="}},Lc=class n extends qn{operator;expr;left=null;right=null;operation=null;static createMinus(e,t,r){return new n(e,t,"-",r,"-",new mr(e,t,0),r)}static createPlus(e,t,r){return new n(e,t,"+",r,"-",r,new mr(e,t,0))}constructor(e,t,r,i,s,o,a){super(e,t,s,o,a),this.operator=r,this.expr=i}visit(e,t=null){return e.visitUnary!==void 0?e.visitUnary(this,t):e.visitBinary(this,t)}},hh=class extends mt{expression;constructor(e,t,r){super(e,t),this.expression=r}visit(e,t=null){return e.visitPrefixNot(this,t)}},fh=class extends mt{expression;constructor(e,t,r){super(e,t),this.expression=r}visit(e,t=null){return e.visitTypeofExpression(this,t)}},ph=class extends mt{expression;constructor(e,t,r){super(e,t),this.expression=r}visit(e,t=null){return e.visitVoidExpression(this,t)}},mh=class extends mt{expression;constructor(e,t,r){super(e,t),this.expression=r}visit(e,t=null){return e.visitNonNullAssert(this,t)}},qc=class extends mt{receiver;args;argumentSpan;constructor(e,t,r,i,s){super(e,t),this.receiver=r,this.args=i,this.argumentSpan=s}visit(e,t=null){return e.visitCall(this,t)}},tg=class extends mt{receiver;args;argumentSpan;constructor(e,t,r,i,s){super(e,t),this.receiver=r,this.args=i,this.argumentSpan=s}visit(e,t=null){return e.visitSafeCall(this,t)}},gh=class extends mt{tag;template;constructor(e,t,r,i){super(e,t),this.tag=r,this.template=i}visit(e,t){return e.visitTaggedTemplateLiteral(this,t)}},vh=class extends mt{elements;expressions;constructor(e,t,r,i){super(e,t),this.elements=r,this.expressions=i}visit(e,t){return e.visitTemplateLiteral(this,t)}},ng=class extends mt{text;constructor(e,t,r){super(e,t),this.text=r}visit(e,t){return e.visitTemplateLiteralElement(this,t)}},yh=class extends mt{expression;constructor(e,t,r){super(e,t),this.expression=r}visit(e,t){return e.visitParenthesizedExpression(this,t)}},rg=class extends mt{body;flags;constructor(e,t,r,i){super(e,t),this.body=r,this.flags=i}visit(e,t){return e.visitRegularExpressionLiteral(this,t)}},Br=class{start;end;constructor(e,t){this.start=e,this.end=t}},gr=class extends mt{ast;source;location;errors;constructor(e,t,r,i,s){super(new au(0,t===null?0:t.length),new Br(i,t===null?i:i+t.length)),this.ast=e,this.source=t,this.location=r,this.errors=s}visit(e,t=null){return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}toString(){return`${this.source} in ${this.location}`}},_h=class{sourceSpan;key;value;constructor(e,t,r){this.sourceSpan=e,this.key=t,this.value=r}},Jb=class{sourceSpan;key;value;constructor(e,t,r){this.sourceSpan=e,this.key=t,this.value=r}},Wc=class{visit(e,t){e.visit(this,t)}visitUnary(e,t){this.visit(e.expr,t)}visitBinary(e,t){this.visit(e.left,t),this.visit(e.right,t)}visitChain(e,t){this.visitAll(e.expressions,t)}visitConditional(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}visitPipe(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}visitImplicitReceiver(e,t){}visitThisReceiver(e,t){}visitInterpolation(e,t){this.visitAll(e.expressions,t)}visitKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitLiteralArray(e,t){this.visitAll(e.expressions,t)}visitLiteralMap(e,t){this.visitAll(e.values,t)}visitLiteralPrimitive(e,t){}visitPrefixNot(e,t){this.visit(e.expression,t)}visitTypeofExpression(e,t){this.visit(e.expression,t)}visitVoidExpression(e,t){this.visit(e.expression,t)}visitNonNullAssert(e,t){this.visit(e.expression,t)}visitPropertyRead(e,t){this.visit(e.receiver,t)}visitSafePropertyRead(e,t){this.visit(e.receiver,t)}visitSafeKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitSafeCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitTemplateLiteral(e,t){for(let r=0;r<e.elements.length;r++){this.visit(e.elements[r],t);let i=r<e.expressions.length?e.expressions[r]:null;i!==null&&this.visit(i,t)}}visitTemplateLiteralElement(e,t){}visitTaggedTemplateLiteral(e,t){this.visit(e.tag,t),this.visit(e.template,t)}visitParenthesizedExpression(e,t){this.visit(e.expression,t)}visitRegularExpressionLiteral(e,t){}visitAll(e,t){for(let r of e)this.visit(r,t)}},kc=class{name;expression;type;sourceSpan;keySpan;valueSpan;isLiteral;isLegacyAnimation;isAnimation;constructor(e,t,r,i,s,o){this.name=e,this.expression=t,this.type=r,this.sourceSpan=i,this.keySpan=s,this.valueSpan=o,this.isLiteral=this.type===Ji.LITERAL_ATTR,this.isLegacyAnimation=this.type===Ji.LEGACY_ANIMATION,this.isAnimation=this.type===Ji.ANIMATION}},Ji=(function(n){return n[n.DEFAULT=0]="DEFAULT",n[n.LITERAL_ATTR=1]="LITERAL_ATTR",n[n.LEGACY_ANIMATION=2]="LEGACY_ANIMATION",n[n.TWO_WAY=3]="TWO_WAY",n[n.ANIMATION=4]="ANIMATION",n})(Ji||{}),Yn=(function(n){return n[n.Regular=0]="Regular",n[n.LegacyAnimation=1]="LegacyAnimation",n[n.TwoWay=2]="TwoWay",n[n.Animation=3]="Animation",n})(Yn||{}),ig=class{name;targetOrPhase;type;handler;sourceSpan;handlerSpan;keySpan;constructor(e,t,r,i,s,o,a){this.name=e,this.targetOrPhase=t,this.type=r,this.handler=i,this.sourceSpan=s,this.handlerSpan=o,this.keySpan=a}},ew=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,t,r,i,s){this.name=e,this.value=t,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s}},$e=(function(n){return n[n.Property=0]="Property",n[n.Attribute=1]="Attribute",n[n.Class=2]="Class",n[n.Style=3]="Style",n[n.LegacyAnimation=4]="LegacyAnimation",n[n.TwoWay=5]="TwoWay",n[n.Animation=6]="Animation",n})($e||{}),sg=class{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;constructor(e,t,r,i,s,o,a,u){this.name=e,this.type=t,this.securityContext=r,this.value=i,this.unit=s,this.sourceSpan=o,this.keySpan=a,this.valueSpan=u}},es=(function(n){return n[n.RAW_TEXT=0]="RAW_TEXT",n[n.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",n[n.PARSABLE_DATA=2]="PARSABLE_DATA",n})(es||{});function Mi(n,e=!0){if(n[0]!=":")return[null,n];let t=n.indexOf(":",1);if(t===-1){if(e)throw new Error(`Unsupported format "${n}" expecting ":namespace:name"`);return[null,n]}return[n.slice(1,t),n.slice(t+1)]}function sT(n){return Mi(n)[1]==="ng-container"}function tw(n){return Mi(n)[1]==="ng-content"}function LB(n){return Mi(n)[1]==="ng-template"}function nw(n){return n===null?null:Mi(n)[0]}function Rm(n,e){return n?`:${n}:${e}`:e}var Qg=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){throw new Error("visit() not implemented for Comment")}},Wa=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){return e.visitText(this)}},Gc=class{value;sourceSpan;i18n;constructor(e,t,r){this.value=e,this.sourceSpan=t,this.i18n=r}visit(e){return e.visitBoundText(this)}},Yc=class{name;value;sourceSpan;keySpan;valueSpan;i18n;constructor(e,t,r,i,s,o){this.name=e,this.value=t,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s,this.i18n=o}visit(e){return e.visitTextAttribute(this)}},rw=class n{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;i18n;constructor(e,t,r,i,s,o,a,u,c){this.name=e,this.type=t,this.securityContext=r,this.value=i,this.unit=s,this.sourceSpan=o,this.keySpan=a,this.valueSpan=u,this.i18n=c}static fromBoundElementProperty(e,t){if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound attributes but was not for ${e.name}: ${e.sourceSpan}`);return new n(e.name,e.type,e.securityContext,e.value,e.unit,e.sourceSpan,e.keySpan,e.valueSpan,t)}visit(e){return e.visitBoundAttribute(this)}},iw=class n{name;type;handler;target;phase;sourceSpan;handlerSpan;keySpan;constructor(e,t,r,i,s,o,a,u){this.name=e,this.type=t,this.handler=r,this.target=i,this.phase=s,this.sourceSpan=o,this.handlerSpan=a,this.keySpan=u}static fromParsedEvent(e){let t=e.type===Yn.Regular?e.targetOrPhase:null,r=e.type===Yn.LegacyAnimation?e.targetOrPhase:null;if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound event but was not for ${e.name}: ${e.sourceSpan}`);return new n(e.name,e.type,e.handler,t,r,e.sourceSpan,e.handlerSpan,e.keySpan)}visit(e){return e.visitBoundEvent(this)}},us=class{name;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;isVoid;i18n;constructor(e,t,r,i,s,o,a,u,c,l,d,h,f){this.name=e,this.attributes=t,this.inputs=r,this.outputs=i,this.directives=s,this.children=o,this.references=a,this.isSelfClosing=u,this.sourceSpan=c,this.startSourceSpan=l,this.endSourceSpan=d,this.isVoid=h,this.i18n=f}visit(e){return e.visitElement(this)}},cs=class{nameSpan;sourceSpan;prefetchSpan;whenOrOnSourceSpan;hydrateSpan;constructor(e,t,r,i,s){this.nameSpan=e,this.sourceSpan=t,this.prefetchSpan=r,this.whenOrOnSourceSpan=i,this.hydrateSpan=s}visit(e){return e.visitDeferredTrigger(this)}},og=class extends cs{value;constructor(e,t,r,i,s){super(null,t,r,i,s),this.value=e}},sw=class extends cs{},ow=class extends cs{},aw=class extends cs{},ag=class extends cs{reference;constructor(e,t,r,i,s,o){super(t,r,i,s,o),this.reference=e}},uw=class extends cs{delay;constructor(e,t,r,i,s,o){super(t,r,i,s,o),this.delay=e}},ug=class extends cs{reference;constructor(e,t,r,i,s,o){super(t,r,i,s,o),this.reference=e}},bh=class extends cs{reference;options;constructor(e,t,r,i,s,o,a){super(r,i,s,o,a),this.reference=e,this.options=t}},ci=class{nameSpan;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,r,i){this.nameSpan=e,this.sourceSpan=t,this.startSourceSpan=r,this.endSourceSpan=i}},wh=class extends ci{children;minimumTime;i18n;constructor(e,t,r,i,s,o,a){super(r,i,s,o),this.children=e,this.minimumTime=t,this.i18n=a}visit(e){return e.visitDeferredBlockPlaceholder(this)}},Eh=class extends ci{children;afterTime;minimumTime;i18n;constructor(e,t,r,i,s,o,a,u){super(i,s,o,a),this.children=e,this.afterTime=t,this.minimumTime=r,this.i18n=u}visit(e){return e.visitDeferredBlockLoading(this)}},Ch=class extends ci{children;i18n;constructor(e,t,r,i,s,o){super(t,r,i,s),this.children=e,this.i18n=o}visit(e){return e.visitDeferredBlockError(this)}},lu=class extends ci{children;placeholder;loading;error;mainBlockSpan;i18n;triggers;prefetchTriggers;hydrateTriggers;definedTriggers;definedPrefetchTriggers;definedHydrateTriggers;constructor(e,t,r,i,s,o,a,u,c,l,d,h,f){super(u,c,d,h),this.children=e,this.placeholder=s,this.loading=o,this.error=a,this.mainBlockSpan=l,this.i18n=f,this.triggers=t,this.prefetchTriggers=r,this.hydrateTriggers=i,this.definedTriggers=Object.keys(t),this.definedPrefetchTriggers=Object.keys(r),this.definedHydrateTriggers=Object.keys(i)}visit(e){return e.visitDeferredBlock(this)}visitAll(e){this.visitTriggers(this.definedHydrateTriggers,this.hydrateTriggers,e),this.visitTriggers(this.definedTriggers,this.triggers,e),this.visitTriggers(this.definedPrefetchTriggers,this.prefetchTriggers,e),Cb(e,this.children);let t=[this.placeholder,this.loading,this.error].filter(r=>r!==null);Cb(e,t)}visitTriggers(e,t,r){Cb(r,e.map(i=>t[i]))}},cg=class extends ci{expression;cases;unknownBlocks;constructor(e,t,r,i,s,o,a){super(a,i,s,o),this.expression=e,this.cases=t,this.unknownBlocks=r}visit(e){return e.visitSwitchBlock(this)}},xh=class extends ci{expression;children;i18n;constructor(e,t,r,i,s,o,a){super(o,r,i,s),this.expression=e,this.children=t,this.i18n=a}visit(e){return e.visitSwitchBlockCase(this)}},Kc=class extends ci{item;expression;trackBy;trackKeywordSpan;contextVariables;children;empty;mainBlockSpan;i18n;constructor(e,t,r,i,s,o,a,u,c,l,d,h,f){super(h,u,l,d),this.item=e,this.expression=t,this.trackBy=r,this.trackKeywordSpan=i,this.contextVariables=s,this.children=o,this.empty=a,this.mainBlockSpan=c,this.i18n=f}visit(e){return e.visitForLoopBlock(this)}},Dh=class extends ci{children;i18n;constructor(e,t,r,i,s,o){super(s,t,r,i),this.children=e,this.i18n=o}visit(e){return e.visitForLoopBlockEmpty(this)}},lg=class extends ci{branches;constructor(e,t,r,i,s){super(s,t,r,i),this.branches=e}visit(e){return e.visitIfBlock(this)}},Qa=class extends ci{expression;children;expressionAlias;i18n;constructor(e,t,r,i,s,o,a,u){super(a,i,s,o),this.expression=e,this.children=t,this.expressionAlias=r,this.i18n=u}visit(e){return e.visitIfBlockBranch(this)}},dg=class{name;sourceSpan;nameSpan;constructor(e,t,r){this.name=e,this.sourceSpan=t,this.nameSpan=r}visit(e){return e.visitUnknownBlock(this)}},wE=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,t,r,i,s){this.name=e,this.value=t,this.sourceSpan=r,this.nameSpan=i,this.valueSpan=s}visit(e){return e.visitLetDeclaration(this)}},Xd=class{componentName;tagName;fullName;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,t,r,i,s,o,a,u,c,l,d,h,f,p){this.componentName=e,this.tagName=t,this.fullName=r,this.attributes=i,this.inputs=s,this.outputs=o,this.directives=a,this.children=u,this.references=c,this.isSelfClosing=l,this.sourceSpan=d,this.startSourceSpan=h,this.endSourceSpan=f,this.i18n=p}visit(e){return e.visitComponent(this)}},HA=class{name;attributes;inputs;outputs;references;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,t,r,i,s,o,a,u,c){this.name=e,this.attributes=t,this.inputs=r,this.outputs=i,this.references=s,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=u,this.i18n=c}visit(e){return e.visitDirective(this)}},Vr=class{tagName;attributes;inputs;outputs;directives;templateAttrs;children;references;variables;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,t,r,i,s,o,a,u,c,l,d,h,f,p){this.tagName=e,this.attributes=t,this.inputs=r,this.outputs=i,this.directives=s,this.templateAttrs=o,this.children=a,this.references=u,this.variables=c,this.isSelfClosing=l,this.sourceSpan=d,this.startSourceSpan=h,this.endSourceSpan=f,this.i18n=p}visit(e){return e.visitTemplate(this)}},Qc=class{selector;attributes;children;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;name="ng-content";constructor(e,t,r,i,s,o,a,u){this.selector=e,this.attributes=t,this.children=r,this.isSelfClosing=i,this.sourceSpan=s,this.startSourceSpan=o,this.endSourceSpan=a,this.i18n=u}visit(e){return e.visitContent(this)}},Oo=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,t,r,i,s){this.name=e,this.value=t,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s}visit(e){return e.visitVariable(this)}},Sh=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,t,r,i,s){this.name=e,this.value=t,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s}visit(e){return e.visitReference(this)}},zA=class{vars;placeholders;sourceSpan;i18n;constructor(e,t,r,i){this.vars=e,this.placeholders=t,this.sourceSpan=r,this.i18n=i}visit(e){return e.visitIcu(this)}},Ih=class{tagNames;bindings;listeners;sourceSpan;constructor(e,t,r,i){if(this.tagNames=e,this.bindings=t,this.listeners=r,this.sourceSpan=i,e.length===0)throw new Error("HostElement must have at least one tag name.")}visit(){throw new Error("HostElement cannot be visited")}};function Cb(n,e){let t=[];if(n.visit)for(let r of e)n.visit(r);else for(let r of e){let i=r.visit(n);i&&t.push(i)}return t}var Kn=class{nodes;placeholders;placeholderToMessage;meaning;description;customId;sources;id;legacyIds=[];messageString;constructor(e,t,r,i,s,o){this.nodes=e,this.placeholders=t,this.placeholderToMessage=r,this.meaning=i,this.description=s,this.customId=o,this.id=this.customId,this.messageString=BB(this.nodes),e.length?this.sources=[{filePath:e[0].sourceSpan.start.file.url,startLine:e[0].sourceSpan.start.line+1,startCol:e[0].sourceSpan.start.col+1,endLine:e[e.length-1].sourceSpan.end.line+1,endCol:e[0].sourceSpan.start.col+1}]:this.sources=[]}},Ld=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitText(this,t)}},qs=class{children;sourceSpan;constructor(e,t){this.children=e,this.sourceSpan=t}visit(e,t){return e.visitContainer(this,t)}},hg=class{expression;type;cases;sourceSpan;expressionPlaceholder;constructor(e,t,r,i,s){this.expression=e,this.type=t,this.cases=r,this.sourceSpan=i,this.expressionPlaceholder=s}visit(e,t){return e.visitIcu(this,t)}},No=class{tag;attrs;startName;closeName;children;isVoid;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,r,i,s,o,a,u,c){this.tag=e,this.attrs=t,this.startName=r,this.closeName=i,this.children=s,this.isVoid=o,this.sourceSpan=a,this.startSourceSpan=u,this.endSourceSpan=c}visit(e,t){return e.visitTagPlaceholder(this,t)}},Th=class{value;name;sourceSpan;constructor(e,t,r){this.value=e,this.name=t,this.sourceSpan=r}visit(e,t){return e.visitPlaceholder(this,t)}},Xc=class{value;name;sourceSpan;previousMessage;constructor(e,t,r){this.value=e,this.name=t,this.sourceSpan=r}visit(e,t){return e.visitIcuPlaceholder(this,t)}},Ro=class{name;parameters;startName;closeName;children;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,r,i,s,o,a,u){this.name=e,this.parameters=t,this.startName=r,this.closeName=i,this.children=s,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=u}visit(e,t){return e.visitBlockPlaceholder(this,t)}};function BB(n){let e=new cw;return n.map(r=>r.visit(e)).join("")}var cw=class{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){let t=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){let t=e.children.map(r=>r.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}visitPlaceholder(e){return`{$${e.name}}`}visitIcuPlaceholder(e){return`{$${e.name}}`}visitBlockPlaceholder(e){let t=e.children.map(r=>r.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}};var $B=class{visitTag(e){let t=this._serializeAttributes(e.attrs);if(e.children.length==0)return`<${e.name}${t}/>`;let r=e.children.map(i=>i.visit(this));return`<${e.name}${t}>${r.join("")}</${e.name}>`}visitText(e){return e.value}visitDeclaration(e){return`<?xml${this._serializeAttributes(e.attrs)} ?>`}_serializeAttributes(e){let t=Object.keys(e).map(r=>`${r}="${e[r]}"`).join(" ");return t.length>0?" "+t:""}visitDoctype(e){return`<!DOCTYPE ${e.rootTag} [
${e.dtd}
]>`}},Dse=new $B;function VB(n){return n.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}var qA="i18n",lw="i18n-",jB="VAR_";function WA(n){return n===qA||n.startsWith(lw)}function UB(n){return n.attrs.some(e=>WA(e.name))}function GA(n){return n.nodes[0]}function EE(n={},e){let t={};return n&&Object.keys(n).length&&Object.keys(n).forEach(r=>t[ef(r,e)]=n[r]),t}function ef(n,e=!0){let t=VB(n);if(!e)return t;let r=t.split("_");if(r.length===1)return n.toLowerCase();let i;/^\d+$/.test(r[r.length-1])&&(i=r.pop());let s=r.shift().toLowerCase();return r.length&&(s+=r.map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("")),i?`${s}_${i}`:s}var HB=/[-.]/,CE="_t",Ah="ctx",xE="rf";function YA(n,e){let t=null;return()=>(t||(n(new qt(CE,void 0,Xh)),t=ke(e)),t)}function Pc(n){return Array.isArray(n)?Ge(n.map(Pc)):N(n,Lr)}function oT(n,e){let t=Object.getOwnPropertyNames(n);return t.length===0?null:Qn(t.map(r=>{let i=n[r],s,o,a,u;if(typeof i=="string")s=r,a=r,o=i,u=Pc(o);else{a=r,s=i.classPropertyName,o=i.bindingPropertyName;let c=o!==s,l=i.transformFunction!==null,d=zd.None;if(i.isSignal&&(d|=zd.SignalBased),l&&(d|=zd.HasDecoratorInputTransform),e&&(c||l||d!==zd.None)){let h=[N(d),Pc(o)];(c||l)&&(h.push(Pc(s)),l&&h.push(i.transformFunction)),u=Ge(h)}else u=Pc(o)}return{key:a,quoted:HB.test(a),value:u}}))}var Fo=class{values=[];set(e,t){if(t){let r=this.values.find(i=>i.key===e);r?r.value=t:this.values.push({key:e,value:t,quoted:!1})}}toLiteralMap(){return Qn(this.values)}};function zB(n){let e=n instanceof us?n.name:"ng-template",t=qB(n),r=new $c,i=Mi(e)[1];return r.setElement(i),Object.getOwnPropertyNames(t).forEach(s=>{let o=Mi(s)[1],a=t[s];r.addAttribute(o,a),s.toLowerCase()==="class"&&a.trim().split(/\s+/).forEach(c=>r.addClassName(c))}),r}function qB(n){let e={};return n instanceof Vr&&n.tagName!=="ng-template"?n.templateAttrs.forEach(t=>e[t.name]=""):(n.attributes.forEach(t=>{WA(t.name)||(e[t.name]=t.value)}),n.inputs.forEach(t=>{(t.type===$e.Property||t.type===$e.TwoWay)&&(e[t.name]="")}),n.outputs.forEach(t=>{e[t.name]=""})),e}function aT(n,e){let t=null,r={name:n.name,type:n.type,typeArgumentCount:n.typeArgumentCount,deps:[],target:js.Injectable};if(n.useClass!==void 0){let a=n.useClass.expression.isEquivalent(n.type.value),u;n.deps!==void 0&&(u=n.deps),u!==void 0?t=ja(J(C({},r),{delegate:n.useClass.expression,delegateDeps:u,delegateType:Zm.Class})):a?t=ja(r):t={statements:[],expression:uT(n.type.value,n.useClass.expression,e)}}else n.useFactory!==void 0?n.deps!==void 0?t=ja(J(C({},r),{delegate:n.useFactory,delegateDeps:n.deps||[],delegateType:Zm.Function})):t={statements:[],expression:Ti([],n.useFactory.callFn([]))}:n.useValue!==void 0?t=ja(J(C({},r),{expression:n.useValue.expression})):n.useExisting!==void 0?t=ja(J(C({},r),{expression:ee(w.inject).callFn([n.useExisting.expression])})):t={statements:[],expression:uT(n.type.value,n.type.value,e)};let i=n.type.value,s=new Fo;return s.set("token",i),s.set("factory",t.expression),n.providedIn.expression.value!==null&&s.set("providedIn",AB(n.providedIn)),{expression:ee(w.\u0275\u0275defineInjectable).callFn([s.toLiteralMap()],void 0,!0),type:WB(n),statements:t.statements}}function WB(n){return new ai(ee(w.InjectableDeclaration,[Kg(n.type.type,n.typeArgumentCount)]))}function uT(n,e,t){if(n.node===e.node)return e.prop("\u0275fac");if(!t)return cT(e);let r=ee(w.resolveForwardRef).callFn([e]);return cT(r)}function cT(n){let e=new cn("__ngFactoryType__",Xh);return Ti([e],n.prop("\u0275fac").callFn([ke(e.name)]))}var on=0,GB=8,DE=9,Xa=10,KA=11,QA=12,SE=13,XA=32,dw=33,Mh=34,ZA=35,Xg=36,YB=37,fg=38,kh=39,$r=40,yn=41,lT=42,JA=43,vr=44,pg=45,Wd=46,ri=47,ts=58,Rr=59,Bc=60,Pn=61,ti=62,dT=63,IE=48,KB=55,eM=57,jo=65,QB=69,XB=70,ZB=88,ol=90,rs=91,Za=92,Hs=93,JB=94,Uo=95,du=97,e$=98,t$=101,TE=102,tM=110,nM=114,rM=116,iM=117,sM=118,oM=120,tf=122,Di=123,hT=124,Wn=125,aM=160,xc=64,hw=96;function Ph(n){return n>=DE&&n<=XA||n==aM}function xi(n){return IE<=n&&n<=eM}function Lo(n){return n>=du&&n<=tf||n>=jo&&n<=ol}function n$(n){return n>=du&&n<=TE||n>=jo&&n<=XB||xi(n)}function mg(n){return n===Xa||n===SE}function fT(n){return IE<=n&&n<=KB}function Zd(n){return n===kh||n===Mh||n===hw}var Oh=class n{file;offset;line;col;constructor(e,t,r,i){this.file=e,this.offset=t,this.line=r,this.col=i}toString(){return this.offset!=null?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(e){let t=this.file.content,r=t.length,i=this.offset,s=this.line,o=this.col;for(;i>0&&e<0;)if(i--,e++,t.charCodeAt(i)==Xa){s--;let u=t.substring(0,i-1).lastIndexOf(String.fromCharCode(Xa));o=u>0?i-u:i}else o--;for(;i<r&&e>0;){let a=t.charCodeAt(i);i++,e--,a==Xa?(s++,o=0):o++}return new n(this.file,i,s,o)}getContext(e,t){let r=this.file.content,i=this.offset;if(i!=null){i>r.length-1&&(i=r.length-1);let s=i,o=0,a=0;for(;o<e&&i>0&&(i--,o++,!(r[i]==`
`&&++a==t)););for(o=0,a=0;o<e&&s<r.length-1&&(s++,o++,!(r[s]==`
`&&++a==t)););return{before:r.substring(i,this.offset),after:r.substring(this.offset,s+1)}}return null}},gg=class{content;url;constructor(e,t){this.content=e,this.url=t}},ge=class{start;end;fullStart;details;constructor(e,t,r=e,i=null){this.start=e,this.end=t,this.fullStart=r,this.details=i}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}},To=(function(n){return n[n.WARNING=0]="WARNING",n[n.ERROR=1]="ERROR",n})(To||{}),ue=class extends Error{span;msg;level;relatedError;constructor(e,t,r=To.ERROR,i){super(t),this.span=e,this.msg=t,this.level=r,this.relatedError=i,Object.setPrototypeOf(this,new.target.prototype)}contextualMessage(){let e=this.span.start.getContext(100,3);return e?`${this.msg} ("${e.before}[${To[this.level]} ->]${e.after}")`:this.msg}toString(){let e=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${e}`}};function r$(n,e,t){let r=`in ${n} ${e} in ${t}`,i=new gg("",r);return new ge(new Oh(i,-1,-1,-1),new Oh(i,-1,-1,-1))}var i$=0;function s$(n){if(!n||!n.reference)return null;let e=n.reference;if(e.__anonymousType)return e.__anonymousType;if(e.__forward_ref__)return"__forward_ref__";let t=jA(e);return t.indexOf("(")>=0?(t=`anonymous_${i$++}`,e.__anonymousType=t):t=Ua(t),t}function Ua(n){return n.replace(/\W/g,"_")}var pT='(this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})',fw=class extends Zb{constructor(){super(!1)}visitWrappedNodeExpr(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitDeclareVarStmt(e,t){return t.print(e,`var ${e.name}`),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}visitTaggedTemplateLiteralExpr(e,t){let r=e.template.elements;return e.tag.visitExpression(this,t),t.print(e,`(${pT}(`),t.print(e,`[${r.map(i=>za(i.text,!1)).join(", ")}], `),t.print(e,`[${r.map(i=>za(i.rawText,!1)).join(", ")}])`),e.template.expressions.forEach(i=>{t.print(e,", "),i.visitExpression(this,t)}),t.print(e,")"),null}visitTemplateLiteralExpr(e,t){t.print(e,"`");for(let r=0;r<e.elements.length;r++){e.elements[r].visitExpression(this,t);let i=r<e.expressions.length?e.expressions[r]:null;i!==null&&(t.print(i,"${"),i.visitExpression(this,t),t.print(i,"}"))}t.print(e,"`")}visitTemplateLiteralElementExpr(e,t){return t.print(e,e.rawText),null}visitFunctionExpr(e,t){return t.print(e,`function${e.name?" "+e.name:""}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}visitArrowFunctionExpr(e,t){if(t.print(e,"("),this._visitParams(e.params,t),t.print(e,") =>"),Array.isArray(e.body))t.println(e,"{"),t.incIndent(),this.visitAllStatements(e.body,t),t.decIndent(),t.print(e,"}");else{let r=e.body instanceof as;r&&t.print(e,"("),e.body.visitExpression(this,t),r&&t.print(e,")")}return null}visitDeclareFunctionStmt(e,t){return t.print(e,`function ${e.name}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}visitLocalizedString(e,t){t.print(e,`$localize(${pT}(`);let r=[e.serializeI18nHead()];for(let i=1;i<e.messageParts.length;i++)r.push(e.serializeI18nTemplatePart(i));return t.print(e,`[${r.map(i=>za(i.cooked,!1)).join(", ")}], `),t.print(e,`[${r.map(i=>za(i.raw,!1)).join(", ")}])`),e.expressions.forEach(i=>{t.print(e,", "),i.visitExpression(this,t)}),t.print(e,")"),null}_visitParams(e,t){this.visitAllObjects(r=>t.print(null,r.name),e,t,",")}},bm;function o$(){if(bm===void 0){let n=Qd.trustedTypes;if(bm=null,n)try{bm=n.createPolicy("angular#unsafe-jit",{createScript:e=>e})}catch{}}return bm}function a$(n){return o$()?.createScript(n)||n}function mT(...n){if(!Qd.trustedTypes)return new Function(...n);let e=n.slice(0,-1).join(","),t=n[n.length-1],r=`(function anonymous(${e}
) { ${t}
})`,i=Qd.eval(a$(r));return i.bind===void 0?new Function(...n):(i.toString=()=>r,i.bind(Qd))}var pw=class{evaluateStatements(e,t,r,i){let s=new mw(r),o=Xb.createRoot();return t.length>0&&!u$(t[0])&&(t=[N("use strict").toStmt(),...t]),s.visitAllStatements(t,o),s.createReturnStmt(o),this.evaluateCode(e,o,s.getArgs(),i)}evaluateCode(e,t,r,i){let s=`"use strict";${t.toSource()}
//# sourceURL=${e}`,o=[],a=[];for(let c in r)a.push(r[c]),o.push(c);if(i){let c=mT(...o.concat("return null;")).toString(),l=c.slice(0,c.indexOf("return null;")).split(`
`).length-1;s+=`
${t.toSourceMapGenerator(e,l).toJsComment()}`}let u=mT(...o.concat(s));return this.executeFunction(u,a)}executeFunction(e,t){return e(...t)}},mw=class extends fw{refResolver;_evalArgNames=[];_evalArgValues=[];_evalExportedVars=[];constructor(e){super(),this.refResolver=e}createReturnStmt(e){new _n(new as(this._evalExportedVars.map(r=>new Uc(r,ke(r),!1)))).visitStatement(this,e)}getArgs(){let e={};for(let t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}visitExternalExpr(e,t){return this._emitReferenceToExternal(e,this.refResolver.resolveExternalReference(e.value),t),null}visitWrappedNodeExpr(e,t){return this._emitReferenceToExternal(e,e.node,t),null}visitDeclareVarStmt(e,t){return e.hasModifier(an.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareVarStmt(e,t)}visitDeclareFunctionStmt(e,t){return e.hasModifier(an.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareFunctionStmt(e,t)}_emitReferenceToExternal(e,t,r){let i=this._evalArgValues.indexOf(t);if(i===-1){i=this._evalArgValues.length,this._evalArgValues.push(t);let s=s$({reference:t})||"val";this._evalArgNames.push(`jit_${s}_${i}`)}r.print(e,this._evalArgNames[i])}};function u$(n){return n.isEquivalent(N("use strict").toStmt())}function gT(n){let e=new Fo;n.providers!==null&&e.set("providers",n.providers),n.imports.length>0&&e.set("imports",Ge(n.imports));let t=ee(w.defineInjector).callFn([e.toLiteralMap()],void 0,!0),r=c$(n);return{expression:t,type:r,statements:[]}}function c$(n){return new ai(ee(w.InjectorDeclaration,[new ai(n.type.type)]))}var gw=class{context;constructor(e){this.context=e}resolveExternalReference(e){if(e.moduleName!=="@angular/core")throw new Error(`Cannot resolve external reference to ${e.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(e.name))throw new Error(`No value provided for @angular/core symbol '${e.name}'.`);return this.context[e.name]}},vg=(function(n){return n[n.Inline=0]="Inline",n[n.SideEffect=1]="SideEffect",n[n.Omit=2]="Omit",n})(vg||{}),Ao=(function(n){return n[n.Global=0]="Global",n[n.Local=1]="Local",n})(Ao||{});function l$(n){let e=[],t=new Fo;if(t.set("type",n.type.value),n.kind===Ao.Global&&n.bootstrap.length>0&&t.set("bootstrap",qa(n.bootstrap,n.containsForwardDecls)),n.selectorScopeMode===vg.Inline)n.declarations.length>0&&t.set("declarations",qa(n.declarations,n.containsForwardDecls)),n.imports.length>0&&t.set("imports",qa(n.imports,n.containsForwardDecls)),n.exports.length>0&&t.set("exports",qa(n.exports,n.containsForwardDecls));else if(n.selectorScopeMode===vg.SideEffect){let s=f$(n);s!==null&&e.push(s)}n.schemas!==null&&n.schemas.length>0&&t.set("schemas",Ge(n.schemas.map(s=>s.value))),n.id!==null&&(t.set("id",n.id),e.push(ee(w.registerNgModuleType).callFn([n.type.value,n.id]).toStmt()));let r=ee(w.defineNgModule).callFn([t.toLiteralMap()],void 0,!0),i=h$(n);return{expression:r,type:i,statements:e}}function d$(n){let e=new Fo;return e.set("type",new Oe(n.type)),n.bootstrap!==void 0&&e.set("bootstrap",new Oe(n.bootstrap)),n.declarations!==void 0&&e.set("declarations",new Oe(n.declarations)),n.imports!==void 0&&e.set("imports",new Oe(n.imports)),n.exports!==void 0&&e.set("exports",new Oe(n.exports)),n.schemas!==void 0&&e.set("schemas",new Oe(n.schemas)),n.id!==void 0&&e.set("id",new Oe(n.id)),ee(w.defineNgModule).callFn([e.toLiteralMap()])}function h$(n){if(n.kind===Ao.Local)return new ai(n.type.value);let{type:e,declarations:t,exports:r,imports:i,includeImportTypes:s,publicDeclarationTypes:o}=n;return new ai(ee(w.NgModuleDeclaration,[new ai(e.type),o===null?xb(t):p$(o),s?xb(i):ss,xb(r)]))}function f$(n){let e=new Fo;if(n.kind===Ao.Global?n.declarations.length>0&&e.set("declarations",qa(n.declarations,n.containsForwardDecls)):n.declarationsExpression&&e.set("declarations",n.declarationsExpression),n.kind===Ao.Global?n.imports.length>0&&e.set("imports",qa(n.imports,n.containsForwardDecls)):n.importsExpression&&e.set("imports",n.importsExpression),n.kind===Ao.Global?n.exports.length>0&&e.set("exports",qa(n.exports,n.containsForwardDecls)):n.exportsExpression&&e.set("exports",n.exportsExpression),n.kind===Ao.Local&&n.bootstrapExpression&&e.set("bootstrap",n.bootstrapExpression),Object.keys(e.values).length===0)return null;let t=new _r(ee(w.setNgModuleScope),[n.type.value,e.toLiteralMap()]),r=IB(t),i=new Mo([],[r.toStmt()]);return new _r(i,[]).toStmt()}function xb(n){let e=n.map(t=>Zh(t.type));return n.length>0?bn(Ge(e)):ss}function p$(n){let e=n.map(t=>Zh(t));return n.length>0?bn(Ge(e)):ss}function vT(n){let e=[];e.push({key:"name",value:N(n.pipeName??n.name),quoted:!1}),e.push({key:"type",value:n.type.value,quoted:!1}),e.push({key:"pure",value:N(n.pure),quoted:!1}),n.isStandalone===!1&&e.push({key:"standalone",value:N(!1),quoted:!1});let t=ee(w.definePipe).callFn([Qn(e)],void 0,!0),r=m$(n);return{expression:t,type:r,statements:[]}}function m$(n){return new ai(ee(w.PipeDeclaration,[Kg(n.type.type,n.typeArgumentCount),new ai(new wn(n.pipeName)),new ai(new wn(n.isStandalone))]))}var Zc=(function(n){return n[n.Directive=0]="Directive",n[n.Pipe=1]="Pipe",n[n.NgModule=2]="NgModule",n})(Zc||{}),g$=new Set(["inherit","initial","revert","unset","alternate","alternate-reverse","normal","reverse","backwards","both","forwards","none","paused","running","ease","ease-in","ease-in-out","ease-out","linear","step-start","step-end","end","jump-both","jump-end","jump-none","jump-start","start"]),v$=["@media","@supports","@document","@layer","@container","@scope","@starting-style"],vw=class{shimCssText(e,t,r=""){let i=[];e=e.replace(O$,a=>{if(a.match(N$))i.push(a);else{let u=a.match(P$);i.push((u?.join("")??"")+`
`)}return ME}),e=this._insertDirectives(e);let s=this._scopeCssText(e,t,r),o=0;return s.replace(R$,()=>i[o++])}_insertDirectives(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}_scopeKeyframesRelatedCss(e,t){let r=new Set,i=wm(e,s=>this._scopeLocalKeyframeDeclarations(s,t,r));return wm(i,s=>this._scopeAnimationRule(s,t,r))}_scopeLocalKeyframeDeclarations(e,t,r){return J(C({},e),{selector:e.selector.replace(/(^@(?:-webkit-)?keyframes(?:\s+))(['"]?)(.+)\2(\s*)$/,(i,s,o,a,u)=>(r.add(bT(a,o)),`${s}${o}${t}_${a}${o}${u}`))})}_scopeAnimationKeyframe(e,t,r){return e.replace(/^(\s*)(['"]?)(.+?)\2(\s*)$/,(i,s,o,a,u)=>(a=`${r.has(bT(a,o))?t+"_":""}${a}`,`${s}${o}${a}${o}${u}`))}_animationDeclarationKeyframesRe=/(^|\s+|,)(?:(?:(['"])((?:\\\\|\\\2|(?!\2).)+)\2)|(-?[A-Za-z][\w\-]*))(?=[,\s]|$)/g;_scopeAnimationRule(e,t,r){let i=e.content.replace(/((?:^|\s+|;)(?:-webkit-)?animation\s*:\s*),*([^;]+)/g,(s,o,a)=>o+a.replace(this._animationDeclarationKeyframesRe,(u,c,l="",d,h)=>d?`${c}${this._scopeAnimationKeyframe(`${l}${d}${l}`,t,r)}`:g$.has(h)?u:`${c}${this._scopeAnimationKeyframe(h,t,r)}`));return i=i.replace(/((?:^|\s+|;)(?:-webkit-)?animation-name(?:\s*):(?:\s*))([^;]+)/g,(s,o,a)=>`${o}${a.split(",").map(u=>this._scopeAnimationKeyframe(u,t,r)).join(",")}`),J(C({},e),{content:i})}_insertPolyfillDirectivesInCssText(e){return e.replace(_$,function(...t){return t[2]+"{"})}_insertPolyfillRulesInCssText(e){return e.replace(b$,(...t)=>{let r=t[0].replace(t[1],"").replace(t[2],"");return t[4]+r})}_scopeCssText(e,t,r){let i=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeKeyframesRelatedCss(e,t),e=this._scopeSelectors(e,t,r)),e=e+`
`+i,e.trim()}_extractUnscopedRulesFromCssText(e){let t="",r;for(yT.lastIndex=0;(r=yT.exec(e))!==null;){let i=r[0].replace(r[2],"").replace(r[1],r[4]);t+=i+`

`}return t}_convertColonHost(e){return e.replace(x$,(t,r,i)=>{if(r){let s=[];for(let o of this._splitOnTopLevelCommas(r,!0)){let a=o.trim();if(!a)break;let u=Do+a.replace(yg,"")+i;s.push(u)}return s.join(",")}else return Do+i})}*_splitOnTopLevelCommas(e,t){let r=e.length,i=0,s=0;for(let o=0;o<r;o++){let a=e.charCodeAt(o);if(a===$r)i++;else if(a===yn){if(i--,i<0&&t){yield e.slice(s,o);return}}else a===vr&&i===0&&(yield e.slice(s,o),s=o+1)}yield e.slice(s)}_convertColonHostContext(e){let t=[];for(let r of this._splitOnTopLevelCommas(e,!1))t.push(this._convertColonHostContextInSelectorPart(r));return t.join(",")}_convertColonHostContextInSelectorPart(e){return e.replace(S$,(t,r)=>{let i=[[]],s=t.indexOf(Mc);for(;s!==-1;){let o=t.substring(s+Mc.length);if(!o||o[0]!=="("){t=o,s=t.indexOf(Mc);continue}let a=[],u=0;for(let l of this._splitOnTopLevelCommas(o.substring(1),!0)){u=u+l.length+1;let d=l.trim();d&&a.push(d)}let c=i.length;W$(i,a.length);for(let l=0;l<a.length;l++)for(let d=0;d<c;d++)i[d+l*c].push(a[l]);t=o.substring(u+1),s=t.indexOf(Mc)}return i.map(o=>q$(o,t,r)).join(", ")})}_convertShadowDOMSelectors(e){return T$.reduce((t,r)=>t.replace(r," "),e)}_scopeSelectors(e,t,r){return wm(e,i=>{let s=i.selector,o=i.content;return i.selector[0]!=="@"?s=this._scopeSelector({selector:s,scopeSelector:t,hostSelector:r,isParentSelector:!0}):v$.some(a=>i.selector.startsWith(a))?o=this._scopeSelectors(i.content,t,r):(i.selector.startsWith("@font-face")||i.selector.startsWith("@page"))&&(o=this._stripScopingSelectors(i.content)),new Nh(s,o)})}_stripScopingSelectors(e){return wm(e,t=>{let r=t.selector.replace(_T," ").replace(Db," ");return new Nh(r,t.content)})}_safeSelector;_shouldScopeIndicator;_scopeSelector({selector:e,scopeSelector:t,hostSelector:r,isParentSelector:i=!1}){let s=/ ?,(?!(?:[^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\))) ?/;return e.split(s).map(o=>o.split(_T)).map(o=>{let[a,...u]=o;return[(l=>this._selectorNeedsScoping(l,t)?this._applySelectorScope({selector:l,scopeSelector:t,hostSelector:r,isParentSelector:i}):l)(a),...u].join(" ")}).join(", ")}_selectorNeedsScoping(e,t){return!this._makeScopeMatcher(t).test(e)}_makeScopeMatcher(e){let t=/\[/g,r=/\]/g;return e=e.replace(t,"\\[").replace(r,"\\]"),new RegExp("^("+e+")"+A$,"m")}_applySimpleSelectorScope(e,t,r){if(Oc.lastIndex=0,Oc.test(e)){let i=`[${r}]`,s=e;for(;s.match(Db);)s=s.replace(Db,(o,a)=>a.replace(/([^:\)]*)(:*)(.*)/,(u,c,l,d)=>c+i+l+d));return s.replace(Oc,i)}return t+" "+e}_applySelectorScope({selector:e,scopeSelector:t,hostSelector:r,isParentSelector:i}){let s=/\[is=([^\]]*)\]/g;t=t.replace(s,(g,...v)=>v[0]);let o=`[${t}]`,a=g=>{let v=g.trim();if(!v)return g;if(g.includes(Do)){if(v=this._applySimpleSelectorScope(g,t,r),!g.match(I$)){let[y,E,M,T]=v.match(/([^:]*)(:*)([\s\S]*)/);v=E+o+M+T}}else{let y=g.replace(Oc,"");if(y.length>0){let E=y.match(/([^:]*)(:*)([\s\S]*)/);E&&(v=E[1]+o+E[2]+E[3])}}return v},u=g=>{let v="",y=[],E;for(;(E=Bd.exec(g))!==null;){let M=1,T=Bd.lastIndex;for(;T<g.length;){let R=g[T];if(T++,R==="("){M++;continue}if(R===")"){if(M--,M===0)break;continue}}y.push(`${E[0]}${g.slice(Bd.lastIndex,T)}`),Bd.lastIndex=T}return y.join("")===g?v=y.map(M=>{let[T]=M.match(Bd)??[],R=M.slice(T?.length,-1);R.includes(Do)&&(this._shouldScopeIndicator=!0);let U=this._scopeSelector({selector:R,scopeSelector:t,hostSelector:r});return`${T}${U})`}).join(""):(this._shouldScopeIndicator=this._shouldScopeIndicator||g.includes(Do),v=this._shouldScopeIndicator?a(g):g),v};i&&(this._safeSelector=new yw(e),e=this._safeSelector.content());let c="",l=0,d,h=/( |>|\+|~(?!=))(?!([^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\)))\s*/g,f=e.includes(Do);for((i||this._shouldScopeIndicator)&&(this._shouldScopeIndicator=!f);(d=h.exec(e))!==null;){let g=d[1],v=e.slice(l,d.index);if(v.match(/__esc-ph-(\d+)__/)&&e[d.index+1]?.match(/[a-fA-F\d]/))continue;let y=u(v);c+=`${y} ${g} `,l=h.lastIndex}let p=e.substring(l);return c+=u(p),this._safeSelector.restore(c)}_insertPolyfillHostInCssText(e){return e.replace(k$,Mc).replace(M$,yg)}},yw=class{placeholders=[];index=0;_content;constructor(e){e=this._escapeRegexMatches(e,/(\[[^\]]*\])/g),e=e.replace(/(\\.)/g,(t,r)=>{let i=`__esc-ph-${this.index}__`;return this.placeholders.push(r),this.index++,i}),this._content=e.replace(C$,(t,r,i)=>{let s=`__ph-${this.index}__`;return this.placeholders.push(`(${i})`),this.index++,r+s})}restore(e){return e.replace(/__(?:ph|esc-ph)-(\d+)__/g,(t,r)=>this.placeholders[+r])}content(){return this._content}_escapeRegexMatches(e,t){return e.replace(t,(r,i)=>{let s=`__ph-${this.index}__`;return this.placeholders.push(i),this.index++,s})}},y$="(:(where|is)\\()?",Bd=/:(where|is)\(/gi,_$=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,b$=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,yT=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,yg="-shadowcsshost",Mc="-shadowcsscontext",_w="[^)(]*",w$=String.raw`(?:\(${_w}\)|${_w})+?`,E$=String.raw`(?:\(${w$}\)|${_w})+?`,AE=String.raw`(?:\((${E$})\))`,C$=new RegExp(String.raw`(:nth-[-\w]+)`+AE,"g"),x$=new RegExp(yg+AE+"?([^,{]*)","gim"),D$=Mc+AE+"?([^{]*)",S$=new RegExp(`${y$}(${D$})`,"gim"),Do=yg+"-no-combinator",I$=new RegExp(`${Do}(?![^(]*\\))`,"g"),Db=/-shadowcsshost-no-combinator([^\s,]*)/,T$=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],_T=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,A$="([>\\s~+[.,{:][\\s\\S]*)?$",Oc=/-shadowcsshost/gim,M$=/:host/gim,k$=/:host-context/gim,P$=/\r?\n/g,O$=/\/\*[\s\S]*?\*\//g,N$=/\/\*\s*#\s*source(Mapping)?URL=/g,ME="%COMMENT%",R$=new RegExp(ME,"g"),Sb="%BLOCK%",F$=new RegExp(`(\\s*(?:${ME}\\s*)*)([^;\\{\\}]+?)(\\s*)((?:{%BLOCK%}?\\s*;?)|(?:\\s*;))`,"g"),L$=new Map([["{","}"]]),uM="%COMMA_IN_PLACEHOLDER%",cM="%SEMI_IN_PLACEHOLDER%",lM="%COLON_IN_PLACEHOLDER%",B$=new RegExp(uM,"g"),$$=new RegExp(cM,"g"),V$=new RegExp(lM,"g"),Nh=class{selector;content;constructor(e,t){this.selector=e,this.content=t}};function wm(n,e){let t=H$(n),r=j$(t,L$,Sb),i=0,s=r.escapedString.replace(F$,(...o)=>{let a=o[2],u="",c=o[4],l="";c&&c.startsWith("{"+Sb)&&(u=r.blocks[i++],c=c.substring(Sb.length+1),l="{");let d=e(new Nh(a,u));return`${o[1]}${d.selector}${o[3]}${l}${d.content}${c}`});return z$(s)}var bw=class{escapedString;blocks;constructor(e,t){this.escapedString=e,this.blocks=t}};function j$(n,e,t){let r=[],i=[],s=0,o=0,a=-1,u,c;for(let l=0;l<n.length;l++){let d=n[l];d==="\\"?l++:d===c?(s--,s===0&&(i.push(n.substring(a,l)),r.push(t),o=l,a=-1,u=c=void 0)):d===u?s++:s===0&&e.has(d)&&(u=d,c=e.get(d),s=1,a=l+1,r.push(n.substring(o,a)))}return a!==-1?(i.push(n.substring(a)),r.push(t)):r.push(n.substring(o)),new bw(r.join(""),i)}var U$={";":cM,",":uM,":":lM};function H$(n){let e=n,t=null;for(let r=0;r<e.length;r++){let i=e[r];if(i==="\\")r++;else if(t!==null)if(i===t)t=null;else{let s=U$[i];s&&(e=`${e.substr(0,r)}${s}${e.substr(r+1)}`,r+=s.length-1)}else(i==="'"||i==='"')&&(t=i)}return e}function z$(n){let e=n.replace(B$,",");return e=e.replace($$,";"),e=e.replace(V$,":"),e}function bT(n,e){return e?n.replace(/((?:^|[^\\])(?:\\\\)*)\\(?=['"])/g,"$1"):n}function q$(n,e,t=""){let r=Do;Oc.lastIndex=0;let i=Oc.test(e);if(n.length===0)return r+e;let s=[n.pop()||""];for(;n.length>0;){let o=s.length,a=n.pop();for(let u=0;u<o;u++){let c=s[u];s[o*2+u]=c+" "+a,s[o+u]=a+" "+c,s[u]=a+c}}return s.map(o=>i?`${t}${o}${e}`:`${t}${o}${r}${e}, ${t}${o} ${r}${e}`).join(",")}function W$(n,e){let t=n.length;for(let r=1;r<e;r++)for(let i=0;i<t;i++)n[i+r*t]=n[i].slice(0)}var m=(function(n){return n[n.ListEnd=0]="ListEnd",n[n.Statement=1]="Statement",n[n.Variable=2]="Variable",n[n.ElementStart=3]="ElementStart",n[n.Element=4]="Element",n[n.Template=5]="Template",n[n.ElementEnd=6]="ElementEnd",n[n.ContainerStart=7]="ContainerStart",n[n.Container=8]="Container",n[n.ContainerEnd=9]="ContainerEnd",n[n.DisableBindings=10]="DisableBindings",n[n.ConditionalCreate=11]="ConditionalCreate",n[n.ConditionalBranchCreate=12]="ConditionalBranchCreate",n[n.Conditional=13]="Conditional",n[n.EnableBindings=14]="EnableBindings",n[n.Text=15]="Text",n[n.Listener=16]="Listener",n[n.InterpolateText=17]="InterpolateText",n[n.Binding=18]="Binding",n[n.Property=19]="Property",n[n.StyleProp=20]="StyleProp",n[n.ClassProp=21]="ClassProp",n[n.StyleMap=22]="StyleMap",n[n.ClassMap=23]="ClassMap",n[n.Advance=24]="Advance",n[n.Pipe=25]="Pipe",n[n.Attribute=26]="Attribute",n[n.ExtractedAttribute=27]="ExtractedAttribute",n[n.Defer=28]="Defer",n[n.DeferOn=29]="DeferOn",n[n.DeferWhen=30]="DeferWhen",n[n.I18nMessage=31]="I18nMessage",n[n.DomProperty=32]="DomProperty",n[n.Namespace=33]="Namespace",n[n.ProjectionDef=34]="ProjectionDef",n[n.Projection=35]="Projection",n[n.RepeaterCreate=36]="RepeaterCreate",n[n.Repeater=37]="Repeater",n[n.TwoWayProperty=38]="TwoWayProperty",n[n.TwoWayListener=39]="TwoWayListener",n[n.DeclareLet=40]="DeclareLet",n[n.StoreLet=41]="StoreLet",n[n.I18nStart=42]="I18nStart",n[n.I18n=43]="I18n",n[n.I18nEnd=44]="I18nEnd",n[n.I18nExpression=45]="I18nExpression",n[n.I18nApply=46]="I18nApply",n[n.IcuStart=47]="IcuStart",n[n.IcuEnd=48]="IcuEnd",n[n.IcuPlaceholder=49]="IcuPlaceholder",n[n.I18nContext=50]="I18nContext",n[n.I18nAttributes=51]="I18nAttributes",n[n.SourceLocation=52]="SourceLocation",n[n.Animation=53]="Animation",n[n.AnimationString=54]="AnimationString",n[n.AnimationBinding=55]="AnimationBinding",n[n.AnimationListener=56]="AnimationListener",n[n.Control=57]="Control",n[n.ControlCreate=58]="ControlCreate",n})(m||{}),ne=(function(n){return n[n.LexicalRead=0]="LexicalRead",n[n.Context=1]="Context",n[n.TrackContext=2]="TrackContext",n[n.ReadVariable=3]="ReadVariable",n[n.NextContext=4]="NextContext",n[n.Reference=5]="Reference",n[n.StoreLet=6]="StoreLet",n[n.ContextLetReference=7]="ContextLetReference",n[n.GetCurrentView=8]="GetCurrentView",n[n.RestoreView=9]="RestoreView",n[n.ResetView=10]="ResetView",n[n.PureFunctionExpr=11]="PureFunctionExpr",n[n.PureFunctionParameterExpr=12]="PureFunctionParameterExpr",n[n.PipeBinding=13]="PipeBinding",n[n.PipeBindingVariadic=14]="PipeBindingVariadic",n[n.SafePropertyRead=15]="SafePropertyRead",n[n.SafeKeyedRead=16]="SafeKeyedRead",n[n.SafeInvokeFunction=17]="SafeInvokeFunction",n[n.SafeTernaryExpr=18]="SafeTernaryExpr",n[n.EmptyExpr=19]="EmptyExpr",n[n.AssignTemporaryExpr=20]="AssignTemporaryExpr",n[n.ReadTemporaryExpr=21]="ReadTemporaryExpr",n[n.SlotLiteralExpr=22]="SlotLiteralExpr",n[n.ConditionalCase=23]="ConditionalCase",n[n.ConstCollected=24]="ConstCollected",n[n.TwoWayBindingSet=25]="TwoWayBindingSet",n})(ne||{}),si=(function(n){return n[n.None=0]="None",n[n.AlwaysInline=1]="AlwaysInline",n})(si||{}),un=(function(n){return n[n.Context=0]="Context",n[n.Identifier=1]="Identifier",n[n.SavedView=2]="SavedView",n[n.Alias=3]="Alias",n})(un||{}),Hr=(function(n){return n[n.Normal=0]="Normal",n[n.TemplateDefinitionBuilder=1]="TemplateDefinitionBuilder",n})(Hr||{}),Z=(function(n){return n[n.Attribute=0]="Attribute",n[n.ClassName=1]="ClassName",n[n.StyleProperty=2]="StyleProperty",n[n.Property=3]="Property",n[n.Template=4]="Template",n[n.I18n=5]="I18n",n[n.LegacyAnimation=6]="LegacyAnimation",n[n.TwoWayProperty=7]="TwoWayProperty",n[n.Animation=8]="Animation",n})(Z||{}),Rh=(function(n){return n[n.Creation=0]="Creation",n[n.Postproccessing=1]="Postproccessing",n})(Rh||{}),al=(function(n){return n[n.I18nText=0]="I18nText",n[n.I18nAttribute=1]="I18nAttribute",n})(al||{}),ht=(function(n){return n[n.None=0]="None",n[n.ElementTag=1]="ElementTag",n[n.TemplateTag=2]="TemplateTag",n[n.OpenTag=4]="OpenTag",n[n.CloseTag=8]="CloseTag",n[n.ExpressionIndex=16]="ExpressionIndex",n})(ht||{}),On=(function(n){return n[n.HTML=0]="HTML",n[n.SVG=1]="SVG",n[n.Math=2]="Math",n})(On||{}),rt=(function(n){return n[n.Idle=0]="Idle",n[n.Immediate=1]="Immediate",n[n.Timer=2]="Timer",n[n.Hover=3]="Hover",n[n.Interaction=4]="Interaction",n[n.Viewport=5]="Viewport",n[n.Never=6]="Never",n})(rt||{}),Ga=(function(n){return n[n.RootI18n=0]="RootI18n",n[n.Icu=1]="Icu",n[n.Attr=2]="Attr",n})(Ga||{}),yr=(function(n){return n[n.NgTemplate=0]="NgTemplate",n[n.Structural=1]="Structural",n[n.Block=2]="Block",n})(yr||{}),dM=Symbol("ConsumesSlot"),kE=Symbol("DependsOnSlotContext"),ul=Symbol("ConsumesVars"),Zg=Symbol("UsesVarOffset"),di={[dM]:!0,numSlotsUsed:1},br={[kE]:!0},Xn={[ul]:!0};function cl(n){return n[dM]===!0}function Fh(n){return n[kE]===!0}function Ib(n){return n[ul]===!0}function wT(n){return n[Zg]===!0}function li(n){return C({kind:m.Statement,statement:n},de)}function Io(n,e,t,r){return C({kind:m.Variable,xref:n,variable:e,initializer:t,flags:r},de)}var de={debugListId:null,prev:null,next:null};function G$(n,e,t){return C(C(C({kind:m.InterpolateText,target:n,interpolation:e,sourceSpan:t},br),Xn),de)}var Mt=class{strings;expressions;i18nPlaceholders;constructor(e,t,r){if(this.strings=e,this.expressions=t,this.i18nPlaceholders=r,r.length!==0&&r.length!==t.length)throw new Error(`Expected ${t.length} placeholders to match interpolation expression count, but got ${r.length}`)}};function hu(n,e,t,r,i,s,o,a,u,c,l){return C({kind:m.Binding,bindingKind:e,target:n,name:t,expression:r,unit:i,securityContext:s,isTextAttribute:o,isStructuralTemplateAttribute:a,templateKind:u,i18nContext:null,i18nMessage:c,sourceSpan:l},de)}function Y$(n,e,t,r,i,s,o,a,u,c){return C(C(C({kind:m.Property,target:n,name:e,expression:t,bindingKind:r,securityContext:i,sanitizer:null,isStructuralTemplateAttribute:s,templateKind:o,i18nContext:a,i18nMessage:u,sourceSpan:c},br),Xn),de)}function K$(n,e,t,r,i,s,o,a,u){return C(C(C({kind:m.TwoWayProperty,target:n,name:e,expression:t,securityContext:r,sanitizer:null,isStructuralTemplateAttribute:i,templateKind:s,i18nContext:o,i18nMessage:a,sourceSpan:u},br),Xn),de)}function Q$(n,e,t,r,i){return C(C(C({kind:m.StyleProp,target:n,name:e,expression:t,unit:r,sourceSpan:i},br),Xn),de)}function X$(n,e,t,r){return C(C(C({kind:m.ClassProp,target:n,name:e,expression:t,sourceSpan:r},br),Xn),de)}function Z$(n,e,t){return C(C(C({kind:m.StyleMap,target:n,expression:e,sourceSpan:t},br),Xn),de)}function J$(n,e,t){return C(C(C({kind:m.ClassMap,target:n,expression:e,sourceSpan:t},br),Xn),de)}function ET(n,e,t,r,i,s,o,a,u,c){return C(C(C({kind:m.Attribute,target:n,namespace:e,name:t,expression:r,securityContext:i,sanitizer:null,isTextAttribute:s,isStructuralTemplateAttribute:o,templateKind:a,i18nContext:null,i18nMessage:u,sourceSpan:c},br),Xn),de)}function eV(n,e){return C({kind:m.Advance,delta:n,sourceSpan:e},de)}function hM(n,e,t,r){return C(C(C({kind:m.Conditional,target:n,test:e,conditions:t,processed:null,sourceSpan:r,contextValue:null},de),br),Xn)}function tV(n,e,t,r){return C(C({kind:m.Repeater,target:n,targetSlot:e,collection:t,sourceSpan:r},de),br)}function CT(n,e,t,r,i,s,o){return C({kind:m.AnimationBinding,name:n,target:e,animationKind:t,expression:r,i18nMessage:null,securityContext:i,sanitizer:null,sourceSpan:s,animationBindingKind:o},de)}function nV(n,e,t,r){return C(C(C({kind:m.DeferWhen,target:n,expr:e,modifier:t,sourceSpan:r},de),br),Xn)}function fM(n,e,t,r,i,s,o,a,u,c,l){return C(C(C({kind:m.I18nExpression,context:n,target:e,i18nOwner:t,handle:r,expression:i,icuPlaceholder:s,i18nPlaceholder:o,resolutionTime:a,usage:u,name:c,sourceSpan:l},de),Xn),br)}function rV(n,e,t){return C({kind:m.I18nApply,owner:n,handle:e,sourceSpan:t},de)}function iV(n,e,t,r){return C(C(C({kind:m.StoreLet,target:n,declaredName:e,value:t,sourceSpan:r},br),Xn),de)}function sV(n){return C(C(C({kind:m.Control,target:n.target,expression:n.expression,bindingKind:n.bindingKind,securityContext:n.securityContext,sanitizer:null,isStructuralTemplateAttribute:n.isStructuralTemplateAttribute,templateKind:n.templateKind,i18nContext:n.i18nContext,i18nMessage:n.i18nMessage,sourceSpan:n.sourceSpan},br),Xn),de)}function ls(n){return n instanceof st}var st=class extends Je{constructor(e=null){super(null,e)}},vn=class n extends st{name;kind=ne.LexicalRead;constructor(e){super(),this.name=e}visitExpression(e,t){}isEquivalent(e){return this.name===e.name}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.name)}},_g=class n extends st{target;targetSlot;offset;kind=ne.Reference;constructor(e,t,r){super(),this.target=e,this.targetSlot=t,this.offset=r}visitExpression(){}isEquivalent(e){return e instanceof n&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.target,this.targetSlot,this.offset)}},Lh=class n extends st{target;value;sourceSpan;kind=ne.StoreLet;[ul]=!0;[kE]=!0;constructor(e,t,r){super(),this.target=e,this.value=t,this.sourceSpan=r}visitExpression(){}isEquivalent(e){return e instanceof n&&e.target===this.target&&e.value.isEquivalent(this.value)}isConstant(){return!1}transformInternalExpressions(e,t){this.value=Q(this.value,e,t)}clone(){return new n(this.target,this.value,this.sourceSpan)}},Bh=class n extends st{target;targetSlot;kind=ne.ContextLetReference;constructor(e,t){super(),this.target=e,this.targetSlot=t}visitExpression(){}isEquivalent(e){return e instanceof n&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.target,this.targetSlot)}},Bo=class n extends st{view;kind=ne.Context;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.view)}},ww=class n extends st{view;kind=ne.TrackContext;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n(this.view)}},bg=class n extends st{kind=ne.NextContext;steps=1;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof n&&e.steps===this.steps}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new n;return e.steps=this.steps,e}},Ew=class n extends st{kind=ne.GetCurrentView;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof n}isConstant(){return!1}transformInternalExpressions(){}clone(){return new n}},wg=class n extends st{view;kind=ne.RestoreView;constructor(e){super(),this.view=e}visitExpression(e,t){typeof this.view!="number"&&this.view.visitExpression(e,t)}isEquivalent(e){return!(e instanceof n)||typeof e.view!=typeof this.view?!1:typeof this.view=="number"?this.view===e.view:this.view.isEquivalent(e.view)}isConstant(){return!1}transformInternalExpressions(e,t){typeof this.view!="number"&&(this.view=Q(this.view,e,t))}clone(){return new n(this.view instanceof Je?this.view.clone():this.view)}},Cw=class n extends st{expr;kind=ne.ResetView;constructor(e){super(),this.expr=e}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof n&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=Q(this.expr,e,t)}clone(){return new n(this.expr.clone())}},Eg=class n extends st{target;value;kind=ne.TwoWayBindingSet;constructor(e,t){super(),this.target=e,this.value=t}visitExpression(e,t){this.target.visitExpression(e,t),this.value.visitExpression(e,t)}isEquivalent(e){return this.target.isEquivalent(e.target)&&this.value.isEquivalent(e.value)}isConstant(){return!1}transformInternalExpressions(e,t){this.target=Q(this.target,e,t),this.value=Q(this.value,e,t)}clone(){return new n(this.target,this.value)}},Ws=class n extends st{xref;kind=ne.ReadVariable;name=null;constructor(e){super(),this.xref=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.xref===this.xref}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new n(this.xref);return e.name=this.name,e}},fu=class n extends st{kind=ne.PureFunctionExpr;[ul]=!0;[Zg]=!0;varOffset=null;body;args;fn=null;constructor(e,t){super(),this.body=e,this.args=t}visitExpression(e,t){this.body?.visitExpression(e,t);for(let r of this.args)r.visitExpression(e,t)}isEquivalent(e){return!(e instanceof n)||e.args.length!==this.args.length?!1:e.body!==null&&this.body!==null&&e.body.isEquivalent(this.body)&&e.args.every((t,r)=>t.isEquivalent(this.args[r]))}isConstant(){return!1}transformInternalExpressions(e,t){this.body!==null?this.body=Q(this.body,e,t|He.InChildOperation):this.fn!==null&&(this.fn=Q(this.fn,e,t));for(let r=0;r<this.args.length;r++)this.args[r]=Q(this.args[r],e,t)}clone(){let e=new n(this.body?.clone()??null,this.args.map(t=>t.clone()));return e.fn=this.fn?.clone()??null,e.varOffset=this.varOffset,e}},Jc=class n extends st{index;kind=ne.PureFunctionParameterExpr;constructor(e){super(),this.index=e}visitExpression(){}isEquivalent(e){return e instanceof n&&e.index===this.index}isConstant(){return!0}transformInternalExpressions(){}clone(){return new n(this.index)}},pu=class n extends st{target;targetSlot;name;args;kind=ne.PipeBinding;[ul]=!0;[Zg]=!0;varOffset=null;constructor(e,t,r,i){super(),this.target=e,this.targetSlot=t,this.name=r,this.args=i}visitExpression(e,t){for(let r of this.args)r.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){for(let r=0;r<this.args.length;r++)this.args[r]=Q(this.args[r],e,t)}clone(){let e=new n(this.target,this.targetSlot,this.name,this.args.map(t=>t.clone()));return e.varOffset=this.varOffset,e}},$h=class n extends st{target;targetSlot;name;args;numArgs;kind=ne.PipeBindingVariadic;[ul]=!0;[Zg]=!0;varOffset=null;constructor(e,t,r,i,s){super(),this.target=e,this.targetSlot=t,this.name=r,this.args=i,this.numArgs=s}visitExpression(e,t){this.args.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.args=Q(this.args,e,t)}clone(){let e=new n(this.target,this.targetSlot,this.name,this.args.clone(),this.numArgs);return e.varOffset=this.varOffset,e}},el=class n extends st{receiver;name;kind=ne.SafePropertyRead;constructor(e,t){super(),this.receiver=e,this.name=t}get index(){return this.name}visitExpression(e,t){this.receiver.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=Q(this.receiver,e,t)}clone(){return new n(this.receiver.clone(),this.name)}},tl=class n extends st{receiver;index;kind=ne.SafeKeyedRead;constructor(e,t,r){super(r),this.receiver=e,this.index=t}visitExpression(e,t){this.receiver.visitExpression(e,t),this.index.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=Q(this.receiver,e,t),this.index=Q(this.index,e,t)}clone(){return new n(this.receiver.clone(),this.index.clone(),this.sourceSpan)}},mu=class n extends st{receiver;args;kind=ne.SafeInvokeFunction;constructor(e,t){super(),this.receiver=e,this.args=t}visitExpression(e,t){this.receiver.visitExpression(e,t);for(let r of this.args)r.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=Q(this.receiver,e,t);for(let r=0;r<this.args.length;r++)this.args[r]=Q(this.args[r],e,t)}clone(){return new n(this.receiver.clone(),this.args.map(e=>e.clone()))}},nl=class n extends st{guard;expr;kind=ne.SafeTernaryExpr;constructor(e,t){super(),this.guard=e,this.expr=t}visitExpression(e,t){this.guard.visitExpression(e,t),this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.guard=Q(this.guard,e,t),this.expr=Q(this.expr,e,t)}clone(){return new n(this.guard.clone(),this.expr.clone())}},Vh=class n extends st{kind=ne.EmptyExpr;visitExpression(e,t){}isEquivalent(e){return e instanceof n}isConstant(){return!0}clone(){return new n}transformInternalExpressions(){}},ds=class n extends st{expr;xref;kind=ne.AssignTemporaryExpr;name=null;constructor(e,t){super(),this.expr=e,this.xref=t}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=Q(this.expr,e,t)}clone(){let e=new n(this.expr.clone(),this.xref);return e.name=this.name,e}},$o=class n extends st{xref;kind=ne.ReadTemporaryExpr;name=null;constructor(e){super(),this.xref=e}visitExpression(e,t){}isEquivalent(){return this.xref===this.xref}isConstant(){return!1}transformInternalExpressions(e,t){}clone(){let e=new n(this.xref);return e.name=this.name,e}},Cg=class n extends st{slot;kind=ne.SlotLiteralExpr;constructor(e){super(),this.slot=e}visitExpression(e,t){}isEquivalent(e){return e instanceof n&&e.slot===this.slot}isConstant(){return!0}clone(){return new n(this.slot)}transformInternalExpressions(){}},xg=class n extends st{expr;target;targetSlot;alias;kind=ne.ConditionalCase;constructor(e,t,r,i=null){super(),this.expr=e,this.target=t,this.targetSlot=r,this.alias=i}visitExpression(e,t){this.expr!==null&&this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof n&&e.expr===this.expr}isConstant(){return!0}clone(){return new n(this.expr,this.target,this.targetSlot)}transformInternalExpressions(e,t){this.expr!==null&&(this.expr=Q(this.expr,e,t))}},jh=class n extends st{expr;kind=ne.ConstCollected;constructor(e){super(),this.expr=e}transformInternalExpressions(e,t){this.expr=e(this.expr,t)}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof n?this.expr.isEquivalent(e.expr):!1}isConstant(){return this.expr.isConstant()}clone(){return new n(this.expr)}};function ln(n,e){jt(n,(t,r)=>(e(t,r),t),He.None)}var He=(function(n){return n[n.None=0]="None",n[n.InChildOperation=1]="InChildOperation",n})(He||{});function Tb(n,e,t){for(let r=0;r<n.expressions.length;r++)n.expressions[r]=Q(n.expressions[r],e,t)}function jt(n,e,t){switch(n.kind){case m.StyleProp:case m.StyleMap:case m.ClassProp:case m.ClassMap:case m.AnimationString:case m.AnimationBinding:case m.Binding:n.expression instanceof Mt?Tb(n.expression,e,t):n.expression=Q(n.expression,e,t);break;case m.Property:case m.DomProperty:case m.Attribute:case m.Control:n.expression instanceof Mt?Tb(n.expression,e,t):n.expression=Q(n.expression,e,t),n.sanitizer=n.sanitizer&&Q(n.sanitizer,e,t);break;case m.TwoWayProperty:n.expression=Q(n.expression,e,t),n.sanitizer=n.sanitizer&&Q(n.sanitizer,e,t);break;case m.I18nExpression:n.expression=Q(n.expression,e,t);break;case m.InterpolateText:Tb(n.interpolation,e,t);break;case m.Statement:Dg(n.statement,e,t);break;case m.Variable:n.initializer=Q(n.initializer,e,t);break;case m.Conditional:for(let r of n.conditions)r.expr!==null&&(r.expr=Q(r.expr,e,t));n.processed!==null&&(n.processed=Q(n.processed,e,t)),n.contextValue!==null&&(n.contextValue=Q(n.contextValue,e,t));break;case m.Animation:case m.AnimationListener:case m.Listener:case m.TwoWayListener:for(let r of n.handlerOps)jt(r,e,t|He.InChildOperation);break;case m.ExtractedAttribute:n.expression=n.expression&&Q(n.expression,e,t),n.trustedValueFn=n.trustedValueFn&&Q(n.trustedValueFn,e,t);break;case m.RepeaterCreate:if(n.trackByOps===null)n.track=Q(n.track,e,t);else for(let r of n.trackByOps)jt(r,e,t|He.InChildOperation);n.trackByFn!==null&&(n.trackByFn=Q(n.trackByFn,e,t));break;case m.Repeater:n.collection=Q(n.collection,e,t);break;case m.Defer:n.loadingConfig!==null&&(n.loadingConfig=Q(n.loadingConfig,e,t)),n.placeholderConfig!==null&&(n.placeholderConfig=Q(n.placeholderConfig,e,t)),n.resolverFn!==null&&(n.resolverFn=Q(n.resolverFn,e,t));break;case m.I18nMessage:for(let[r,i]of n.params)n.params.set(r,Q(i,e,t));for(let[r,i]of n.postprocessingParams)n.postprocessingParams.set(r,Q(i,e,t));break;case m.DeferWhen:n.expr=Q(n.expr,e,t);break;case m.StoreLet:n.value=Q(n.value,e,t);break;case m.Advance:case m.Container:case m.ContainerEnd:case m.ContainerStart:case m.DeferOn:case m.DisableBindings:case m.Element:case m.ElementEnd:case m.ElementStart:case m.EnableBindings:case m.I18n:case m.I18nApply:case m.I18nContext:case m.I18nEnd:case m.I18nStart:case m.IcuEnd:case m.IcuStart:case m.Namespace:case m.Pipe:case m.Projection:case m.ProjectionDef:case m.Template:case m.Text:case m.I18nAttributes:case m.IcuPlaceholder:case m.DeclareLet:case m.SourceLocation:case m.ConditionalCreate:case m.ConditionalBranchCreate:case m.ControlCreate:break;default:throw new Error(`AssertionError: transformExpressionsInOp doesn't handle ${m[n.kind]}`)}}function Q(n,e,t){if(n instanceof st)n.transformInternalExpressions(e,t);else if(n instanceof Fe)n.lhs=Q(n.lhs,e,t),n.rhs=Q(n.rhs,e,t);else if(n instanceof su)n.expr=Q(n.expr,e,t);else if(n instanceof Ur)n.receiver=Q(n.receiver,e,t);else if(n instanceof Gs)n.receiver=Q(n.receiver,e,t),n.index=Q(n.index,e,t);else if(n instanceof _r){n.fn=Q(n.fn,e,t);for(let r=0;r<n.args.length;r++)n.args[r]=Q(n.args[r],e,t)}else if(n instanceof Ii)for(let r=0;r<n.entries.length;r++)n.entries[r]=Q(n.entries[r],e,t);else if(n instanceof as)for(let r=0;r<n.entries.length;r++)n.entries[r].value=Q(n.entries[r].value,e,t);else if(n instanceof os)n.condition=Q(n.condition,e,t),n.trueCase=Q(n.trueCase,e,t),n.falseCase!==null&&(n.falseCase=Q(n.falseCase,e,t));else if(n instanceof Vc)n.expr=Q(n.expr,e,t);else if(n instanceof zm)n.expr=Q(n.expr,e,t);else if(n instanceof Wm)for(let r=0;r<n.expressions.length;r++)n.expressions[r]=Q(n.expressions[r],e,t);else if(n instanceof oh)n.condition=Q(n.condition,e,t);else if(n instanceof rh)n.tag=Q(n.tag,e,t),n.template.expressions=n.template.expressions.map(r=>Q(r,e,t));else if(n instanceof iu)if(Array.isArray(n.body))for(let r=0;r<n.body.length;r++)Dg(n.body[r],e,t);else n.body=Q(n.body,e,t);else if(!(n instanceof Oe)){if(n instanceof sh)for(let r=0;r<n.expressions.length;r++)n.expressions[r]=Q(n.expressions[r],e,t);else if(n instanceof Si)n.expr=Q(n.expr,e,t);else if(!(n instanceof ui||n instanceof ru||n instanceof wn||n instanceof jc))throw new Error(`Unhandled expression kind: ${n.constructor.name}`)}return e(n,t)}function Dg(n,e,t){if(n instanceof Nn)n.expr=Q(n.expr,e,t);else if(n instanceof _n)n.value=Q(n.value,e,t);else if(n instanceof qt)n.value!==void 0&&(n.value=Q(n.value,e,t));else if(n instanceof Ym){n.condition=Q(n.condition,e,t);for(let r of n.trueCase)Dg(r,e,t);for(let r of n.falseCase)Dg(r,e,t)}else throw new Error(`Unhandled statement kind: ${n.constructor.name}`)}function pM(n){return n instanceof wn&&typeof n.value=="string"}var B=(()=>{class n{static nextListId=0;debugListId=n.nextListId++;head={kind:m.ListEnd,next:null,prev:null,debugListId:this.debugListId};tail={kind:m.ListEnd,next:null,prev:null,debugListId:this.debugListId};constructor(){this.head.next=this.tail,this.tail.prev=this.head}push(t){if(Array.isArray(t)){for(let i of t)this.push(i);return}n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=this.debugListId;let r=this.tail.prev;t.prev=r,r.next=t,t.next=this.tail,this.tail.prev=t}prepend(t){if(t.length===0)return;for(let s of t)n.assertIsNotEnd(s),n.assertIsUnowned(s),s.debugListId=this.debugListId;let r=this.head.next,i=this.head;for(let s of t)i.next=s,s.prev=i,i=s;i.next=r,r.prev=i}*[Symbol.iterator](){let t=this.head.next;for(;t!==this.tail;){n.assertIsOwned(t,this.debugListId);let r=t.next;yield t,t=r}}*reversed(){let t=this.tail.prev;for(;t!==this.head;){n.assertIsOwned(t,this.debugListId);let r=t.prev;yield t,t=r}}static replace(t,r){n.assertIsNotEnd(t),n.assertIsNotEnd(r),n.assertIsOwned(t),n.assertIsUnowned(r),r.debugListId=t.debugListId,t.prev!==null&&(t.prev.next=r,r.prev=t.prev),t.next!==null&&(t.next.prev=r,r.next=t.next),t.debugListId=null,t.prev=null,t.next=null}static replaceWithMany(t,r){if(r.length===0){n.remove(t);return}n.assertIsNotEnd(t),n.assertIsOwned(t);let i=t.debugListId;t.debugListId=null;for(let l of r)n.assertIsNotEnd(l),n.assertIsUnowned(l);let{prev:s,next:o}=t;t.prev=null,t.next=null;let a=s;for(let l of r)n.assertIsUnowned(l),l.debugListId=i,a.next=l,l.prev=a,l.next=null,a=l;let u=r[0],c=a;s!==null&&(s.next=u,u.prev=s),o!==null&&(o.prev=c,c.next=o)}static remove(t){n.assertIsNotEnd(t),n.assertIsOwned(t),t.prev.next=t.next,t.next.prev=t.prev,t.debugListId=null,t.prev=null,t.next=null}static insertBefore(t,r){if(Array.isArray(t)){for(let i of t)n.insertBefore(i,r);return}if(n.assertIsOwned(r),r.prev===null)throw new Error("AssertionError: illegal operation on list start");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=r.debugListId,t.prev=null,r.prev.next=t,t.prev=r.prev,t.next=r,r.prev=t}static insertAfter(t,r){if(n.assertIsOwned(r),r.next===null)throw new Error("AssertionError: illegal operation on list end");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=r.debugListId,r.next.prev=t,t.next=r.next,t.prev=r,r.next=t}static assertIsUnowned(t){if(t.debugListId!==null)throw new Error(`AssertionError: illegal operation on owned node: ${m[t.kind]}`)}static assertIsOwned(t,r){if(t.debugListId===null)throw new Error(`AssertionError: illegal operation on unowned node: ${m[t.kind]}`);if(r!==void 0&&t.debugListId!==r)throw new Error(`AssertionError: node belongs to the wrong list (expected ${r}, actual ${t.debugListId})`)}static assertIsNotEnd(t){if(t.kind===m.ListEnd)throw new Error("AssertionError: illegal operation on list head or tail")}}return n})(),En=class{slot=null},oV=new Set([m.Element,m.ElementStart,m.Container,m.ContainerStart,m.Template,m.RepeaterCreate,m.ConditionalCreate,m.ConditionalBranchCreate]);function Vo(n){return oV.has(n.kind)}function aV(n,e,t,r,i,s){return C(C({kind:m.ElementStart,xref:e,tag:n,handle:new En,attributes:null,localRefs:[],nonBindable:!1,namespace:t,i18nPlaceholder:r,startSourceSpan:i,wholeSourceSpan:s},di),de)}function mM(n,e,t,r,i,s,o,a){return C(C({kind:m.Template,xref:n,templateKind:e,attributes:null,tag:t,handle:new En,functionNameSuffix:r,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:i,i18nPlaceholder:s,startSourceSpan:o,wholeSourceSpan:a},di),de)}function gM(n,e,t,r,i,s,o,a){return C(C({kind:m.ConditionalCreate,xref:n,templateKind:e,attributes:null,tag:t,handle:new En,functionNameSuffix:r,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:i,i18nPlaceholder:s,startSourceSpan:o,wholeSourceSpan:a},di),de)}function vM(n,e,t,r,i,s,o,a){return C(C({kind:m.ConditionalBranchCreate,xref:n,templateKind:e,attributes:null,tag:t,handle:new En,functionNameSuffix:r,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:i,i18nPlaceholder:s,startSourceSpan:o,wholeSourceSpan:a},di),de)}function uV(n,e,t,r,i,s,o,a,u,c){return J(C(C(C({kind:m.RepeaterCreate,attributes:null,xref:n,handle:new En,emptyView:e,track:r,trackByFn:null,trackByOps:null,tag:t,emptyTag:s,emptyAttributes:null,functionNameSuffix:"For",namespace:On.HTML,nonBindable:!1,localRefs:[],decls:null,vars:null,varNames:i,usesComponentInstance:!1,i18nPlaceholder:o,emptyI18nPlaceholder:a,startSourceSpan:u,wholeSourceSpan:c},di),de),Xn),{numSlotsUsed:e===null?2:3})}function cV(n,e){return C({kind:m.ElementEnd,xref:n,sourceSpan:e},de)}function lV(n){return C({kind:m.DisableBindings,xref:n},de)}function dV(n){return C({kind:m.EnableBindings,xref:n},de)}function yM(n,e,t,r){return C(C({kind:m.Text,xref:n,handle:new En,initialValue:e,icuPlaceholder:t,sourceSpan:r},di),de)}function hV(n,e,t,r,i,s){return C({kind:m.AnimationString,name:n,target:e,animationKind:t,expression:r,i18nMessage:null,securityContext:i,sanitizer:null,sourceSpan:s},de)}function fV(n,e,t,r,i,s){let o=new B;return o.push(r),C({kind:m.Animation,name:n,target:e,animationKind:t,handlerOps:o,handlerFnName:null,i18nMessage:null,securityContext:i,sanitizer:null,sourceSpan:s},de)}function PE(n,e,t,r,i,s,o,a,u){let c=new B;return c.push(i),C({kind:m.Listener,target:n,targetSlot:e,tag:r,hostListener:a,name:t,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,isLegacyAnimationListener:s!==null,legacyAnimationPhase:s,eventTarget:o,sourceSpan:u},de)}function _M(n,e,t,r,i,s,o,a,u){let c=new B;return c.push(i),C({kind:m.AnimationListener,target:n,targetSlot:e,tag:r,hostListener:a,name:t,animationKind:s,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,eventTarget:o,sourceSpan:u},de)}function bM(n,e,t,r,i,s){let o=new B;return o.push(i),C({kind:m.TwoWayListener,target:n,targetSlot:e,tag:r,name:t,handlerOps:o,handlerFnName:null,sourceSpan:s},de)}function wM(n,e,t){return C(C({kind:m.Pipe,xref:n,handle:e,name:t},de),di)}function pV(n){return C({kind:m.Namespace,active:n},de)}function mV(n){return C({kind:m.ProjectionDef,def:n},de)}function gV(n,e,t,r,i){return J(C(C({kind:m.Projection,xref:n,handle:new En,selector:e,i18nPlaceholder:t,fallbackView:r,projectionSlotIndex:0,attributes:null,localRefs:[],sourceSpan:i},de),di),{numSlotsUsed:r===null?1:2})}function Nr(n,e,t,r,i,s,o,a){return C({kind:m.ExtractedAttribute,target:n,bindingKind:e,namespace:t,name:r,expression:i,i18nContext:s,i18nMessage:o,securityContext:a,trustedValueFn:null},de)}function vV(n,e,t,r,i,s){return J(C(C({kind:m.Defer,xref:n,handle:new En,mainView:e,mainSlot:t,loadingView:null,loadingSlot:null,loadingConfig:null,loadingMinimumTime:null,loadingAfterTime:null,placeholderView:null,placeholderSlot:null,placeholderConfig:null,placeholderMinimumTime:null,errorView:null,errorSlot:null,ownResolverFn:r,resolverFn:i,flags:null,sourceSpan:s},de),di),{numSlotsUsed:2})}function xo(n,e,t,r){return C({kind:m.DeferOn,defer:n,trigger:e,modifier:t,sourceSpan:r},de)}function yV(n,e,t){return C(C({kind:m.DeclareLet,xref:n,declaredName:e,sourceSpan:t,handle:new En},di),de)}function _V(n,e,t,r,i,s,o,a){return C({kind:m.I18nMessage,xref:n,i18nContext:e,i18nBlock:t,message:r,messagePlaceholder:i,params:s,postprocessingParams:o,needsPostprocessing:a,subMessages:[]},de)}function Jg(n,e,t,r){return C(C({kind:m.I18nStart,xref:n,handle:new En,root:t??n,message:e,messageIndex:null,subTemplateIndex:null,context:null,sourceSpan:r},de),di)}function e0(n,e){return C({kind:m.I18nEnd,xref:n,sourceSpan:e},de)}function bV(n,e,t,r){return C({kind:m.IcuStart,xref:n,message:e,messagePlaceholder:t,context:null,sourceSpan:r},de)}function wV(n){return C({kind:m.IcuEnd,xref:n},de)}function EV(n,e,t){return C({kind:m.IcuPlaceholder,xref:n,name:e,strings:t,expressionPlaceholders:[]},de)}function Ab(n,e,t,r,i){if(t===null&&n!==Ga.Attr)throw new Error("AssertionError: i18nBlock must be provided for non-attribute contexts.");return C({kind:m.I18nContext,contextKind:n,xref:e,i18nBlock:t,message:r,sourceSpan:i,params:new Map,postprocessingParams:new Map},de)}function EM(n,e,t){return C(C({kind:m.I18nAttributes,xref:n,handle:e,target:t,i18nAttributesConfig:null},de),di)}function CV(n,e){return C({kind:m.SourceLocation,templatePath:n,locations:e},de)}function xV(n){return C({kind:m.ControlCreate,sourceSpan:n},de)}function DV(n,e,t,r,i,s){return C(C({kind:m.DomProperty,name:n,expression:e,bindingKind:t,i18nContext:r,securityContext:i,sanitizer:null,sourceSpan:s},Xn),de)}var CM="CTX_REF_MARKER",W=(function(n){return n[n.Tmpl=0]="Tmpl",n[n.Host=1]="Host",n[n.Both=2]="Both",n})(W||{}),fr=(function(n){return n[n.Full=0]="Full",n[n.DomOnly=1]="DomOnly",n})(fr||{}),Sg=class{componentName;pool;compatibility;mode;constructor(e,t,r,i){this.componentName=e,this.pool=t,this.compatibility=r,this.mode=i}kind=W.Both;allocateXrefId(){return this.nextXrefId++}nextXrefId=0},Uh=class extends Sg{relativeContextFilePath;i18nUseExternalIds;deferMeta;allDeferrableDepsFn;relativeTemplatePath;enableDebugLocations;constructor(e,t,r,i,s,o,a,u,c,l){super(e,t,r,i),this.relativeContextFilePath=s,this.i18nUseExternalIds=o,this.deferMeta=a,this.allDeferrableDepsFn=u,this.relativeTemplatePath=c,this.enableDebugLocations=l,this.root=new oi(this,this.allocateXrefId(),null),this.views.set(this.root.xref,this.root)}kind=W.Tmpl;fnSuffix="Template";root;views=new Map;contentSelectors=null;allocateView(e){let t=new oi(this,this.allocateXrefId(),e);return this.views.set(t.xref,t),t}get units(){return this.views.values()}addConst(e,t){for(let i=0;i<this.consts.length;i++)if(this.consts[i].isEquivalent(e))return i;let r=this.consts.length;return this.consts.push(e),t&&this.constsInitializers.push(...t),r}consts=[];constsInitializers=[]},Ig=class{xref;constructor(e){this.xref=e}create=new B;update=new B;fnName=null;vars=null;*ops(){for(let e of this.create)if(yield e,e.kind===m.Listener||e.kind===m.Animation||e.kind===m.AnimationListener||e.kind===m.TwoWayListener)for(let t of e.handlerOps)yield t;else if(e.kind===m.RepeaterCreate&&e.trackByOps!==null)for(let t of e.trackByOps)yield t;for(let e of this.update)yield e}},oi=class extends Ig{job;parent;constructor(e,t,r){super(t),this.job=e,this.parent=r}contextVariables=new Map;aliases=new Set;decls=null},Tg=class extends Sg{constructor(e,t,r,i){super(e,t,r,i),this.root=new xw(this)}kind=W.Host;fnSuffix="HostBindings";root;get units(){return[this.root]}},xw=class extends Ig{job;constructor(e){super(0),this.job=e}attributes=null};function SV(n){for(let e of n.units)for(let t of e.ops())jt(t,IV,He.None)}function IV(n){if(n instanceof _r&&n.fn instanceof vn&&n.fn.name==="$any"){if(n.args.length!==1)throw new Error("The $any builtin function expects exactly one argument.");return n.args[0]}return n}function TV(n){let e=new Map;for(let t of n.units)for(let r of t.create)r.kind===m.I18nContext&&e.set(r.xref,r);for(let t of n.units)for(let r of t.update)r.kind===m.I18nExpression&&AV(e,r)&&B.insertAfter(rV(r.i18nOwner,r.handle,null),r)}function AV(n,e){if(e.next?.kind!==m.I18nExpression)return!0;let t=n.get(e.context),r=n.get(e.next.context);if(t===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the I18nExpressionOp's context");if(r===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the next I18nExpressionOp's context");return t.i18nBlock!==null?t.i18nBlock!==r.i18nBlock:e.i18nOwner!==e.next.i18nOwner}function MV(n){for(let e of n.units){let t=e.update.head,r=[],i=null;for(let s of e.create){if(s.kind===m.I18nStart)i={blockXref:s.xref,lastSlotConsumer:s.xref};else if(s.kind===m.I18nEnd){for(let o of r)o.target=i.lastSlotConsumer,B.insertBefore(o,t);r.length=0,i=null}if(cl(s))for(i!==null&&(i.lastSlotConsumer=s.xref);t.next!==null;){if(i!==null&&t.kind===m.I18nExpression&&t.usage===al.I18nText&&t.i18nOwner===i.blockXref){let a=t;t=t.next,B.remove(a),r.push(a);continue}let o=!1;if(Fh(t)&&t.target!==s.xref?o=!0:(t.kind===m.Statement||t.kind===m.Variable)&&ln(t,a=>{!o&&Fh(a)&&a.target!==s.xref&&(o=!0)}),o)break;t=t.next}}}}function kV(n){if(!(!n.enableDebugLocations||n.relativeTemplatePath===null))for(let e of n.units){let t=[];for(let r of e.create)if(r.kind===m.ElementStart||r.kind===m.Element){let i=r.startSourceSpan.start;t.push({targetSlot:r.handle,offset:i.offset,line:i.line,column:i.col})}t.length>0&&e.create.push(CV(n.relativeTemplatePath,t))}}function xM(n){let e=new Map;for(let t of n.create)cl(t)&&(e.set(t.xref,t),t.kind===m.RepeaterCreate&&t.emptyView!==null&&e.set(t.emptyView,t));return e}function PV(n){for(let e of n.units){let t=xM(e);for(let r of e.ops())switch(r.kind){case m.Attribute:OV(e,r,t);break;case m.Property:if(r.bindingKind!==Z.LegacyAnimation&&r.bindingKind!==Z.Animation){let i;r.i18nMessage!==null&&r.templateKind===null?i=Z.I18n:r.isStructuralTemplateAttribute?i=Z.Template:i=Z.Property,B.insertBefore(Nr(r.target,i,null,r.name,null,null,null,r.securityContext),$a(t,r.target))}break;case m.Control:B.insertBefore(Nr(r.target,Z.Property,null,"field",null,null,null,r.securityContext),$a(t,r.target));break;case m.TwoWayProperty:B.insertBefore(Nr(r.target,Z.TwoWayProperty,null,r.name,null,null,null,r.securityContext),$a(t,r.target));break;case m.StyleProp:case m.ClassProp:e.job.compatibility===Hr.TemplateDefinitionBuilder&&r.expression instanceof Vh&&B.insertBefore(Nr(r.target,Z.Property,null,r.name,null,null,null,it.STYLE),$a(t,r.target));break;case m.Listener:if(!r.isLegacyAnimationListener){let i=Nr(r.target,Z.Property,null,r.name,null,null,null,it.NONE);if(n.kind===W.Host){if(n.compatibility)break;e.create.push(i)}else B.insertBefore(i,$a(t,r.target))}break;case m.TwoWayListener:if(n.kind!==W.Host){let i=Nr(r.target,Z.Property,null,r.name,null,null,null,it.NONE);B.insertBefore(i,$a(t,r.target))}break}}}function $a(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function OV(n,e,t){if(e.expression instanceof Mt)return;let r=e.isTextAttribute||e.expression.isConstant();if(n.job.compatibility===Hr.TemplateDefinitionBuilder&&(r&&=e.isTextAttribute),r){let i=Nr(e.target,e.isStructuralTemplateAttribute?Z.Template:Z.Attribute,e.namespace,e.name,e.expression,e.i18nContext,e.i18nMessage,e.securityContext);if(n.job.kind===W.Host)n.create.push(i);else{let s=$a(t,e.target);B.insertBefore(i,s)}B.remove(e)}}var xT="aria-";function DM(n){return n.startsWith(xT)&&n.length>xT.length}function NV(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function RV(n){let e=new Map;for(let t of n.units)for(let r of t.create)Vo(r)&&e.set(r.xref,r);for(let t of n.units)for(let r of t.ops())if(r.kind===m.Binding)switch(r.bindingKind){case Z.Attribute:if(r.name==="ngNonBindable"){B.remove(r);let i=NV(e,r.target);i.nonBindable=!0}else if(r.name.startsWith("animate."))B.replace(r,CT(r.name,r.target,r.name==="animate.enter"?"enter":"leave",r.expression,r.securityContext,r.sourceSpan,0));else{let[i,s]=Mi(r.name);B.replace(r,ET(r.target,i,s,r.expression,r.securityContext,r.isTextAttribute,r.isStructuralTemplateAttribute,r.templateKind,r.i18nMessage,r.sourceSpan))}break;case Z.Animation:B.replace(r,CT(r.name,r.target,r.name==="animate.enter"?"enter":"leave",r.expression,r.securityContext,r.sourceSpan,1));break;case Z.Property:case Z.LegacyAnimation:n.mode===fr.DomOnly&&DM(r.name)?B.replace(r,ET(r.target,null,r.name,r.expression,r.securityContext,!1,r.isStructuralTemplateAttribute,r.templateKind,r.i18nMessage,r.sourceSpan)):n.kind===W.Host?B.replace(r,DV(r.name,r.expression,r.bindingKind,r.i18nContext,r.securityContext,r.sourceSpan)):r.name==="field"?B.replace(r,sV(r)):B.replace(r,Y$(r.target,r.name,r.expression,r.bindingKind,r.securityContext,r.isStructuralTemplateAttribute,r.templateKind,r.i18nContext,r.i18nMessage,r.sourceSpan));break;case Z.TwoWayProperty:if(!(r.expression instanceof Je))throw new Error(`Expected value of two-way property binding "${r.name}" to be an expression`);B.replace(r,K$(r.target,r.name,r.expression,r.securityContext,r.isStructuralTemplateAttribute,r.templateKind,r.i18nContext,r.i18nMessage,r.sourceSpan));break;case Z.I18n:case Z.ClassName:case Z.StyleProperty:throw new Error(`Unhandled binding of kind ${Z[r.bindingKind]}`)}}var DT=new Map([[w.ariaProperty,w.ariaProperty],[w.attribute,w.attribute],[w.classProp,w.classProp],[w.element,w.element],[w.elementContainer,w.elementContainer],[w.elementContainerEnd,w.elementContainerEnd],[w.elementContainerStart,w.elementContainerStart],[w.elementEnd,w.elementEnd],[w.elementStart,w.elementStart],[w.domProperty,w.domProperty],[w.i18nExp,w.i18nExp],[w.listener,w.listener],[w.listener,w.listener],[w.property,w.property],[w.styleProp,w.styleProp],[w.syntheticHostListener,w.syntheticHostListener],[w.syntheticHostProperty,w.syntheticHostProperty],[w.templateCreate,w.templateCreate],[w.twoWayProperty,w.twoWayProperty],[w.twoWayListener,w.twoWayListener],[w.declareLet,w.declareLet],[w.conditionalCreate,w.conditionalBranchCreate],[w.conditionalBranchCreate,w.conditionalBranchCreate],[w.domElement,w.domElement],[w.domElementStart,w.domElementStart],[w.domElementEnd,w.domElementEnd],[w.domElementContainer,w.domElementContainer],[w.domElementContainerStart,w.domElementContainerStart],[w.domElementContainerEnd,w.domElementContainerEnd],[w.domListener,w.domListener],[w.domTemplate,w.domTemplate],[w.animationEnter,w.animationEnter],[w.animationLeave,w.animationLeave],[w.animationEnterListener,w.animationEnterListener],[w.animationLeaveListener,w.animationLeaveListener]]),FV=256;function LV(n){for(let e of n.units)ST(e.create),ST(e.update)}function ST(n){let e=null;for(let t of n){if(t.kind!==m.Statement||!(t.statement instanceof Nn)){e=null;continue}if(!(t.statement.expr instanceof _r)||!(t.statement.expr.fn instanceof ru)){e=null;continue}let r=t.statement.expr.fn.value;if(!DT.has(r)){e=null;continue}if(e!==null&&DT.get(e.instruction)===r&&e.length<FV){let i=e.expression.callFn(t.statement.expr.args,t.statement.expr.sourceSpan,t.statement.expr.pure);e.expression=i,e.op.statement=i.toStmt(),e.length++,B.remove(t)}else e={op:t,instruction:r,expression:t.statement.expr,length:1}}}function BV(n){for(let e of n.units)for(let t of e.update)(t.kind===m.Attribute||t.kind===m.StyleProp||t.kind==m.StyleMap||t.kind===m.ClassMap)&&t.expression instanceof Mt&&t.expression.strings.length===2&&t.expression.strings.every(i=>i==="")&&(t.expression=t.expression.expressions[0])}function $V(n){for(let e of n.units)for(let t of e.ops()){if(t.kind!==m.Conditional)continue;let r,i=t.conditions.findIndex(a=>a.expr===null);if(i>=0){let a=t.conditions.splice(i,1)[0].targetSlot;r=new Cg(a)}else r=N(-1);let s=t.test==null?null:new ds(t.test,n.allocateXrefId()),o=null;for(let a=t.conditions.length-1;a>=0;a--){let u=t.conditions[a];if(u.expr!==null){if(s!==null){let c=a===0?s:new $o(s.xref);u.expr=new Fe(z.Identical,c,u.expr)}else u.alias!==null&&(o??=n.allocateXrefId(),u.expr=new ds(u.expr,o),t.contextValue=new $o(o));r=new os(u.expr,new Cg(u.targetSlot),r)}}t.processed=r,t.conditions=[]}}var VV=new Map([["&&",z.And],[">",z.Bigger],[">=",z.BiggerEquals],["|",z.BitwiseOr],["&",z.BitwiseAnd],["/",z.Divide],["=",z.Assign],["==",z.Equals],["===",z.Identical],["<",z.Lower],["<=",z.LowerEquals],["-",z.Minus],["%",z.Modulo],["**",z.Exponentiation],["*",z.Multiply],["!=",z.NotEquals],["!==",z.NotIdentical],["??",z.NullishCoalesce],["||",z.Or],["+",z.Plus],["in",z.In],["+=",z.AdditionAssignment],["-=",z.SubtractionAssignment],["*=",z.MultiplicationAssignment],["/=",z.DivisionAssignment],["%=",z.RemainderAssignment],["**=",z.ExponentiationAssignment],["&&=",z.AndAssignment],["||=",z.OrAssignment],["??=",z.NullishCoalesceAssignment]]);function SM(n){let e=new Map([["svg",On.SVG],["math",On.Math]]);return n===null?On.HTML:e.get(n)??On.HTML}function jV(n){let e=new Map([["svg",On.SVG],["math",On.Math]]);for(let[t,r]of e.entries())if(r===n)return t;return null}function UV(n,e){return e===On.HTML?n:`:${jV(e)}:${n}`}function rl(n){return Array.isArray(n)?Ge(n.map(rl)):N(n)}function HV(n){let e=new Map;for(let t of n.units)for(let r of t.create)if(r.kind===m.ExtractedAttribute){let i=e.get(r.target)||new Dw(n.compatibility);e.set(r.target,i),i.add(r.bindingKind,r.name,r.expression,r.namespace,r.trustedValueFn),B.remove(r)}if(n instanceof Uh)for(let t of n.units)for(let r of t.create)if(r.kind==m.Projection){let i=e.get(r.xref);if(i!==void 0){let s=Sw(i);s.entries.length>0&&(r.attributes=s)}}else Vo(r)&&(r.attributes=IT(n,e,r.xref),r.kind===m.RepeaterCreate&&r.emptyView!==null&&(r.emptyAttributes=IT(n,e,r.emptyView)));else if(n instanceof Tg)for(let[t,r]of e.entries()){if(t!==n.root.xref)throw new Error("An attribute would be const collected into the host binding's template function, but is not associated with the root xref.");let i=Sw(r);i.entries.length>0&&(n.root.attributes=i)}}function IT(n,e,t){let r=e.get(t);if(r!==void 0){let i=Sw(r);if(i.entries.length>0)return n.addConst(i)}return null}var Dc=Object.freeze([]),Dw=class{compatibility;known=new Map;byKind=new Map;propertyBindings=null;projectAs=null;get attributes(){return this.byKind.get(Z.Attribute)??Dc}get classes(){return this.byKind.get(Z.ClassName)??Dc}get styles(){return this.byKind.get(Z.StyleProperty)??Dc}get bindings(){return this.propertyBindings??Dc}get template(){return this.byKind.get(Z.Template)??Dc}get i18n(){return this.byKind.get(Z.I18n)??Dc}constructor(e){this.compatibility=e}isKnown(e,t){let r=this.known.get(e)??new Set;return this.known.set(e,r),r.has(t)?!0:(r.add(t),!1)}add(e,t,r,i,s){if(!(this.compatibility===Hr.TemplateDefinitionBuilder&&(e===Z.Attribute||e===Z.ClassName||e===Z.StyleProperty))&&this.isKnown(e,t))return;if(t==="ngProjectAs"){if(r===null||!(r instanceof wn)||r.value==null||typeof r.value?.toString()!="string")throw Error("ngProjectAs must have a string literal value");this.projectAs=r.value.toString()}let a=this.arrayFor(e);if(a.push(...zV(i,t)),e===Z.Attribute||e===Z.StyleProperty){if(r===null)throw Error("Attribute, i18n attribute, & style element attributes must have a value");if(s!==null){if(!pM(r))throw Error("AssertionError: extracted attribute value should be string literal");a.push(oB(s,new sh([new qm(r.value)],[]),void 0,r.sourceSpan))}else a.push(r)}}arrayFor(e){return e===Z.Property||e===Z.TwoWayProperty?(this.propertyBindings??=[],this.propertyBindings):(this.byKind.has(e)||this.byKind.set(e,[]),this.byKind.get(e))}};function zV(n,e){let t=N(e);return n?[N(0),N(n),t]:[t]}function Sw({attributes:n,bindings:e,classes:t,i18n:r,projectAs:i,styles:s,template:o}){let a=[...n];if(i!==null){let u=gE(i)[0];a.push(N(5),rl(u))}return t.length>0&&a.push(N(1),...t),s.length>0&&a.push(N(2),...s),e.length>0&&a.push(N(3),...e),o.length>0&&a.push(N(4),...o),r.length>0&&a.push(N(6),...r),Ge(a)}function qV(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function WV(n){let e=new Map;for(let t of n.units)for(let r of t.create)Vo(r)&&e.set(r.xref,r);for(let t of n.units)for(let r of t.ops())if(r.kind===m.AnimationBinding){let i=GV(r);n.kind===W.Host?t.create.push(i):B.insertAfter(i,qV(e,r.target)),B.remove(r)}}function GV(n){if(n.animationBindingKind===0)return hV(n.name,n.target,n.name==="animate.enter"?"enter":"leave",n.expression,n.securityContext,n.sourceSpan);{let e=n.expression;return fV(n.name,n.target,n.name==="animate.enter"?"enter":"leave",[li(new _n(e,e.sourceSpan))],n.securityContext,n.sourceSpan)}}function YV(n){let e=new Map;for(let t of n.units){for(let r of t.create)r.kind===m.I18nAttributes&&e.set(r.target,r);for(let r of t.update)switch(r.kind){case m.Property:case m.Attribute:if(r.i18nContext===null||!(r.expression instanceof Mt))continue;let i=e.get(r.target);if(i===void 0)throw new Error("AssertionError: An i18n attribute binding instruction requires the owning element to have an I18nAttributes create instruction");if(i.target!==r.target)throw new Error("AssertionError: Expected i18nAttributes target element to match binding target element");let s=[];for(let o=0;o<r.expression.expressions.length;o++){let a=r.expression.expressions[o];if(r.expression.i18nPlaceholders.length!==r.expression.expressions.length)throw new Error(`AssertionError: An i18n attribute binding instruction requires the same number of expressions and placeholders, but found ${r.expression.i18nPlaceholders.length} placeholders and ${r.expression.expressions.length} expressions`);s.push(fM(r.i18nContext,i.target,i.xref,i.handle,a,null,r.expression.i18nPlaceholders[o],Rh.Creation,al.I18nAttribute,r.name,r.sourceSpan))}B.replaceWithMany(r,s);break}}}function KV(n){let e=new Map;for(let i of n.units)for(let s of i.ops())switch(s.kind){case m.Binding:case m.Property:case m.Attribute:case m.ExtractedAttribute:if(s.i18nMessage===null)continue;if(!e.has(s.i18nMessage)){let o=Ab(Ga.Attr,n.allocateXrefId(),null,s.i18nMessage,null);i.create.push(o),e.set(s.i18nMessage,o.xref)}s.i18nContext=e.get(s.i18nMessage);break}let t=new Map;for(let i of n.units)for(let s of i.create)switch(s.kind){case m.I18nStart:if(s.xref===s.root){let o=Ab(Ga.RootI18n,n.allocateXrefId(),s.xref,s.message,null);i.create.push(o),s.context=o.xref,t.set(s.xref,o)}break}for(let i of n.units)for(let s of i.create)if(s.kind===m.I18nStart&&s.xref!==s.root){let o=t.get(s.root);if(o===void 0)throw Error("AssertionError: Root i18n block i18n context should have been created.");s.context=o.xref,t.set(s.xref,o)}let r=null;for(let i of n.units)for(let s of i.create)switch(s.kind){case m.I18nStart:r=s;break;case m.I18nEnd:r=null;break;case m.IcuStart:if(r===null)throw Error("AssertionError: Unexpected ICU outside of an i18n block.");if(s.message.id!==r.message.id){let o=Ab(Ga.Icu,n.allocateXrefId(),r.root,s.message,null);i.create.push(o),s.context=o.xref}else s.context=r.context,t.get(r.xref).contextKind=Ga.Icu;break}}function QV(n){let e=new Map;for(let t of n.units)for(let r of t.update.reversed())if(r.kind===m.Binding&&r.isTextAttribute){let i=e.get(r.target)||new Set;i.has(r.name)&&n.compatibility===Hr.TemplateDefinitionBuilder&&(r.name==="style"||r.name==="class")&&B.remove(r),i.add(r.name),e.set(r.target,i)}}function XV(n){for(let e of n.units)for(let t of e.create)t.kind===m.Defer&&(t.placeholderMinimumTime!==null&&(t.placeholderConfig=new jh(rl([t.placeholderMinimumTime]))),(t.loadingMinimumTime!==null||t.loadingAfterTime!==null)&&(t.loadingConfig=new jh(rl([t.loadingMinimumTime,t.loadingAfterTime]))))}function ZV(n){let e=new Map;function t(i){if(e.has(i.xref))return e.get(i.xref);let s=new JV;for(let o of i.create)if(!(!Vo(o)||o.localRefs===null)){if(!Array.isArray(o.localRefs))throw new Error("LocalRefs were already processed, but were needed to resolve defer targets.");for(let a of o.localRefs)a.target===""&&s.targets.set(a.name,{xref:o.xref,slot:o.handle})}return e.set(i.xref,s),s}function r(i,s,o){switch(s.trigger.kind){case rt.Idle:case rt.Never:case rt.Immediate:case rt.Timer:return;case rt.Hover:case rt.Interaction:case rt.Viewport:if(s.trigger.targetName===null){if(o===null)throw new Error("defer on trigger with no target name must have a placeholder block");let c=n.views.get(o);if(c==null)throw new Error("AssertionError: could not find placeholder view for defer on trigger");for(let l of c.create)if(cl(l)&&(Vo(l)||l.kind===m.Projection)){s.trigger.targetXref=l.xref,s.trigger.targetView=o,s.trigger.targetSlotViewSteps=-1,s.trigger.targetSlot=l.handle;return}return}let a=o!==null?n.views.get(o):i,u=o!==null?-1:0;for(;a!==null;){let c=t(a);if(c.targets.has(s.trigger.targetName)){let{xref:l,slot:d}=c.targets.get(s.trigger.targetName);s.trigger.targetXref=l,s.trigger.targetView=a.xref,s.trigger.targetSlotViewSteps=u,s.trigger.targetSlot=d;return}a=a.parent!==null?n.views.get(a.parent):null,u++}break;default:throw new Error(`Trigger kind ${s.trigger.kind} not handled`)}}for(let i of n.units){let s=new Map;for(let o of i.create)switch(o.kind){case m.Defer:s.set(o.xref,o);break;case m.DeferOn:let a=s.get(o.defer);r(i,o,o.modifier==="hydrate"?a.mainView:a.placeholderView);break}}}var JV=class{targets=new Map},e8=new Map([[m.ElementEnd,[m.ElementStart,m.Element]],[m.ContainerEnd,[m.ContainerStart,m.Container]],[m.I18nEnd,[m.I18nStart,m.I18n]]]),t8=new Set([m.Pipe]);function n8(n){for(let e of n.units)for(let t of e.create){let r=e8.get(t.kind);if(r===void 0)continue;let[i,s]=r,o=t.prev;for(;o!==null&&t8.has(o.kind);)o=o.prev;o!==null&&o.kind===i&&(o.kind=s,B.remove(t))}}function r8(n){for(let e of n.units)for(let t of e.ops())jt(t,r=>c8(r,{job:n}),He.None),jt(t,l8,He.None)}function Or(n){return n instanceof su?Or(n.expr):n instanceof Fe?Or(n.lhs)||Or(n.rhs):n instanceof os?n.falseCase&&Or(n.falseCase)?!0:Or(n.condition)||Or(n.trueCase):n instanceof oh?Or(n.condition):n instanceof ds?Or(n.expr):n instanceof Ur?Or(n.receiver):n instanceof Gs?Or(n.receiver)||Or(n.index):n instanceof Si?Or(n.expr):n instanceof _r||n instanceof Ii||n instanceof as||n instanceof mu||n instanceof pu}function i8(n){let e=new Set;return Q(n,t=>(t instanceof ds&&e.add(t.xref),t),He.None),e}function s8(n,e,t){return Q(n,r=>{if(r instanceof ds&&e.has(r.xref)){let i=new $o(r.xref);return t.job.compatibility===Hr.TemplateDefinitionBuilder?new ds(i,i.xref):i}return r},He.None),n}function Sc(n,e,t){let r;if(Or(n)){let i=t.job.allocateXrefId();r=[new ds(n,i),new $o(i)]}else r=[n,n.clone()],s8(r[1],i8(r[0]),t);return new nl(r[0],e(r[1]))}function o8(n){return n instanceof el||n instanceof tl||n instanceof mu}function a8(n){return n instanceof Ur||n instanceof Gs||n instanceof _r}function IM(n){return o8(n)||a8(n)}function u8(n){if(IM(n)&&n.receiver instanceof nl){let e=n.receiver;for(;e.expr instanceof nl;)e=e.expr;return e}return null}function c8(n,e){if(!IM(n))return n;let t=u8(n);if(t){if(n instanceof _r)return t.expr=t.expr.callFn(n.args),n.receiver;if(n instanceof Ur)return t.expr=t.expr.prop(n.name),n.receiver;if(n instanceof Gs)return t.expr=t.expr.key(n.index),n.receiver;if(n instanceof mu)return t.expr=Sc(t.expr,r=>r.callFn(n.args),e),n.receiver;if(n instanceof el)return t.expr=Sc(t.expr,r=>r.prop(n.name),e),n.receiver;if(n instanceof tl)return t.expr=Sc(t.expr,r=>r.key(n.index),e),n.receiver}else{if(n instanceof mu)return Sc(n.receiver,r=>r.callFn(n.args),e);if(n instanceof el)return Sc(n.receiver,r=>r.prop(n.name),e);if(n instanceof tl)return Sc(n.receiver,r=>r.key(n.index),e)}return n}function l8(n){return n instanceof nl?new Si(new os(new Fe(z.Equals,n.guard,Hc),Hc,n.expr)):n}var TT="\uFFFD",d8="#",h8="*",f8="/",p8=":",m8="[",g8="]",v8="|";function y8(n){let e=new Map,t=new Map,r=new Map;for(let s of n.units)for(let o of s.create)switch(o.kind){case m.I18nContext:let a=_8(n,o);s.create.push(a),e.set(o.xref,a),r.set(o.xref,o);break;case m.I18nStart:t.set(o.xref,o);break}let i=null;for(let s of n.units)for(let o of s.create)switch(o.kind){case m.IcuStart:i=o,B.remove(o);let a=r.get(o.context);if(a.contextKind!==Ga.Icu)continue;let u=t.get(a.i18nBlock);if(u.context===a.xref)continue;let c=t.get(u.root),l=e.get(c.context);if(l===void 0)throw Error("AssertionError: ICU sub-message should belong to a root message.");let d=e.get(a.xref);d.messagePlaceholder=o.messagePlaceholder,l.subMessages.push(d.xref);break;case m.IcuEnd:i=null,B.remove(o);break;case m.IcuPlaceholder:if(i===null||i.context==null)throw Error("AssertionError: Unexpected ICU placeholder outside of i18n context");e.get(i.context).postprocessingParams.set(o.name,N(b8(o))),B.remove(o);break}}function _8(n,e,t){let r=AT(e.params),i=AT(e.postprocessingParams),s=[...e.params.values()].some(o=>o.length>1);return _V(n.allocateXrefId(),e.xref,e.i18nBlock,e.message,null,r,i,s)}function b8(n){if(n.strings.length!==n.expressionPlaceholders.length+1)throw Error(`AssertionError: Invalid ICU placeholder with ${n.strings.length} strings and ${n.expressionPlaceholders.length} expressions`);let e=n.expressionPlaceholders.map(Nc);return n.strings.flatMap((t,r)=>[t,e[r]||""]).join("")}function AT(n){let e=new Map;for(let[t,r]of n){let i=w8(r);i!==null&&e.set(t,N(i))}return e}function w8(n){if(n.length===0)return null;let e=n.map(t=>Nc(t));return e.length===1?e[0]:`${m8}${e.join(v8)}${g8}`}function Nc(n){if(n.flags&ht.ElementTag&&n.flags&ht.TemplateTag){if(typeof n.value!="object")throw Error("AssertionError: Expected i18n param value to have an element and template slot");let i=Nc(J(C({},n),{value:n.value.element,flags:n.flags&~ht.TemplateTag})),s=Nc(J(C({},n),{value:n.value.template,flags:n.flags&~ht.ElementTag}));return n.flags&ht.OpenTag&&n.flags&ht.CloseTag?`${s}${i}${s}`:n.flags&ht.CloseTag?`${i}${s}`:`${s}${i}`}if(n.flags&ht.OpenTag&&n.flags&ht.CloseTag)return`${Nc(J(C({},n),{flags:n.flags&~ht.CloseTag}))}${Nc(J(C({},n),{flags:n.flags&~ht.OpenTag}))}`;if(n.flags===ht.None)return`${n.value}`;let e="",t="";n.flags&ht.ElementTag?e=d8:n.flags&ht.TemplateTag&&(e=h8),e!==""&&(t=n.flags&ht.CloseTag?f8:"");let r=n.subTemplateIndex===null?"":`${p8}${n.subTemplateIndex}`;return`${TT}${t}${e}${n.value}${r}${TT}`}function E8(n){for(let e of n.units){let t=new Map;for(let i of e.create){if(cl(i)){if(i.handle.slot===null)throw new Error("AssertionError: expected slots to have been allocated before generating advance() calls")}else continue;t.set(i.xref,i.handle.slot)}let r=0;for(let i of e.update){let s=null;if(Fh(i)?s=i:ln(i,a=>{s===null&&Fh(a)&&(s=a)}),s===null)continue;if(!t.has(s.target))throw new Error(`AssertionError: reference to unknown slot for target ${s.target}`);let o=t.get(s.target);if(r!==o){let a=o-r;if(a<0)throw new Error("AssertionError: slot counter should never need to move backwards");B.insertBefore(eV(a,s.sourceSpan),i),r=o}}}}function C8(n){for(let e of n.units)for(let t of e.update){if(t.kind!==m.StoreLet)continue;let r={kind:un.Identifier,name:null,identifier:t.declaredName,local:!0};B.replace(t,Io(n.allocateXrefId(),r,new Lh(t.target,t.value,t.sourceSpan),si.None))}}function x8(n){let e=n.compatibility===Hr.TemplateDefinitionBuilder,t=[],r=0;for(let i of n.units)for(let s of i.create)s.kind===m.Projection&&(t.push(s.selector),s.projectionSlotIndex=r++);if(t.length>0){let i=null;if(t.length>1||t[0]!=="*"){let s=t.map(o=>o==="*"?o:gE(o));i=n.pool.getConstLiteral(rl(s),e)}n.contentSelectors=n.pool.getConstLiteral(rl(t),e),n.root.create.prepend([mV(i)])}}function D8(n){Gd(n.root,null)}function Gd(n,e){let t=S8(n,e);for(let r of n.create)switch(r.kind){case m.ConditionalCreate:case m.ConditionalBranchCreate:case m.Template:Gd(n.job.views.get(r.xref),t);break;case m.Projection:r.fallbackView!==null&&Gd(n.job.views.get(r.fallbackView),t);break;case m.RepeaterCreate:Gd(n.job.views.get(r.xref),t),r.emptyView&&Gd(n.job.views.get(r.emptyView),t),r.trackByOps!==null&&r.trackByOps.prepend(Fm(n,t,!1));break;case m.Animation:case m.AnimationListener:case m.Listener:case m.TwoWayListener:r.handlerOps.prepend(Fm(n,t,!0));break}n.update.prepend(Fm(n,t,!1))}function S8(n,e){let t={view:n.xref,viewContextVariable:{kind:un.Context,name:null,view:n.xref},contextVariables:new Map,aliases:n.aliases,references:[],letDeclarations:[],parent:e};for(let r of n.contextVariables.keys())t.contextVariables.set(r,{kind:un.Identifier,name:null,identifier:r,local:!1});for(let r of n.create)switch(r.kind){case m.ElementStart:case m.ConditionalCreate:case m.ConditionalBranchCreate:case m.Template:if(!Array.isArray(r.localRefs))throw new Error("AssertionError: expected localRefs to be an array");for(let i=0;i<r.localRefs.length;i++)t.references.push({name:r.localRefs[i].name,targetId:r.xref,targetSlot:r.handle,offset:i,variable:{kind:un.Identifier,name:null,identifier:r.localRefs[i].name,local:!1}});break;case m.DeclareLet:t.letDeclarations.push({targetId:r.xref,targetSlot:r.handle,variable:{kind:un.Identifier,name:null,identifier:r.declaredName,local:!1}});break}return t}function Fm(n,e,t){let r=[];e.view!==n.xref&&r.push(Io(n.job.allocateXrefId(),e.viewContextVariable,new bg,si.None));let i=n.job.views.get(e.view);for(let[s,o]of i.contextVariables){let a=new Bo(e.view),u=o===CM?a:new Ur(a,o);r.push(Io(n.job.allocateXrefId(),e.contextVariables.get(s),u,si.None))}for(let s of i.aliases)r.push(Io(n.job.allocateXrefId(),s,s.expression.clone(),si.AlwaysInline));for(let s of e.references)r.push(Io(n.job.allocateXrefId(),s.variable,new _g(s.targetId,s.targetSlot,s.offset),si.None));if(e.view!==n.xref||t)for(let s of e.letDeclarations)r.push(Io(n.job.allocateXrefId(),s.variable,new Bh(s.targetId,s.targetSlot),si.None));return e.parent!==null&&r.push(...Fm(n,e.parent,!1)),r}function I8(n){for(let e of n.units)for(let t of e.ops())jt(t,r=>r instanceof jh?N(n.addConst(r.expr)):r,He.None)}var MT="style.",kT="class.",T8="style!",PT="class!",OT="!important";function A8(n){for(let e of n.root.update)if(e.kind===m.Binding&&e.bindingKind===Z.Property)if(e.name.endsWith(OT)&&(e.name=e.name.substring(0,e.name.length-OT.length)),e.name.startsWith(MT)){e.bindingKind=Z.StyleProperty,e.name=e.name.substring(MT.length),M8(e.name)||(e.name=k8(e.name));let{property:t,suffix:r}=Mb(e.name);e.name=t,e.unit=r}else e.name.startsWith(T8)?(e.bindingKind=Z.StyleProperty,e.name="style"):e.name.startsWith(kT)?(e.bindingKind=Z.ClassName,e.name=Mb(e.name.substring(kT.length)).property):e.name.startsWith(PT)&&(e.bindingKind=Z.ClassName,e.name=Mb(e.name.substring(PT.length)).property)}function M8(n){return n.startsWith("--")}function k8(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function Mb(n){let e=n.indexOf("!important");e!==-1&&(n=e>0?n.substring(0,e):"");let t=null,r=n,i=n.lastIndexOf(".");return i>0&&(t=n.slice(i+1),r=n.substring(0,i)),{property:r,suffix:t}}function Iw(n,e=!1){return Qn(Object.keys(n).map(t=>({key:t,quoted:e,value:n[t]})))}var Tw=class{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){let t=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}formatPh(e){return`{${ef(e,!1)}}`}},P8=new Tw;function TM(n){return n.visit(P8)}var Ys=class{sourceSpan;i18n;constructor(e,t){this.sourceSpan=e,this.i18n=t}},gu=class extends Ys{value;tokens;constructor(e,t,r,i){super(t,i),this.value=e,this.tokens=r}visit(e,t){return e.visitText(this,t)}},Ja=class extends Ys{switchValue;type;cases;switchValueSourceSpan;constructor(e,t,r,i,s,o){super(i,o),this.switchValue=e,this.type=t,this.cases=r,this.switchValueSourceSpan=s}visit(e,t){return e.visitExpansion(this,t)}},Ag=class{value;expression;sourceSpan;valueSourceSpan;expSourceSpan;constructor(e,t,r,i,s){this.value=e,this.expression=t,this.sourceSpan=r,this.valueSourceSpan=i,this.expSourceSpan=s}visit(e,t){return e.visitExpansionCase(this,t)}},Aw=class extends Ys{name;value;keySpan;valueSpan;valueTokens;constructor(e,t,r,i,s,o,a){super(r,a),this.name=e,this.value=t,this.keySpan=i,this.valueSpan=s,this.valueTokens=o}visit(e,t){return e.visitAttribute(this,t)}},ni=class extends Ys{name;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;isVoid;constructor(e,t,r,i,s,o,a,u=null,c,l){super(o,l),this.name=e,this.attrs=t,this.directives=r,this.children=i,this.isSelfClosing=s,this.startSourceSpan=a,this.endSourceSpan=u,this.isVoid=c}visit(e,t){return e.visitElement(this,t)}},Hh=class{value;sourceSpan;constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitComment(this,t)}},ii=class extends Ys{name;parameters;children;nameSpan;startSourceSpan;endSourceSpan;constructor(e,t,r,i,s,o,a=null,u){super(i,u),this.name=e,this.parameters=t,this.children=r,this.nameSpan=s,this.startSourceSpan=o,this.endSourceSpan=a}visit(e,t){return e.visitBlock(this,t)}},pr=class extends Ys{componentName;tagName;fullName;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;constructor(e,t,r,i,s,o,a,u,c,l=null,d){super(u,d),this.componentName=e,this.tagName=t,this.fullName=r,this.attrs=i,this.directives=s,this.children=o,this.isSelfClosing=a,this.startSourceSpan=c,this.endSourceSpan=l}visit(e,t){return e.visitComponent(this,t)}},Mw=class{name;attrs;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,t,r,i,s=null){this.name=e,this.attrs=t,this.sourceSpan=r,this.startSourceSpan=i,this.endSourceSpan=s}visit(e,t){return e.visitDirective(this,t)}},Mg=class{expression;sourceSpan;constructor(e,t){this.expression=e,this.sourceSpan=t}visit(e,t){return e.visitBlockParameter(this,t)}},kg=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,t,r,i,s){this.name=e,this.value=t,this.sourceSpan=r,this.nameSpan=i,this.valueSpan=s}visit(e,t){return e.visitLetDeclaration(this,t)}};function pt(n,e,t=null){let r=[],i=n.visit?s=>n.visit(s,t)||s.visit(n,t):s=>s.visit(n,t);return e.forEach(s=>{let o=i(s);o&&r.push(o)}),r}var zh={AElig:"\xC6",AMP:"&",amp:"&",Aacute:"\xC1",Abreve:"\u0102",Acirc:"\xC2",Acy:"\u0410",Afr:"\u{1D504}",Agrave:"\xC0",Alpha:"\u0391",Amacr:"\u0100",And:"\u2A53",Aogon:"\u0104",Aopf:"\u{1D538}",ApplyFunction:"\u2061",af:"\u2061",Aring:"\xC5",angst:"\xC5",Ascr:"\u{1D49C}",Assign:"\u2254",colone:"\u2254",coloneq:"\u2254",Atilde:"\xC3",Auml:"\xC4",Backslash:"\u2216",setminus:"\u2216",setmn:"\u2216",smallsetminus:"\u2216",ssetmn:"\u2216",Barv:"\u2AE7",Barwed:"\u2306",doublebarwedge:"\u2306",Bcy:"\u0411",Because:"\u2235",becaus:"\u2235",because:"\u2235",Bernoullis:"\u212C",Bscr:"\u212C",bernou:"\u212C",Beta:"\u0392",Bfr:"\u{1D505}",Bopf:"\u{1D539}",Breve:"\u02D8",breve:"\u02D8",Bumpeq:"\u224E",HumpDownHump:"\u224E",bump:"\u224E",CHcy:"\u0427",COPY:"\xA9",copy:"\xA9",Cacute:"\u0106",Cap:"\u22D2",CapitalDifferentialD:"\u2145",DD:"\u2145",Cayleys:"\u212D",Cfr:"\u212D",Ccaron:"\u010C",Ccedil:"\xC7",Ccirc:"\u0108",Cconint:"\u2230",Cdot:"\u010A",Cedilla:"\xB8",cedil:"\xB8",CenterDot:"\xB7",centerdot:"\xB7",middot:"\xB7",Chi:"\u03A7",CircleDot:"\u2299",odot:"\u2299",CircleMinus:"\u2296",ominus:"\u2296",CirclePlus:"\u2295",oplus:"\u2295",CircleTimes:"\u2297",otimes:"\u2297",ClockwiseContourIntegral:"\u2232",cwconint:"\u2232",CloseCurlyDoubleQuote:"\u201D",rdquo:"\u201D",rdquor:"\u201D",CloseCurlyQuote:"\u2019",rsquo:"\u2019",rsquor:"\u2019",Colon:"\u2237",Proportion:"\u2237",Colone:"\u2A74",Congruent:"\u2261",equiv:"\u2261",Conint:"\u222F",DoubleContourIntegral:"\u222F",ContourIntegral:"\u222E",conint:"\u222E",oint:"\u222E",Copf:"\u2102",complexes:"\u2102",Coproduct:"\u2210",coprod:"\u2210",CounterClockwiseContourIntegral:"\u2233",awconint:"\u2233",Cross:"\u2A2F",Cscr:"\u{1D49E}",Cup:"\u22D3",CupCap:"\u224D",asympeq:"\u224D",DDotrahd:"\u2911",DJcy:"\u0402",DScy:"\u0405",DZcy:"\u040F",Dagger:"\u2021",ddagger:"\u2021",Darr:"\u21A1",Dashv:"\u2AE4",DoubleLeftTee:"\u2AE4",Dcaron:"\u010E",Dcy:"\u0414",Del:"\u2207",nabla:"\u2207",Delta:"\u0394",Dfr:"\u{1D507}",DiacriticalAcute:"\xB4",acute:"\xB4",DiacriticalDot:"\u02D9",dot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",dblac:"\u02DD",DiacriticalGrave:"`",grave:"`",DiacriticalTilde:"\u02DC",tilde:"\u02DC",Diamond:"\u22C4",diam:"\u22C4",diamond:"\u22C4",DifferentialD:"\u2146",dd:"\u2146",Dopf:"\u{1D53B}",Dot:"\xA8",DoubleDot:"\xA8",die:"\xA8",uml:"\xA8",DotDot:"\u20DC",DotEqual:"\u2250",doteq:"\u2250",esdot:"\u2250",DoubleDownArrow:"\u21D3",Downarrow:"\u21D3",dArr:"\u21D3",DoubleLeftArrow:"\u21D0",Leftarrow:"\u21D0",lArr:"\u21D0",DoubleLeftRightArrow:"\u21D4",Leftrightarrow:"\u21D4",hArr:"\u21D4",iff:"\u21D4",DoubleLongLeftArrow:"\u27F8",Longleftarrow:"\u27F8",xlArr:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",Longleftrightarrow:"\u27FA",xhArr:"\u27FA",DoubleLongRightArrow:"\u27F9",Longrightarrow:"\u27F9",xrArr:"\u27F9",DoubleRightArrow:"\u21D2",Implies:"\u21D2",Rightarrow:"\u21D2",rArr:"\u21D2",DoubleRightTee:"\u22A8",vDash:"\u22A8",DoubleUpArrow:"\u21D1",Uparrow:"\u21D1",uArr:"\u21D1",DoubleUpDownArrow:"\u21D5",Updownarrow:"\u21D5",vArr:"\u21D5",DoubleVerticalBar:"\u2225",par:"\u2225",parallel:"\u2225",shortparallel:"\u2225",spar:"\u2225",DownArrow:"\u2193",ShortDownArrow:"\u2193",darr:"\u2193",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",duarr:"\u21F5",DownBreve:"\u0311",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",leftharpoondown:"\u21BD",lhard:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",rhard:"\u21C1",rightharpoondown:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",top:"\u22A4",DownTeeArrow:"\u21A7",mapstodown:"\u21A7",Dscr:"\u{1D49F}",Dstrok:"\u0110",ENG:"\u014A",ETH:"\xD0",Eacute:"\xC9",Ecaron:"\u011A",Ecirc:"\xCA",Ecy:"\u042D",Edot:"\u0116",Efr:"\u{1D508}",Egrave:"\xC8",Element:"\u2208",in:"\u2208",isin:"\u2208",isinv:"\u2208",Emacr:"\u0112",EmptySmallSquare:"\u25FB",EmptyVerySmallSquare:"\u25AB",Eogon:"\u0118",Eopf:"\u{1D53C}",Epsilon:"\u0395",Equal:"\u2A75",EqualTilde:"\u2242",eqsim:"\u2242",esim:"\u2242",Equilibrium:"\u21CC",rightleftharpoons:"\u21CC",rlhar:"\u21CC",Escr:"\u2130",expectation:"\u2130",Esim:"\u2A73",Eta:"\u0397",Euml:"\xCB",Exists:"\u2203",exist:"\u2203",ExponentialE:"\u2147",ee:"\u2147",exponentiale:"\u2147",Fcy:"\u0424",Ffr:"\u{1D509}",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",blacksquare:"\u25AA",squarf:"\u25AA",squf:"\u25AA",Fopf:"\u{1D53D}",ForAll:"\u2200",forall:"\u2200",Fouriertrf:"\u2131",Fscr:"\u2131",GJcy:"\u0403",GT:">",gt:">",Gamma:"\u0393",Gammad:"\u03DC",Gbreve:"\u011E",Gcedil:"\u0122",Gcirc:"\u011C",Gcy:"\u0413",Gdot:"\u0120",Gfr:"\u{1D50A}",Gg:"\u22D9",ggg:"\u22D9",Gopf:"\u{1D53E}",GreaterEqual:"\u2265",ge:"\u2265",geq:"\u2265",GreaterEqualLess:"\u22DB",gel:"\u22DB",gtreqless:"\u22DB",GreaterFullEqual:"\u2267",gE:"\u2267",geqq:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",gl:"\u2277",gtrless:"\u2277",GreaterSlantEqual:"\u2A7E",geqslant:"\u2A7E",ges:"\u2A7E",GreaterTilde:"\u2273",gsim:"\u2273",gtrsim:"\u2273",Gscr:"\u{1D4A2}",Gt:"\u226B",NestedGreaterGreater:"\u226B",gg:"\u226B",HARDcy:"\u042A",Hacek:"\u02C7",caron:"\u02C7",Hat:"^",Hcirc:"\u0124",Hfr:"\u210C",Poincareplane:"\u210C",HilbertSpace:"\u210B",Hscr:"\u210B",hamilt:"\u210B",Hopf:"\u210D",quaternions:"\u210D",HorizontalLine:"\u2500",boxh:"\u2500",Hstrok:"\u0126",HumpEqual:"\u224F",bumpe:"\u224F",bumpeq:"\u224F",IEcy:"\u0415",IJlig:"\u0132",IOcy:"\u0401",Iacute:"\xCD",Icirc:"\xCE",Icy:"\u0418",Idot:"\u0130",Ifr:"\u2111",Im:"\u2111",image:"\u2111",imagpart:"\u2111",Igrave:"\xCC",Imacr:"\u012A",ImaginaryI:"\u2148",ii:"\u2148",Int:"\u222C",Integral:"\u222B",int:"\u222B",Intersection:"\u22C2",bigcap:"\u22C2",xcap:"\u22C2",InvisibleComma:"\u2063",ic:"\u2063",InvisibleTimes:"\u2062",it:"\u2062",Iogon:"\u012E",Iopf:"\u{1D540}",Iota:"\u0399",Iscr:"\u2110",imagline:"\u2110",Itilde:"\u0128",Iukcy:"\u0406",Iuml:"\xCF",Jcirc:"\u0134",Jcy:"\u0419",Jfr:"\u{1D50D}",Jopf:"\u{1D541}",Jscr:"\u{1D4A5}",Jsercy:"\u0408",Jukcy:"\u0404",KHcy:"\u0425",KJcy:"\u040C",Kappa:"\u039A",Kcedil:"\u0136",Kcy:"\u041A",Kfr:"\u{1D50E}",Kopf:"\u{1D542}",Kscr:"\u{1D4A6}",LJcy:"\u0409",LT:"<",lt:"<",Lacute:"\u0139",Lambda:"\u039B",Lang:"\u27EA",Laplacetrf:"\u2112",Lscr:"\u2112",lagran:"\u2112",Larr:"\u219E",twoheadleftarrow:"\u219E",Lcaron:"\u013D",Lcedil:"\u013B",Lcy:"\u041B",LeftAngleBracket:"\u27E8",lang:"\u27E8",langle:"\u27E8",LeftArrow:"\u2190",ShortLeftArrow:"\u2190",larr:"\u2190",leftarrow:"\u2190",slarr:"\u2190",LeftArrowBar:"\u21E4",larrb:"\u21E4",LeftArrowRightArrow:"\u21C6",leftrightarrows:"\u21C6",lrarr:"\u21C6",LeftCeiling:"\u2308",lceil:"\u2308",LeftDoubleBracket:"\u27E6",lobrk:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",dharl:"\u21C3",downharpoonleft:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",lfloor:"\u230A",LeftRightArrow:"\u2194",harr:"\u2194",leftrightarrow:"\u2194",LeftRightVector:"\u294E",LeftTee:"\u22A3",dashv:"\u22A3",LeftTeeArrow:"\u21A4",mapstoleft:"\u21A4",LeftTeeVector:"\u295A",LeftTriangle:"\u22B2",vartriangleleft:"\u22B2",vltri:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",ltrie:"\u22B4",trianglelefteq:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",uharl:"\u21BF",upharpoonleft:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",leftharpoonup:"\u21BC",lharu:"\u21BC",LeftVectorBar:"\u2952",LessEqualGreater:"\u22DA",leg:"\u22DA",lesseqgtr:"\u22DA",LessFullEqual:"\u2266",lE:"\u2266",leqq:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",lg:"\u2276",LessLess:"\u2AA1",LessSlantEqual:"\u2A7D",leqslant:"\u2A7D",les:"\u2A7D",LessTilde:"\u2272",lesssim:"\u2272",lsim:"\u2272",Lfr:"\u{1D50F}",Ll:"\u22D8",Lleftarrow:"\u21DA",lAarr:"\u21DA",Lmidot:"\u013F",LongLeftArrow:"\u27F5",longleftarrow:"\u27F5",xlarr:"\u27F5",LongLeftRightArrow:"\u27F7",longleftrightarrow:"\u27F7",xharr:"\u27F7",LongRightArrow:"\u27F6",longrightarrow:"\u27F6",xrarr:"\u27F6",Lopf:"\u{1D543}",LowerLeftArrow:"\u2199",swarr:"\u2199",swarrow:"\u2199",LowerRightArrow:"\u2198",searr:"\u2198",searrow:"\u2198",Lsh:"\u21B0",lsh:"\u21B0",Lstrok:"\u0141",Lt:"\u226A",NestedLessLess:"\u226A",ll:"\u226A",Map:"\u2905",Mcy:"\u041C",MediumSpace:"\u205F",Mellintrf:"\u2133",Mscr:"\u2133",phmmat:"\u2133",Mfr:"\u{1D510}",MinusPlus:"\u2213",mnplus:"\u2213",mp:"\u2213",Mopf:"\u{1D544}",Mu:"\u039C",NJcy:"\u040A",Nacute:"\u0143",Ncaron:"\u0147",Ncedil:"\u0145",Ncy:"\u041D",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",ZeroWidthSpace:"\u200B",NewLine:`
`,Nfr:"\u{1D511}",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nbsp:"\xA0",Nopf:"\u2115",naturals:"\u2115",Not:"\u2AEC",NotCongruent:"\u2262",nequiv:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",npar:"\u2226",nparallel:"\u2226",nshortparallel:"\u2226",nspar:"\u2226",NotElement:"\u2209",notin:"\u2209",notinva:"\u2209",NotEqual:"\u2260",ne:"\u2260",NotEqualTilde:"\u2242\u0338",nesim:"\u2242\u0338",NotExists:"\u2204",nexist:"\u2204",nexists:"\u2204",NotGreater:"\u226F",ngt:"\u226F",ngtr:"\u226F",NotGreaterEqual:"\u2271",nge:"\u2271",ngeq:"\u2271",NotGreaterFullEqual:"\u2267\u0338",ngE:"\u2267\u0338",ngeqq:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",nGtv:"\u226B\u0338",NotGreaterLess:"\u2279",ntgl:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",NotGreaterTilde:"\u2275",ngsim:"\u2275",NotHumpDownHump:"\u224E\u0338",nbump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",nbumpe:"\u224F\u0338",NotLeftTriangle:"\u22EA",nltri:"\u22EA",ntriangleleft:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",nltrie:"\u22EC",ntrianglelefteq:"\u22EC",NotLess:"\u226E",nless:"\u226E",nlt:"\u226E",NotLessEqual:"\u2270",nle:"\u2270",nleq:"\u2270",NotLessGreater:"\u2278",ntlg:"\u2278",NotLessLess:"\u226A\u0338",nLtv:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",NotLessTilde:"\u2274",nlsim:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",NotPrecedes:"\u2280",npr:"\u2280",nprec:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",npre:"\u2AAF\u0338",npreceq:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",nprcue:"\u22E0",NotReverseElement:"\u220C",notni:"\u220C",notniva:"\u220C",NotRightTriangle:"\u22EB",nrtri:"\u22EB",ntriangleright:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",nrtrie:"\u22ED",ntrianglerighteq:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",nsqsube:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",nsqsupe:"\u22E3",NotSubset:"\u2282\u20D2",nsubset:"\u2282\u20D2",vnsub:"\u2282\u20D2",NotSubsetEqual:"\u2288",nsube:"\u2288",nsubseteq:"\u2288",NotSucceeds:"\u2281",nsc:"\u2281",nsucc:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",nsce:"\u2AB0\u0338",nsucceq:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",nsccue:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",nsupset:"\u2283\u20D2",vnsup:"\u2283\u20D2",NotSupersetEqual:"\u2289",nsupe:"\u2289",nsupseteq:"\u2289",NotTilde:"\u2241",nsim:"\u2241",NotTildeEqual:"\u2244",nsime:"\u2244",nsimeq:"\u2244",NotTildeFullEqual:"\u2247",ncong:"\u2247",NotTildeTilde:"\u2249",nap:"\u2249",napprox:"\u2249",NotVerticalBar:"\u2224",nmid:"\u2224",nshortmid:"\u2224",nsmid:"\u2224",Nscr:"\u{1D4A9}",Ntilde:"\xD1",Nu:"\u039D",OElig:"\u0152",Oacute:"\xD3",Ocirc:"\xD4",Ocy:"\u041E",Odblac:"\u0150",Ofr:"\u{1D512}",Ograve:"\xD2",Omacr:"\u014C",Omega:"\u03A9",ohm:"\u03A9",Omicron:"\u039F",Oopf:"\u{1D546}",OpenCurlyDoubleQuote:"\u201C",ldquo:"\u201C",OpenCurlyQuote:"\u2018",lsquo:"\u2018",Or:"\u2A54",Oscr:"\u{1D4AA}",Oslash:"\xD8",Otilde:"\xD5",Otimes:"\u2A37",Ouml:"\xD6",OverBar:"\u203E",oline:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",tbrk:"\u23B4",OverParenthesis:"\u23DC",PartialD:"\u2202",part:"\u2202",Pcy:"\u041F",Pfr:"\u{1D513}",Phi:"\u03A6",Pi:"\u03A0",PlusMinus:"\xB1",plusmn:"\xB1",pm:"\xB1",Popf:"\u2119",primes:"\u2119",Pr:"\u2ABB",Precedes:"\u227A",pr:"\u227A",prec:"\u227A",PrecedesEqual:"\u2AAF",pre:"\u2AAF",preceq:"\u2AAF",PrecedesSlantEqual:"\u227C",prcue:"\u227C",preccurlyeq:"\u227C",PrecedesTilde:"\u227E",precsim:"\u227E",prsim:"\u227E",Prime:"\u2033",Product:"\u220F",prod:"\u220F",Proportional:"\u221D",prop:"\u221D",propto:"\u221D",varpropto:"\u221D",vprop:"\u221D",Pscr:"\u{1D4AB}",Psi:"\u03A8",QUOT:'"',quot:'"',Qfr:"\u{1D514}",Qopf:"\u211A",rationals:"\u211A",Qscr:"\u{1D4AC}",RBarr:"\u2910",drbkarow:"\u2910",REG:"\xAE",circledR:"\xAE",reg:"\xAE",Racute:"\u0154",Rang:"\u27EB",Rarr:"\u21A0",twoheadrightarrow:"\u21A0",Rarrtl:"\u2916",Rcaron:"\u0158",Rcedil:"\u0156",Rcy:"\u0420",Re:"\u211C",Rfr:"\u211C",real:"\u211C",realpart:"\u211C",ReverseElement:"\u220B",SuchThat:"\u220B",ni:"\u220B",niv:"\u220B",ReverseEquilibrium:"\u21CB",leftrightharpoons:"\u21CB",lrhar:"\u21CB",ReverseUpEquilibrium:"\u296F",duhar:"\u296F",Rho:"\u03A1",RightAngleBracket:"\u27E9",rang:"\u27E9",rangle:"\u27E9",RightArrow:"\u2192",ShortRightArrow:"\u2192",rarr:"\u2192",rightarrow:"\u2192",srarr:"\u2192",RightArrowBar:"\u21E5",rarrb:"\u21E5",RightArrowLeftArrow:"\u21C4",rightleftarrows:"\u21C4",rlarr:"\u21C4",RightCeiling:"\u2309",rceil:"\u2309",RightDoubleBracket:"\u27E7",robrk:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",dharr:"\u21C2",downharpoonright:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rfloor:"\u230B",RightTee:"\u22A2",vdash:"\u22A2",RightTeeArrow:"\u21A6",map:"\u21A6",mapsto:"\u21A6",RightTeeVector:"\u295B",RightTriangle:"\u22B3",vartriangleright:"\u22B3",vrtri:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",rtrie:"\u22B5",trianglerighteq:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",uharr:"\u21BE",upharpoonright:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",rharu:"\u21C0",rightharpoonup:"\u21C0",RightVectorBar:"\u2953",Ropf:"\u211D",reals:"\u211D",RoundImplies:"\u2970",Rrightarrow:"\u21DB",rAarr:"\u21DB",Rscr:"\u211B",realine:"\u211B",Rsh:"\u21B1",rsh:"\u21B1",RuleDelayed:"\u29F4",SHCHcy:"\u0429",SHcy:"\u0428",SOFTcy:"\u042C",Sacute:"\u015A",Sc:"\u2ABC",Scaron:"\u0160",Scedil:"\u015E",Scirc:"\u015C",Scy:"\u0421",Sfr:"\u{1D516}",ShortUpArrow:"\u2191",UpArrow:"\u2191",uarr:"\u2191",uparrow:"\u2191",Sigma:"\u03A3",SmallCircle:"\u2218",compfn:"\u2218",Sopf:"\u{1D54A}",Sqrt:"\u221A",radic:"\u221A",Square:"\u25A1",squ:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",sqcap:"\u2293",SquareSubset:"\u228F",sqsub:"\u228F",sqsubset:"\u228F",SquareSubsetEqual:"\u2291",sqsube:"\u2291",sqsubseteq:"\u2291",SquareSuperset:"\u2290",sqsup:"\u2290",sqsupset:"\u2290",SquareSupersetEqual:"\u2292",sqsupe:"\u2292",sqsupseteq:"\u2292",SquareUnion:"\u2294",sqcup:"\u2294",Sscr:"\u{1D4AE}",Star:"\u22C6",sstarf:"\u22C6",Sub:"\u22D0",Subset:"\u22D0",SubsetEqual:"\u2286",sube:"\u2286",subseteq:"\u2286",Succeeds:"\u227B",sc:"\u227B",succ:"\u227B",SucceedsEqual:"\u2AB0",sce:"\u2AB0",succeq:"\u2AB0",SucceedsSlantEqual:"\u227D",sccue:"\u227D",succcurlyeq:"\u227D",SucceedsTilde:"\u227F",scsim:"\u227F",succsim:"\u227F",Sum:"\u2211",sum:"\u2211",Sup:"\u22D1",Supset:"\u22D1",Superset:"\u2283",sup:"\u2283",supset:"\u2283",SupersetEqual:"\u2287",supe:"\u2287",supseteq:"\u2287",THORN:"\xDE",TRADE:"\u2122",trade:"\u2122",TSHcy:"\u040B",TScy:"\u0426",Tab:"	",Tau:"\u03A4",Tcaron:"\u0164",Tcedil:"\u0162",Tcy:"\u0422",Tfr:"\u{1D517}",Therefore:"\u2234",there4:"\u2234",therefore:"\u2234",Theta:"\u0398",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",Tilde:"\u223C",sim:"\u223C",thicksim:"\u223C",thksim:"\u223C",TildeEqual:"\u2243",sime:"\u2243",simeq:"\u2243",TildeFullEqual:"\u2245",cong:"\u2245",TildeTilde:"\u2248",ap:"\u2248",approx:"\u2248",asymp:"\u2248",thickapprox:"\u2248",thkap:"\u2248",Topf:"\u{1D54B}",TripleDot:"\u20DB",tdot:"\u20DB",Tscr:"\u{1D4AF}",Tstrok:"\u0166",Uacute:"\xDA",Uarr:"\u219F",Uarrocir:"\u2949",Ubrcy:"\u040E",Ubreve:"\u016C",Ucirc:"\xDB",Ucy:"\u0423",Udblac:"\u0170",Ufr:"\u{1D518}",Ugrave:"\xD9",Umacr:"\u016A",UnderBar:"_",lowbar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",bbrk:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",bigcup:"\u22C3",xcup:"\u22C3",UnionPlus:"\u228E",uplus:"\u228E",Uogon:"\u0172",Uopf:"\u{1D54C}",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",udarr:"\u21C5",UpDownArrow:"\u2195",updownarrow:"\u2195",varr:"\u2195",UpEquilibrium:"\u296E",udhar:"\u296E",UpTee:"\u22A5",bot:"\u22A5",bottom:"\u22A5",perp:"\u22A5",UpTeeArrow:"\u21A5",mapstoup:"\u21A5",UpperLeftArrow:"\u2196",nwarr:"\u2196",nwarrow:"\u2196",UpperRightArrow:"\u2197",nearr:"\u2197",nearrow:"\u2197",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",Uring:"\u016E",Uscr:"\u{1D4B0}",Utilde:"\u0168",Uuml:"\xDC",VDash:"\u22AB",Vbar:"\u2AEB",Vcy:"\u0412",Vdash:"\u22A9",Vdashl:"\u2AE6",Vee:"\u22C1",bigvee:"\u22C1",xvee:"\u22C1",Verbar:"\u2016",Vert:"\u2016",VerticalBar:"\u2223",mid:"\u2223",shortmid:"\u2223",smid:"\u2223",VerticalLine:"|",verbar:"|",vert:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",wr:"\u2240",wreath:"\u2240",VeryThinSpace:"\u200A",hairsp:"\u200A",Vfr:"\u{1D519}",Vopf:"\u{1D54D}",Vscr:"\u{1D4B1}",Vvdash:"\u22AA",Wcirc:"\u0174",Wedge:"\u22C0",bigwedge:"\u22C0",xwedge:"\u22C0",Wfr:"\u{1D51A}",Wopf:"\u{1D54E}",Wscr:"\u{1D4B2}",Xfr:"\u{1D51B}",Xi:"\u039E",Xopf:"\u{1D54F}",Xscr:"\u{1D4B3}",YAcy:"\u042F",YIcy:"\u0407",YUcy:"\u042E",Yacute:"\xDD",Ycirc:"\u0176",Ycy:"\u042B",Yfr:"\u{1D51C}",Yopf:"\u{1D550}",Yscr:"\u{1D4B4}",Yuml:"\u0178",ZHcy:"\u0416",Zacute:"\u0179",Zcaron:"\u017D",Zcy:"\u0417",Zdot:"\u017B",Zeta:"\u0396",Zfr:"\u2128",zeetrf:"\u2128",Zopf:"\u2124",integers:"\u2124",Zscr:"\u{1D4B5}",aacute:"\xE1",abreve:"\u0103",ac:"\u223E",mstpos:"\u223E",acE:"\u223E\u0333",acd:"\u223F",acirc:"\xE2",acy:"\u0430",aelig:"\xE6",afr:"\u{1D51E}",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",alpha:"\u03B1",amacr:"\u0101",amalg:"\u2A3F",and:"\u2227",wedge:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",angle:"\u2220",ange:"\u29A4",angmsd:"\u2221",measuredangle:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angzarr:"\u237C",aogon:"\u0105",aopf:"\u{1D552}",apE:"\u2A70",apacir:"\u2A6F",ape:"\u224A",approxeq:"\u224A",apid:"\u224B",apos:"'",aring:"\xE5",ascr:"\u{1D4B6}",ast:"*",midast:"*",atilde:"\xE3",auml:"\xE4",awint:"\u2A11",bNot:"\u2AED",backcong:"\u224C",bcong:"\u224C",backepsilon:"\u03F6",bepsi:"\u03F6",backprime:"\u2035",bprime:"\u2035",backsim:"\u223D",bsim:"\u223D",backsimeq:"\u22CD",bsime:"\u22CD",barvee:"\u22BD",barwed:"\u2305",barwedge:"\u2305",bbrktbrk:"\u23B6",bcy:"\u0431",bdquo:"\u201E",ldquor:"\u201E",bemptyv:"\u29B0",beta:"\u03B2",beth:"\u2136",between:"\u226C",twixt:"\u226C",bfr:"\u{1D51F}",bigcirc:"\u25EF",xcirc:"\u25EF",bigodot:"\u2A00",xodot:"\u2A00",bigoplus:"\u2A01",xoplus:"\u2A01",bigotimes:"\u2A02",xotime:"\u2A02",bigsqcup:"\u2A06",xsqcup:"\u2A06",bigstar:"\u2605",starf:"\u2605",bigtriangledown:"\u25BD",xdtri:"\u25BD",bigtriangleup:"\u25B3",xutri:"\u25B3",biguplus:"\u2A04",xuplus:"\u2A04",bkarow:"\u290D",rbarr:"\u290D",blacklozenge:"\u29EB",lozf:"\u29EB",blacktriangle:"\u25B4",utrif:"\u25B4",blacktriangledown:"\u25BE",dtrif:"\u25BE",blacktriangleleft:"\u25C2",ltrif:"\u25C2",blacktriangleright:"\u25B8",rtrif:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bnot:"\u2310",bopf:"\u{1D553}",bowtie:"\u22C8",boxDL:"\u2557",boxDR:"\u2554",boxDl:"\u2556",boxDr:"\u2553",boxH:"\u2550",boxHD:"\u2566",boxHU:"\u2569",boxHd:"\u2564",boxHu:"\u2567",boxUL:"\u255D",boxUR:"\u255A",boxUl:"\u255C",boxUr:"\u2559",boxV:"\u2551",boxVH:"\u256C",boxVL:"\u2563",boxVR:"\u2560",boxVh:"\u256B",boxVl:"\u2562",boxVr:"\u255F",boxbox:"\u29C9",boxdL:"\u2555",boxdR:"\u2552",boxdl:"\u2510",boxdr:"\u250C",boxhD:"\u2565",boxhU:"\u2568",boxhd:"\u252C",boxhu:"\u2534",boxminus:"\u229F",minusb:"\u229F",boxplus:"\u229E",plusb:"\u229E",boxtimes:"\u22A0",timesb:"\u22A0",boxuL:"\u255B",boxuR:"\u2558",boxul:"\u2518",boxur:"\u2514",boxv:"\u2502",boxvH:"\u256A",boxvL:"\u2561",boxvR:"\u255E",boxvh:"\u253C",boxvl:"\u2524",boxvr:"\u251C",brvbar:"\xA6",bscr:"\u{1D4B7}",bsemi:"\u204F",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bumpE:"\u2AAE",cacute:"\u0107",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",caps:"\u2229\uFE00",caret:"\u2041",ccaps:"\u2A4D",ccaron:"\u010D",ccedil:"\xE7",ccirc:"\u0109",ccups:"\u2A4C",ccupssm:"\u2A50",cdot:"\u010B",cemptyv:"\u29B2",cent:"\xA2",cfr:"\u{1D520}",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",chi:"\u03C7",cir:"\u25CB",cirE:"\u29C3",circ:"\u02C6",circeq:"\u2257",cire:"\u2257",circlearrowleft:"\u21BA",olarr:"\u21BA",circlearrowright:"\u21BB",orarr:"\u21BB",circledS:"\u24C8",oS:"\u24C8",circledast:"\u229B",oast:"\u229B",circledcirc:"\u229A",ocir:"\u229A",circleddash:"\u229D",odash:"\u229D",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",clubs:"\u2663",clubsuit:"\u2663",colon:":",comma:",",commat:"@",comp:"\u2201",complement:"\u2201",congdot:"\u2A6D",copf:"\u{1D554}",copysr:"\u2117",crarr:"\u21B5",cross:"\u2717",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",curlyeqprec:"\u22DE",cuesc:"\u22DF",curlyeqsucc:"\u22DF",cularr:"\u21B6",curvearrowleft:"\u21B6",cularrp:"\u293D",cup:"\u222A",cupbrcap:"\u2A48",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curvearrowright:"\u21B7",curarrm:"\u293C",curlyvee:"\u22CE",cuvee:"\u22CE",curlywedge:"\u22CF",cuwed:"\u22CF",curren:"\xA4",cwint:"\u2231",cylcty:"\u232D",dHar:"\u2965",dagger:"\u2020",daleth:"\u2138",dash:"\u2010",hyphen:"\u2010",dbkarow:"\u290F",rBarr:"\u290F",dcaron:"\u010F",dcy:"\u0434",ddarr:"\u21CA",downdownarrows:"\u21CA",ddotseq:"\u2A77",eDDot:"\u2A77",deg:"\xB0",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",dfr:"\u{1D521}",diamondsuit:"\u2666",diams:"\u2666",digamma:"\u03DD",gammad:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",djcy:"\u0452",dlcorn:"\u231E",llcorner:"\u231E",dlcrop:"\u230D",dollar:"$",dopf:"\u{1D555}",doteqdot:"\u2251",eDot:"\u2251",dotminus:"\u2238",minusd:"\u2238",dotplus:"\u2214",plusdo:"\u2214",dotsquare:"\u22A1",sdotb:"\u22A1",drcorn:"\u231F",lrcorner:"\u231F",drcrop:"\u230C",dscr:"\u{1D4B9}",dscy:"\u0455",dsol:"\u29F6",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",triangledown:"\u25BF",dwangle:"\u29A6",dzcy:"\u045F",dzigrarr:"\u27FF",eacute:"\xE9",easter:"\u2A6E",ecaron:"\u011B",ecir:"\u2256",eqcirc:"\u2256",ecirc:"\xEA",ecolon:"\u2255",eqcolon:"\u2255",ecy:"\u044D",edot:"\u0117",efDot:"\u2252",fallingdotseq:"\u2252",efr:"\u{1D522}",eg:"\u2A9A",egrave:"\xE8",egs:"\u2A96",eqslantgtr:"\u2A96",egsdot:"\u2A98",el:"\u2A99",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",eqslantless:"\u2A95",elsdot:"\u2A97",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",emptyv:"\u2205",varnothing:"\u2205",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",eng:"\u014B",ensp:"\u2002",eogon:"\u0119",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",epsilon:"\u03B5",epsiv:"\u03F5",straightepsilon:"\u03F5",varepsilon:"\u03F5",equals:"=",equest:"\u225F",questeq:"\u225F",equivDD:"\u2A78",eqvparsl:"\u29E5",erDot:"\u2253",risingdotseq:"\u2253",erarr:"\u2971",escr:"\u212F",eta:"\u03B7",eth:"\xF0",euml:"\xEB",euro:"\u20AC",excl:"!",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",ffr:"\u{1D523}",filig:"\uFB01",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",fopf:"\u{1D557}",fork:"\u22D4",pitchfork:"\u22D4",forkv:"\u2AD9",fpartint:"\u2A0D",frac12:"\xBD",half:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",sfrown:"\u2322",fscr:"\u{1D4BB}",gEl:"\u2A8C",gtreqqless:"\u2A8C",gacute:"\u01F5",gamma:"\u03B3",gap:"\u2A86",gtrapprox:"\u2A86",gbreve:"\u011F",gcirc:"\u011D",gcy:"\u0433",gdot:"\u0121",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",gfr:"\u{1D524}",gimel:"\u2137",gjcy:"\u0453",glE:"\u2A92",gla:"\u2AA5",glj:"\u2AA4",gnE:"\u2269",gneqq:"\u2269",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gneq:"\u2A88",gnsim:"\u22E7",gopf:"\u{1D558}",gscr:"\u210A",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtrdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrarr:"\u2978",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",hardcy:"\u044A",harrcir:"\u2948",harrw:"\u21AD",leftrightsquigarrow:"\u21AD",hbar:"\u210F",hslash:"\u210F",planck:"\u210F",plankv:"\u210F",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",mldr:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",hksearow:"\u2925",searhk:"\u2925",hkswarow:"\u2926",swarhk:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",larrhk:"\u21A9",hookrightarrow:"\u21AA",rarrhk:"\u21AA",hopf:"\u{1D559}",horbar:"\u2015",hscr:"\u{1D4BD}",hstrok:"\u0127",hybull:"\u2043",iacute:"\xED",icirc:"\xEE",icy:"\u0438",iecy:"\u0435",iexcl:"\xA1",ifr:"\u{1D526}",igrave:"\xEC",iiiint:"\u2A0C",qint:"\u2A0C",iiint:"\u222D",tint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",ijlig:"\u0133",imacr:"\u012B",imath:"\u0131",inodot:"\u0131",imof:"\u22B7",imped:"\u01B5",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",intcal:"\u22BA",intercal:"\u22BA",intlarhk:"\u2A17",intprod:"\u2A3C",iprod:"\u2A3C",iocy:"\u0451",iogon:"\u012F",iopf:"\u{1D55A}",iota:"\u03B9",iquest:"\xBF",iscr:"\u{1D4BE}",isinE:"\u22F9",isindot:"\u22F5",isins:"\u22F4",isinsv:"\u22F3",itilde:"\u0129",iukcy:"\u0456",iuml:"\xEF",jcirc:"\u0135",jcy:"\u0439",jfr:"\u{1D527}",jmath:"\u0237",jopf:"\u{1D55B}",jscr:"\u{1D4BF}",jsercy:"\u0458",jukcy:"\u0454",kappa:"\u03BA",kappav:"\u03F0",varkappa:"\u03F0",kcedil:"\u0137",kcy:"\u043A",kfr:"\u{1D528}",kgreen:"\u0138",khcy:"\u0445",kjcy:"\u045C",kopf:"\u{1D55C}",kscr:"\u{1D4C0}",lAtail:"\u291B",lBarr:"\u290E",lEg:"\u2A8B",lesseqqgtr:"\u2A8B",lHar:"\u2962",lacute:"\u013A",laemptyv:"\u29B4",lambda:"\u03BB",langd:"\u2991",lap:"\u2A85",lessapprox:"\u2A85",laquo:"\xAB",larrbfs:"\u291F",larrfs:"\u291D",larrlp:"\u21AB",looparrowleft:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",leftarrowtail:"\u21A2",lat:"\u2AAB",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lcub:"{",lbrack:"[",lsqb:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",lcaron:"\u013E",lcedil:"\u013C",lcy:"\u043B",ldca:"\u2936",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",leq:"\u2264",leftleftarrows:"\u21C7",llarr:"\u21C7",leftthreetimes:"\u22CB",lthree:"\u22CB",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessdot:"\u22D6",ltdot:"\u22D6",lfisht:"\u297C",lfr:"\u{1D529}",lgE:"\u2A91",lharul:"\u296A",lhblk:"\u2584",ljcy:"\u0459",llhard:"\u296B",lltri:"\u25FA",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnE:"\u2268",lneqq:"\u2268",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lneq:"\u2A87",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",longmapsto:"\u27FC",xmap:"\u27FC",looparrowright:"\u21AC",rarrlp:"\u21AC",lopar:"\u2985",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",loz:"\u25CA",lozenge:"\u25CA",lpar:"(",lparlt:"\u2993",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",lsime:"\u2A8D",lsimg:"\u2A8F",lsquor:"\u201A",sbquo:"\u201A",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltrPar:"\u2996",ltri:"\u25C3",triangleleft:"\u25C3",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",mDDot:"\u223A",macr:"\xAF",strns:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",marker:"\u25AE",mcomma:"\u2A29",mcy:"\u043C",mdash:"\u2014",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midcir:"\u2AF0",minus:"\u2212",minusdu:"\u2A2A",mlcp:"\u2ADB",models:"\u22A7",mopf:"\u{1D55E}",mscr:"\u{1D4C2}",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nGg:"\u22D9\u0338",nGt:"\u226B\u20D2",nLeftarrow:"\u21CD",nlArr:"\u21CD",nLeftrightarrow:"\u21CE",nhArr:"\u21CE",nLl:"\u22D8\u0338",nLt:"\u226A\u20D2",nRightarrow:"\u21CF",nrArr:"\u21CF",nVDash:"\u22AF",nVdash:"\u22AE",nacute:"\u0144",nang:"\u2220\u20D2",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",natur:"\u266E",natural:"\u266E",ncap:"\u2A43",ncaron:"\u0148",ncedil:"\u0146",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",ncy:"\u043D",ndash:"\u2013",neArr:"\u21D7",nearhk:"\u2924",nedot:"\u2250\u0338",nesear:"\u2928",toea:"\u2928",nfr:"\u{1D52B}",nharr:"\u21AE",nleftrightarrow:"\u21AE",nhpar:"\u2AF2",nis:"\u22FC",nisd:"\u22FA",njcy:"\u045A",nlE:"\u2266\u0338",nleqq:"\u2266\u0338",nlarr:"\u219A",nleftarrow:"\u219A",nldr:"\u2025",nopf:"\u{1D55F}",not:"\xAC",notinE:"\u22F9\u0338",notindot:"\u22F5\u0338",notinvb:"\u22F7",notinvc:"\u22F6",notnivb:"\u22FE",notnivc:"\u22FD",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",nrarr:"\u219B",nrightarrow:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nscr:"\u{1D4C3}",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsubseteqq:"\u2AC5\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupseteqq:"\u2AC6\u0338",ntilde:"\xF1",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvDash:"\u22AD",nvHarr:"\u2904",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwArr:"\u21D6",nwarhk:"\u2923",nwnear:"\u2927",oacute:"\xF3",ocirc:"\xF4",ocy:"\u043E",odblac:"\u0151",odiv:"\u2A38",odsold:"\u29BC",oelig:"\u0153",ofcir:"\u29BF",ofr:"\u{1D52C}",ogon:"\u02DB",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",olcir:"\u29BE",olcross:"\u29BB",olt:"\u29C0",omacr:"\u014D",omega:"\u03C9",omicron:"\u03BF",omid:"\u29B6",oopf:"\u{1D560}",opar:"\u29B7",operp:"\u29B9",or:"\u2228",vee:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",oscr:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oslash:"\xF8",osol:"\u2298",otilde:"\xF5",otimesas:"\u2A36",ouml:"\xF6",ovbar:"\u233D",para:"\xB6",parsim:"\u2AF3",parsl:"\u2AFD",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",pertenk:"\u2031",pfr:"\u{1D52D}",phi:"\u03C6",phiv:"\u03D5",straightphi:"\u03D5",varphi:"\u03D5",phone:"\u260E",pi:"\u03C0",piv:"\u03D6",varpi:"\u03D6",planckh:"\u210E",plus:"+",plusacir:"\u2A23",pluscir:"\u2A22",plusdu:"\u2A25",pluse:"\u2A72",plussim:"\u2A26",plustwo:"\u2A27",pointint:"\u2A15",popf:"\u{1D561}",pound:"\xA3",prE:"\u2AB3",prap:"\u2AB7",precapprox:"\u2AB7",precnapprox:"\u2AB9",prnap:"\u2AB9",precneqq:"\u2AB5",prnE:"\u2AB5",precnsim:"\u22E8",prnsim:"\u22E8",prime:"\u2032",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prurel:"\u22B0",pscr:"\u{1D4C5}",psi:"\u03C8",puncsp:"\u2008",qfr:"\u{1D52E}",qopf:"\u{1D562}",qprime:"\u2057",qscr:"\u{1D4C6}",quatint:"\u2A16",quest:"?",rAtail:"\u291C",rHar:"\u2964",race:"\u223D\u0331",racute:"\u0155",raemptyv:"\u29B3",rangd:"\u2992",range:"\u29A5",raquo:"\xBB",rarrap:"\u2975",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrpl:"\u2945",rarrsim:"\u2974",rarrtl:"\u21A3",rightarrowtail:"\u21A3",rarrw:"\u219D",rightsquigarrow:"\u219D",ratail:"\u291A",ratio:"\u2236",rbbrk:"\u2773",rbrace:"}",rcub:"}",rbrack:"]",rsqb:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",rcaron:"\u0159",rcedil:"\u0157",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdsh:"\u21B3",rect:"\u25AD",rfisht:"\u297D",rfr:"\u{1D52F}",rharul:"\u296C",rho:"\u03C1",rhov:"\u03F1",varrho:"\u03F1",rightrightarrows:"\u21C9",rrarr:"\u21C9",rightthreetimes:"\u22CC",rthree:"\u22CC",ring:"\u02DA",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",ropar:"\u2986",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rsaquo:"\u203A",rscr:"\u{1D4C7}",rtimes:"\u22CA",rtri:"\u25B9",triangleright:"\u25B9",rtriltri:"\u29CE",ruluhar:"\u2968",rx:"\u211E",sacute:"\u015B",scE:"\u2AB4",scap:"\u2AB8",succapprox:"\u2AB8",scaron:"\u0161",scedil:"\u015F",scirc:"\u015D",scnE:"\u2AB6",succneqq:"\u2AB6",scnap:"\u2ABA",succnapprox:"\u2ABA",scnsim:"\u22E9",succnsim:"\u22E9",scpolint:"\u2A13",scy:"\u0441",sdot:"\u22C5",sdote:"\u2A66",seArr:"\u21D8",sect:"\xA7",semi:";",seswar:"\u2929",tosa:"\u2929",sext:"\u2736",sfr:"\u{1D530}",sharp:"\u266F",shchcy:"\u0449",shcy:"\u0448",shy:"\xAD",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",varsigma:"\u03C2",simdot:"\u2A6A",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",smashp:"\u2A33",smeparsl:"\u29E4",smile:"\u2323",ssmile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",sqcaps:"\u2293\uFE00",sqcups:"\u2294\uFE00",sscr:"\u{1D4C8}",star:"\u2606",sub:"\u2282",subset:"\u2282",subE:"\u2AC5",subseteqq:"\u2AC5",subdot:"\u2ABD",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subsetneqq:"\u2ACB",subne:"\u228A",subsetneq:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supE:"\u2AC6",supseteqq:"\u2AC6",supdot:"\u2ABE",supdsub:"\u2AD8",supedot:"\u2AC4",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supsetneqq:"\u2ACC",supne:"\u228B",supsetneq:"\u228B",supplus:"\u2AC0",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swArr:"\u21D9",swnwar:"\u292A",szlig:"\xDF",target:"\u2316",tau:"\u03C4",tcaron:"\u0165",tcedil:"\u0163",tcy:"\u0442",telrec:"\u2315",tfr:"\u{1D531}",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",vartheta:"\u03D1",thorn:"\xFE",times:"\xD7",timesbar:"\u2A31",timesd:"\u2A30",topbot:"\u2336",topcir:"\u2AF1",topf:"\u{1D565}",topfork:"\u2ADA",tprime:"\u2034",triangle:"\u25B5",utri:"\u25B5",triangleq:"\u225C",trie:"\u225C",tridot:"\u25EC",triminus:"\u2A3A",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",tscr:"\u{1D4C9}",tscy:"\u0446",tshcy:"\u045B",tstrok:"\u0167",uHar:"\u2963",uacute:"\xFA",ubrcy:"\u045E",ubreve:"\u016D",ucirc:"\xFB",ucy:"\u0443",udblac:"\u0171",ufisht:"\u297E",ufr:"\u{1D532}",ugrave:"\xF9",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",umacr:"\u016B",uogon:"\u0173",uopf:"\u{1D566}",upsi:"\u03C5",upsilon:"\u03C5",upuparrows:"\u21C8",uuarr:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",uring:"\u016F",urtri:"\u25F9",uscr:"\u{1D4CA}",utdot:"\u22F0",utilde:"\u0169",uuml:"\xFC",uwangle:"\u29A7",vBar:"\u2AE8",vBarv:"\u2AE9",vangrt:"\u299C",varsubsetneq:"\u228A\uFE00",vsubne:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",vsubnE:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",vsupne:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vsupnE:"\u2ACC\uFE00",vcy:"\u0432",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",vfr:"\u{1D533}",vopf:"\u{1D567}",vscr:"\u{1D4CB}",vzigzag:"\u299A",wcirc:"\u0175",wedbar:"\u2A5F",wedgeq:"\u2259",weierp:"\u2118",wp:"\u2118",wfr:"\u{1D534}",wopf:"\u{1D568}",wscr:"\u{1D4CC}",xfr:"\u{1D535}",xi:"\u03BE",xnis:"\u22FB",xopf:"\u{1D569}",xscr:"\u{1D4CD}",yacute:"\xFD",yacy:"\u044F",ycirc:"\u0177",ycy:"\u044B",yen:"\xA5",yfr:"\u{1D536}",yicy:"\u0457",yopf:"\u{1D56A}",yscr:"\u{1D4CE}",yucy:"\u044E",yuml:"\xFF",zacute:"\u017A",zcaron:"\u017E",zcy:"\u0437",zdot:"\u017C",zeta:"\u03B6",zfr:"\u{1D537}",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"},AM="\uE500";zh.ngsp=AM;var kw=class{tokens;errors;nonNormalizedIcuExpressions;constructor(e,t,r){this.tokens=e,this.errors=t,this.nonNormalizedIcuExpressions=r}};function O8(n,e,t,r={}){let i=new Ow(new gg(n,e),t,r);return i.tokenize(),new kw(H8(i.tokens),i.errors,i.nonNormalizedIcuExpressions)}var N8=/\r\n?/g;function Ic(n){return`Unexpected character "${n===on?"EOF":String.fromCharCode(n)}"`}function NT(n){return`Unknown entity "${n}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}function R8(n,e){return`Unable to parse entity "${e}" - ${n} character reference entities must end with ";"`}var Pw=(function(n){return n.HEX="hexadecimal",n.DEC="decimal",n})(Pw||{}),F8=["@if","@else","@for","@switch","@case","@default","@empty","@defer","@placeholder","@loading","@error"],$d={start:"{{",end:"}}"},Ow=class{_getTagDefinition;_cursor;_tokenizeIcu;_leadingTriviaCodePoints;_currentTokenStart=null;_currentTokenType=null;_expansionCaseStack=[];_openDirectiveCount=0;_inInterpolation=!1;_preserveLineEndings;_i18nNormalizeLineEndingsInICUs;_tokenizeBlocks;_tokenizeLet;_selectorlessEnabled;tokens=[];errors=[];nonNormalizedIcuExpressions=[];constructor(e,t,r){this._getTagDefinition=t,this._tokenizeIcu=r.tokenizeExpansionForms||!1,this._leadingTriviaCodePoints=r.leadingTriviaChars&&r.leadingTriviaChars.map(s=>s.codePointAt(0)||0);let i=r.range||{endPos:e.content.length,startPos:0,startLine:0,startCol:0};this._cursor=r.escapedString?new Nw(e,i):new Pg(e,i),this._preserveLineEndings=r.preserveLineEndings||!1,this._i18nNormalizeLineEndingsInICUs=r.i18nNormalizeLineEndingsInICUs||!1,this._tokenizeBlocks=r.tokenizeBlocks??!0,this._tokenizeLet=r.tokenizeLet??!0,this._selectorlessEnabled=r.selectorlessEnabled??!1;try{this._cursor.init()}catch(s){this.handleError(s)}}_processCarriageReturns(e){return this._preserveLineEndings?e:e.replace(N8,`
`)}tokenize(){for(;this._cursor.peek()!==on;){let e=this._cursor.clone();try{this._attemptCharCode(Bc)?this._attemptCharCode(dw)?this._attemptCharCode(rs)?this._consumeCdata(e):this._attemptCharCode(pg)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(ri)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeLet&&this._cursor.peek()===xc&&!this._inInterpolation&&this._isLetStart()?this._consumeLetDeclaration(e):this._tokenizeBlocks&&this._isBlockStart()?this._consumeBlockStart(e):this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansionCase()&&!this._isInExpansionForm()&&this._attemptCharCode(Wn)?this._consumeBlockEnd(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeWithInterpolation(5,8,()=>this._isTextEnd(),()=>this._isTagStart())}catch(t){this.handleError(t)}}this._beginToken(41),this._endToken([])}_getBlockName(){let e=!1,t=this._cursor.clone();return this._attemptCharCodeUntilFn(r=>Ph(r)?!e:U8(r)?(e=!0,!1):!0),this._cursor.getChars(t).trim()}_consumeBlockStart(e){this._requireCharCode(xc),this._beginToken(24,e);let t=this._endToken([this._getBlockName()]);if(this._cursor.peek()===$r)if(this._cursor.advance(),this._consumeBlockParameters(),this._attemptCharCodeUntilFn(xt),this._attemptCharCode(yn))this._attemptCharCodeUntilFn(xt);else{t.type=28;return}this._attemptCharCode(Di)?(this._beginToken(25),this._endToken([])):t.type=28}_consumeBlockEnd(e){this._beginToken(26,e),this._endToken([])}_consumeBlockParameters(){for(this._attemptCharCodeUntilFn(FT);this._cursor.peek()!==yn&&this._cursor.peek()!==on;){this._beginToken(27);let e=this._cursor.clone(),t=null,r=0;for(;this._cursor.peek()!==Rr&&this._cursor.peek()!==on||t!==null;){let i=this._cursor.peek();if(i===Za)this._cursor.advance();else if(i===t)t=null;else if(t===null&&Zd(i))t=i;else if(i===$r&&t===null)r++;else if(i===yn&&t===null){if(r===0)break;r>0&&r--}this._cursor.advance()}this._endToken([this._cursor.getChars(e)]),this._attemptCharCodeUntilFn(FT)}}_consumeLetDeclaration(e){if(this._requireStr("@let"),this._beginToken(29,e),Ph(this._cursor.peek()))this._attemptCharCodeUntilFn(xt);else{let i=this._endToken([this._cursor.getChars(e)]);i.type=32;return}let t=this._endToken([this._getLetDeclarationName()]);if(this._attemptCharCodeUntilFn(xt),!this._attemptCharCode(Pn)){t.type=32;return}this._attemptCharCodeUntilFn(i=>xt(i)&&!mg(i)),this._consumeLetDeclarationValue(),this._cursor.peek()===Rr?(this._beginToken(31),this._endToken([]),this._cursor.advance()):(t.type=32,t.sourceSpan=this._cursor.getSpan(e))}_getLetDeclarationName(){let e=this._cursor.clone(),t=!1;return this._attemptCharCodeUntilFn(r=>Lo(r)||r===Xg||r===Uo||t&&xi(r)?(t=!0,!1):!0),this._cursor.getChars(e).trim()}_consumeLetDeclarationValue(){let e=this._cursor.clone();for(this._beginToken(30,e);this._cursor.peek()!==on;){let t=this._cursor.peek();if(t===Rr)break;Zd(t)&&(this._cursor.advance(),this._attemptCharCodeUntilFn(r=>r===Za?(this._cursor.advance(),!1):r===t)),this._cursor.advance()}this._endToken([this._cursor.getChars(e)])}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(V8(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===Wn){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(e,t=this._cursor.clone()){this._currentTokenStart=t,this._currentTokenType=e}_endToken(e,t){if(this._currentTokenStart===null)throw new ue(this._cursor.getSpan(t),"Programming error - attempted to end a token when there was no start to the token");if(this._currentTokenType===null)throw new ue(this._cursor.getSpan(this._currentTokenStart),"Programming error - attempted to end a token which has no token type");let r={type:this._currentTokenType,parts:e,sourceSpan:(t??this._cursor).getSpan(this._currentTokenStart,this._leadingTriviaCodePoints)};return this.tokens.push(r),this._currentTokenStart=null,this._currentTokenType=null,r}_createError(e,t){this._isInExpansionForm()&&(e+=` (Do you have an unescaped "{" in your template? Use "{{ '{' }}") to escape it.)`);let r=new ue(t,e);return this._currentTokenStart=null,this._currentTokenType=null,r}handleError(e){if(e instanceof qh&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),e instanceof ue)this.errors.push(e);else throw e}_attemptCharCode(e){return this._cursor.peek()===e?(this._cursor.advance(),!0):!1}_attemptCharCodeCaseInsensitive(e){return j8(this._cursor.peek(),e)?(this._cursor.advance(),!0):!1}_requireCharCode(e){let t=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(Ic(this._cursor.peek()),this._cursor.getSpan(t))}_attemptStr(e){let t=e.length;if(this._cursor.charsLeft()<t)return!1;let r=this._cursor.clone();for(let i=0;i<t;i++)if(!this._attemptCharCode(e.charCodeAt(i)))return this._cursor=r,!1;return!0}_attemptStrCaseInsensitive(e){for(let t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}_requireStr(e){let t=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(Ic(this._cursor.peek()),this._cursor.getSpan(t))}_attemptCharCodeUntilFn(e){for(;!e(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(e,t){let r=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(r)<t)throw this._createError(Ic(this._cursor.peek()),this._cursor.getSpan(r))}_attemptUntilChar(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}_readChar(){let e=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),e}_peekStr(e){let t=e.length;if(this._cursor.charsLeft()<t)return!1;let r=this._cursor.clone();for(let i=0;i<t;i++){if(r.peek()!==e.charCodeAt(i))return!1;r.advance()}return!0}_isBlockStart(){return this._cursor.peek()===xc&&F8.some(e=>this._peekStr(e))}_isLetStart(){return this._cursor.peek()===xc&&this._peekStr("@let")}_consumeEntity(e){this._beginToken(9);let t=this._cursor.clone();if(this._cursor.advance(),this._attemptCharCode(ZA)){let r=this._attemptCharCode(oM)||this._attemptCharCode(ZB),i=this._cursor.clone();if(this._attemptCharCodeUntilFn(B8),this._cursor.peek()!=Rr){this._cursor.advance();let o=r?Pw.HEX:Pw.DEC;throw this._createError(R8(o,this._cursor.getChars(t)),this._cursor.getSpan())}let s=this._cursor.getChars(i);this._cursor.advance();try{let o=parseInt(s,r?16:10);this._endToken([String.fromCodePoint(o),this._cursor.getChars(t)])}catch{throw this._createError(NT(this._cursor.getChars(t)),this._cursor.getSpan())}}else{let r=this._cursor.clone();if(this._attemptCharCodeUntilFn($8),this._cursor.peek()!=Rr)this._beginToken(e,t),this._cursor=r,this._endToken(["&"]);else{let i=this._cursor.getChars(r);this._cursor.advance();let s=zh.hasOwnProperty(i)&&zh[i];if(!s)throw this._createError(NT(i),this._cursor.getSpan(t));this._endToken([s,`&${i};`])}}}_consumeRawText(e,t){this._beginToken(e?6:7);let r=[];for(;;){let i=this._cursor.clone(),s=t();if(this._cursor=i,s)break;e&&this._cursor.peek()===fg?(this._endToken([this._processCarriageReturns(r.join(""))]),r.length=0,this._consumeEntity(6),this._beginToken(6)):r.push(this._readChar())}this._endToken([this._processCarriageReturns(r.join(""))])}_consumeComment(e){this._beginToken(10,e),this._requireCharCode(pg),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("-->")),this._beginToken(11),this._requireStr("-->"),this._endToken([])}_consumeCdata(e){this._beginToken(12,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(13),this._requireStr("]]>"),this._endToken([])}_consumeDocType(e){this._beginToken(18,e);let t=this._cursor.clone();this._attemptUntilChar(ti);let r=this._cursor.getChars(t);this._cursor.advance(),this._endToken([r])}_consumePrefixAndName(e){let t=this._cursor.clone(),r="";for(;this._cursor.peek()!==ts&&!L8(this._cursor.peek());)this._cursor.advance();let i;this._cursor.peek()===ts?(r=this._cursor.getChars(t),this._cursor.advance(),i=this._cursor.clone()):i=t,this._requireCharCodeUntilFn(e,r===""?0:1);let s=this._cursor.getChars(i);return[r,s]}_consumeTagOpen(e){let t,r,i,s;try{if(this._selectorlessEnabled&&Em(this._cursor.peek()))s=this._consumeComponentOpenStart(e),[i,r,t]=s.parts,r&&(i+=`:${r}`),t&&(i+=`:${t}`),this._attemptCharCodeUntilFn(xt);else{if(!Lo(this._cursor.peek()))throw this._createError(Ic(this._cursor.peek()),this._cursor.getSpan(e));s=this._consumeTagOpenStart(e),r=s.parts[0],t=i=s.parts[1],this._attemptCharCodeUntilFn(xt)}for(;!BT(this._cursor.peek());)if(this._selectorlessEnabled&&this._cursor.peek()===xc){let a=this._cursor.clone(),u=a.clone();u.advance(),Em(u.peek())&&this._consumeDirective(a,u)}else this._consumeAttribute();s.type===33?this._consumeComponentOpenEnd():this._consumeTagOpenEnd()}catch(a){if(a instanceof ue){s?s.type=s.type===33?37:4:(this._beginToken(5,e),this._endToken(["<"]));return}throw a}let o=this._getTagDefinition(t).getContentType(r);o===es.RAW_TEXT?this._consumeRawTextWithTagClose(s,i,!1):o===es.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(s,i,!0)}_consumeRawTextWithTagClose(e,t,r){this._consumeRawText(r,()=>!this._attemptCharCode(Bc)||!this._attemptCharCode(ri)||(this._attemptCharCodeUntilFn(xt),!this._attemptStrCaseInsensitive(t))?!1:(this._attemptCharCodeUntilFn(xt),this._attemptCharCode(ti))),this._beginToken(e.type===33?36:3),this._requireCharCodeUntilFn(i=>i===ti,3),this._cursor.advance(),this._endToken(e.parts)}_consumeTagOpenStart(e){this._beginToken(0,e);let t=this._consumePrefixAndName(Ba);return this._endToken(t)}_consumeComponentOpenStart(e){this._beginToken(33,e);let t=this._consumeComponentName();return this._endToken(t)}_consumeComponentName(){let e=this._cursor.clone();for(;LT(this._cursor.peek());)this._cursor.advance();let t=this._cursor.getChars(e),r="",i="";return this._cursor.peek()===ts&&(this._cursor.advance(),[r,i]=this._consumePrefixAndName(Ba)),[t,r,i]}_consumeAttribute(){this._consumeAttributeName(),this._attemptCharCodeUntilFn(xt),this._attemptCharCode(Pn)&&(this._attemptCharCodeUntilFn(xt),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(xt)}_consumeAttributeName(){let e=this._cursor.peek();if(e===kh||e===Mh)throw this._createError(Ic(e),this._cursor.getSpan());this._beginToken(14);let t;if(this._openDirectiveCount>0){let i=0;t=s=>{if(this._openDirectiveCount>0){if(s===$r)i++;else if(s===yn){if(i===0)return!0;i--}}return Ba(s)}}else if(e===rs){let i=0;t=s=>(s===rs?i++:s===Hs&&i--,i<=0?Ba(s):mg(s))}else t=Ba;let r=this._consumePrefixAndName(t);this._endToken(r)}_consumeAttributeValue(){if(this._cursor.peek()===kh||this._cursor.peek()===Mh){let e=this._cursor.peek();this._consumeQuote(e);let t=()=>this._cursor.peek()===e;this._consumeWithInterpolation(16,17,t,t),this._consumeQuote(e)}else{let e=()=>Ba(this._cursor.peek());this._consumeWithInterpolation(16,17,e,e)}}_consumeQuote(e){this._beginToken(15),this._requireCharCode(e),this._endToken([String.fromCodePoint(e)])}_consumeTagOpenEnd(){let e=this._attemptCharCode(ri)?2:1;this._beginToken(e),this._requireCharCode(ti),this._endToken([])}_consumeComponentOpenEnd(){let e=this._attemptCharCode(ri)?35:34;this._beginToken(e),this._requireCharCode(ti),this._endToken([])}_consumeTagClose(e){if(this._selectorlessEnabled){let r=e.clone();for(;r.peek()!==ti&&!Em(r.peek());)r.advance();if(Em(r.peek())){this._beginToken(36,e);let i=this._consumeComponentName();this._attemptCharCodeUntilFn(xt),this._requireCharCode(ti),this._endToken(i);return}}this._beginToken(3,e),this._attemptCharCodeUntilFn(xt);let t=this._consumePrefixAndName(Ba);this._attemptCharCodeUntilFn(xt),this._requireCharCode(ti),this._endToken(t)}_consumeExpansionFormStart(){this._beginToken(19),this._requireCharCode(Di),this._endToken([]),this._expansionCaseStack.push(19),this._beginToken(7);let e=this._readUntil(vr),t=this._processCarriageReturns(e);if(this._i18nNormalizeLineEndingsInICUs)this._endToken([t]);else{let i=this._endToken([e]);t!==e&&this.nonNormalizedIcuExpressions.push(i)}this._requireCharCode(vr),this._attemptCharCodeUntilFn(xt),this._beginToken(7);let r=this._readUntil(vr);this._endToken([r]),this._requireCharCode(vr),this._attemptCharCodeUntilFn(xt)}_consumeExpansionCaseStart(){this._beginToken(20);let e=this._readUntil(Di).trim();this._endToken([e]),this._attemptCharCodeUntilFn(xt),this._beginToken(21),this._requireCharCode(Di),this._endToken([]),this._attemptCharCodeUntilFn(xt),this._expansionCaseStack.push(21)}_consumeExpansionCaseEnd(){this._beginToken(22),this._requireCharCode(Wn),this._endToken([]),this._attemptCharCodeUntilFn(xt),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(23),this._requireCharCode(Wn),this._endToken([]),this._expansionCaseStack.pop()}_consumeWithInterpolation(e,t,r,i){this._beginToken(e);let s=[];for(;!r();){let o=this._cursor.clone();this._attemptStr($d.start)?(this._endToken([this._processCarriageReturns(s.join(""))],o),s.length=0,this._consumeInterpolation(t,o,i),this._beginToken(e)):this._cursor.peek()===fg?(this._endToken([this._processCarriageReturns(s.join(""))]),s.length=0,this._consumeEntity(e),this._beginToken(e)):s.push(this._readChar())}this._inInterpolation=!1,this._endToken([this._processCarriageReturns(s.join(""))])}_consumeInterpolation(e,t,r){let i=[];this._beginToken(e,t),i.push($d.start);let s=this._cursor.clone(),o=null,a=!1;for(;this._cursor.peek()!==on&&(r===null||!r());){let u=this._cursor.clone();if(this._isTagStart()){this._cursor=u,i.push(this._getProcessedChars(s,u)),this._endToken(i);return}if(o===null)if(this._attemptStr($d.end)){i.push(this._getProcessedChars(s,u)),i.push($d.end),this._endToken(i);return}else this._attemptStr("//")&&(a=!0);let c=this._cursor.peek();this._cursor.advance(),c===Za?this._cursor.advance():c===o?o=null:!a&&o===null&&Zd(c)&&(o=c)}i.push(this._getProcessedChars(s,this._cursor)),this._endToken(i)}_consumeDirective(e,t){for(this._requireCharCode(xc),this._cursor.advance();LT(this._cursor.peek());)this._cursor.advance();this._beginToken(38,e);let r=this._cursor.getChars(t);if(this._endToken([r]),this._attemptCharCodeUntilFn(xt),this._cursor.peek()===$r){for(this._openDirectiveCount++,this._beginToken(39),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(xt);!BT(this._cursor.peek())&&this._cursor.peek()!==yn;)this._consumeAttribute();if(this._attemptCharCodeUntilFn(xt),this._openDirectiveCount--,this._cursor.peek()!==yn){if(this._cursor.peek()===ti||this._cursor.peek()===ri)return;throw this._createError(Ic(this._cursor.peek()),this._cursor.getSpan(e))}this._beginToken(40),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(xt)}}_getProcessedChars(e,t){return this._processCarriageReturns(t.getChars(e))}_isTextEnd(){return!!(this._isTagStart()||this._cursor.peek()===on||this._tokenizeIcu&&!this._inInterpolation&&(this.isExpansionFormStart()||this._cursor.peek()===Wn&&this._isInExpansionCase())||this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansion()&&(this._isBlockStart()||this._isLetStart()||this._cursor.peek()===Wn))}_isTagStart(){if(this._cursor.peek()===Bc){let e=this._cursor.clone();e.advance();let t=e.peek();if(du<=t&&t<=tf||jo<=t&&t<=ol||t===ri||t===dw)return!0}return!1}_readUntil(e){let t=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(t)}_isInExpansion(){return this._isInExpansionCase()||this._isInExpansionForm()}_isInExpansionCase(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===21}_isInExpansionForm(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===19}isExpansionFormStart(){if(this._cursor.peek()!==Di)return!1;let e=this._cursor.clone(),t=this._attemptStr($d.start);return this._cursor=e,!t}};function xt(n){return!Ph(n)||n===on}function Ba(n){return Ph(n)||n===ti||n===Bc||n===ri||n===kh||n===Mh||n===Pn||n===on}function L8(n){return(n<du||tf<n)&&(n<jo||ol<n)&&(n<IE||n>eM)}function B8(n){return n===Rr||n===on||!n$(n)}function $8(n){return n===Rr||n===on||!Lo(n)}function V8(n){return n!==Wn}function j8(n,e){return RT(n)===RT(e)}function RT(n){return n>=du&&n<=tf?n-du+jo:n}function U8(n){return Lo(n)||xi(n)||n===Uo}function FT(n){return n!==Rr&&xt(n)}function Em(n){return n===Uo||n>=jo&&n<=ol}function LT(n){return Lo(n)||xi(n)||n===Uo}function BT(n){return n===ri||n===ti||n===Bc||n===on}function H8(n){let e=[],t;for(let r=0;r<n.length;r++){let i=n[r];t&&t.type===5&&i.type===5||t&&t.type===16&&i.type===16?(t.parts[0]+=i.parts[0],t.sourceSpan.end=i.sourceSpan.end):(t=i,e.push(t))}return e}var Pg=class n{state;file;input;end;constructor(e,t){if(e instanceof n){this.file=e.file,this.input=e.input,this.end=e.end;let r=e.state;this.state={peek:r.peek,offset:r.offset,line:r.line,column:r.column}}else{if(!t)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=e,this.input=e.content,this.end=t.endPos,this.state={peek:-1,offset:t.startPos,line:t.startLine,column:t.startCol}}}clone(){return new n(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(e){return this.state.offset-e.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(e,t){e=e||this;let r=e;if(t)for(;this.diff(e)>0&&t.indexOf(e.peek())!==-1;)r===e&&(e=e.clone()),e.advance();let i=this.locationFromCursor(e),s=this.locationFromCursor(this),o=r!==e?this.locationFromCursor(r):i;return new ge(i,s,o)}getChars(e){return this.input.substring(e.state.offset,this.state.offset)}charAt(e){return this.input.charCodeAt(e)}advanceState(e){if(e.offset>=this.end)throw this.state=e,new qh('Unexpected character "EOF"',this);let t=this.charAt(e.offset);t===Xa?(e.line++,e.column=0):mg(t)||e.column++,e.offset++,this.updatePeek(e)}updatePeek(e){e.peek=e.offset>=this.end?on:this.charAt(e.offset)}locationFromCursor(e){return new Oh(e.file,e.state.offset,e.state.line,e.state.column)}},Nw=class n extends Pg{internalState;constructor(e,t){e instanceof n?(super(e),this.internalState=C({},e.internalState)):(super(e,t),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new n(this)}getChars(e){let t=e.clone(),r="";for(;t.internalState.offset<this.internalState.offset;)r+=String.fromCodePoint(t.peek()),t.advance();return r}processEscapeSequence(){let e=()=>this.internalState.peek;if(e()===Za)if(this.internalState=C({},this.state),this.advanceState(this.internalState),e()===tM)this.state.peek=Xa;else if(e()===nM)this.state.peek=SE;else if(e()===sM)this.state.peek=KA;else if(e()===rM)this.state.peek=DE;else if(e()===e$)this.state.peek=GB;else if(e()===TE)this.state.peek=QA;else if(e()===iM)if(this.advanceState(this.internalState),e()===Di){this.advanceState(this.internalState);let t=this.clone(),r=0;for(;e()!==Wn;)this.advanceState(this.internalState),r++;this.state.peek=this.decodeHexDigits(t,r)}else{let t=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,4)}else if(e()===oM){this.advanceState(this.internalState);let t=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,2)}else if(fT(e())){let t="",r=0,i=this.clone();for(;fT(e())&&r<3;)i=this.clone(),t+=String.fromCodePoint(e()),this.advanceState(this.internalState),r++;this.state.peek=parseInt(t,8),this.internalState=i.internalState}else mg(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(e,t){let r=this.input.slice(e.internalState.offset,e.internalState.offset+t),i=parseInt(r,16);if(isNaN(i))throw e.state=e.internalState,new qh("Invalid hexadecimal escape sequence",e);return i}},qh=class extends Error{msg;cursor;constructor(e,t){super(e),this.msg=e,this.cursor=t,Object.setPrototypeOf(this,new.target.prototype)}},zt=class n extends ue{elementName;static create(e,t,r){return new n(e,t,r)}constructor(e,t,r){super(t,r),this.elementName=e}},Og=class{rootNodes;errors;constructor(e,t){this.rootNodes=e,this.errors=t}},z8=class{getTagDefinition;constructor(e){this.getTagDefinition=e}parse(e,t,r){let i=O8(e,t,this.getTagDefinition,r),s=new Rw(i.tokens,this.getTagDefinition);return s.build(),new Og(s.rootNodes,[...i.errors,...s.errors])}},Rw=class n{tokens;tagDefinitionResolver;_index=-1;_peek;_containerStack=[];rootNodes=[];errors=[];constructor(e,t){this.tokens=e,this.tagDefinitionResolver=t,this._advance()}build(){for(;this._peek.type!==41;)this._peek.type===0||this._peek.type===4?this._consumeElementStartTag(this._advance()):this._peek.type===3?this._consumeElementEndTag(this._advance()):this._peek.type===12?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===10?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===5||this._peek.type===7||this._peek.type===6?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===19?this._consumeExpansion(this._advance()):this._peek.type===24?(this._closeVoidElement(),this._consumeBlockOpen(this._advance())):this._peek.type===26?(this._closeVoidElement(),this._consumeBlockClose(this._advance())):this._peek.type===28?(this._closeVoidElement(),this._consumeIncompleteBlock(this._advance())):this._peek.type===29?(this._closeVoidElement(),this._consumeLet(this._advance())):this._peek.type===32?(this._closeVoidElement(),this._consumeIncompleteLet(this._advance())):this._peek.type===33||this._peek.type===37?this._consumeComponentStartTag(this._advance()):this._peek.type===36?this._consumeComponentEndTag(this._advance()):this._advance();for(let e of this._containerStack)e instanceof ii&&this.errors.push(zt.create(e.name,e.sourceSpan,`Unclosed block "${e.name}"`))}_advance(){let e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}_advanceIf(e){return this._peek.type===e?this._advance():null}_consumeCdata(e){this._consumeText(this._advance()),this._advanceIf(13)}_consumeComment(e){let t=this._advanceIf(7),r=this._advanceIf(11),i=t!=null?t.parts[0].trim():null,s=r==null?e.sourceSpan:new ge(e.sourceSpan.start,r.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Hh(i,s))}_consumeExpansion(e){let t=this._advance(),r=this._advance(),i=[];for(;this._peek.type===20;){let o=this._parseExpansionCase();if(!o)return;i.push(o)}if(this._peek.type!==23){this.errors.push(zt.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));return}let s=new ge(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Ja(t.parts[0],r.parts[0],i,s,t.sourceSpan)),this._advance()}_parseExpansionCase(){let e=this._advance();if(this._peek.type!==21)return this.errors.push(zt.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;let t=this._advance(),r=this._collectExpansionExpTokens(t);if(!r)return null;let i=this._advance();r.push({type:41,parts:[],sourceSpan:i.sourceSpan});let s=new n(r,this.tagDefinitionResolver);if(s.build(),s.errors.length>0)return this.errors=this.errors.concat(s.errors),null;let o=new ge(e.sourceSpan.start,i.sourceSpan.end,e.sourceSpan.fullStart),a=new ge(t.sourceSpan.start,i.sourceSpan.end,t.sourceSpan.fullStart);return new Ag(e.parts[0],s.rootNodes,o,e.sourceSpan,a)}_collectExpansionExpTokens(e){let t=[],r=[21];for(;;){if((this._peek.type===19||this._peek.type===21)&&r.push(this._peek.type),this._peek.type===22)if($T(r,21)){if(r.pop(),r.length===0)return t}else return this.errors.push(zt.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===23)if($T(r,19))r.pop();else return this.errors.push(zt.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===41)return this.errors.push(zt.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}_consumeText(e){let t=[e],r=e.sourceSpan,i=e.parts[0];if(i.length>0&&i[0]===`
`){let s=this._getContainer();s!=null&&s.children.length===0&&this._getTagDefinition(s)?.ignoreFirstLf&&(i=i.substring(1),t[0]={type:e.type,sourceSpan:e.sourceSpan,parts:[i]})}for(;this._peek.type===8||this._peek.type===5||this._peek.type===9;)e=this._advance(),t.push(e),e.type===8?i+=e.parts.join("").replace(/&([^;]+);/g,VT):e.type===9?i+=e.parts[0]:i+=e.parts.join("");if(i.length>0){let s=e.sourceSpan;this._addToParent(new gu(i,new ge(r.start,s.end,r.fullStart,r.details),t))}}_closeVoidElement(){let e=this._getContainer();e!==null&&this._getTagDefinition(e)?.isVoid&&this._containerStack.pop()}_consumeElementStartTag(e){let t=[],r=[];this._consumeAttributesAndDirectives(t,r);let i=this._getElementFullName(e,this._getClosestElementLikeParent()),s=this._getTagDefinition(i),o=!1;this._peek.type===2?(this._advance(),o=!0,s?.canSelfClose||nw(i)!==null||s?.isVoid||this.errors.push(zt.create(i,e.sourceSpan,`Only void, custom and foreign elements can be self closed "${e.parts[1]}"`))):this._peek.type===1&&(this._advance(),o=!1);let a=this._peek.sourceSpan.fullStart,u=new ge(e.sourceSpan.start,a,e.sourceSpan.fullStart),c=new ge(e.sourceSpan.start,a,e.sourceSpan.fullStart),l=new ni(i,t,r,[],o,u,c,void 0,s?.isVoid??!1),d=this._getContainer(),h=d!==null&&!!this._getTagDefinition(d)?.isClosedByChild(l.name);this._pushContainer(l,h),o?this._popContainer(i,ni,u):e.type===4&&(this._popContainer(i,ni,null),this.errors.push(zt.create(i,u,`Opening tag "${i}" not terminated.`)))}_consumeComponentStartTag(e){let t=e.parts[0],r=[],i=[];this._consumeAttributesAndDirectives(r,i);let s=this._getClosestElementLikeParent(),o=this._getComponentTagName(e,s),a=this._getComponentFullName(e,s),u=this._peek.type===35;this._advance();let c=this._peek.sourceSpan.fullStart,l=new ge(e.sourceSpan.start,c,e.sourceSpan.fullStart),d=new ge(e.sourceSpan.start,c,e.sourceSpan.fullStart),h=new pr(t,o,a,r,i,[],u,l,d,void 0),f=this._getContainer(),p=f!==null&&h.tagName!==null&&!!this._getTagDefinition(f)?.isClosedByChild(h.tagName);this._pushContainer(h,p),u?this._popContainer(a,pr,l):e.type===37&&(this._popContainer(a,pr,null),this.errors.push(zt.create(a,l,`Opening tag "${a}" not terminated.`)))}_consumeAttributesAndDirectives(e,t){for(;this._peek.type===14||this._peek.type===38;)this._peek.type===38?t.push(this._consumeDirective(this._peek)):e.push(this._consumeAttr(this._advance()))}_consumeComponentEndTag(e){let t=this._getComponentFullName(e,this._getClosestElementLikeParent());if(!this._popContainer(t,pr,e.sourceSpan)){let r=this._containerStack[this._containerStack.length-1],i;r instanceof pr&&r.componentName===e.parts[0]?i=`, did you mean "${r.fullName}"?`:i=". It may happen when the tag has already been closed by another tag.";let s=`Unexpected closing tag "${t}"${i}`;this.errors.push(zt.create(t,e.sourceSpan,s))}}_getTagDefinition(e){return typeof e=="string"?this.tagDefinitionResolver(e):e instanceof ni?this.tagDefinitionResolver(e.name):e instanceof pr&&e.tagName!==null?this.tagDefinitionResolver(e.tagName):null}_pushContainer(e,t){t&&this._containerStack.pop(),this._addToParent(e),this._containerStack.push(e)}_consumeElementEndTag(e){let t=this._getElementFullName(e,this._getClosestElementLikeParent());if(this._getTagDefinition(t)?.isVoid)this.errors.push(zt.create(t,e.sourceSpan,`Void elements do not have end tags "${e.parts[1]}"`));else if(!this._popContainer(t,ni,e.sourceSpan)){let r=`Unexpected closing tag "${t}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`;this.errors.push(zt.create(t,e.sourceSpan,r))}}_popContainer(e,t,r){let i=!1;for(let s=this._containerStack.length-1;s>=0;s--){let o=this._containerStack[s];if(((o instanceof pr?o.fullName:o.name)===e||e===null)&&o instanceof t)return o.endSourceSpan=r,o.sourceSpan.end=r!==null?r.end:o.sourceSpan.end,this._containerStack.splice(s,this._containerStack.length-s),!i;(o instanceof ii||!this._getTagDefinition(o)?.closedByParent)&&(i=!0)}return!1}_consumeAttr(e){let t=Rm(e.parts[0],e.parts[1]),r=e.sourceSpan.end;this._peek.type===15&&this._advance();let i="",s=[],o,a;if(this._peek.type===16)for(o=this._peek.sourceSpan,a=this._peek.sourceSpan.end;this._peek.type===16||this._peek.type===17||this._peek.type===9;){let l=this._advance();s.push(l),l.type===17?i+=l.parts.join("").replace(/&([^;]+);/g,VT):l.type===9?i+=l.parts[0]:i+=l.parts.join(""),a=r=l.sourceSpan.end}this._peek.type===15&&(r=this._advance().sourceSpan.end);let c=o&&a&&new ge(o.start,a,o.fullStart);return new Aw(t,i,new ge(e.sourceSpan.start,r,e.sourceSpan.fullStart),e.sourceSpan,c,s.length>0?s:void 0,void 0)}_consumeDirective(e){let t=[],r=e.sourceSpan.end,i=null;if(this._advance(),this._peek.type===39){for(r=this._peek.sourceSpan.end,this._advance();this._peek.type===14;)t.push(this._consumeAttr(this._advance()));this._peek.type===40?(i=this._peek.sourceSpan,this._advance()):this.errors.push(zt.create(null,e.sourceSpan,"Unterminated directive definition"))}let s=new ge(e.sourceSpan.start,r,e.sourceSpan.fullStart),o=new ge(s.start,i===null?e.sourceSpan.end:i.end,s.fullStart);return new Mw(e.parts[0],t,o,s,i)}_consumeBlockOpen(e){let t=[];for(;this._peek.type===27;){let a=this._advance();t.push(new Mg(a.parts[0],a.sourceSpan))}this._peek.type===25&&this._advance();let r=this._peek.sourceSpan.fullStart,i=new ge(e.sourceSpan.start,r,e.sourceSpan.fullStart),s=new ge(e.sourceSpan.start,r,e.sourceSpan.fullStart),o=new ii(e.parts[0],t,[],i,e.sourceSpan,s);this._pushContainer(o,!1)}_consumeBlockClose(e){this._popContainer(null,ii,e.sourceSpan)||this.errors.push(zt.create(null,e.sourceSpan,'Unexpected closing block. The block may have been closed earlier. If you meant to write the } character, you should use the "&#125;" HTML entity instead.'))}_consumeIncompleteBlock(e){let t=[];for(;this._peek.type===27;){let a=this._advance();t.push(new Mg(a.parts[0],a.sourceSpan))}let r=this._peek.sourceSpan.fullStart,i=new ge(e.sourceSpan.start,r,e.sourceSpan.fullStart),s=new ge(e.sourceSpan.start,r,e.sourceSpan.fullStart),o=new ii(e.parts[0],t,[],i,e.sourceSpan,s);this._pushContainer(o,!1),this._popContainer(null,ii,null),this.errors.push(zt.create(e.parts[0],i,`Incomplete block "${e.parts[0]}". If you meant to write the @ character, you should use the "&#64;" HTML entity instead.`))}_consumeLet(e){let t=e.parts[0],r,i;if(this._peek.type!==30){this.errors.push(zt.create(e.parts[0],e.sourceSpan,`Invalid @let declaration "${t}". Declaration must have a value.`));return}else r=this._advance();if(this._peek.type!==31){this.errors.push(zt.create(e.parts[0],e.sourceSpan,`Unterminated @let declaration "${t}". Declaration must be terminated with a semicolon.`));return}else i=this._advance();let s=i.sourceSpan.fullStart,o=new ge(e.sourceSpan.start,s,e.sourceSpan.fullStart),a=e.sourceSpan.toString().lastIndexOf(t),u=e.sourceSpan.start.moveBy(a),c=new ge(u,e.sourceSpan.end),l=new kg(t,r.parts[0],o,c,r.sourceSpan);this._addToParent(l)}_consumeIncompleteLet(e){let t=e.parts[0]??"",r=t?` "${t}"`:"";if(t.length>0){let i=e.sourceSpan.toString().lastIndexOf(t),s=e.sourceSpan.start.moveBy(i),o=new ge(s,e.sourceSpan.end),a=new ge(e.sourceSpan.start,e.sourceSpan.start.moveBy(0)),u=new kg(t,"",e.sourceSpan,o,a);this._addToParent(u)}this.errors.push(zt.create(e.parts[0],e.sourceSpan,`Incomplete @let declaration${r}. @let declarations must be written as \`@let <name> = <value>;\``))}_getContainer(){return this._containerStack.length>0?this._containerStack[this._containerStack.length-1]:null}_getClosestElementLikeParent(){for(let e=this._containerStack.length-1;e>-1;e--){let t=this._containerStack[e];if(t instanceof ni||t instanceof pr)return t}return null}_addToParent(e){let t=this._getContainer();t===null?this.rootNodes.push(e):t.children.push(e)}_getElementFullName(e,t){let r=this._getPrefix(e,t);return Rm(r,e.parts[1])}_getComponentFullName(e,t){let r=e.parts[0],i=this._getComponentTagName(e,t);return i===null?r:i.startsWith(":")?r+i:`${r}:${i}`}_getComponentTagName(e,t){let r=this._getPrefix(e,t),i=e.parts[2];return!r&&!i?null:!r&&i?i:Rm(r,i||"ng-component")}_getPrefix(e,t){let r,i;if(e.type===33||e.type===37||e.type===36?(r=e.parts[1],i=e.parts[2]):(r=e.parts[0],i=e.parts[1]),r=r||this._getTagDefinition(i)?.implicitNamespacePrefix||"",!r&&t){let s=t instanceof ni?t.name:t.tagName;if(s!==null){let o=Mi(s)[1],a=this._getTagDefinition(o);a!==null&&!a.preventNamespaceInheritance&&(r=nw(s))}}return r}};function $T(n,e){return n.length>0&&n[n.length-1]===e}function VT(n,e){return zh[e]!==void 0?zh[e]||n:/^#x[a-f0-9]+$/i.test(e)?String.fromCodePoint(parseInt(e.slice(2),16)):/^#\d+$/.test(e)?String.fromCodePoint(parseInt(e.slice(1),10)):n}var MM="ngPreserveWhitespaces",jT=new Set(["pre","template","textarea","script","style"]),kM=` \f
\r	\v\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF`,q8=new RegExp(`[^${kM}]`),W8=new RegExp(`[${kM}]{2,}`,"g");function UT(n){return n.some(e=>e.name===MM)}function PM(n){return n.replace(new RegExp(AM,"g")," ")}var Ng=class{preserveSignificantWhitespace;originalNodeMap;requireContext;icuExpansionDepth=0;constructor(e,t,r=!0){this.preserveSignificantWhitespace=e,this.originalNodeMap=t,this.requireContext=r}visitElement(e,t){if(jT.has(e.name)||UT(e.attrs)){let i=new ni(e.name,Xi(this,e.attrs),Xi(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(i,e),i}let r=new ni(e.name,e.attrs,e.directives,Xi(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(r,e),r}visitAttribute(e,t){return e.name!==MM?e:null}visitText(e,t){let r=e.value.match(q8),i=t&&(t.prev instanceof Ja||t.next instanceof Ja);if(this.icuExpansionDepth>0&&this.preserveSignificantWhitespace)return e;if(r||i){let o=e.tokens.map(l=>l.type===5?Q8(l):l);if(!this.preserveSignificantWhitespace&&o.length>0){let l=o[0];o.splice(0,1,G8(l,t));let d=o[o.length-1];o.splice(o.length-1,1,Y8(d,t))}let a=NM(e.value),u=this.preserveSignificantWhitespace?a:K8(a,t),c=new gu(u,e.sourceSpan,o,e.i18n);return this.originalNodeMap?.set(c,e),c}return null}visitComment(e,t){return e}visitExpansion(e,t){this.icuExpansionDepth++;let r;try{r=new Ja(e.switchValue,e.type,Xi(this,e.cases),e.sourceSpan,e.switchValueSourceSpan,e.i18n)}finally{this.icuExpansionDepth--}return this.originalNodeMap?.set(r,e),r}visitExpansionCase(e,t){let r=new Ag(e.value,Xi(this,e.expression),e.sourceSpan,e.valueSourceSpan,e.expSourceSpan);return this.originalNodeMap?.set(r,e),r}visitBlock(e,t){let r=new ii(e.name,e.parameters,Xi(this,e.children),e.sourceSpan,e.nameSpan,e.startSourceSpan,e.endSourceSpan);return this.originalNodeMap?.set(r,e),r}visitBlockParameter(e,t){return e}visitLetDeclaration(e,t){return e}visitComponent(e,t){if(e.tagName&&jT.has(e.tagName)||UT(e.attrs)){let i=new pr(e.componentName,e.tagName,e.fullName,Xi(this,e.attrs),Xi(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(i,e),i}let r=new pr(e.componentName,e.tagName,e.fullName,e.attrs,e.directives,Xi(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(r,e),r}visitDirective(e,t){return e}visit(e,t){if(this.requireContext&&!t)throw new Error("WhitespaceVisitor requires context. Visit via `visitAllWithSiblings` to get this context.");return!1}};function G8(n,e){return n.type!==5||!!e?.prev?n:OM(n,r=>r.trimStart())}function Y8(n,e){return n.type!==5||!!e?.next?n:OM(n,r=>r.trimEnd())}function K8(n,e){let t=!e?.prev,r=!e?.next,i=t?n.trimStart():n;return r?i.trimEnd():i}function Q8({type:n,parts:e,sourceSpan:t}){return{type:n,parts:[NM(e[0])],sourceSpan:t}}function OM({type:n,parts:e,sourceSpan:t},r){return{type:n,parts:[r(e[0])],sourceSpan:t}}function NM(n){return PM(n).replace(W8," ")}function Xi(n,e){let t=[];return e.forEach((r,i)=>{let s={prev:e[i-1],next:e[i+1]},o=r.visit(n,s);o&&t.push(o)}),t}var le=(function(n){return n[n.Character=0]="Character",n[n.Identifier=1]="Identifier",n[n.PrivateIdentifier=2]="PrivateIdentifier",n[n.Keyword=3]="Keyword",n[n.String=4]="String",n[n.Operator=5]="Operator",n[n.Number=6]="Number",n[n.RegExpBody=7]="RegExpBody",n[n.RegExpFlags=8]="RegExpFlags",n[n.Error=9]="Error",n})(le||{}),eu=(function(n){return n[n.Plain=0]="Plain",n[n.TemplateLiteralPart=1]="TemplateLiteralPart",n[n.TemplateLiteralEnd=2]="TemplateLiteralEnd",n})(eu||{}),X8=["var","let","as","null","undefined","true","false","if","else","this","typeof","void","in"],Wh=class{tokenize(e){return new Fw(e).scan()}},zr=class{index;end;type;numValue;strValue;constructor(e,t,r,i,s){this.index=e,this.end=t,this.type=r,this.numValue=i,this.strValue=s}isCharacter(e){return this.type===le.Character&&this.numValue===e}isNumber(){return this.type===le.Number}isString(){return this.type===le.String}isOperator(e){return this.type===le.Operator&&this.strValue===e}isIdentifier(){return this.type===le.Identifier}isPrivateIdentifier(){return this.type===le.PrivateIdentifier}isKeyword(){return this.type===le.Keyword}isKeywordLet(){return this.type===le.Keyword&&this.strValue==="let"}isKeywordAs(){return this.type===le.Keyword&&this.strValue==="as"}isKeywordNull(){return this.type===le.Keyword&&this.strValue==="null"}isKeywordUndefined(){return this.type===le.Keyword&&this.strValue==="undefined"}isKeywordTrue(){return this.type===le.Keyword&&this.strValue==="true"}isKeywordFalse(){return this.type===le.Keyword&&this.strValue==="false"}isKeywordThis(){return this.type===le.Keyword&&this.strValue==="this"}isKeywordTypeof(){return this.type===le.Keyword&&this.strValue==="typeof"}isKeywordVoid(){return this.type===le.Keyword&&this.strValue==="void"}isKeywordIn(){return this.type===le.Keyword&&this.strValue==="in"}isError(){return this.type===le.Error}isRegExpBody(){return this.type===le.RegExpBody}isRegExpFlags(){return this.type===le.RegExpFlags}toNumber(){return this.type===le.Number?this.numValue:-1}isTemplateLiteralPart(){return this.isString()&&this.kind===eu.TemplateLiteralPart}isTemplateLiteralEnd(){return this.isString()&&this.kind===eu.TemplateLiteralEnd}isTemplateLiteralInterpolationStart(){return this.isOperator("${")}toString(){switch(this.type){case le.Character:case le.Identifier:case le.Keyword:case le.Operator:case le.PrivateIdentifier:case le.String:case le.Error:case le.RegExpBody:case le.RegExpFlags:return this.strValue;case le.Number:return this.numValue.toString();default:return null}}},Jd=class extends zr{kind;constructor(e,t,r,i){super(e,t,le.String,0,r),this.kind=i}};function Vd(n,e,t){return new zr(n,e,le.Character,t,String.fromCharCode(t))}function Z8(n,e,t){return new zr(n,e,le.Identifier,0,t)}function J8(n,e,t){return new zr(n,e,le.PrivateIdentifier,0,t)}function ej(n,e,t){return new zr(n,e,le.Keyword,0,t)}function jd(n,e,t){return new zr(n,e,le.Operator,0,t)}function tj(n,e,t){return new zr(n,e,le.Number,t,"")}function nj(n,e,t){return new zr(n,e,le.Error,0,t)}function rj(n,e,t){return new zr(n,e,le.RegExpBody,0,t)}function ij(n,e,t){return new zr(n,e,le.RegExpFlags,0,t)}var Cm=new zr(-1,-1,le.Character,0,""),Fw=class{input;tokens=[];length;peek=0;index=-1;braceStack=[];constructor(e){this.input=e,this.length=e.length,this.advance()}scan(){let e=this.scanToken();for(;e!==null;)this.tokens.push(e),e=this.scanToken();return this.tokens}advance(){this.peek=++this.index>=this.length?on:this.input.charCodeAt(this.index)}scanToken(){let e=this.input,t=this.length,r=this.peek,i=this.index;for(;r<=XA;)if(++i>=t){r=on;break}else r=e.charCodeAt(i);if(this.peek=r,this.index=i,i>=t)return null;if(HT(r))return this.scanIdentifier();if(xi(r))return this.scanNumber(i);let s=i;switch(r){case Wd:return this.advance(),xi(this.peek)?this.scanNumber(s):Vd(s,this.index,Wd);case $r:case yn:case rs:case Hs:case vr:case ts:case Rr:return this.scanCharacter(s,r);case Di:return this.scanOpenBrace(s,r);case Wn:return this.scanCloseBrace(s,r);case kh:case Mh:return this.scanString();case hw:return this.advance(),this.scanTemplateLiteralPart(s);case ZA:return this.scanPrivateIdentifier();case JA:return this.scanComplexOperator(s,"+",Pn,"=");case pg:return this.scanComplexOperator(s,"-",Pn,"=");case ri:return this.isStartOfRegex()?this.scanRegex(i):this.scanComplexOperator(s,"/",Pn,"=");case YB:return this.scanComplexOperator(s,"%",Pn,"=");case JB:return this.scanOperator(s,"^");case lT:return this.scanStar(s);case dT:return this.scanQuestion(s);case Bc:case ti:return this.scanComplexOperator(s,String.fromCharCode(r),Pn,"=");case dw:case Pn:return this.scanComplexOperator(s,String.fromCharCode(r),Pn,"=",Pn,"=");case fg:return this.scanComplexOperator(s,"&",fg,"&",Pn,"=");case hT:return this.scanComplexOperator(s,"|",hT,"|",Pn,"=");case aM:for(;Ph(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(r)}]`,0)}scanCharacter(e,t){return this.advance(),Vd(e,this.index,t)}scanOperator(e,t){return this.advance(),jd(e,this.index,t)}scanOpenBrace(e,t){return this.braceStack.push("expression"),this.advance(),Vd(e,this.index,t)}scanCloseBrace(e,t){return this.advance(),this.braceStack.pop()==="interpolation"?(this.tokens.push(Vd(e,this.index,Wn)),this.scanTemplateLiteralPart(this.index)):Vd(e,this.index,t)}scanComplexOperator(e,t,r,i,s,o){this.advance();let a=t;return this.peek==r&&(this.advance(),a+=i),s!=null&&this.peek==s&&(this.advance(),a+=o),jd(e,this.index,a)}scanIdentifier(){let e=this.index;for(this.advance();zT(this.peek);)this.advance();let t=this.input.substring(e,this.index);return X8.indexOf(t)>-1?ej(e,this.index,t):Z8(e,this.index,t)}scanPrivateIdentifier(){let e=this.index;if(this.advance(),!HT(this.peek))return this.error("Invalid character [#]",-1);for(;zT(this.peek);)this.advance();let t=this.input.substring(e,this.index);return J8(e,this.index,t)}scanNumber(e){let t=this.index===e,r=!1;for(this.advance();;){if(!xi(this.peek))if(this.peek===Uo){if(!xi(this.input.charCodeAt(this.index-1))||!xi(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);r=!0}else if(this.peek===Wd)t=!1;else if(sj(this.peek)){if(this.advance(),oj(this.peek)&&this.advance(),!xi(this.peek))return this.error("Invalid exponent",-1);t=!1}else break;this.advance()}let i=this.input.substring(e,this.index);r&&(i=i.replace(/_/g,""));let s=t?uj(i):parseFloat(i);return tj(e,this.index,s)}scanString(){let e=this.index,t=this.peek;this.advance();let r="",i=this.index,s=this.input;for(;this.peek!=t;)if(this.peek==Za){let a=this.scanStringBackslash(r,i);if(typeof a!="string")return a;r=a,i=this.index}else{if(this.peek==on)return this.error("Unterminated quote",0);this.advance()}let o=s.substring(i,this.index);return this.advance(),new Jd(e,this.index,r+o,eu.Plain)}scanQuestion(e){this.advance();let t="?";return this.peek===dT?(t+="?",this.advance(),this.peek===Pn&&(t+="=",this.advance())):this.peek===Wd&&(t+=".",this.advance()),jd(e,this.index,t)}scanTemplateLiteralPart(e){let t="",r=this.index;for(;this.peek!==hw;)if(this.peek===Za){let s=this.scanStringBackslash(t,r);if(typeof s!="string")return s;t=s,r=this.index}else if(this.peek===Xg){let s=this.index;if(this.advance(),this.peek===Di)return this.braceStack.push("interpolation"),this.tokens.push(new Jd(e,s,t+this.input.substring(r,s),eu.TemplateLiteralPart)),this.advance(),jd(s,this.index,this.input.substring(s,this.index))}else{if(this.peek===on)return this.error("Unterminated template literal",0);this.advance()}let i=this.input.substring(r,this.index);return this.advance(),new Jd(e,this.index,t+i,eu.TemplateLiteralEnd)}error(e,t){let r=this.index+t;return nj(r,this.index,`Lexer Error: ${e} at column ${r} in expression [${this.input}]`)}scanStringBackslash(e,t){e+=this.input.substring(t,this.index);let r;if(this.advance(),this.peek===iM){let i=this.input.substring(this.index+1,this.index+5);if(/^[0-9a-f]+$/i.test(i))r=parseInt(i,16);else return this.error(`Invalid unicode escape [\\u${i}]`,0);for(let s=0;s<5;s++)this.advance()}else r=aj(this.peek),this.advance();return e+=String.fromCharCode(r),e}scanStar(e){this.advance();let t="*";return this.peek===lT?(t+="*",this.advance(),this.peek===Pn&&(t+="=",this.advance())):this.peek===Pn&&(t+="=",this.advance()),jd(e,this.index,t)}isStartOfRegex(){if(this.tokens.length===0)return!0;let e=this.tokens[this.tokens.length-1];if(e.isOperator("!")){let t=this.tokens.length>1?this.tokens[this.tokens.length-2]:null;return t===null||t.type!==le.Identifier&&!t.isCharacter(yn)&&!t.isCharacter(Hs)}return e.type===le.Operator||e.isCharacter($r)||e.isCharacter(rs)||e.isCharacter(vr)||e.isCharacter(ts)}scanRegex(e){this.advance();let t=this.index,r=!1,i=!1;for(;;){let u=this.peek;if(u===on)return this.error("Unterminated regular expression",0);if(r)r=!1;else if(u===Za)r=!0;else if(u===rs)i=!0;else if(u===Hs)i=!1;else if(u===ri&&!i)break;this.advance()}let s=this.input.substring(t,this.index);this.advance();let o=rj(e,this.index,s),a=this.scanRegexFlags(this.index);return a!==null?(this.tokens.push(o),a):o}scanRegexFlags(e){if(!Lo(this.peek))return null;for(;Lo(this.peek);)this.advance();return ij(e,this.index,this.input.substring(e,this.index))}};function HT(n){return du<=n&&n<=tf||jo<=n&&n<=ol||n==Uo||n==Xg}function zT(n){return Lo(n)||xi(n)||n==Uo||n==Xg}function sj(n){return n==t$||n==QB}function oj(n){return n==pg||n==JA}function aj(n){switch(n){case tM:return Xa;case TE:return QA;case nM:return SE;case rM:return DE;case sM:return KA;default:return n}}function uj(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Lw=class{strings;expressions;offsets;constructor(e,t,r){this.strings=e,this.expressions=t,this.offsets=r}},Bw=class{templateBindings;warnings;errors;constructor(e,t,r){this.templateBindings=e,this.warnings=t,this.errors=r}};function So(n){return n.start.toString()||"(unknown)"}var Rg=class{_lexer;_supportsDirectPipeReferences;constructor(e,t=!1){this._lexer=e,this._supportsDirectPipeReferences=t}parseAction(e,t,r){let i=[];this._checkNoInterpolation(i,e,t);let{stripped:s}=this._stripComments(e),o=this._lexer.tokenize(s),a=new Ha(e,t,r,o,1,i,0,this._supportsDirectPipeReferences).parseChain();return new gr(a,e,So(t),r,i)}parseBinding(e,t,r){let i=[],s=this._parseBindingAst(e,t,r,i);return new gr(s,e,So(t),r,i)}checkSimpleExpression(e){let t=new $w;return e.visit(t),t.errors}parseSimpleBinding(e,t,r){let i=[],s=this._parseBindingAst(e,t,r,i),o=this.checkSimpleExpression(s);return o.length>0&&i.push(Rc(`Host binding expression cannot contain ${o.join(" ")}`,e,"",t)),new gr(s,e,So(t),r,i)}_parseBindingAst(e,t,r,i){this._checkNoInterpolation(i,e,t);let{stripped:s}=this._stripComments(e),o=this._lexer.tokenize(s);return new Ha(e,t,r,o,0,i,0,this._supportsDirectPipeReferences).parseChain()}parseTemplateBindings(e,t,r,i,s){let o=this._lexer.tokenize(t),a=[];return new Ha(t,r,s,o,0,a,0,this._supportsDirectPipeReferences).parseTemplateBindings({source:e,span:new Br(i,i+e.length)})}parseInterpolation(e,t,r,i){let s=[],{strings:o,expressions:a,offsets:u}=this.splitInterpolation(e,t,s,i);if(a.length===0)return null;let c=[];for(let l=0;l<a.length;++l){let d=i?.[l*2+1]?.sourceSpan,h=a[l].text,{stripped:f,hasComments:p}=this._stripComments(h),g=this._lexer.tokenize(f);if(p&&f.trim().length===0&&g.length===0){s.push(Rc("Interpolation expression cannot only contain a comment",e,`at column ${a[l].start} in`,t));continue}let v=new Ha(d?h:e,d||t,r,g,0,s,u[l],this._supportsDirectPipeReferences).parseChain();c.push(v)}return this.createInterpolationAst(o.map(l=>l.text),c,e,So(t),r,s)}parseInterpolationExpression(e,t,r){let{stripped:i}=this._stripComments(e),s=this._lexer.tokenize(i),o=[],a=new Ha(e,t,r,s,0,o,0,this._supportsDirectPipeReferences).parseChain(),u=["",""];return this.createInterpolationAst(u,[a],e,So(t),r,o)}createInterpolationAst(e,t,r,i,s,o){let a=new au(0,r.length),u=new Jh(a,a.toAbsolute(s),e,t);return new gr(u,r,i,s,o)}splitInterpolation(e,t,r,i){let s=[],o=[],a=[],u=i?cj(i):null,c=0,l=!1,d=!1,h="{{",f="}}";for(;c<e.length;)if(l){let p=c,g=p+h.length,v=this._getInterpolationEndIndex(e,f,g);if(v===-1){l=!1,d=!0;break}let y=v+f.length,E=e.substring(g,v);E.trim().length===0&&r.push(Rc("Blank expressions are not allowed in interpolated strings",e,`at column ${c} in`,t)),o.push({text:E,start:p,end:y});let T=(u?.get(p)??p)+h.length;a.push(T),c=y,l=!1}else{let p=c;c=e.indexOf(h,c),c===-1&&(c=e.length);let g=e.substring(p,c);s.push({text:g,start:p,end:c}),l=!0}if(!l)if(d){let p=s[s.length-1];p.text+=e.substring(c),p.end=e.length}else s.push({text:e.substring(c),start:c,end:e.length});return new Lw(s,o,a)}wrapLiteralPrimitive(e,t,r){let i=new au(0,e==null?0:e.length);return new gr(new mr(i,i.toAbsolute(r),e),e,typeof t=="string"?t:So(t),r,[])}_stripComments(e){let t=this._commentStart(e);return t!=null?{stripped:e.substring(0,t),hasComments:!0}:{stripped:e,hasComments:!1}}_commentStart(e){let t=null;for(let r=0;r<e.length-1;r++){let i=e.charCodeAt(r),s=e.charCodeAt(r+1);if(i===ri&&s==ri&&t==null)return r;t===i?t=null:t==null&&Zd(i)&&(t=i)}return null}_checkNoInterpolation(e,t,r){let i=-1,s=-1;for(let o of this._forEachUnquotedChar(t,0))if(i===-1)t.startsWith("{{")&&(i=o);else if(s=this._getInterpolationEndIndex(t,"}}",o),s>-1)break;i>-1&&s>-1&&e.push(Rc("Got interpolation ({{}}) where expression was expected",t,`at column ${i} in`,r))}_getInterpolationEndIndex(e,t,r){for(let i of this._forEachUnquotedChar(e,r)){if(e.startsWith(t,i))return i;if(e.startsWith("//",i))return e.indexOf(t,i)}return-1}*_forEachUnquotedChar(e,t){let r=null,i=0;for(let s=t;s<e.length;s++){let o=e[s];Zd(e.charCodeAt(s))&&(r===null||r===o)&&i%2===0?r=r===null?o:null:r===null&&(yield s),i=o==="\\"?i+1:0}}},Yd=(function(n){return n[n.None=0]="None",n[n.Writable=1]="Writable",n})(Yd||{}),qT=new Set(["d","g","i","m","s","u","v","y"]),Ha=class{input;parseSourceSpan;absoluteOffset;tokens;parseFlags;errors;offset;supportsDirectPipeReferences;rparensExpected=0;rbracketsExpected=0;rbracesExpected=0;context=Yd.None;sourceSpanCache=new Map;index=0;constructor(e,t,r,i,s,o,a,u){this.input=e,this.parseSourceSpan=t,this.absoluteOffset=r,this.tokens=i,this.parseFlags=s,this.errors=o,this.offset=a,this.supportsDirectPipeReferences=u}peek(e){let t=this.index+e;return t<this.tokens.length?this.tokens[t]:Cm}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:this.tokens.length===0?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,t){let r=this.currentEndIndex;if(t!==void 0&&t>this.currentEndIndex&&(r=t),e>r){let i=r;r=e,e=i}return new au(e,r)}sourceSpan(e,t){let r=`${e}@${this.inputIndex}:${t}`;return this.sourceSpanCache.has(r)||this.sourceSpanCache.set(r,this.span(e,t).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(r)}advance(){this.index++}withContext(e,t){this.context|=e;let r=t();return this.context^=e,r}consumeOptionalCharacter(e){return this.next.isCharacter(e)?(this.advance(),!0):!1}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return this.next.isOperator(e)?(this.advance(),!0):!1}isAssignmentOperator(e){return e.type===le.Operator&&qn.isAssignmentOperation(e.strValue)}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===Cm?"end of input":`token ${e}`}expectIdentifierOrKeyword(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null):(this.advance(),e.toString())}expectIdentifierOrKeywordOrString(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()&&!e.isString()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),""):(this.advance(),e.toString())}parseChain(){let e=[],t=this.inputIndex;for(;this.index<this.tokens.length;){let r=this.parsePipe();if(e.push(r),this.consumeOptionalCharacter(Rr))for(this.parseFlags&1||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(Rr););else if(this.index<this.tokens.length){let i=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===i)break}}if(e.length===0){let r=this.offset,i=this.offset+this.input.length;return new zn(this.span(r,i),this.sourceSpan(r,i))}return e.length==1?e[0]:new zc(this.span(t),this.sourceSpan(t),e)}parsePipe(){let e=this.inputIndex,t=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseFlags&1&&this.error("Cannot have a pipe in an action expression");do{let r=this.inputIndex,i=this.expectIdentifierOrKeyword(),s,o;i!==null?s=this.sourceSpan(r):(i="",o=this.next.index!==-1?this.next.index:this.input.length+this.offset,s=new au(o,o).toAbsolute(this.absoluteOffset));let a=[];for(;this.consumeOptionalCharacter(ts);)a.push(this.parseExpression());let u;if(this.supportsDirectPipeReferences){let c=i.charCodeAt(0);u=c===Uo||c>=jo&&c<=ol?Nm.ReferencedDirectly:Nm.ReferencedByName}else u=Nm.ReferencedByName;t=new eg(this.span(e),this.sourceSpan(e,o),t,i,a,u,s)}while(this.consumeOptionalOperator("|"))}return t}parseExpression(){return this.parseConditional()}parseConditional(){let e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){let r=this.parsePipe(),i;if(this.consumeOptionalCharacter(ts))i=this.parsePipe();else{let s=this.inputIndex,o=this.input.substring(e,s);this.error(`Conditional expression ${o} requires all 3 expressions`),i=new zn(this.span(e),this.sourceSpan(e))}return new Jm(this.span(e),this.sourceSpan(e),t,r,i)}else return t}parseLogicalOr(){let e=this.inputIndex,t=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){let r=this.parseLogicalAnd();t=new qn(this.span(e),this.sourceSpan(e),"||",t,r)}return t}parseLogicalAnd(){let e=this.inputIndex,t=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){let r=this.parseNullishCoalescing();t=new qn(this.span(e),this.sourceSpan(e),"&&",t,r)}return t}parseNullishCoalescing(){let e=this.inputIndex,t=this.parseEquality();for(;this.consumeOptionalOperator("??");){let r=this.parseEquality();t=new qn(this.span(e),this.sourceSpan(e),"??",t,r)}return t}parseEquality(){let e=this.inputIndex,t=this.parseRelational();for(;this.next.type==le.Operator;){let r=this.next.strValue;switch(r){case"==":case"===":case"!=":case"!==":this.advance();let i=this.parseRelational();t=new qn(this.span(e),this.sourceSpan(e),r,t,i);continue}break}return t}parseRelational(){let e=this.inputIndex,t=this.parseAdditive();for(;this.next.type==le.Operator||this.next.isKeywordIn;){let r=this.next.strValue;switch(r){case"<":case">":case"<=":case">=":case"in":this.advance();let i=this.parseAdditive();t=new qn(this.span(e),this.sourceSpan(e),r,t,i);continue}break}return t}parseAdditive(){let e=this.inputIndex,t=this.parseMultiplicative();for(;this.next.type==le.Operator;){let r=this.next.strValue;switch(r){case"+":case"-":this.advance();let i=this.parseMultiplicative();t=new qn(this.span(e),this.sourceSpan(e),r,t,i);continue}break}return t}parseMultiplicative(){let e=this.inputIndex,t=this.parseExponentiation();for(;this.next.type==le.Operator;){let r=this.next.strValue;switch(r){case"*":case"%":case"/":this.advance();let i=this.parseExponentiation();t=new qn(this.span(e),this.sourceSpan(e),r,t,i);continue}break}return t}parseExponentiation(){let e=this.inputIndex,t=this.parsePrefix();for(;this.next.type==le.Operator&&this.next.strValue==="**";){(t instanceof Lc||t instanceof hh||t instanceof fh||t instanceof ph)&&this.error("Unary operator used immediately before exponentiation expression. Parenthesis must be used to disambiguate operator precedence"),this.advance();let r=this.parseExponentiation();t=new qn(this.span(e),this.sourceSpan(e),"**",t,r)}return t}parsePrefix(){if(this.next.type==le.Operator){let e=this.inputIndex,t=this.next.strValue,r;switch(t){case"+":return this.advance(),r=this.parsePrefix(),Lc.createPlus(this.span(e),this.sourceSpan(e),r);case"-":return this.advance(),r=this.parsePrefix(),Lc.createMinus(this.span(e),this.sourceSpan(e),r);case"!":return this.advance(),r=this.parsePrefix(),new hh(this.span(e),this.sourceSpan(e),r)}}else if(this.next.isKeywordTypeof()){this.advance();let e=this.inputIndex,t=this.parsePrefix();return new fh(this.span(e),this.sourceSpan(e),t)}else if(this.next.isKeywordVoid()){this.advance();let e=this.inputIndex,t=this.parsePrefix();return new ph(this.span(e),this.sourceSpan(e),t)}return this.parseCallChain()}parseCallChain(){let e=this.inputIndex,t=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(Wd))t=this.parseAccessMember(t,e,!1);else if(this.consumeOptionalOperator("?."))this.consumeOptionalCharacter($r)?t=this.parseCall(t,e,!0):t=this.consumeOptionalCharacter(rs)?this.parseKeyedReadOrWrite(t,e,!0):this.parseAccessMember(t,e,!0);else if(this.consumeOptionalCharacter(rs))t=this.parseKeyedReadOrWrite(t,e,!1);else if(this.consumeOptionalCharacter($r))t=this.parseCall(t,e,!1);else if(this.consumeOptionalOperator("!"))t=new mh(this.span(e),this.sourceSpan(e),t);else if(this.next.isTemplateLiteralEnd())t=this.parseNoInterpolationTaggedTemplateLiteral(t,e);else if(this.next.isTemplateLiteralPart())t=this.parseTaggedTemplateLiteral(t,e);else return t}parsePrimary(){let e=this.inputIndex;if(this.consumeOptionalCharacter($r)){this.rparensExpected++;let t=this.parsePipe();return this.consumeOptionalCharacter(yn)||(this.error("Missing closing parentheses"),this.consumeOptionalCharacter(yn)),this.rparensExpected--,new yh(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isKeywordNull())return this.advance(),new mr(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new mr(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new mr(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new mr(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordIn())return this.advance(),new mr(this.span(e),this.sourceSpan(e),"in");if(this.next.isKeywordThis())return this.advance(),new Po(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(rs)){this.rbracketsExpected++;let t=this.parseExpressionList(Hs);return this.rbracketsExpected--,this.expectCharacter(Hs),new dh(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isCharacter(Di))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new Ai(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){let t=this.next.toNumber();return this.advance(),new mr(this.span(e),this.sourceSpan(e),t)}else{if(this.next.isTemplateLiteralEnd())return this.parseNoInterpolationTemplateLiteral();if(this.next.isTemplateLiteralPart())return this.parseTemplateLiteral();if(this.next.isString()&&this.next.kind===eu.Plain){let t=this.next.toString();return this.advance(),new mr(this.span(e),this.sourceSpan(e),t)}else return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new zn(this.span(e),this.sourceSpan(e))):this.next.isRegExpBody()?this.parseRegularExpressionLiteral():this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new zn(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new zn(this.span(e),this.sourceSpan(e)))}}}}parseExpressionList(e){let t=[];do if(!this.next.isCharacter(e))t.push(this.parsePipe());else break;while(this.consumeOptionalCharacter(vr));return t}parseLiteralMap(){let e=[],t=[],r=this.inputIndex;if(this.expectCharacter(Di),!this.consumeOptionalCharacter(Wn)){this.rbracesExpected++;do{let i=this.inputIndex,s=this.next.isString(),o=this.expectIdentifierOrKeywordOrString(),a={key:o,quoted:s};if(e.push(a),s)this.expectCharacter(ts),t.push(this.parsePipe());else if(this.consumeOptionalCharacter(ts))t.push(this.parsePipe());else{a.isShorthandInitialized=!0;let u=this.span(i),c=this.sourceSpan(i);t.push(new ns(u,c,c,new Ai(u,c),o))}}while(this.consumeOptionalCharacter(vr)&&!this.next.isCharacter(Wn));this.rbracesExpected--,this.expectCharacter(Wn)}return new cu(this.span(r),this.sourceSpan(r),e,t)}parseAccessMember(e,t,r){let i=this.inputIndex,s=this.withContext(Yd.Writable,()=>{let a=this.expectIdentifierOrKeyword()??"";return a.length===0&&this.error("Expected identifier for property access",e.span.end),a}),o=this.sourceSpan(i);if(r)return this.isAssignmentOperator(this.next)?(this.advance(),this.error("The '?.' operator cannot be used in the assignment"),new zn(this.span(t),this.sourceSpan(t))):new ch(this.span(t),this.sourceSpan(t),o,e,s);if(this.isAssignmentOperator(this.next)){let a=this.next.strValue;if(!(this.parseFlags&1))return this.advance(),this.error("Bindings cannot contain assignments"),new zn(this.span(t),this.sourceSpan(t));let u=new ns(this.span(t),this.sourceSpan(t),o,e,s);this.advance();let c=this.parseConditional();return new qn(this.span(t),this.sourceSpan(t),a,u,c)}else return new ns(this.span(t),this.sourceSpan(t),o,e,s)}parseCall(e,t,r){let i=this.inputIndex;this.rparensExpected++;let s=this.parseCallArguments(),o=this.span(i,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(yn),this.rparensExpected--;let a=this.span(t),u=this.sourceSpan(t);return r?new tg(a,u,e,s,o):new qc(a,u,e,s,o)}parseCallArguments(){if(this.next.isCharacter(yn))return[];let e=[];do e.push(this.parsePipe());while(this.consumeOptionalCharacter(vr));return e}expectTemplateBindingKey(){let e="",t=!1,r=this.currentAbsoluteOffset;do e+=this.expectIdentifierOrKeywordOrString(),t=this.consumeOptionalOperator("-"),t&&(e+="-");while(t);return{source:e,span:new Br(r,r+e.length)}}parseTemplateBindings(e){let t=[];for(t.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){let r=this.parseLetBinding();if(r)t.push(r);else{let i=this.expectTemplateBindingKey(),s=this.parseAsBinding(i);s?t.push(s):(i.source=e.source+i.source.charAt(0).toUpperCase()+i.source.substring(1),t.push(...this.parseDirectiveKeywordBindings(i)))}this.consumeStatementTerminator()}return new Bw(t,[],this.errors)}parseKeyedReadOrWrite(e,t,r){return this.withContext(Yd.Writable,()=>{this.rbracketsExpected++;let i=this.parsePipe();if(i instanceof zn&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(Hs),this.isAssignmentOperator(this.next)){let s=this.next.strValue;if(r)this.advance(),this.error("The '?.' operator cannot be used in the assignment");else{let o=new uu(this.span(t),this.sourceSpan(t),e,i);this.advance();let a=this.parseConditional();return new qn(this.span(t),this.sourceSpan(t),s,o,a)}}else return r?new lh(this.span(t),this.sourceSpan(t),e,i):new uu(this.span(t),this.sourceSpan(t),e,i);return new zn(this.span(t),this.sourceSpan(t))})}parseDirectiveKeywordBindings(e){let t=[];this.consumeOptionalCharacter(ts);let r=this.getDirectiveBoundTarget(),i=this.currentAbsoluteOffset,s=this.parseAsBinding(e);s||(this.consumeStatementTerminator(),i=this.currentAbsoluteOffset);let o=new Br(e.span.start,i);return t.push(new Jb(o,e,r)),s&&t.push(s),t}getDirectiveBoundTarget(){if(this.next===Cm||this.peekKeywordAs()||this.peekKeywordLet())return null;let e=this.parsePipe(),{start:t,end:r}=e.span,i=this.input.substring(t,r);return new gr(e,i,So(this.parseSourceSpan),this.absoluteOffset+t,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();let t=this.expectTemplateBindingKey();this.consumeStatementTerminator();let r=new Br(e.span.start,this.currentAbsoluteOffset);return new _h(r,t,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;let e=this.currentAbsoluteOffset;this.advance();let t=this.expectTemplateBindingKey(),r=null;this.consumeOptionalOperator("=")&&(r=this.expectTemplateBindingKey()),this.consumeStatementTerminator();let i=new Br(e,this.currentAbsoluteOffset);return new _h(i,t,r)}parseNoInterpolationTaggedTemplateLiteral(e,t){let r=this.parseNoInterpolationTemplateLiteral();return new gh(this.span(t),this.sourceSpan(t),e,r)}parseNoInterpolationTemplateLiteral(){let e=this.next.strValue,t=this.inputIndex;this.advance();let r=this.span(t),i=this.sourceSpan(t);return new vh(r,i,[new ng(r,i,e)],[])}parseTaggedTemplateLiteral(e,t){let r=this.parseTemplateLiteral();return new gh(this.span(t),this.sourceSpan(t),e,r)}parseTemplateLiteral(){let e=[],t=[],r=this.inputIndex;for(;this.next!==Cm;){let i=this.next;if(i.isTemplateLiteralPart()||i.isTemplateLiteralEnd()){let s=this.inputIndex;if(this.advance(),e.push(new ng(this.span(s),this.sourceSpan(s),i.strValue)),i.isTemplateLiteralEnd())break}else if(i.isTemplateLiteralInterpolationStart()){this.advance(),this.rbracesExpected++;let s=this.parsePipe();s instanceof zn?this.error("Template literal interpolation cannot be empty"):t.push(s),this.rbracesExpected--}else this.advance()}return new vh(this.span(r),this.sourceSpan(r),e,t)}parseRegularExpressionLiteral(){let e=this.next;if(this.advance(),!e.isRegExpBody())return new zn(this.span(this.inputIndex),this.sourceSpan(this.inputIndex));let t=null;if(this.next.isRegExpFlags()){t=this.next,this.advance();let s=new Set;for(let o=0;o<t.strValue.length;o++){let a=t.strValue[o];qT.has(a)?s.has(a)?this.error(`Duplicate regular expression flag "${a}"`,t.index+o):s.add(a):this.error(`Unsupported regular expression flag "${a}". The supported flags are: `+Array.from(qT,u=>`"${u}"`).join(", "),t.index+o)}}let r=e.index,i=t?t.end:e.end;return new rg(this.span(r,i),this.sourceSpan(r,i),e.strValue,t?t.strValue:null)}consumeStatementTerminator(){this.consumeOptionalCharacter(Rr)||this.consumeOptionalCharacter(vr)}error(e,t=this.index){this.errors.push(Rc(e,this.input,this.getErrorLocationText(t),this.parseSourceSpan)),this.skip()}getErrorLocationText(e){return e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,t){let r=`Private identifiers are not supported. Unexpected private identifier: ${e}`;t!==null&&(r+=`, ${t}`),this.error(r)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(Rr)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(yn))&&(this.rbracesExpected<=0||!e.isCharacter(Wn))&&(this.rbracketsExpected<=0||!e.isCharacter(Hs))&&(!(this.context&Yd.Writable)||!this.isAssignmentOperator(e));)this.next.isError()&&this.errors.push(Rc(this.next.toString(),this.input,this.getErrorLocationText(this.next.index),this.parseSourceSpan)),this.advance(),e=this.next}};function Rc(n,e,t,r){t.length>0&&(t=` ${t} `);let i=So(r),s=`Parser Error: ${n}${t}[${e}] in ${i}`;return new ue(r,s)}var $w=class extends Wc{errors=[];visitPipe(){this.errors.push("pipes")}};function cj(n){let e=new Map,t=0,r=0,i=0;for(;i<n.length;){let s=n[i];if(s.type===9){let[o,a]=s.parts;t+=a.length,r+=o.length}else{let o=s.parts.reduce((a,u)=>a+u.length,0);r+=o,t+=o}e.set(r,t),i++}return e}function lj(n){return n.visit(new Vw)}var Vw=class{visitUnary(e,t){return`${e.operator}${e.expr.visit(this,t)}`}visitBinary(e,t){return`${e.left.visit(this,t)} ${e.operation} ${e.right.visit(this,t)}`}visitChain(e,t){return e.expressions.map(r=>r.visit(this,t)).join("; ")}visitConditional(e,t){return`${e.condition.visit(this,t)} ? ${e.trueExp.visit(this,t)} : ${e.falseExp.visit(this,t)}`}visitThisReceiver(){return"this"}visitImplicitReceiver(){return""}visitInterpolation(e,t){return hj(e.strings,e.expressions.map(r=>r.visit(this,t))).join("")}visitKeyedRead(e,t){return`${e.receiver.visit(this,t)}[${e.key.visit(this,t)}]`}visitLiteralArray(e,t){return`[${e.expressions.map(r=>r.visit(this,t)).join(", ")}]`}visitLiteralMap(e,t){return`{${dj(e.keys.map(r=>r.quoted?`'${r.key}'`:r.key),e.values.map(r=>r.visit(this,t))).map(([r,i])=>`${r}: ${i}`).join(", ")}}`}visitLiteralPrimitive(e){if(e.value===null)return"null";switch(typeof e.value){case"number":case"boolean":return e.value.toString();case"undefined":return"undefined";case"string":return`'${e.value.replace(/'/g,"\\'")}'`;default:throw new Error(`Unsupported primitive type: ${e.value}`)}}visitPipe(e,t){return`${e.exp.visit(this,t)} | ${e.name}`}visitPrefixNot(e,t){return`!${e.expression.visit(this,t)}`}visitNonNullAssert(e,t){return`${e.expression.visit(this,t)}!`}visitPropertyRead(e,t){return e.receiver instanceof Ai?e.name:`${e.receiver.visit(this,t)}.${e.name}`}visitSafePropertyRead(e,t){return`${e.receiver.visit(this,t)}?.${e.name}`}visitSafeKeyedRead(e,t){return`${e.receiver.visit(this,t)}?.[${e.key.visit(this,t)}]`}visitCall(e,t){return`${e.receiver.visit(this,t)}(${e.args.map(r=>r.visit(this,t)).join(", ")})`}visitSafeCall(e,t){return`${e.receiver.visit(this,t)}?.(${e.args.map(r=>r.visit(this,t)).join(", ")})`}visitTypeofExpression(e,t){return`typeof ${e.expression.visit(this,t)}`}visitVoidExpression(e,t){return`void ${e.expression.visit(this,t)}`}visitRegularExpressionLiteral(e,t){return`/${e.body}/${e.flags||""}`}visitASTWithSource(e,t){return e.ast.visit(this,t)}visitTemplateLiteral(e,t){let r="";for(let i=0;i<e.elements.length;i++){r+=e.elements[i].visit(this,t);let s=i<e.expressions.length?e.expressions[i]:null;s!==null&&(r+="${"+s.visit(this,t)+"}")}return"`"+r+"`"}visitTemplateLiteralElement(e,t){return e.text}visitTaggedTemplateLiteral(e,t){return e.tag.visit(this,t)+e.template.visit(this,t)}visitParenthesizedExpression(e,t){return"("+e.expression.visit(this,t)+")"}};function dj(n,e){if(n.length!==e.length)throw new Error("Array lengths must match");return n.map((t,r)=>[t,e[r]])}function hj(n,e){let t=[];for(let r=0;r<Math.max(n.length,e.length);r++)r<n.length&&t.push(n[r]),r<e.length&&t.push(e[r]);return t}var Lm;function WT(){return Lm||(Lm={},Ud(it.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),Ud(it.STYLE,["*|style"]),Ud(it.URL,["*|formAction","area|href","a|href","a|xlink:href","form|action","annotation|href","annotation|xlink:href","annotation-xml|href","annotation-xml|xlink:href","maction|href","maction|xlink:href","malignmark|href","malignmark|xlink:href","math|href","math|xlink:href","mroot|href","mroot|xlink:href","msqrt|href","msqrt|xlink:href","merror|href","merror|xlink:href","mfrac|href","mfrac|xlink:href","mglyph|href","mglyph|xlink:href","msub|href","msub|xlink:href","msup|href","msup|xlink:href","msubsup|href","msubsup|xlink:href","mmultiscripts|href","mmultiscripts|xlink:href","mprescripts|href","mprescripts|xlink:href","mi|href","mi|xlink:href","mn|href","mn|xlink:href","mo|href","mo|xlink:href","mpadded|href","mpadded|xlink:href","mphantom|href","mphantom|xlink:href","mrow|href","mrow|xlink:href","ms|href","ms|xlink:href","mspace|href","mspace|xlink:href","mstyle|href","mstyle|xlink:href","mtable|href","mtable|xlink:href","mtd|href","mtd|xlink:href","mtr|href","mtr|xlink:href","mtext|href","mtext|xlink:href","mover|href","mover|xlink:href","munder|href","munder|xlink:href","munderover|href","munderover|xlink:href","semantics|href","semantics|xlink:href","none|href","none|xlink:href","img|src","video|src"]),Ud(it.RESOURCE_URL,["base|href","embed|src","frame|src","iframe|src","link|href","object|codebase","object|data","script|src"]),Ud(it.ATTRIBUTE_NO_BINDING,["animate|attributeName","set|attributeName","animateMotion|attributeName","animateTransform|attributeName","unknown|attributeName","iframe|sandbox","iframe|allow","iframe|allowFullscreen","iframe|referrerPolicy","iframe|csp","iframe|fetchPriority","unknown|sandbox","unknown|allow","unknown|allowFullscreen","unknown|referrerPolicy","unknown|csp","unknown|fetchPriority"])),Lm}function Ud(n,e){for(let t of e)Lm[t.toLowerCase()]=n}var jw=class{},fj="boolean",pj="number",mj="string",gj="object",vj=["[Element]|textContent,%ariaActiveDescendantElement,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColIndexText,%ariaColSpan,%ariaControlsElements,%ariaCurrent,%ariaDescribedByElements,%ariaDescription,%ariaDetailsElements,%ariaDisabled,%ariaErrorMessageElements,%ariaExpanded,%ariaFlowToElements,%ariaHasPopup,%ariaHidden,%ariaInvalid,%ariaKeyShortcuts,%ariaLabel,%ariaLabelledByElements,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaOwnsElements,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowIndexText,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,!inert,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,search,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume",":svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","data^[HTMLElement]|value","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,media,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type","select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","selectedcontent^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","search^[HTMLELement]|","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","time^[HTMLElement]|dateTime","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|decoding",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|",":math:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforeinput,*beforematch,*beforetoggle,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contentvisibilityautostatechange,*contextlost,*contextmenu,*contextrestored,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*scrollend,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":math:math^:math:|",":math:maction^:math:|",":math:menclose^:math:|",":math:merror^:math:|",":math:mfenced^:math:|",":math:mfrac^:math:|",":math:mi^:math:|",":math:mmultiscripts^:math:|",":math:mn^:math:|",":math:mo^:math:|",":math:mover^:math:|",":math:mpadded^:math:|",":math:mphantom^:math:|",":math:mroot^:math:|",":math:mrow^:math:|",":math:ms^:math:|",":math:mspace^:math:|",":math:msqrt^:math:|",":math:mstyle^:math:|",":math:msub^:math:|",":math:msubsup^:math:|",":math:msup^:math:|",":math:mtable^:math:|",":math:mtd^:math:|",":math:mtext^:math:|",":math:mtr^:math:|",":math:munder^:math:|",":math:munderover^:math:|",":math:semantics^:math:|"],RM=new Map(Object.entries({class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex","aria-activedescendant":"ariaActiveDescendantElement","aria-atomic":"ariaAtomic","aria-autocomplete":"ariaAutoComplete","aria-busy":"ariaBusy","aria-checked":"ariaChecked","aria-colcount":"ariaColCount","aria-colindex":"ariaColIndex","aria-colindextext":"ariaColIndexText","aria-colspan":"ariaColSpan","aria-controls":"ariaControlsElements","aria-current":"ariaCurrent","aria-describedby":"ariaDescribedByElements","aria-description":"ariaDescription","aria-details":"ariaDetailsElements","aria-disabled":"ariaDisabled","aria-errormessage":"ariaErrorMessageElements","aria-expanded":"ariaExpanded","aria-flowto":"ariaFlowToElements","aria-haspopup":"ariaHasPopup","aria-hidden":"ariaHidden","aria-invalid":"ariaInvalid","aria-keyshortcuts":"ariaKeyShortcuts","aria-label":"ariaLabel","aria-labelledby":"ariaLabelledByElements","aria-level":"ariaLevel","aria-live":"ariaLive","aria-modal":"ariaModal","aria-multiline":"ariaMultiLine","aria-multiselectable":"ariaMultiSelectable","aria-orientation":"ariaOrientation","aria-owns":"ariaOwnsElements","aria-placeholder":"ariaPlaceholder","aria-posinset":"ariaPosInSet","aria-pressed":"ariaPressed","aria-readonly":"ariaReadOnly","aria-required":"ariaRequired","aria-roledescription":"ariaRoleDescription","aria-rowcount":"ariaRowCount","aria-rowindex":"ariaRowIndex","aria-rowindextext":"ariaRowIndexText","aria-rowspan":"ariaRowSpan","aria-selected":"ariaSelected","aria-setsize":"ariaSetSize","aria-sort":"ariaSort","aria-valuemax":"ariaValueMax","aria-valuemin":"ariaValueMin","aria-valuenow":"ariaValueNow","aria-valuetext":"ariaValueText"})),yj=Array.from(RM).reduce((n,[e,t])=>(n.set(e,t),n),new Map),il=class extends jw{_schema=new Map;_eventSchema=new Map;constructor(){super(),vj.forEach(e=>{let t=new Map,r=new Set,[i,s]=e.split("|"),o=s.split(","),[a,u]=i.split("^");a.split(",").forEach(l=>{this._schema.set(l.toLowerCase(),t),this._eventSchema.set(l.toLowerCase(),r)});let c=u&&this._schema.get(u.toLowerCase());if(c){for(let[l,d]of c)t.set(l,d);for(let l of this._eventSchema.get(u.toLowerCase()))r.add(l)}o.forEach(l=>{if(l.length>0)switch(l[0]){case"*":r.add(l.substring(1));break;case"!":t.set(l.substring(1),fj);break;case"#":t.set(l.substring(1),pj);break;case"%":t.set(l.substring(1),gj);break;default:t.set(l,mj)}})})}hasProperty(e,t,r){if(r.some(s=>s.name===WI.name))return!0;if(e.indexOf("-")>-1){if(sT(e)||tw(e))return!1;if(r.some(s=>s.name===qI.name))return!0}return(this._schema.get(e.toLowerCase())||this._schema.get("unknown")).has(t)}hasElement(e,t){return t.some(r=>r.name===WI.name)||e.indexOf("-")>-1&&(sT(e)||tw(e)||t.some(r=>r.name===qI.name))?!0:this._schema.has(e.toLowerCase())}securityContext(e,t,r){r&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();let i=WT()[e+"|"+t];return i||(i=WT()["*|"+t],i||it.NONE)}getMappedPropName(e){return RM.get(e)??e}getDefaultComponentElementName(){return"ng-component"}validateProperty(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event property '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...
If '${e}' is a directive input, make sure the directive is imported by the current module.`}:{error:!1}}validateAttribute(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event attribute '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...`}:{error:!1}}allKnownElementNames(){return Array.from(this._schema.keys())}allKnownAttributesOfElement(e){let t=this._schema.get(e.toLowerCase())||this._schema.get("unknown");return Array.from(t.keys()).map(r=>yj.get(r)??r)}allKnownEventsOfElement(e){return Array.from(this._eventSchema.get(e.toLowerCase())??[])}normalizeAnimationStyleProperty(e){return pB(e)}normalizeAnimationStyleValue(e,t,r){let i="",s=r.toString().trim(),o=null;if(_j(e)&&r!==0&&r!=="0")if(typeof r=="number")i="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&(o=`Please provide a CSS unit value for ${t}:${r}`)}return{error:o,value:s+i}}};function _j(n){switch(n){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}var Me=class{closedByChildren={};contentType;closedByParent=!1;implicitNamespacePrefix;isVoid;ignoreFirstLf;canSelfClose;preventNamespaceInheritance;constructor({closedByChildren:e,implicitNamespacePrefix:t,contentType:r=es.PARSABLE_DATA,closedByParent:i=!1,isVoid:s=!1,ignoreFirstLf:o=!1,preventNamespaceInheritance:a=!1,canSelfClose:u=!1}={}){e&&e.length>0&&e.forEach(c=>this.closedByChildren[c]=!0),this.isVoid=s,this.closedByParent=i||s,this.implicitNamespacePrefix=t||null,this.contentType=r,this.ignoreFirstLf=o,this.preventNamespaceInheritance=a,this.canSelfClose=u??s}isClosedByChild(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}getContentType(e){return typeof this.contentType=="object"?(e===void 0?void 0:this.contentType[e])??this.contentType.default:this.contentType}},GT,Tc;function Uw(n){return Tc||(GT=new Me({canSelfClose:!0}),Tc=Object.assign(Object.create(null),{base:new Me({isVoid:!0}),meta:new Me({isVoid:!0}),area:new Me({isVoid:!0}),embed:new Me({isVoid:!0}),link:new Me({isVoid:!0}),img:new Me({isVoid:!0}),input:new Me({isVoid:!0}),param:new Me({isVoid:!0}),hr:new Me({isVoid:!0}),br:new Me({isVoid:!0}),source:new Me({isVoid:!0}),track:new Me({isVoid:!0}),wbr:new Me({isVoid:!0}),p:new Me({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new Me({closedByChildren:["tbody","tfoot"]}),tbody:new Me({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new Me({closedByChildren:["tbody"],closedByParent:!0}),tr:new Me({closedByChildren:["tr"],closedByParent:!0}),td:new Me({closedByChildren:["td","th"],closedByParent:!0}),th:new Me({closedByChildren:["td","th"],closedByParent:!0}),col:new Me({isVoid:!0}),svg:new Me({implicitNamespacePrefix:"svg"}),foreignObject:new Me({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new Me({implicitNamespacePrefix:"math"}),li:new Me({closedByChildren:["li"],closedByParent:!0}),dt:new Me({closedByChildren:["dt","dd"]}),dd:new Me({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new Me({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new Me({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new Me({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new Me({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new Me({closedByChildren:["optgroup"],closedByParent:!0}),option:new Me({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new Me({ignoreFirstLf:!0}),listing:new Me({ignoreFirstLf:!0}),style:new Me({contentType:es.RAW_TEXT}),script:new Me({contentType:es.RAW_TEXT}),title:new Me({contentType:{default:es.ESCAPABLE_RAW_TEXT,svg:es.PARSABLE_DATA}}),textarea:new Me({contentType:es.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),new il().allKnownElementNames().forEach(e=>{!Tc[e]&&nw(e)===null&&(Tc[e]=new Me({canSelfClose:!1}))})),Tc[n]??Tc[n.toLowerCase()]??GT}var YT={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},Hw=class{_placeHolderNameCounts={};_signatureToName={};getStartTagPlaceholderName(e,t,r){let i=this._hashTag(e,t,r);if(this._signatureToName[i])return this._signatureToName[i];let s=e.toUpperCase(),o=YT[s]||`TAG_${s}`,a=this._generateUniqueName(r?o:`START_${o}`);return this._signatureToName[i]=a,a}getCloseTagPlaceholderName(e){let t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];let r=e.toUpperCase(),i=YT[r]||`TAG_${r}`,s=this._generateUniqueName(`CLOSE_${i}`);return this._signatureToName[t]=s,s}getPlaceholderName(e,t){let r=e.toUpperCase(),i=`PH: ${r}=${t}`;if(this._signatureToName[i])return this._signatureToName[i];let s=this._generateUniqueName(r);return this._signatureToName[i]=s,s}getUniquePlaceholder(e){return this._generateUniqueName(e.toUpperCase())}getStartBlockPlaceholderName(e,t){let r=this._hashBlock(e,t);if(this._signatureToName[r])return this._signatureToName[r];let i=this._generateUniqueName(`START_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[r]=i,i}getCloseBlockPlaceholderName(e){let t=this._hashClosingBlock(e);if(this._signatureToName[t])return this._signatureToName[t];let r=this._generateUniqueName(`CLOSE_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[t]=r,r}_hashTag(e,t,r){let i=`<${e}`,s=Object.keys(t).sort().map(a=>` ${a}=${t[a]}`).join(""),o=r?"/>":`></${e}>`;return i+s+o}_hashClosingTag(e){return this._hashTag(`/${e}`,{},!1)}_hashBlock(e,t){let r=t.length===0?"":` (${t.sort().join("; ")})`;return`@${e}${r} {}`}_hashClosingBlock(e){return this._hashBlock(`close_${e}`,[])}_toSnakeCase(e){return e.toUpperCase().replace(/[^A-Z0-9]/g,"_")}_generateUniqueName(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;let r=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=r+1,`${e}_${r}`}},bj=new Rg(new Wh);function wj(n,e){let t=new zw(bj,n,e);return(r,i,s,o,a)=>t.toI18nMessage(r,i,s,o,a)}function Ej(n,e){return e}var zw=class{_expressionParser;_retainEmptyTokens;_preserveExpressionWhitespace;constructor(e,t,r){this._expressionParser=e,this._retainEmptyTokens=t,this._preserveExpressionWhitespace=r}toI18nMessage(e,t="",r="",i="",s){let o={isIcu:e.length==1&&e[0]instanceof Ja,icuDepth:0,placeholderRegistry:new Hw,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:s||Ej},a=pt(this,e,o);return new Kn(a,o.placeholderToContent,o.placeholderToMessage,t,r,i)}visitElement(e,t){return this._visitElementLike(e,t)}visitComponent(e,t){return this._visitElementLike(e,t)}visitDirective(e,t){throw new Error("Unreachable code")}visitAttribute(e,t){let r=e.valueTokens===void 0||e.valueTokens.length===1?new Ld(e.value,e.valueSpan||e.sourceSpan):this._visitTextWithInterpolation(e.valueTokens,e.valueSpan||e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,r)}visitText(e,t){let r=e.tokens.length===1?new Ld(e.value,e.sourceSpan):this._visitTextWithInterpolation(e.tokens,e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,r)}visitComment(e,t){return null}visitExpansion(e,t){t.icuDepth++;let r={},i=new hg(e.switchValue,e.type,r,e.sourceSpan);if(e.cases.forEach(a=>{r[a.value]=new qs(a.expression.map(u=>u.visit(this,t)),a.expSourceSpan)}),t.icuDepth--,t.isIcu||t.icuDepth>0){let a=t.placeholderRegistry.getUniquePlaceholder(`VAR_${e.type}`);return i.expressionPlaceholder=a,t.placeholderToContent[a]={text:e.switchValue,sourceSpan:e.switchValueSourceSpan},t.visitNodeFn(e,i)}let s=t.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());t.placeholderToMessage[s]=this.toI18nMessage([e],"","","",void 0);let o=new Xc(i,s,e.sourceSpan);return t.visitNodeFn(e,o)}visitExpansionCase(e,t){throw new Error("Unreachable code")}visitBlock(e,t){let r=pt(this,e.children,t);if(e.name==="switch")return new qs(r,e.sourceSpan);let i=e.parameters.map(u=>u.expression),s=t.placeholderRegistry.getStartBlockPlaceholderName(e.name,i),o=t.placeholderRegistry.getCloseBlockPlaceholderName(e.name);t.placeholderToContent[s]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan},t.placeholderToContent[o]={text:e.endSourceSpan?e.endSourceSpan.toString():"}",sourceSpan:e.endSourceSpan??e.sourceSpan};let a=new Ro(e.name,i,s,o,r,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,a)}visitBlockParameter(e,t){throw new Error("Unreachable code")}visitLetDeclaration(e,t){return null}_visitElementLike(e,t){let r=pt(this,e.children,t),i={},s=d=>{i[d.name]=d.value},o,a;e instanceof ni?(o=e.name,a=Uw(e.name).isVoid):(o=e.fullName,a=e.tagName?Uw(e.tagName).isVoid:!1),e.attrs.forEach(s),e.directives.forEach(d=>d.attrs.forEach(s));let u=t.placeholderRegistry.getStartTagPlaceholderName(o,i,a);t.placeholderToContent[u]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan};let c="";a||(c=t.placeholderRegistry.getCloseTagPlaceholderName(o),t.placeholderToContent[c]={text:`</${o}>`,sourceSpan:e.endSourceSpan??e.sourceSpan});let l=new No(o,i,u,c,r,a,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,l)}_visitTextWithInterpolation(e,t,r,i){let s=[],o=!1;for(let a of e)switch(a.type){case 8:case 17:o=!0;let[u,c,l]=a.parts,d=Ij(c)||"INTERPOLATION",h=r.placeholderRegistry.getPlaceholderName(d,c);if(this._preserveExpressionWhitespace)r.placeholderToContent[h]={text:a.parts.join(""),sourceSpan:a.sourceSpan},s.push(new Th(c,h,a.sourceSpan));else{let f=this.normalizeExpression(a);r.placeholderToContent[h]={text:`${u}${f}${l}`,sourceSpan:a.sourceSpan},s.push(new Th(f,h,a.sourceSpan))}break;default:if(a.parts[0].length>0||this._retainEmptyTokens){let f=s[s.length-1];f instanceof Ld?(f.value+=a.parts[0],f.sourceSpan=new ge(f.sourceSpan.start,a.sourceSpan.end,f.sourceSpan.fullStart,f.sourceSpan.details)):s.push(new Ld(a.parts[0],a.sourceSpan))}else this._retainEmptyTokens&&s.push(new Ld(a.parts[0],a.sourceSpan));break}return o?(Cj(s,i),new qs(s,t)):s[0]}normalizeExpression(e){let t=e.parts[1],r=this._expressionParser.parseBinding(t,e.sourceSpan,e.sourceSpan.start.offset);return lj(r)}};function Cj(n,e){if(e instanceof Kn&&(xj(e),e=e.nodes[0]),e instanceof qs){Dj(e.children,n);for(let t=0;t<n.length;t++)n[t].sourceSpan=e.children[t].sourceSpan}}function xj(n){let e=n.nodes;if(e.length!==1||!(e[0]instanceof qs))throw new Error("Unexpected previous i18n message - expected it to consist of only a single `Container` node.")}function Dj(n,e){if(n.length!==e.length)throw new Error(`
The number of i18n message children changed between first and second pass.

First pass (${n.length} tokens):
${n.map(t=>`"${t.sourceSpan.toString()}"`).join(`
`)}

Second pass (${e.length} tokens):
${e.map(t=>`"${t.sourceSpan.toString()}"`).join(`
`)}
    `.trim());if(n.some((t,r)=>e[r].constructor!==t.constructor))throw new Error("The types of the i18n message children changed between first and second pass.")}var Sj=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;function Ij(n){return n.split(Sj)[2]}var KT=new Set(["iframe|srcdoc","*|innerhtml","*|outerhtml","embed|src","object|codebase","object|data"]);function QT(n,e){return n=n.toLowerCase(),e=e.toLowerCase(),KT.has(n+"|"+e)||KT.has("*|"+e)}var Tj=n=>(e,t)=>{let r=n.get(e)??e;return r instanceof Ys&&(t instanceof Xc&&r.i18n instanceof Kn&&(t.previousMessage=r.i18n),r.i18n=t),t},Fg=class{keepI18nAttrs;enableI18nLegacyMessageIdFormat;preserveSignificantWhitespace;retainEmptyTokens;hasI18nMeta=!1;_errors=[];constructor(e=!1,t=!1,r=!0,i=!r){this.keepI18nAttrs=e,this.enableI18nLegacyMessageIdFormat=t,this.preserveSignificantWhitespace=r,this.retainEmptyTokens=i}_generateI18nMessage(e,t="",r){let{meaning:i,description:s,customId:o}=this._parseMetadata(t),u=wj(this.retainEmptyTokens,this.preserveSignificantWhitespace)(e,i,s,o,r);return this._setMessageId(u,t),this._setLegacyIds(u,t),u}visitAllWithErrors(e){let t=e.map(r=>r.visit(this,null));return new Og(t,this._errors)}visitElement(e){return this._visitElementLike(e),e}visitComponent(e,t){return this._visitElementLike(e),e}visitExpansion(e,t){let r,i=e.i18n;if(this.hasI18nMeta=!0,i instanceof Xc){let s=i.name;r=this._generateI18nMessage([e],i);let o=GA(r);o.name=s,t!==null&&(t.placeholderToMessage[s]=r)}else r=this._generateI18nMessage([e],t||i);return e.i18n=r,e}visitText(e){return e}visitAttribute(e){return e}visitComment(e){return e}visitExpansionCase(e){return e}visitBlock(e,t){return pt(this,e.children,t),e}visitBlockParameter(e,t){return e}visitLetDeclaration(e,t){return e}visitDirective(e,t){return e}_visitElementLike(e){let t;if(UB(e)){this.hasI18nMeta=!0;let r=[],i={};for(let s of e.attrs)if(s.name===qA){let o=e.i18n||s.value,a=new Map,u=this.preserveSignificantWhitespace?e.children:Xi(new Ng(!1,a),e.children);t=this._generateI18nMessage(u,o,Tj(a)),t.nodes.length===0&&(t=void 0),e.i18n=t}else if(s.name.startsWith(lw)){let o=s.name.slice(lw.length),a;e instanceof pr?a=e.tagName===null?!1:QT(e.tagName,o):a=QT(e.name,o),a?this._reportError(s,`Translating attribute '${o}' is disallowed for security reasons.`):i[o]=s.value}else r.push(s);if(Object.keys(i).length)for(let s of r){let o=i[s.name];o!==void 0&&s.value&&(s.i18n=this._generateI18nMessage([s],s.i18n||o))}this.keepI18nAttrs||(e.attrs=r)}pt(this,e.children,t)}_parseMetadata(e){return typeof e=="string"?kj(e):e instanceof Kn?e:{}}_setMessageId(e,t){e.id||(e.id=t instanceof Kn&&t.id||HL(e))}_setLegacyIds(e,t){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[UL(e),FA(e)];else if(typeof t!="string"){let r=t instanceof Kn?t:t instanceof Xc?t.previousMessage:void 0;e.legacyIds=r?r.legacyIds:[]}}_reportError(e,t){this._errors.push(new ue(e.sourceSpan,t))}},Aj="|",Mj="@@";function kj(n=""){let e,t,r;if(n=n.trim(),n){let i=n.indexOf(Mj),s=n.indexOf(Aj),o;[o,e]=i>-1?[n.slice(0,i),n.slice(i+2)]:[n,""],[t,r]=s>-1?[o.slice(0,s),o.slice(s+1)]:["",o]}return{customId:e,meaning:t,description:r}}function Pj(n){let e=[];return n.description?e.push({tagName:"desc",text:n.description}):e.push({tagName:"suppress",text:"{msgDescriptions}"}),n.meaning&&e.push({tagName:"meaning",text:n.meaning}),iB(e)}var Oj="goog.getMsg";function Nj(n,e,t,r){let i=Fj(e),s=[N(i)];Object.keys(r).length&&(s.push(Iw(EE(r,!0),!0)),s.push(Iw({original_code:Qn(Object.keys(r).map(u=>({key:ef(u),quoted:!0,value:e.placeholders[u]?N(e.placeholders[u].sourceSpan.toString()):N(e.placeholderToMessage[u].nodes.map(c=>c.sourceSpan.toString()).join(""))})))})));let o=new qt(t.name,ke(Oj).callFn(s),Lr,an.Final);o.addLeadingComment(Pj(e));let a=new Nn(n.set(t));return[o,a]}var qw=class{formatPh(e){return`{$${ef(e)}}`}visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){return TM(e)}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}},Rj=new qw;function Fj(n){return n.nodes.map(e=>e.visit(Rj,null)).join("")}function Lj(n,e,t){let{messageParts:r,placeHolders:i}=Bj(e),s=$j(e),o=i.map(c=>t[c.text]),a=aB(e,r,i,o,s),u=n.set(a);return[new Nn(u)]}var Ww=class{placeholderToMessage;pieces;constructor(e,t){this.placeholderToMessage=e,this.pieces=t}visitText(e){if(this.pieces[this.pieces.length-1]instanceof Ya)this.pieces[this.pieces.length-1].text+=e.value;else{let t=new ge(e.sourceSpan.fullStart,e.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details);this.pieces.push(new Ya(e.value,t))}}visitContainer(e){e.children.forEach(t=>t.visit(this))}visitIcu(e){this.pieces.push(new Ya(TM(e),e.sourceSpan))}visitTagPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.isVoid||(e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan)))}visitPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}visitBlockPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan))}visitIcuPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan,this.placeholderToMessage[e.name]))}createPlaceholderPiece(e,t,r){return new Fc(ef(e,!1),t,r)}};function Bj(n){let e=[],t=new Ww(n.placeholderToMessage,e);return n.nodes.forEach(r=>r.visit(t)),Vj(e)}function $j(n){let e=n.nodes[0],t=n.nodes[n.nodes.length-1];return new ge(e.sourceSpan.fullStart,t.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details)}function Vj(n){let e=[],t=[];n[0]instanceof Fc&&e.push(kb(n[0].sourceSpan.start));for(let r=0;r<n.length;r++){let i=n[r];i instanceof Ya?e.push(i):(t.push(i),n[r-1]instanceof Fc&&e.push(kb(n[r-1].sourceSpan.end)))}return n[n.length-1]instanceof Fc&&e.push(kb(n[n.length-1].sourceSpan.end)),{messageParts:e,placeHolders:t}}function kb(n){return new Ya("",new ge(n,n))}var XT="ngI18nClosureMode",jj="i18n_",Uj="I18N_EXP_",ZT="\uFFFD",Hj="MSG_";function JT(n){return`${Hj}${n}`.toUpperCase()}function zj(n){return new qt(n.name,void 0,Lr,void 0,n.sourceSpan)}function qj(n){let e=n.relativeContextFilePath.replace(/[^A-Za-z0-9]/g,"_").toUpperCase()+"_",t=new Map,r=new Map,i=new Map,s=new Map;for(let u of n.units)for(let c of u.ops())if(c.kind===m.ExtractedAttribute&&c.i18nContext!==null){let l=t.get(c.i18nContext)??[];l.push(c),t.set(c.i18nContext,l)}else if(c.kind===m.I18nAttributes)r.set(c.target,c);else if(c.kind===m.I18nExpression&&c.usage===al.I18nAttribute){let l=i.get(c.target)??[];l.push(c),i.set(c.target,l)}else c.kind===m.I18nMessage&&s.set(c.xref,c);let o=new Map,a=new Map;for(let u of n.units)for(let c of u.create)if(c.kind===m.I18nMessage){if(c.messagePlaceholder===null){let{mainVar:l,statements:d}=FM(n,e,s,c);if(c.i18nBlock!==null){let h=n.addConst(l,d);a.set(c.i18nBlock,h)}else{n.constsInitializers.push(...d),o.set(c.i18nContext,l);let h=t.get(c.i18nContext);if(h!==void 0)for(let f of h)f.expression=l.clone()}}B.remove(c)}for(let u of n.units)for(let c of u.create)if(Vo(c)){let l=r.get(c.xref);if(l===void 0)continue;let d=i.get(c.xref);if(d===void 0)throw new Error("AssertionError: Could not find any i18n expressions associated with an I18nAttributes instruction");let h=new Set;d=d.filter(p=>{let g=h.has(p.name);return h.add(p.name),!g});let f=d.flatMap(p=>{let g=o.get(p.context);if(g===void 0)throw new Error("AssertionError: Could not find i18n expression's value");return[N(p.name),g]});l.i18nAttributesConfig=n.addConst(new Ii(f))}for(let u of n.units)for(let c of u.create)if(c.kind===m.I18nStart){let l=a.get(c.root);if(l===void 0)throw new Error("AssertionError: Could not find corresponding i18n block index for an i18n message op; was an i18n message incorrectly assumed to correspond to an attribute?");c.messageIndex=l}}function FM(n,e,t,r){let i=[],s=new Map;for(let c of r.subMessages){let l=t.get(c),{mainVar:d,statements:h}=FM(n,e,t,l);i.push(...h);let f=s.get(l.messagePlaceholder)??[];f.push(d),s.set(l.messagePlaceholder,f)}Wj(r,s),r.params=new Map([...r.params.entries()].sort());let o=ke(n.pool.uniqueName(jj)),a=Kj(n.pool,r.message.id,e,n.i18nUseExternalIds),u;if(r.needsPostprocessing||r.postprocessingParams.size>0){let c=Object.fromEntries([...r.postprocessingParams.entries()].sort()),l=EE(c,!1),d=[];r.postprocessingParams.size>0&&d.push(Iw(l,!0)),u=h=>ee(w.i18nPostprocess).callFn([h,...d])}return i.push(...Gj(r.message,o,a,r.params,u)),{mainVar:o,statements:i}}function Wj(n,e){for(let[t,r]of e)r.length===1?n.params.set(t,r[0]):(n.params.set(t,N(`${ZT}${Uj}${t}${ZT}`)),n.postprocessingParams.set(t,Ge(r)))}function Gj(n,e,t,r,i){let s=Object.fromEntries(r),o=[zj(e),Yg(Yj(),Nj(e,n,t,s),Lj(e,n,EE(s,!1)))];return i&&o.push(new Nn(e.set(i(e)))),o}function Yj(){return Zh(ke(XT)).notIdentical(N("undefined",_E)).and(ke(XT))}function Kj(n,e,t,r){let i,s=t;if(r){let o=JT("EXTERNAL_"),a=n.uniqueName(s);i=`${o}${Ua(e)}$$${a}`}else{let o=JT(s);i=n.uniqueName(o)}return ke(i)}function Qj(n){for(let e of n.units){let t=null,r=null,i=new Map,s=new Map,o=new Map;for(let a of e.create)switch(a.kind){case m.I18nStart:if(a.context===null)throw Error("I18n op should have its context set.");t=a;break;case m.I18nEnd:t=null;break;case m.IcuStart:if(a.context===null)throw Error("Icu op should have its context set.");r=a;break;case m.IcuEnd:r=null;break;case m.Text:if(t!==null)if(i.set(a.xref,t),s.set(a.xref,r),a.icuPlaceholder!==null){let u=EV(n.allocateXrefId(),a.icuPlaceholder,[a.initialValue]);B.replace(a,u),o.set(a.xref,u)}else B.remove(a);break}for(let a of e.update)switch(a.kind){case m.InterpolateText:if(!i.has(a.target))continue;let u=i.get(a.target),c=s.get(a.target),l=o.get(a.target),d=c?c.context:u.context,h=c?Rh.Postproccessing:Rh.Creation,f=[];for(let p=0;p<a.interpolation.expressions.length;p++){let g=a.interpolation.expressions[p];f.push(fM(d,u.xref,u.xref,u.handle,g,l?.xref??null,a.interpolation.i18nPlaceholders[p]??null,h,al.I18nText,"",g.sourceSpan??a.sourceSpan))}B.replaceWithMany(a,f),l!==void 0&&(l.strings=a.interpolation.strings);break}}}function Xj(n){for(let e of n.units)for(let t of e.create)switch(t.kind){case m.ElementStart:case m.ConditionalCreate:case m.ConditionalBranchCreate:case m.Template:if(!Array.isArray(t.localRefs))throw new Error("AssertionError: expected localRefs to be an array still");if(t.numSlotsUsed+=t.localRefs.length,t.localRefs.length>0){let r=Zj(t.localRefs);t.localRefs=n.addConst(r)}else t.localRefs=null;break}}function Zj(n){let e=[];for(let t of n)e.push(N(t.name),N(t.target));return Ge(e)}function Jj(n){for(let e of n.units){let t=On.HTML;for(let r of e.create)r.kind===m.ElementStart&&r.namespace!==t&&(B.insertBefore(pV(r.namespace),r),t=r.namespace)}}function e5(n){let e=[],t=0,r=0,i=0,s=0,o=0,a=null;for(;t<n.length;)switch(n.charCodeAt(t++)){case 40:r++;break;case 41:r--;break;case 39:i===0?i=39:i===39&&n.charCodeAt(t-1)!==92&&(i=0);break;case 34:i===0?i=34:i===34&&n.charCodeAt(t-1)!==92&&(i=0);break;case 58:!a&&r===0&&i===0&&(a=LM(n.substring(o,t-1).trim()),s=t);break;case 59:if(a&&s>0&&r===0&&i===0){let c=n.substring(s,t-1).trim();e.push(a,c),o=t,s=0,a=null}break}if(a&&s){let u=n.slice(s).trim();e.push(a,u)}return e}function LM(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function t5(n){let e=new Map;for(let t of n.units)for(let r of t.create)Vo(r)&&e.set(r.xref,r);for(let t of n.units)for(let r of t.create)if(r.kind===m.ExtractedAttribute&&r.bindingKind===Z.Attribute&&pM(r.expression)){let i=e.get(r.target);if(i!==void 0&&(i.kind===m.Template||i.kind===m.ConditionalCreate||i.kind===m.ConditionalBranchCreate)&&i.templateKind===yr.Structural)continue;if(r.name==="style"){let s=e5(r.expression.value);for(let o=0;o<s.length-1;o+=2)B.insertBefore(Nr(r.target,Z.StyleProperty,null,s[o],N(s[o+1]),null,null,it.STYLE),r);B.remove(r)}else if(r.name==="class"){let s=r.expression.value.trim().split(/\s+/g);for(let o of s)B.insertBefore(Nr(r.target,Z.ClassName,null,o,null,null,null,it.NONE),r);B.remove(r)}}}function n5(n){Kd(n.root,n.componentName,{index:0},n.compatibility===Hr.TemplateDefinitionBuilder)}function Kd(n,e,t,r){n.fnName===null&&(n.fnName=n.job.pool.uniqueName(Ua(`${e}_${n.job.fnSuffix}`),!1));let i=new Map;for(let s of n.ops())switch(s.kind){case m.Property:case m.DomProperty:s.bindingKind===Z.LegacyAnimation&&(s.name="@"+s.name);break;case m.Animation:if(s.handlerFnName===null){let l=s.name.replace(".","");s.handlerFnName=`${n.fnName}_${l}_cb`,s.handlerFnName=Ua(s.handlerFnName)}break;case m.AnimationListener:if(s.handlerFnName!==null)break;if(!s.hostListener&&s.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let o=s.name.replace(".","");s.hostListener?s.handlerFnName=`${e}_${o}_HostBindingHandler`:s.handlerFnName=`${n.fnName}_${s.tag.replace("-","_")}_${o}_${s.targetSlot.slot}_listener`,s.handlerFnName=Ua(s.handlerFnName);break;case m.Listener:if(s.handlerFnName!==null)break;if(!s.hostListener&&s.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let a="";s.isLegacyAnimationListener&&(s.name=`@${s.name}.${s.legacyAnimationPhase}`,a="animation"),s.hostListener?s.handlerFnName=`${e}_${a}${s.name}_HostBindingHandler`:s.handlerFnName=`${n.fnName}_${s.tag.replace("-","_")}_${a}${s.name}_${s.targetSlot.slot}_listener`,s.handlerFnName=Ua(s.handlerFnName);break;case m.TwoWayListener:if(s.handlerFnName!==null)break;if(s.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");s.handlerFnName=Ua(`${n.fnName}_${s.tag.replace("-","_")}_${s.name}_${s.targetSlot.slot}_listener`);break;case m.Variable:i.set(s.xref,r5(n,s.variable,t));break;case m.RepeaterCreate:if(!(n instanceof oi))throw new Error("AssertionError: must be compiling a component");if(s.handle.slot===null)throw new Error("Expected slot to be assigned");if(s.emptyView!==null){let l=n.job.views.get(s.emptyView);Kd(l,`${e}_${s.functionNameSuffix}Empty_${s.handle.slot+2}`,t,r)}Kd(n.job.views.get(s.xref),`${e}_${s.functionNameSuffix}_${s.handle.slot+1}`,t,r);break;case m.Projection:if(!(n instanceof oi))throw new Error("AssertionError: must be compiling a component");if(s.handle.slot===null)throw new Error("Expected slot to be assigned");if(s.fallbackView!==null){let l=n.job.views.get(s.fallbackView);Kd(l,`${e}_ProjectionFallback_${s.handle.slot}`,t,r)}break;case m.ConditionalCreate:case m.ConditionalBranchCreate:case m.Template:if(!(n instanceof oi))throw new Error("AssertionError: must be compiling a component");let u=n.job.views.get(s.xref);if(s.handle.slot===null)throw new Error("Expected slot to be assigned");let c=s.functionNameSuffix.length===0?"":`_${s.functionNameSuffix}`;Kd(u,`${e}${c}_${s.handle.slot}`,t,r);break;case m.StyleProp:s.name=i5(s.name),r&&(s.name=eA(s.name));break;case m.ClassProp:r&&(s.name=eA(s.name));break}for(let s of n.ops())ln(s,o=>{if(!(!(o instanceof Ws)||o.name!==null)){if(!i.has(o.xref))throw new Error(`Variable ${o.xref} not yet named`);o.name=i.get(o.xref)}})}function r5(n,e,t){if(e.name===null)switch(e.kind){case un.Context:e.name=`ctx_r${t.index++}`;break;case un.Identifier:if(n.job.compatibility===Hr.TemplateDefinitionBuilder){let r=e.identifier==="ctx"?"i":"";e.name=`${e.identifier}_${r}r${++t.index}`}else e.name=`${e.identifier}_i${t.index++}`;break;default:e.name=`_r${++t.index}`;break}return e.name}function i5(n){return n.startsWith("--")?n:LM(n)}function eA(n){let e=n.indexOf("!important");return e>-1?n.substring(0,e):n}function s5(n){for(let e of n.units){for(let t of e.create)(t.kind===m.Listener||t.kind===m.Animation||t.kind===m.AnimationListener||t.kind===m.TwoWayListener)&&tA(t.handlerOps);tA(e.update)}}function tA(n){for(let e of n){if(e.kind!==m.Statement||!(e.statement instanceof Nn)||!(e.statement.expr instanceof bg))continue;let t=e.statement.expr.steps,r=!0;for(let i=e.next;i.kind!==m.ListEnd&&r;i=i.next)ln(i,(s,o)=>{if(!ls(s))return s;if(r&&!(o&He.InChildOperation))switch(s.kind){case ne.NextContext:s.steps+=t,B.remove(e),r=!1;break;case ne.GetCurrentView:case ne.Reference:case ne.ContextLetReference:r=!1;break}})}}var o5="ng-container";function a5(n){for(let e of n.units){let t=new Set;for(let r of e.create)r.kind===m.ElementStart&&r.tag===o5&&(r.kind=m.ContainerStart,t.add(r.xref)),r.kind===m.ElementEnd&&t.has(r.xref)&&(r.kind=m.ContainerEnd)}}function u5(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an element-like target.");return t}function c5(n){let e=new Map;for(let t of n.units)for(let r of t.create)Vo(r)&&e.set(r.xref,r);for(let t of n.units)for(let r of t.create)(r.kind===m.ElementStart||r.kind===m.ContainerStart)&&r.nonBindable&&B.insertAfter(lV(r.xref),r),(r.kind===m.ElementEnd||r.kind===m.ContainerEnd)&&u5(e,r.xref).nonBindable&&B.insertBefore(dV(r.xref),r)}function Us(n){return e=>e.kind===n}function eh(n,e){return t=>t.kind===n&&e===t.expression instanceof Mt}function l5(n){return n.kind===m.Listener&&!(n.hostListener&&n.isLegacyAnimationListener)||n.kind===m.TwoWayListener||n.kind===m.Animation||n.kind===m.AnimationListener}function d5(n){return(n.kind===m.Property||n.kind===m.TwoWayProperty)&&!(n.expression instanceof Mt)}var h5=[{test:n=>n.kind===m.Listener&&n.hostListener&&n.isLegacyAnimationListener},{test:l5}],f5=[{test:Us(m.StyleMap),transform:Lg},{test:Us(m.ClassMap),transform:Lg},{test:Us(m.StyleProp)},{test:Us(m.ClassProp)},{test:eh(m.Attribute,!0)},{test:eh(m.Property,!0)},{test:d5},{test:eh(m.Attribute,!1)}],p5=[{test:eh(m.DomProperty,!0)},{test:eh(m.DomProperty,!1)},{test:Us(m.Attribute)},{test:Us(m.StyleMap),transform:Lg},{test:Us(m.ClassMap),transform:Lg},{test:Us(m.StyleProp)},{test:Us(m.ClassProp)}],nA=new Set([m.Listener,m.TwoWayListener,m.AnimationListener,m.StyleMap,m.ClassMap,m.StyleProp,m.ClassProp,m.Property,m.TwoWayProperty,m.DomProperty,m.Attribute,m.Animation]);function m5(n){for(let e of n.units){rA(e.create,h5);let t=e.job.kind===W.Host?p5:f5;rA(e.update,t)}}function rA(n,e){let t=[],r=null;for(let i of n){let s=Fh(i)?i.target:null;(!nA.has(i.kind)||s!==r&&r!==null&&s!==null)&&(B.insertBefore(iA(t,e),i),t=[],r=null),nA.has(i.kind)&&(t.push(i),B.remove(i),r=s??r)}n.push(iA(t,e))}function iA(n,e){let t=Array.from(e,()=>new Array);for(let r of n){let i=e.findIndex(s=>s.test(r));t[i].push(r)}return t.flatMap((r,i)=>{let s=e[i].transform;return s?s(r):r})}function Lg(n){return n.slice(n.length-1)}function g5(n){for(let e of n.units){let t=xM(e);for(let r of e.ops())switch(r.kind){case m.Binding:let i=y5(t,r.target);v5(r.name)&&i.kind===m.Projection&&B.remove(r);break}}}function v5(n){return n.toLowerCase()==="select"}function y5(n,e){let t=n.get(e);if(t===void 0)throw new Error("All attributes should have an slottable target.");return t}function _5(n){for(let e of n.units)b5(e)}function b5(n){for(let e of n.update)ln(e,(t,r)=>{if(ls(t)&&t.kind===ne.PipeBinding){if(r&He.InChildOperation)throw new Error("AssertionError: pipe bindings should not appear in child expressions");if(n.job.compatibility){if(e.target==null)throw new Error("AssertionError: expected slot handle to be assigned for pipe creation");w5(n,e.target,t)}else n.create.push(wM(t.target,t.targetSlot,t.name))}})}function w5(n,e,t){for(let r=n.create.head.next;r.kind!==m.ListEnd;r=r.next){if(!cl(r)||r.xref!==e)continue;for(;r.next.kind===m.Pipe;)r=r.next;let i=wM(t.target,t.targetSlot,t.name);B.insertBefore(i,r.next);return}throw new Error(`AssertionError: unable to find insertion point for pipe ${t.name}`)}function E5(n){for(let e of n.units)for(let t of e.update)jt(t,r=>!(r instanceof pu)||r.args.length<=4?r:new $h(r.target,r.targetSlot,r.name,Ge(r.args),r.args.length),He.None)}function C5(n){BM(n.root,0)}function BM(n,e){let t=null;for(let r of n.create)switch(r.kind){case m.I18nStart:r.subTemplateIndex=e===0?null:e,t=r;break;case m.I18nEnd:t.subTemplateIndex===null&&(e=0),t=null;break;case m.ConditionalCreate:case m.ConditionalBranchCreate:case m.Template:e=xm(n.job.views.get(r.xref),t,r.i18nPlaceholder,e);break;case m.RepeaterCreate:let i=n.job.views.get(r.xref);e=xm(i,t,r.i18nPlaceholder,e),r.emptyView!==null&&(e=xm(n.job.views.get(r.emptyView),t,r.emptyI18nPlaceholder,e));break;case m.Projection:r.fallbackView!==null&&(e=xm(n.job.views.get(r.fallbackView),t,r.fallbackViewI18nPlaceholder,e));break}return e}function xm(n,e,t,r){if(t!==void 0){if(e===null)throw Error("Expected template with i18n placeholder to be in an i18n block.");r++,x5(n,e)}return BM(n,r)}function x5(n,e){if(n.create.head.next?.kind!==m.I18nStart){let t=n.job.allocateXrefId();B.insertAfter(Jg(t,e.message,e.root,null),n.create.head),B.insertBefore(e0(t,null),n.create.tail)}}function D5(n){for(let e of n.units)for(let t of e.ops())ln(t,r=>{if(!(r instanceof fu)||r.body===null)return;let i=new Gw(r.args.length);r.fn=n.pool.getSharedConstant(i,r.body),r.body=null})}var Gw=class extends Ka{numArgs;constructor(e){super(),this.numArgs=e}keyOf(e){return e instanceof Jc?`param(${e.index})`:super.keyOf(e)}toSharedConstantDeclaration(e,t){let r=[];for(let s=0;s<this.numArgs;s++)r.push(new cn("a"+s));let i=Q(t,s=>s instanceof Jc?ke("a"+s.index):s,He.None);return new qt(e,new iu(r,i),void 0,an.Final)}};function S5(n){for(let e of n.units)for(let t of e.update)jt(t,(r,i)=>i&He.InChildOperation?r:r instanceof Ii?I5(r):r instanceof as?T5(r):r,He.None)}function I5(n){let e=[],t=[];for(let r of n.entries)if(r.isConstant())e.push(r);else{let i=t.length;t.push(r),e.push(new Jc(i))}return new fu(Ge(e),t)}function T5(n){let e=[],t=[];for(let r of n.entries)if(r.value.isConstant())e.push(r);else{let i=t.length;t.push(r.value),e.push(new Uc(r.key,new Jc(i),r.quoted))}return new fu(Qn(e),t)}function A5(n){for(let e of n.units)for(let t of e.ops())jt(t,r=>r instanceof jc&&(r.flags===null||!r.flags.includes("g"))?n.pool.getSharedConstant(new Yw,r):r,He.None)}var Yw=class extends Ka{toSharedConstantDeclaration(e,t){return new qt(e,t,void 0,an.Final)}};function M5(n,e,t,r,i){return Ho(w.element,n,e,t,r,i)}function k5(n,e,t,r,i){return Ho(w.elementStart,n,e,t,r,i)}function Ho(n,e,t,r,i,s){let o=[N(e)];return t!==null&&o.push(N(t)),i!==null?o.push(N(r),N(i)):r!==null&&o.push(N(r)),_e(n,o,s)}function $M(n,e,t,r,i,s,o,a,u){let c=[N(e),t,N(r),N(i),N(s),N(o)];for(a!==null&&(c.push(N(a)),c.push(ee(w.templateRefExtractor)));c[c.length-1].isEquivalent(Hc);)c.pop();return _e(n,c,u)}function OE(n,e,t,r,i){let s=[N(e)];return t instanceof Mt?s.push(vu(t,i)):s.push(t),r!==null&&s.push(r),_e(n,s,i)}function P5(n){return _e(w.elementEnd,[],n)}function O5(n,e,t,r){return Ho(w.elementContainerStart,n,null,e,t,r)}function N5(n,e,t,r){return Ho(w.elementContainer,n,null,e,t,r)}function R5(){return _e(w.elementContainerEnd,[],null)}function F5(n,e,t,r,i,s,o,a){return $M(w.templateCreate,n,e,t,r,i,s,o,a)}function L5(){return _e(w.disableBindings,[],null)}function B5(){return _e(w.enableBindings,[],null)}function $5(n,e,t,r,i){let s=[N(n),e];return t!==null&&s.push(ee(t)),_e(r?w.syntheticHostListener:w.listener,s,i)}function sA(n,e){return ee(w.twoWayBindingSet).callFn([n,e])}function V5(n,e,t){return _e(w.twoWayListener,[N(n),e],t)}function j5(n,e){return _e(w.pipe,[N(n),N(e)],null)}function U5(){return _e(w.namespaceHTML,[],null)}function H5(){return _e(w.namespaceSVG,[],null)}function z5(){return _e(w.namespaceMathML,[],null)}function q5(n,e){return _e(w.advance,n>1?[N(n)]:[],e)}function W5(n){return ee(w.reference).callFn([N(n)])}function G5(n){return ee(w.nextContext).callFn(n===1?[]:[N(n)])}function Y5(){return ee(w.getCurrentView).callFn([])}function K5(n){return ee(w.restoreView).callFn([n])}function Q5(n){return ee(w.resetView).callFn([n])}function X5(n,e,t){let r=[N(n,null)];return e!==""&&r.push(N(e)),_e(w.text,r,t)}function Z5(n,e,t,r,i,s,o,a,u,c,l){let d=[N(n),N(e),t??N(null),N(r),N(i),N(s),o??N(null),a??N(null),u?ee(w.deferEnableTimerScheduling):N(null),N(l)],h;for(;(h=d[d.length-1])!==null&&h instanceof wn&&h.value===null;)d.pop();return _e(w.defer,d,c)}var J5=new Map([[rt.Idle,{none:w.deferOnIdle,prefetch:w.deferPrefetchOnIdle,hydrate:w.deferHydrateOnIdle}],[rt.Immediate,{none:w.deferOnImmediate,prefetch:w.deferPrefetchOnImmediate,hydrate:w.deferHydrateOnImmediate}],[rt.Timer,{none:w.deferOnTimer,prefetch:w.deferPrefetchOnTimer,hydrate:w.deferHydrateOnTimer}],[rt.Hover,{none:w.deferOnHover,prefetch:w.deferPrefetchOnHover,hydrate:w.deferHydrateOnHover}],[rt.Interaction,{none:w.deferOnInteraction,prefetch:w.deferPrefetchOnInteraction,hydrate:w.deferHydrateOnInteraction}],[rt.Viewport,{none:w.deferOnViewport,prefetch:w.deferPrefetchOnViewport,hydrate:w.deferHydrateOnViewport}],[rt.Never,{none:w.deferHydrateNever,prefetch:w.deferHydrateNever,hydrate:w.deferHydrateNever}]]);function eU(n,e,t,r){let i=J5.get(n)?.[t];if(i===void 0)throw new Error(`Unable to determine instruction for trigger ${n}`);return _e(i,e,r)}function tU(n){return _e(w.projectionDef,n?[n]:[],null)}function nU(n,e,t,r,i,s,o){let a=[N(n)];return(e!==0||t!==null||r!==null)&&(a.push(N(e)),t!==null&&a.push(t),r!==null&&(t===null&&a.push(N(null)),a.push(ke(r),N(i),N(s)))),_e(w.projection,a,o)}function rU(n,e,t,r){let i=[N(n),N(e)];return t!==null&&i.push(N(t)),_e(w.i18nStart,i,r)}function iU(n,e,t,r,i,s,o,a){let u=[N(n),e,N(t),N(r),N(i),N(s)];for(o!==null&&(u.push(N(o)),u.push(ee(w.templateRefExtractor)));u[u.length-1].isEquivalent(Hc);)u.pop();return _e(w.conditionalCreate,u,a)}function sU(n,e,t,r,i,s,o,a){let u=[N(n),e,N(t),N(r),N(i),N(s)];for(o!==null&&(u.push(N(o)),u.push(ee(w.templateRefExtractor)));u[u.length-1].isEquivalent(Hc);)u.pop();return _e(w.conditionalBranchCreate,u,a)}function oU(n,e,t,r,i,s,o,a,u,c,l,d,h,f){let p=[N(n),ke(e),N(t),N(r),N(i),N(s),o];return(a||u!==null)&&(p.push(N(a)),u!==null&&(p.push(ke(u),N(c),N(l)),(d!==null||h!==null)&&p.push(N(d)),h!==null&&p.push(N(h)))),_e(w.repeaterCreate,p,f)}function aU(n,e){return _e(w.repeater,[n],e)}function uU(n,e,t){return n==="prefetch"?_e(w.deferPrefetchWhen,[e],t):n==="hydrate"?_e(w.deferHydrateWhen,[e],t):_e(w.deferWhen,[e],t)}function cU(n,e){return _e(w.declareLet,[N(n)],e)}function lU(n,e){return ee(w.storeLet).callFn([n],e)}function dU(n){return ee(w.readContextLet).callFn([N(n)])}function hU(n,e,t,r){let i=[N(n),N(e)];return t&&i.push(N(t)),_e(w.i18n,i,r)}function fU(n){return _e(w.i18nEnd,[],n)}function pU(n,e){let t=[N(n),N(e)];return _e(w.i18nAttributes,t,null)}function mU(n,e,t){return OE(w.ariaProperty,n,e,null,t)}function gU(n,e,t,r){return OE(w.property,n,e,t,r)}function vU(n,e,t){let r=[];return n instanceof Mt?r.push(vu(n,t)):r.push(n),e!==null&&r.push(e),_e(w.control,r,t)}function yU(n){return _e(w.controlCreate,[],n)}function _U(n,e,t,r){let i=[N(n),e];return t!==null&&i.push(t),_e(w.twoWayProperty,i,r)}function bU(n,e,t,r,i){let s=[N(n)];return e instanceof Mt?s.push(vu(e,i)):s.push(e),(t!==null||r!==null)&&s.push(t??N(null)),r!==null&&s.push(N(r)),_e(w.attribute,s,null)}function wU(n,e,t,r){let i=[N(n)];return e instanceof Mt?i.push(vu(e,r)):i.push(e),t!==null&&i.push(N(t)),_e(w.styleProp,i,r)}function EU(n,e,t){return _e(w.classProp,[N(n),e],t)}function CU(n,e){let t=n instanceof Mt?vu(n,e):n;return _e(w.styleMap,[t],e)}function xU(n,e){let t=n instanceof Mt?vu(n,e):n;return _e(w.classMap,[t],e)}function DU(n,e,t,r,i){return Ho(w.domElement,n,e,t,r,i)}function SU(n,e,t,r,i){return Ho(w.domElementStart,n,e,t,r,i)}function IU(n){return _e(w.domElementEnd,[],n)}function TU(n,e,t,r){return Ho(w.domElementContainerStart,n,null,e,t,r)}function AU(n,e,t,r){return Ho(w.domElementContainer,n,null,e,t,r)}function MU(){return _e(w.domElementContainerEnd,[],null)}function kU(n,e,t,r){let i=[N(n),e];return t!==null&&i.push(ee(t)),_e(w.domListener,i,r)}function PU(n,e,t,r,i,s,o,a){return $M(w.domTemplate,n,e,t,r,i,s,o,a)}var oA=[w.pipeBind1,w.pipeBind2,w.pipeBind3,w.pipeBind4];function OU(n,e,t){if(t.length<1||t.length>oA.length)throw new Error("pipeBind() argument count out of bounds");let r=oA[t.length-1];return ee(r).callFn([N(n),N(e),...t])}function NU(n,e,t){return ee(w.pipeBindV).callFn([N(n),N(e),t])}function RU(n,e,t){let r=VM(n,e);return KU(WU,[],r,[],t)}function FU(n,e){return _e(w.i18nExp,[n],e)}function LU(n,e){return _e(w.i18nApply,[N(n)],e)}function BU(n,e,t,r){return OE(w.domProperty,n,e,t,r)}function $U(n,e,t,r){let i=[e];t!==null&&i.push(t);let s=n==="enter"?w.animationEnter:w.animationLeave;return _e(s,i,r)}function VU(n,e,t,r){let s=[e instanceof Mt?vu(e,r):e];t!==null&&s.push(t);let o=n==="enter"?w.animationEnter:w.animationLeave;return _e(o,s,r)}function jU(n,e,t,r){let i=[e],s=n==="enter"?w.animationEnterListener:w.animationLeaveListener;return _e(s,i,r)}function UU(n,e,t){return _e(w.syntheticHostProperty,[N(n),e],t)}function HU(n,e,t){return NE(YU,[N(n),e],t,[],null)}function zU(n,e){return _e(w.attachSourceLocations,[N(n),e],null)}function VM(n,e){if(n.length<1||e.length!==n.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");let t=[];if(e.length===1&&n[0]===""&&n[1]==="")t.push(e[0]);else{let r;for(r=0;r<e.length;r++)t.push(N(n[r]),e[r]);t.push(N(n[r]))}return t}function vu(n,e){let t=VM(n.strings,n.expressions);return NE(GU,[],t,[],e)}function _e(n,e,t){let r=ee(n).callFn(e,t);return li(new Nn(r,t))}function qU(n,e,t){let r=[n];return e!==null&&r.push(e),_e(w.conditional,r,t)}var WU={constant:[w.textInterpolate,w.textInterpolate1,w.textInterpolate2,w.textInterpolate3,w.textInterpolate4,w.textInterpolate5,w.textInterpolate6,w.textInterpolate7,w.textInterpolate8],variable:w.textInterpolateV,mapping:n=>{if(n%2===0)throw new Error("Expected odd number of arguments");return(n-1)/2}},GU={constant:[w.interpolate,w.interpolate1,w.interpolate2,w.interpolate3,w.interpolate4,w.interpolate5,w.interpolate6,w.interpolate7,w.interpolate8],variable:w.interpolateV,mapping:n=>{if(n%2===0)throw new Error("Expected odd number of arguments");return(n-1)/2}},YU={constant:[w.pureFunction0,w.pureFunction1,w.pureFunction2,w.pureFunction3,w.pureFunction4,w.pureFunction5,w.pureFunction6,w.pureFunction7,w.pureFunction8],variable:w.pureFunctionV,mapping:n=>n};function NE(n,e,t,r,i){let s=n.mapping(t.length),o=t.at(-1);if(r.length===0&&t.length>1&&o instanceof wn&&o.value===""&&t.pop(),s<n.constant.length)return ee(n.constant[s]).callFn([...e,...t,...r],i);if(n.variable!==null)return ee(n.variable).callFn([...e,Ge(t),...r],i);throw new Error("AssertionError: unable to call variadic function")}function KU(n,e,t,r,i){return li(NE(n,e,t,r,i).toStmt())}var QU=new Map([["window",w.resolveWindow],["document",w.resolveDocument],["body",w.resolveBody]]),XU=new Map([["class","className"],["for","htmlFor"],["formaction","formAction"],["innerHtml","innerHTML"],["readonly","readOnly"],["tabindex","tabIndex"]]);function ZU(n){for(let e of n.units)JU(e,e.create),RE(e,e.update)}function JU(n,e){for(let t of e)switch(jt(t,jM,He.None),t.kind){case m.Text:B.replace(t,X5(t.handle.slot,t.initialValue,t.sourceSpan));break;case m.ElementStart:B.replace(t,n.job.mode===fr.DomOnly?SU(t.handle.slot,t.tag,t.attributes,t.localRefs,t.startSourceSpan):k5(t.handle.slot,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case m.Element:B.replace(t,n.job.mode===fr.DomOnly?DU(t.handle.slot,t.tag,t.attributes,t.localRefs,t.wholeSourceSpan):M5(t.handle.slot,t.tag,t.attributes,t.localRefs,t.wholeSourceSpan));break;case m.ElementEnd:B.replace(t,n.job.mode===fr.DomOnly?IU(t.sourceSpan):P5(t.sourceSpan));break;case m.ContainerStart:B.replace(t,n.job.mode===fr.DomOnly?TU(t.handle.slot,t.attributes,t.localRefs,t.startSourceSpan):O5(t.handle.slot,t.attributes,t.localRefs,t.startSourceSpan));break;case m.Container:B.replace(t,n.job.mode===fr.DomOnly?AU(t.handle.slot,t.attributes,t.localRefs,t.wholeSourceSpan):N5(t.handle.slot,t.attributes,t.localRefs,t.wholeSourceSpan));break;case m.ContainerEnd:B.replace(t,n.job.mode===fr.DomOnly?MU():R5());break;case m.I18nStart:B.replace(t,rU(t.handle.slot,t.messageIndex,t.subTemplateIndex,t.sourceSpan));break;case m.I18nEnd:B.replace(t,fU(t.sourceSpan));break;case m.I18n:B.replace(t,hU(t.handle.slot,t.messageIndex,t.subTemplateIndex,t.sourceSpan));break;case m.I18nAttributes:if(t.i18nAttributesConfig===null)throw new Error("AssertionError: i18nAttributesConfig was not set");B.replace(t,pU(t.handle.slot,t.i18nAttributesConfig));break;case m.Template:if(!(n instanceof oi))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let r=n.job.views.get(t.xref);B.replace(t,t.templateKind===yr.Block||n.job.mode===fr.DomOnly?PU(t.handle.slot,ke(r.fnName),r.decls,r.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan):F5(t.handle.slot,ke(r.fnName),r.decls,r.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case m.DisableBindings:B.replace(t,L5());break;case m.EnableBindings:B.replace(t,B5());break;case m.Pipe:B.replace(t,j5(t.handle.slot,t.name));break;case m.DeclareLet:B.replace(t,cU(t.handle.slot,t.sourceSpan));break;case m.AnimationString:B.replace(t,VU(t.animationKind,t.expression,t.sanitizer,t.sourceSpan));break;case m.Animation:let i=Dm(n,t.handlerFnName,t.handlerOps,!1);B.replace(t,$U(t.animationKind,i,t.sanitizer,t.sourceSpan));break;case m.AnimationListener:let s=Dm(n,t.handlerFnName,t.handlerOps,t.consumesDollarEvent);B.replace(t,jU(t.animationKind,s,null,t.sourceSpan));break;case m.Listener:let o=Dm(n,t.handlerFnName,t.handlerOps,t.consumesDollarEvent),a=t.eventTarget?QU.get(t.eventTarget):null;if(a===void 0)throw new Error(`Unexpected global target '${t.eventTarget}' defined for '${t.name}' event. Supported list of global targets: window,document,body.`);B.replace(t,n.job.mode===fr.DomOnly&&!t.hostListener&&!t.isLegacyAnimationListener?kU(t.name,o,a,t.sourceSpan):$5(t.name,o,a,t.hostListener&&t.isLegacyAnimationListener,t.sourceSpan));break;case m.TwoWayListener:B.replace(t,V5(t.name,Dm(n,t.handlerFnName,t.handlerOps,!0),t.sourceSpan));break;case m.Variable:if(t.variable.name===null)throw new Error(`AssertionError: unnamed variable ${t.xref}`);B.replace(t,li(new qt(t.variable.name,t.initializer,void 0,an.Final)));break;case m.Namespace:switch(t.active){case On.HTML:B.replace(t,U5());break;case On.SVG:B.replace(t,H5());break;case On.Math:B.replace(t,z5());break}break;case m.Defer:let u=!!t.loadingMinimumTime||!!t.loadingAfterTime||!!t.placeholderMinimumTime;B.replace(t,Z5(t.handle.slot,t.mainSlot.slot,t.resolverFn,t.loadingSlot?.slot??null,t.placeholderSlot?.slot??null,t.errorSlot?.slot??null,t.loadingConfig,t.placeholderConfig,u,t.sourceSpan,t.flags));break;case m.DeferOn:let c=[];switch(t.trigger.kind){case rt.Never:case rt.Idle:case rt.Immediate:break;case rt.Timer:c=[N(t.trigger.delay)];break;case rt.Viewport:t.modifier==="hydrate"?c=t.trigger.options?[t.trigger.options]:[]:(c=[N(t.trigger.targetSlot?.slot??null)],t.trigger.targetSlotViewSteps!==0?c.push(N(t.trigger.targetSlotViewSteps)):t.trigger.options&&c.push(N(null)),t.trigger.options&&c.push(t.trigger.options));break;case rt.Interaction:case rt.Hover:t.modifier==="hydrate"?c=[]:(c=[N(t.trigger.targetSlot?.slot??null)],t.trigger.targetSlotViewSteps!==0&&c.push(N(t.trigger.targetSlotViewSteps)));break;default:throw new Error(`AssertionError: Unsupported reification of defer trigger kind ${t.trigger.kind}`)}B.replace(t,eU(t.trigger.kind,c,t.modifier,t.sourceSpan));break;case m.ProjectionDef:B.replace(t,tU(t.def));break;case m.Projection:if(t.handle.slot===null)throw new Error("No slot was assigned for project instruction");let l=null,d=null,h=null;if(t.fallbackView!==null){if(!(n instanceof oi))throw new Error("AssertionError: must be compiling a component");let T=n.job.views.get(t.fallbackView);if(T===void 0)throw new Error("AssertionError: projection had fallback view xref, but fallback view was not found");if(T.fnName===null||T.decls===null||T.vars===null)throw new Error("AssertionError: expected projection fallback view to have been named and counted");l=T.fnName,d=T.decls,h=T.vars}B.replace(t,nU(t.handle.slot,t.projectionSlotIndex,t.attributes,l,d,h,t.sourceSpan));break;case m.ConditionalCreate:if(!(n instanceof oi))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let f=n.job.views.get(t.xref);B.replace(t,iU(t.handle.slot,ke(f.fnName),f.decls,f.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case m.ConditionalBranchCreate:if(!(n instanceof oi))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let p=n.job.views.get(t.xref);B.replace(t,sU(t.handle.slot,ke(p.fnName),p.decls,p.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case m.RepeaterCreate:if(t.handle.slot===null)throw new Error("No slot was assigned for repeater instruction");if(!(n instanceof oi))throw new Error("AssertionError: must be compiling a component");let g=n.job.views.get(t.xref);if(g.fnName===null)throw new Error("AssertionError: expected repeater primary view to have been named");let v=null,y=null,E=null;if(t.emptyView!==null){let T=n.job.views.get(t.emptyView);if(T===void 0)throw new Error("AssertionError: repeater had empty view xref, but empty view was not found");if(T.fnName===null||T.decls===null||T.vars===null)throw new Error("AssertionError: expected repeater empty view to have been named and counted");v=T.fnName,y=T.decls,E=T.vars}B.replace(t,oU(t.handle.slot,g.fnName,t.decls,t.vars,t.tag,t.attributes,nH(n,t),t.usesComponentInstance,v,y,E,t.emptyTag,t.emptyAttributes,t.wholeSourceSpan));break;case m.SourceLocation:let M=Ge(t.locations.map(({targetSlot:T,offset:R,line:U,column:q})=>{if(T.slot===null)throw new Error("No slot was assigned for source location");return Ge([N(T.slot),N(R),N(U),N(q)])}));B.replace(t,zU(t.templatePath,M));break;case m.ControlCreate:B.replace(t,yU(t.sourceSpan));break;case m.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of create op ${m[t.kind]}`)}}function RE(n,e){for(let t of e)switch(jt(t,jM,He.None),t.kind){case m.Advance:B.replace(t,q5(t.delta,t.sourceSpan));break;case m.Property:B.replace(t,n.job.mode===fr.DomOnly&&t.bindingKind!==Z.LegacyAnimation&&t.bindingKind!==Z.Animation?aA(t):eH(t));break;case m.Control:B.replace(t,tH(t));break;case m.TwoWayProperty:B.replace(t,_U(t.name,t.expression,t.sanitizer,t.sourceSpan));break;case m.StyleProp:B.replace(t,wU(t.name,t.expression,t.unit,t.sourceSpan));break;case m.ClassProp:B.replace(t,EU(t.name,t.expression,t.sourceSpan));break;case m.StyleMap:B.replace(t,CU(t.expression,t.sourceSpan));break;case m.ClassMap:B.replace(t,xU(t.expression,t.sourceSpan));break;case m.I18nExpression:B.replace(t,FU(t.expression,t.sourceSpan));break;case m.I18nApply:B.replace(t,LU(t.handle.slot,t.sourceSpan));break;case m.InterpolateText:B.replace(t,RU(t.interpolation.strings,t.interpolation.expressions,t.sourceSpan));break;case m.Attribute:B.replace(t,bU(t.name,t.expression,t.sanitizer,t.namespace,t.sourceSpan));break;case m.DomProperty:if(t.expression instanceof Mt)throw new Error("not yet handled");t.bindingKind===Z.LegacyAnimation||t.bindingKind===Z.Animation?B.replace(t,UU(t.name,t.expression,t.sourceSpan)):B.replace(t,aA(t));break;case m.Variable:if(t.variable.name===null)throw new Error(`AssertionError: unnamed variable ${t.xref}`);B.replace(t,li(new qt(t.variable.name,t.initializer,void 0,an.Final)));break;case m.Conditional:if(t.processed===null)throw new Error("Conditional test was not set.");B.replace(t,qU(t.processed,t.contextValue,t.sourceSpan));break;case m.Repeater:B.replace(t,aU(t.collection,t.sourceSpan));break;case m.DeferWhen:B.replace(t,uU(t.modifier,t.expr,t.sourceSpan));break;case m.StoreLet:throw new Error(`AssertionError: unexpected storeLet ${t.declaredName}`);case m.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of update op ${m[t.kind]}`)}}function aA(n){return BU(XU.get(n.name)??n.name,n.expression,n.sanitizer,n.sourceSpan)}function eH(n){return DM(n.name)?mU(n.name,n.expression,n.sourceSpan):gU(n.name,n.expression,n.sanitizer,n.sourceSpan)}function tH(n){return vU(n.expression,n.sanitizer,n.sourceSpan)}function jM(n){if(!ls(n))return n;switch(n.kind){case ne.NextContext:return G5(n.steps);case ne.Reference:return W5(n.targetSlot.slot+1+n.offset);case ne.LexicalRead:throw new Error(`AssertionError: unresolved LexicalRead of ${n.name}`);case ne.TwoWayBindingSet:throw new Error("AssertionError: unresolved TwoWayBindingSet");case ne.RestoreView:if(typeof n.view=="number")throw new Error("AssertionError: unresolved RestoreView");return K5(n.view);case ne.ResetView:return Q5(n.expr);case ne.GetCurrentView:return Y5();case ne.ReadVariable:if(n.name===null)throw new Error(`Read of unnamed variable ${n.xref}`);return ke(n.name);case ne.ReadTemporaryExpr:if(n.name===null)throw new Error(`Read of unnamed temporary ${n.xref}`);return ke(n.name);case ne.AssignTemporaryExpr:if(n.name===null)throw new Error(`Assign of unnamed temporary ${n.xref}`);return ke(n.name).set(n.expr);case ne.PureFunctionExpr:if(n.fn===null)throw new Error("AssertionError: expected PureFunctions to have been extracted");return HU(n.varOffset,n.fn,n.args);case ne.PureFunctionParameterExpr:throw new Error("AssertionError: expected PureFunctionParameterExpr to have been extracted");case ne.PipeBinding:return OU(n.targetSlot.slot,n.varOffset,n.args);case ne.PipeBindingVariadic:return NU(n.targetSlot.slot,n.varOffset,n.args);case ne.SlotLiteralExpr:return N(n.slot.slot);case ne.ContextLetReference:return dU(n.targetSlot.slot);case ne.StoreLet:return lU(n.value,n.sourceSpan);case ne.TrackContext:return ke("this");default:throw new Error(`AssertionError: Unsupported reification of ir.Expression kind: ${ne[n.kind]}`)}}function Dm(n,e,t,r){RE(n,t);let i=[];for(let o of t){if(o.kind!==m.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${m[o.kind]}`);i.push(o.statement)}let s=[];return r&&s.push(new cn("$event")),ko(s,i,void 0,void 0,e)}function nH(n,e){if(e.trackByFn!==null)return e.trackByFn;let t=[new cn("$index"),new cn("$item")],r;if(e.trackByOps===null)r=e.usesComponentInstance?ko(t,[new _n(e.track)]):Ti(t,e.track);else{RE(n,e.trackByOps);let i=[];for(let s of e.trackByOps){if(s.kind!==m.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${m[s.kind]}`);i.push(s.statement)}r=e.usesComponentInstance||i.length!==1||!(i[0]instanceof _n)?ko(t,i):Ti(t,i[0].value)}return e.trackByFn=n.job.pool.getSharedFunctionReference(r,"_forTrack"),e.trackByFn}function rH(n){for(let e of n.units)for(let t of e.update)switch(t.kind){case m.Attribute:case m.Binding:case m.ClassProp:case m.ClassMap:case m.Property:case m.StyleProp:case m.StyleMap:t.expression instanceof Vh&&B.remove(t);break}}function iH(n){for(let e of n.units)for(let t of e.create)switch(t.kind){case m.I18nContext:B.remove(t);break;case m.I18nStart:t.context=null;break}}function sH(n){for(let e of n.units)for(let t of e.update){if(t.kind!==m.Variable||t.variable.kind!==un.Identifier||!(t.initializer instanceof Lh))continue;let r=t.variable.identifier,i=t;for(;i&&i.kind!==m.ListEnd;)jt(i,s=>s instanceof vn&&s.name===r?N(void 0):s,He.None),i=i.prev}}function oH(n){for(let e of n.units){let t=new Set;for(let r of e.update)switch(r.kind){case m.I18nExpression:t.add(r.i18nOwner)}for(let r of e.create)switch(r.kind){case m.I18nAttributes:if(t.has(r.xref))continue;B.remove(r)}}}function aH(n){for(let e of n.units)Bg(e,e.create),Bg(e,e.update)}function Bg(n,e){let t=new Map;t.set(n.xref,ke("ctx"));for(let r of e)switch(r.kind){case m.Variable:switch(r.variable.kind){case un.Context:t.set(r.variable.view,new Ws(r.xref));break}break;case m.Animation:case m.AnimationListener:case m.Listener:case m.TwoWayListener:Bg(n,r.handlerOps);break;case m.RepeaterCreate:r.trackByOps!==null&&Bg(n,r.trackByOps);break}n===n.job.root&&t.set(n.xref,ke("ctx"));for(let r of e)jt(r,i=>{if(i instanceof Bo){if(!t.has(i.view))throw new Error(`No context found for reference to view ${i.view} from view ${n.xref}`);return t.get(i.view)}else return i},He.None)}function uH(n){for(let e of n.units)for(let t of e.create)if(t.kind===m.Defer){if(t.resolverFn!==null)continue;if(t.ownResolverFn!==null){if(t.handle.slot===null)throw new Error("AssertionError: slot must be assigned before extracting defer deps functions");let r=e.fnName?.replace("_Template","");t.resolverFn=n.pool.getSharedFunctionReference(t.ownResolverFn,`${r}_Defer_${t.handle.slot}_DepsFn`,!1)}}}function cH(n){for(let e of n.units)uA(e.create),uA(e.update)}function uA(n){for(let e of n)(e.kind===m.Listener||e.kind===m.TwoWayListener||e.kind===m.AnimationListener)&&jt(e,t=>t instanceof vn&&t.name==="$event"?((e.kind===m.Listener||e.kind===m.AnimationListener)&&(e.consumesDollarEvent=!0),new ui(t.name)):t,He.InChildOperation)}function lH(n){let e=new Map,t=new Map;for(let r of n.units)for(let i of r.create)switch(i.kind){case m.I18nContext:e.set(i.xref,i);break;case m.ElementStart:t.set(i.xref,i);break}Zi(n,n.root,e,t)}function Zi(n,e,t,r,i){let s=null,o=new Map;for(let a of e.create)switch(a.kind){case m.I18nStart:if(!a.context)throw Error("Could not find i18n context for i18n op");s={i18nBlock:a,i18nContext:t.get(a.context)};break;case m.I18nEnd:s=null;break;case m.ElementStart:if(a.i18nPlaceholder!==void 0){if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");cA(a,s.i18nContext,s.i18nBlock,i),i&&a.i18nPlaceholder.closeName&&o.set(a.xref,i),i=void 0}break;case m.ElementEnd:let u=r.get(a.xref);if(u&&u.i18nPlaceholder!==void 0){if(s===null)throw Error("AssertionError: i18n tag placeholder should only occur inside an i18n block");lA(u,s.i18nContext,s.i18nBlock,o.get(a.xref)),o.delete(a.xref)}break;case m.Projection:if(a.i18nPlaceholder!==void 0){if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");cA(a,s.i18nContext,s.i18nBlock,i),lA(a,s.i18nContext,s.i18nBlock,i),i=void 0}if(a.fallbackView!==null){let h=n.views.get(a.fallbackView);if(a.fallbackViewI18nPlaceholder===void 0)Zi(n,h,t,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");Sm(n,h,a.handle.slot,a.fallbackViewI18nPlaceholder,s.i18nContext,s.i18nBlock,i),Zi(n,h,t,r),Im(n,h,a.handle.slot,a.fallbackViewI18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0}}break;case m.ConditionalCreate:case m.ConditionalBranchCreate:case m.Template:let c=n.views.get(a.xref);if(a.i18nPlaceholder===void 0)Zi(n,c,t,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");a.templateKind===yr.Structural?Zi(n,c,t,r,a):(Sm(n,c,a.handle.slot,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),Zi(n,c,t,r),Im(n,c,a.handle.slot,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0)}break;case m.RepeaterCreate:if(i!==void 0)throw Error("AssertionError: Unexpected structural directive associated with @for block");let l=a.handle.slot+1,d=n.views.get(a.xref);if(a.i18nPlaceholder===void 0)Zi(n,d,t,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");Sm(n,d,l,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),Zi(n,d,t,r),Im(n,d,l,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0}if(a.emptyView!==null){let h=a.handle.slot+2,f=n.views.get(a.emptyView);if(a.emptyI18nPlaceholder===void 0)Zi(n,f,t,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");Sm(n,f,h,a.emptyI18nPlaceholder,s.i18nContext,s.i18nBlock,i),Zi(n,f,t,r),Im(n,f,h,a.emptyI18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0}}break}}function cA(n,e,t,r){let{startName:i,closeName:s}=n.i18nPlaceholder,o=ht.ElementTag|ht.OpenTag,a=n.handle.slot;r!==void 0&&(o|=ht.TemplateTag,a={element:a,template:r.handle.slot}),s||(o|=ht.CloseTag),sl(e.params,i,a,t.subTemplateIndex,o)}function lA(n,e,t,r){let{closeName:i}=n.i18nPlaceholder;if(i){let s=ht.ElementTag|ht.CloseTag,o=n.handle.slot;r!==void 0&&(s|=ht.TemplateTag,o={element:o,template:r.handle.slot}),sl(e.params,i,o,t.subTemplateIndex,s)}}function Sm(n,e,t,r,i,s,o){let{startName:a,closeName:u}=r,c=ht.TemplateTag|ht.OpenTag;u||(c|=ht.CloseTag),o!==void 0&&sl(i.params,a,o.handle.slot,s.subTemplateIndex,c),sl(i.params,a,t,UM(n,s,e),c)}function Im(n,e,t,r,i,s,o){let{closeName:a}=r,u=ht.TemplateTag|ht.CloseTag;a&&(sl(i.params,a,t,UM(n,s,e),u),o!==void 0&&sl(i.params,a,o.handle.slot,s.subTemplateIndex,u))}function UM(n,e,t){for(let r of t.create)if(r.kind===m.I18nStart)return r.subTemplateIndex;return e.subTemplateIndex}function sl(n,e,t,r,i){let s=n.get(e)??[];s.push({value:t,subTemplateIndex:r,flags:i}),n.set(e,s)}function dH(n){let e=new Map,t=new Map,r=new Map;for(let o of n.units)for(let a of o.create)switch(a.kind){case m.I18nStart:e.set(a.xref,a.subTemplateIndex);break;case m.I18nContext:t.set(a.xref,a);break;case m.IcuPlaceholder:r.set(a.xref,a);break}let i=new Map,s=o=>o.usage===al.I18nText?o.i18nOwner:o.context;for(let o of n.units)for(let a of o.update)if(a.kind===m.I18nExpression){let u=i.get(s(a))||0,c=e.get(a.i18nOwner)??null,l={value:u,subTemplateIndex:c,flags:ht.ExpressionIndex};hH(a,l,t,r),i.set(s(a),u+1)}}function hH(n,e,t,r){if(n.i18nPlaceholder!==null){let i=t.get(n.context),s=n.resolutionTime===Rh.Creation?i.params:i.postprocessingParams,o=s.get(n.i18nPlaceholder)||[];o.push(e),s.set(n.i18nPlaceholder,o)}n.icuPlaceholder!==null&&r.get(n.icuPlaceholder)?.expressionPlaceholders.push(e)}function fH(n){for(let e of n.units)$g(e,e.create,null),$g(e,e.update,null)}function $g(n,e,t){let r=new Map,i=new Map;for(let s of e)switch(s.kind){case m.Variable:switch(s.variable.kind){case un.Identifier:if(s.variable.local){if(i.has(s.variable.identifier))continue;i.set(s.variable.identifier,s.xref)}else if(r.has(s.variable.identifier))continue;r.set(s.variable.identifier,s.xref);break;case un.Alias:if(r.has(s.variable.identifier))continue;r.set(s.variable.identifier,s.xref);break;case un.SavedView:t={view:s.variable.view,variable:s.xref};break}break;case m.Animation:case m.AnimationListener:case m.Listener:case m.TwoWayListener:$g(n,s.handlerOps,t);break;case m.RepeaterCreate:s.trackByOps!==null&&$g(n,s.trackByOps,t);break}for(let s of e)s.kind==m.Listener||s.kind===m.TwoWayListener||s.kind===m.Animation||s.kind===m.AnimationListener||jt(s,o=>{if(o instanceof vn)return i.has(o.name)?new Ws(i.get(o.name)):r.has(o.name)?new Ws(r.get(o.name)):new Ur(new Bo(n.job.root.xref),o.name);if(o instanceof wg&&typeof o.view=="number"){if(t===null||t.view!==o.view)throw new Error(`AssertionError: no saved view ${o.view} from view ${n.xref}`);return o.view=new Ws(t.variable),o}else return o},He.None);for(let s of e)ln(s,o=>{if(o instanceof vn)throw new Error(`AssertionError: no lexical reads should remain, but found read of ${o.name}`)})}var pH=new Map([[it.HTML,w.sanitizeHtml],[it.RESOURCE_URL,w.sanitizeResourceUrl],[it.SCRIPT,w.sanitizeScript],[it.STYLE,w.sanitizeStyle],[it.URL,w.sanitizeUrl],[it.ATTRIBUTE_NO_BINDING,w.validateAttribute]]),mH=new Map([[it.HTML,w.trustConstantHtml],[it.RESOURCE_URL,w.trustConstantResourceUrl]]);function gH(n){for(let e of n.units){if(n.kind!==W.Host){for(let t of e.create)if(t.kind===m.ExtractedAttribute){let r=mH.get(dA(t.securityContext))??null;t.trustedValueFn=r!==null?ee(r):null}}for(let t of e.update)switch(t.kind){case m.Property:case m.Attribute:case m.DomProperty:let r=null;Array.isArray(t.securityContext)&&t.securityContext.length===2&&t.securityContext.includes(it.URL)&&t.securityContext.includes(it.RESOURCE_URL)?r=w.sanitizeUrlOrResourceUrl:r=pH.get(dA(t.securityContext))??null,t.sanitizer=r!==null?ee(r):null;break}}}function dA(n){if(Array.isArray(n)){if(n.length>1)throw Error("AssertionError: Ambiguous security context");return n[0]||it.NONE}return n}function vH(n){for(let e of n.units){e.create.prepend([Io(e.job.allocateXrefId(),{kind:un.SavedView,name:null,view:e.xref},new Ew,si.None)]);for(let t of e.create){if(t.kind!==m.Listener&&t.kind!==m.TwoWayListener&&t.kind!==m.Animation&&t.kind!==m.AnimationListener)continue;let r=e!==n.root;if(!r)for(let i of t.handlerOps)ln(i,s=>{(s instanceof _g||s instanceof Bh)&&(r=!0)});r&&yH(e,t)}}}function yH(n,e){e.handlerOps.prepend([Io(n.job.allocateXrefId(),{kind:un.Context,name:null,view:n.xref},new wg(n.xref),si.None)]);for(let t of e.handlerOps)t.kind===m.Statement&&t.statement instanceof _n&&(t.statement.value=new Cw(t.statement.value))}function _H(n){let e=new Map;for(let t of n.units){let r=0;for(let i of t.create)cl(i)&&(i.handle.slot=r,e.set(i.xref,i.handle.slot),r+=i.numSlotsUsed);t.decls=r}for(let t of n.units)for(let r of t.ops())if(r.kind===m.Template||r.kind===m.ConditionalCreate||r.kind===m.ConditionalBranchCreate||r.kind===m.RepeaterCreate){let i=n.views.get(r.xref);r.decls=i.decls}}function bH(n){let e=new Set,t=new Map;for(let r of n.units)for(let i of r.ops())i.kind===m.DeclareLet&&t.set(i.xref,i),ln(i,s=>{s instanceof Bh&&e.add(s.target)});for(let r of n.units)for(let i of r.update)jt(i,s=>s instanceof Lh&&!e.has(s.target)?(wH(s)||B.remove(t.get(s.target)),s.value):s,He.None)}function wH(n){let e=!1;return Q(n,t=>((t instanceof pu||t instanceof $h)&&(e=!0),t),He.None),e}function EH(n){let e=new Set;for(let t of n.units)for(let r of t.ops())ln(r,i=>{if(i instanceof Fe)switch(i.operator){case z.Exponentiation:CH(i,e);break;case z.NullishCoalesce:xH(i,e);break;case z.And:case z.Or:DH(i,e)}});for(let t of n.units)for(let r of t.ops())jt(r,i=>i instanceof Si?e.has(i)?i:i.expr:i,He.None)}function CH(n,e){n.lhs instanceof Si&&n.lhs.expr instanceof su&&e.add(n.lhs)}function xH(n,e){n.lhs instanceof Si&&(hA(n.lhs.expr)||n.lhs.expr instanceof os)&&e.add(n.lhs),n.rhs instanceof Si&&(hA(n.rhs.expr)||n.rhs.expr instanceof os)&&e.add(n.rhs)}function DH(n,e){n.lhs instanceof Si&&n.lhs.expr instanceof Fe&&n.lhs.expr.operator===z.NullishCoalesce&&e.add(n.lhs)}function hA(n){return n instanceof Fe&&(n.operator===z.And||n.operator===z.Or)}function SH(n){for(let e of n.units)for(let t of e.update)if(t.kind===m.Binding)switch(t.bindingKind){case Z.ClassName:if(t.expression instanceof Mt)throw new Error("Unexpected interpolation in ClassName binding");B.replace(t,X$(t.target,t.name,t.expression,t.sourceSpan));break;case Z.StyleProperty:B.replace(t,Q$(t.target,t.name,t.expression,t.unit,t.sourceSpan));break;case Z.Property:case Z.Template:t.name==="style"?B.replace(t,Z$(t.target,t.expression,t.sourceSpan)):t.name==="class"&&B.replace(t,J$(t.target,t.expression,t.sourceSpan));break}}function IH(n){for(let e of n.units)e.create.prepend(Vg(e.create)),e.update.prepend(Vg(e.update))}function Vg(n){let e=0,t=[];for(let r of n){let i=new Map;ln(r,(c,l)=>{l&He.InChildOperation||c instanceof $o&&i.set(c.xref,c)});let s=0,o=new Set,a=new Set,u=new Map;ln(r,(c,l)=>{l&He.InChildOperation||(c instanceof ds?(o.has(c.xref)||(o.add(c.xref),u.set(c.xref,`tmp_${e}_${s++}`)),fA(u,c)):c instanceof $o&&(i.get(c.xref)===c&&(a.add(c.xref),s--),fA(u,c)))}),t.push(...Array.from(new Set(u.values())).map(c=>li(new qt(c)))),e++,r.kind===m.Listener||r.kind===m.Animation||r.kind===m.AnimationListener||r.kind===m.TwoWayListener?r.handlerOps.prepend(Vg(r.handlerOps)):r.kind===m.RepeaterCreate&&r.trackByOps!==null&&r.trackByOps.prepend(Vg(r.trackByOps))}return t}function fA(n,e){let t=n.get(e.xref);if(t===void 0)throw new Error(`Found xref with unassigned name: ${e.xref}`);e.name=t}function TH(n){for(let e of n.units)for(let t of e.create)if(t.kind===m.RepeaterCreate)if(t.track instanceof ui&&t.track.name==="$index")t.trackByFn=ee(w.repeaterTrackByIndex);else if(t.track instanceof ui&&t.track.name==="$item")t.trackByFn=ee(w.repeaterTrackByIdentity);else if(AH(n.root.xref,t.track))t.usesComponentInstance=!0,t.track.receiver.receiver.view===e.xref?t.trackByFn=t.track.receiver:(t.trackByFn=ee(w.componentInstance).callFn([]).prop(t.track.receiver.name),t.track=t.trackByFn);else{t.track=Q(t.track,i=>{if(i instanceof pu||i instanceof $h)throw new Error("Illegal State: Pipes are not allowed in this context");return i instanceof Bo?(t.usesComponentInstance=!0,new ww(i.view)):i},He.None);let r=new B;r.push(li(new _n(t.track,t.track.sourceSpan))),t.trackByOps=r}}function AH(n,e){if(!(e instanceof _r)||e.args.length===0||e.args.length>2||!(e.receiver instanceof Ur&&e.receiver.receiver instanceof Bo)||e.receiver.receiver.view!==n)return!1;let[t,r]=e.args;return!(t instanceof ui)||t.name!=="$index"?!1:e.args.length===1?!0:!(!(r instanceof ui)||r.name!=="$item")}function MH(n){for(let e of n.units)for(let t of e.create)t.kind===m.RepeaterCreate&&(t.track=Q(t.track,r=>{if(r instanceof vn){if(t.varNames.$index.has(r.name))return ke("$index");if(r.name===t.varNames.$implicit)return ke("$item")}return r},He.None))}function kH(n){for(let e of n.units)for(let t of e.create)t.kind===m.TwoWayListener&&jt(t,r=>{if(!(r instanceof Eg))return r;let{target:i,value:s}=r;if(i instanceof Ur||i instanceof Gs)return sA(i,s).or(i.set(s));if(i instanceof Ws)return sA(i,s);throw new Error("Unsupported expression in two-way action binding.")},He.InChildOperation)}function PH(n){for(let e of n.units){let t=0;for(let r of e.ops())Ib(r)&&(t+=OH(r));for(let r of e.ops())ln(r,i=>{ls(i)&&(n.compatibility===Hr.TemplateDefinitionBuilder&&i instanceof fu||(wT(i)&&(i.varOffset=t),Ib(i)&&(t+=pA(i))))});if(n.compatibility===Hr.TemplateDefinitionBuilder)for(let r of e.ops())ln(r,i=>{!ls(i)||!(i instanceof fu)||(wT(i)&&(i.varOffset=t),Ib(i)&&(t+=pA(i)))});e.vars=t}if(n instanceof Uh)for(let e of n.units)for(let t of e.create){if(t.kind!==m.Template&&t.kind!==m.RepeaterCreate&&t.kind!==m.ConditionalCreate&&t.kind!==m.ConditionalBranchCreate)continue;let r=n.views.get(t.xref);t.vars=r.vars}}function OH(n){let e;switch(n.kind){case m.Attribute:return e=1,n.expression instanceof Mt&&!NH(n.expression)&&(e+=n.expression.expressions.length),e;case m.Property:case m.DomProperty:return e=1,n.expression instanceof Mt&&(e+=n.expression.expressions.length),e;case m.Control:return 2;case m.TwoWayProperty:return 1;case m.StyleProp:case m.ClassProp:case m.StyleMap:case m.ClassMap:return e=2,n.expression instanceof Mt&&(e+=n.expression.expressions.length),e;case m.InterpolateText:return n.interpolation.expressions.length;case m.I18nExpression:case m.Conditional:case m.DeferWhen:case m.StoreLet:return 1;case m.RepeaterCreate:return n.emptyView?1:0;default:throw new Error(`Unhandled op: ${m[n.kind]}`)}}function pA(n){switch(n.kind){case ne.PureFunctionExpr:return 1+n.args.length;case ne.PipeBinding:return 1+n.args.length;case ne.PipeBindingVariadic:return 1+n.numArgs;case ne.StoreLet:return 1;default:throw new Error(`AssertionError: unhandled ConsumesVarsTrait expression ${n.constructor.name}`)}}function NH(n){return!(n.expressions.length!==1||n.strings.length!==2||n.strings[0]!==""||n.strings[1]!=="")}function RH(n){for(let e of n.units){Tm(e.create),Tm(e.update);for(let t of e.create)t.kind===m.Listener||t.kind===m.Animation||t.kind===m.AnimationListener||t.kind===m.TwoWayListener?Tm(t.handlerOps):t.kind===m.RepeaterCreate&&t.trackByOps!==null&&Tm(t.trackByOps);Am(e.create,n.compatibility),Am(e.update,n.compatibility);for(let t of e.create)t.kind===m.Listener||t.kind===m.Animation||t.kind===m.AnimationListener||t.kind===m.TwoWayListener?Am(t.handlerOps,n.compatibility):t.kind===m.RepeaterCreate&&t.trackByOps!==null&&Am(t.trackByOps,n.compatibility)}}var Zt=(function(n){return n[n.None=0]="None",n[n.ViewContextRead=1]="ViewContextRead",n[n.ViewContextWrite=2]="ViewContextWrite",n[n.SideEffectful=4]="SideEffectful",n})(Zt||{});function Tm(n){let e=new Map;for(let t of n)t.kind===m.Variable&&t.flags&si.AlwaysInline&&(ln(t,r=>{if(ls(r)&&FE(r)!==Zt.None)throw new Error("AssertionError: A context-sensitive variable was marked AlwaysInline")}),e.set(t.xref,t)),jt(t,r=>r instanceof Ws&&e.has(r.xref)?e.get(r.xref).initializer.clone():r,He.None);for(let t of e.values())B.remove(t)}function Am(n,e){let t=new Map,r=new Map,i=new Set,s=new Map;for(let c of n){if(c.kind===m.Variable){if(t.has(c.xref)||r.has(c.xref))throw new Error(`Should not see two declarations of the same variable: ${c.xref}`);t.set(c.xref,c),r.set(c.xref,0)}s.set(c,FH(c)),LH(c,r,i)}let o=!1;for(let c of n.reversed()){let l=s.get(c);if(c.kind===m.Variable&&r.get(c.xref)===0){if(o&&l.fences&Zt.ViewContextWrite||l.fences&Zt.SideEffectful){let d=li(c.initializer.toStmt());s.set(d,l),B.replace(c,d)}else BH(c,r),B.remove(c);s.delete(c),t.delete(c.xref),r.delete(c.xref);continue}l.fences&Zt.ViewContextRead&&(o=!0)}let a=[];for(let[c,l]of r){let h=!!(t.get(c).flags&si.AlwaysInline);l!==1||h||i.has(c)||a.push(c)}let u;for(;u=a.pop();){let c=t.get(u),l=s.get(c);if(!!(c.flags&si.AlwaysInline))throw new Error("AssertionError: Found an 'AlwaysInline' variable after the always inlining pass.");for(let h=c.next;h.kind!==m.ListEnd;h=h.next){let f=s.get(h);if(f.variablesUsed.has(u)){if(e===Hr.TemplateDefinitionBuilder&&!VH(c,h))break;if($H(u,c.initializer,h,l.fences)){f.variablesUsed.delete(u);for(let p of l.variablesUsed)f.variablesUsed.add(p);f.fences|=l.fences,t.delete(u),r.delete(u),s.delete(c),B.remove(c)}break}if(!HM(f.fences,l.fences))break}}}function FE(n){switch(n.kind){case ne.NextContext:return Zt.ViewContextRead|Zt.ViewContextWrite;case ne.RestoreView:return Zt.ViewContextRead|Zt.ViewContextWrite|Zt.SideEffectful;case ne.StoreLet:return Zt.SideEffectful;case ne.Reference:case ne.ContextLetReference:return Zt.ViewContextRead;default:return Zt.None}}function FH(n){let e=Zt.None,t=new Set;return ln(n,r=>{if(ls(r))switch(r.kind){case ne.ReadVariable:t.add(r.xref);break;default:e|=FE(r)}}),{fences:e,variablesUsed:t}}function LH(n,e,t){ln(n,(r,i)=>{if(!ls(r)||r.kind!==ne.ReadVariable)return;let s=e.get(r.xref);s!==void 0&&(e.set(r.xref,s+1),i&He.InChildOperation&&t.add(r.xref))})}function BH(n,e){ln(n,t=>{if(!ls(t)||t.kind!==ne.ReadVariable)return;let r=e.get(t.xref);if(r!==void 0){if(r===0)throw new Error(`Inaccurate variable count: ${t.xref} - found another read but count is already 0`);e.set(t.xref,r-1)}})}function HM(n,e){if(n&Zt.ViewContextWrite){if(e&Zt.ViewContextRead)return!1}else if(n&Zt.ViewContextRead&&e&Zt.ViewContextWrite)return!1;return!0}function $H(n,e,t,r){let i=!1,s=!0;return jt(t,(o,a)=>{if(!ls(o)||i||!s)return o;if(a&He.InChildOperation&&r&Zt.ViewContextRead)return o;switch(o.kind){case ne.ReadVariable:if(o.xref===n)return i=!0,e;break;default:let u=FE(o);s=s&&HM(u,r);break}return o},He.None),i}function VH(n,e){switch(n.variable.kind){case un.Identifier:return n.initializer instanceof ui&&n.initializer.name==="ctx";case un.Context:return e.kind===m.Variable;default:return!0}}function jH(n){for(let e of n.units){let t=null,r=null;for(let i of e.create)switch(i.kind){case m.I18nStart:t=i;break;case m.I18nEnd:t=null;break;case m.IcuStart:t===null&&(r=n.allocateXrefId(),B.insertBefore(Jg(r,i.message,void 0,null),i));break;case m.IcuEnd:r!==null&&(B.insertAfter(e0(r,null),i),r=null);break}}}var UH=[{kind:W.Tmpl,fn:g5},{kind:W.Both,fn:A5},{kind:W.Host,fn:A8},{kind:W.Tmpl,fn:Jj},{kind:W.Tmpl,fn:C5},{kind:W.Tmpl,fn:jH},{kind:W.Both,fn:QV},{kind:W.Both,fn:SH},{kind:W.Both,fn:RV},{kind:W.Both,fn:WV},{kind:W.Both,fn:PV},{kind:W.Tmpl,fn:KV},{kind:W.Both,fn:t5},{kind:W.Tmpl,fn:rH},{kind:W.Both,fn:BV},{kind:W.Both,fn:m5},{kind:W.Tmpl,fn:$V},{kind:W.Tmpl,fn:_5},{kind:W.Tmpl,fn:XV},{kind:W.Tmpl,fn:E5},{kind:W.Both,fn:S5},{kind:W.Tmpl,fn:x8},{kind:W.Tmpl,fn:C8},{kind:W.Tmpl,fn:D8},{kind:W.Tmpl,fn:vH},{kind:W.Both,fn:SV},{kind:W.Both,fn:cH},{kind:W.Tmpl,fn:MH},{kind:W.Tmpl,fn:sH},{kind:W.Both,fn:fH},{kind:W.Tmpl,fn:ZV},{kind:W.Tmpl,fn:kH},{kind:W.Tmpl,fn:TH},{kind:W.Both,fn:aH},{kind:W.Both,fn:gH},{kind:W.Tmpl,fn:Xj},{kind:W.Both,fn:r8},{kind:W.Both,fn:EH},{kind:W.Both,fn:IH},{kind:W.Both,fn:RH},{kind:W.Both,fn:bH},{kind:W.Tmpl,fn:Qj},{kind:W.Tmpl,fn:YV},{kind:W.Tmpl,fn:oH},{kind:W.Tmpl,fn:MV},{kind:W.Tmpl,fn:TV},{kind:W.Tmpl,fn:_H},{kind:W.Tmpl,fn:lH},{kind:W.Tmpl,fn:dH},{kind:W.Tmpl,fn:y8},{kind:W.Tmpl,fn:qj},{kind:W.Tmpl,fn:I8},{kind:W.Both,fn:HV},{kind:W.Tmpl,fn:iH},{kind:W.Both,fn:PH},{kind:W.Tmpl,fn:E8},{kind:W.Both,fn:n5},{kind:W.Tmpl,fn:uH},{kind:W.Tmpl,fn:s5},{kind:W.Tmpl,fn:a5},{kind:W.Tmpl,fn:n8},{kind:W.Tmpl,fn:kV},{kind:W.Tmpl,fn:c5},{kind:W.Both,fn:D5},{kind:W.Both,fn:ZU},{kind:W.Both,fn:LV}];function zM(n,e){for(let t of UH)(t.kind===e||t.kind===W.Both)&&t.fn(n)}function HH(n,e){let t=WM(n.root);return qM(n.root,e),t}function qM(n,e){for(let t of n.job.units){if(t.parent!==n.xref)continue;qM(t,e);let r=WM(t);e.statements.push(r.toDeclStmt(r.name))}}function WM(n){if(n.fnName===null)throw new Error(`AssertionError: view ${n.xref} is unnamed`);let e=[];for(let s of n.create){if(s.kind!==m.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${m[s.kind]}`);e.push(s.statement)}let t=[];for(let s of n.update){if(s.kind!==m.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${m[s.kind]}`);t.push(s.statement)}let r=jg(1,e),i=jg(2,t);return ko([new cn("rf"),new cn("ctx")],[...r,...i],void 0,void 0,n.fnName)}function jg(n,e){return e.length===0?[]:[Yg(new Fe(z.BitwiseAnd,ke("rf"),N(n)),e)]}function zH(n){if(n.root.fnName===null)throw new Error("AssertionError: host binding function is unnamed");let e=[];for(let s of n.root.create){if(s.kind!==m.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${m[s.kind]}`);e.push(s.statement)}let t=[];for(let s of n.root.update){if(s.kind!==m.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${m[s.kind]}`);t.push(s.statement)}if(e.length===0&&t.length===0)return null;let r=jg(1,e),i=jg(2,t);return ko([new cn("rf"),new cn("ctx")],[...r,...i],void 0,void 0,n.root.fnName)}var GM=Hr.TemplateDefinitionBuilder,tu=new il,nu="ng-template",qH="animate.";function Bm(n){return n instanceof Kn}function WH(n){return Bm(n)&&n.nodes.length===1&&n.nodes[0]instanceof hg}function GH(n,e,t,r,i,s,o,a,u,c){let l=new Uh(n,t,GM,r,i,s,o,a,u,c);return Ks(l.root,e),l}function YH(n,e,t){let r=new Tg(n.componentName,t,GM,fr.DomOnly);for(let i of n.properties??[]){let s=Z.Property;i.name.startsWith("attr.")&&(i.name=i.name.substring(5),s=Z.Attribute),i.isLegacyAnimation&&(s=Z.LegacyAnimation),i.isAnimation&&(s=Z.Animation);let o=e.calcPossibleSecurityContexts(n.componentSelector,i.name,s===Z.Attribute).filter(a=>a!==it.NONE);KH(r,i,s,o)}for(let[i,s]of Object.entries(n.attributes)??[]){let o=e.calcPossibleSecurityContexts(n.componentSelector,i,!0).filter(a=>a!==it.NONE);QH(r,i,s,o)}for(let i of n.events??[])XH(r,i);return r}function KH(n,e,t,r){let i,s=e.expression.ast;s instanceof Jh?i=new Mt(s.strings,s.expressions.map(o=>Te(o,n,e.sourceSpan)),[]):i=Te(s,n,e.sourceSpan),n.root.update.push(hu(n.root.xref,t,e.name,i,null,r,!1,!1,null,null,e.sourceSpan))}function QH(n,e,t,r){let i=hu(n.root.xref,Z.Attribute,e,t,null,r,!0,!1,null,null,t.sourceSpan);n.root.update.push(i)}function XH(n,e){let t;if(e.type===Yn.Animation)t=_M(n.root.xref,new En,e.name,null,Gh(n.root,e.handler,e.handlerSpan),e.name.endsWith("enter")?"enter":"leave",e.targetOrPhase,!0,e.sourceSpan);else{let[r,i]=e.type!==Yn.LegacyAnimation?[null,e.targetOrPhase]:[e.targetOrPhase,null];t=PE(n.root.xref,new En,e.name,null,Gh(n.root,e.handler,e.handlerSpan),r,i,!0,e.sourceSpan)}n.root.create.push(t)}function Ks(n,e){for(let t of e)if(t instanceof us)ZH(n,t);else if(t instanceof Vr)JH(n,t);else if(t instanceof Qc)ez(n,t);else if(t instanceof Wa)YM(n,t,null);else if(t instanceof Gc)KM(n,t,null);else if(t instanceof lg)tz(n,t);else if(t instanceof cg)nz(n,t);else if(t instanceof lu)rz(n,t);else if(t instanceof zA)sz(n,t);else if(t instanceof Kc)oz(n,t);else if(t instanceof wE)uz(n,t);else if(!(t instanceof Xd))throw new Error(`Unsupported template node: ${t.constructor.name}`)}function ZH(n,e){if(e.i18n!==void 0&&!(e.i18n instanceof Kn||e.i18n instanceof No))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let t=n.job.allocateXrefId(),[r,i]=Mi(e.name),s=aV(i,t,SM(r),e.i18n instanceof No?e.i18n:void 0,e.startSourceSpan,e.sourceSpan);n.create.push(s),lz(n,s,e),ZM(s,e);let o=null;e.i18n instanceof Kn&&(o=n.job.allocateXrefId(),n.create.push(Jg(o,e.i18n,void 0,e.startSourceSpan))),Ks(n,e.children);let a=cV(t,e.endSourceSpan??e.startSourceSpan);n.create.push(a);let u=e.inputs.find(c=>c.name==="field"&&c.type===$e.Property);u&&n.create.push(xV(u.sourceSpan)),o!==null&&B.insertBefore(e0(o,e.endSourceSpan??e.startSourceSpan),a)}function JH(n,e){if(e.i18n!==void 0&&!(e.i18n instanceof Kn||e.i18n instanceof No))throw Error(`Unhandled i18n metadata type for template: ${e.i18n.constructor.name}`);let t=n.job.allocateView(n.xref),r=e.tagName,i="";e.tagName&&([i,r]=Mi(e.tagName));let s=e.i18n instanceof No?e.i18n:void 0,o=SM(i),a=r===null?"":UV(r,o),u=cz(e)?yr.NgTemplate:yr.Structural,c=mM(t.xref,u,r,a,o,s,e.startSourceSpan,e.sourceSpan);n.create.push(c),dz(n,c,e,u),ZM(c,e),Ks(t,e.children);for(let{name:l,value:d}of e.variables)t.contextVariables.set(l,d!==""?d:"$implicit");if(u===yr.NgTemplate&&e.i18n instanceof Kn){let l=n.job.allocateXrefId();B.insertAfter(Jg(l,e.i18n,void 0,e.startSourceSpan),t.create.head),B.insertBefore(e0(l,e.endSourceSpan??e.startSourceSpan),t.create.tail)}}function ez(n,e){if(e.i18n!==void 0&&!(e.i18n instanceof No))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let t=null;e.children.some(s=>!(s instanceof Qg)&&(!(s instanceof Wa)||s.value.trim().length>0))&&(t=n.job.allocateView(n.xref),Ks(t,e.children));let r=n.job.allocateXrefId(),i=gV(r,e.selector,e.i18n,t?.xref??null,e.sourceSpan);for(let s of e.attributes){let o=tu.securityContext(e.name,s.name,!0);n.update.push(hu(i.xref,Z.Attribute,s.name,N(s.value),null,o,!0,!1,null,zs(s.i18n),s.sourceSpan))}n.create.push(i)}function YM(n,e,t){n.create.push(yM(n.job.allocateXrefId(),e.value,t,e.sourceSpan))}function KM(n,e,t){let r=e.value;if(r instanceof gr&&(r=r.ast),!(r instanceof Jh))throw new Error(`AssertionError: expected Interpolation for BoundText node, got ${r.constructor.name}`);if(e.i18n!==void 0&&!(e.i18n instanceof qs))throw Error(`Unhandled i18n metadata type for text interpolation: ${e.i18n?.constructor.name}`);let i=e.i18n instanceof qs?e.i18n.children.filter(a=>a instanceof Th).map(a=>a.name):[];if(i.length>0&&i.length!==r.expressions.length)throw Error(`Unexpected number of i18n placeholders (${r.expressions.length}) for BoundText with ${r.expressions.length} expressions`);let s=n.job.allocateXrefId();n.create.push(yM(s,"",t,e.sourceSpan));let o=n.job.compatibility?null:e.sourceSpan;n.update.push(G$(s,new Mt(r.strings,r.expressions.map(a=>Te(a,n.job,o)),i),e.sourceSpan))}function tz(n,e){let t=null,r=[];for(let i=0;i<e.branches.length;i++){let s=e.branches[i],o=n.job.allocateView(n.xref),a=Ug(n,o.xref,s);s.expressionAlias!==null&&o.contextVariables.set(s.expressionAlias.name,CM);let u;if(s.i18n!==void 0){if(!(s.i18n instanceof Ro))throw Error(`Unhandled i18n metadata type for if block: ${s.i18n?.constructor.name}`);u=s.i18n}let l=(i===0?gM:vM)(o.xref,yr.Block,a,"Conditional",On.HTML,u,s.startSourceSpan,s.sourceSpan);n.create.push(l),t===null&&(t=o.xref);let d=s.expression?Te(s.expression,n.job,null):null,h=new xg(d,l.xref,l.handle,s.expressionAlias);r.push(h),Ks(o,s.children)}n.update.push(hM(t,null,r,e.sourceSpan))}function nz(n,e){if(e.cases.length===0)return;let t=null,r=[];for(let i=0;i<e.cases.length;i++){let s=e.cases[i],o=n.job.allocateView(n.xref),a=Ug(n,o.xref,s),u;if(s.i18n!==void 0){if(!(s.i18n instanceof Ro))throw Error(`Unhandled i18n metadata type for switch block: ${s.i18n?.constructor.name}`);u=s.i18n}let l=(i===0?gM:vM)(o.xref,yr.Block,a,"Case",On.HTML,u,s.startSourceSpan,s.sourceSpan);n.create.push(l),t===null&&(t=o.xref);let d=s.expression?Te(s.expression,n.job,e.startSourceSpan):null,h=new xg(d,l.xref,l.handle);r.push(h),Ks(o,s.children)}n.update.push(hM(t,Te(e.expression,n.job,null),r,e.sourceSpan))}function Mm(n,e,t,r,i){if(t!==void 0&&!(t instanceof Ro))throw Error("Unhandled i18n metadata type for defer block");if(r===void 0)return null;let s=n.job.allocateView(n.xref);Ks(s,r);let o=mM(s.xref,yr.Block,null,`Defer${e}`,On.HTML,t,i,i);return n.create.push(o),o}function rz(n,e){let t=null;if(n.job.deferMeta.mode===0){if(!n.job.deferMeta.blocks.has(e))throw new Error("AssertionError: unable to find a dependency function for this deferred block");t=n.job.deferMeta.blocks.get(e)??null}let r=Mm(n,"",e.i18n,e.children,e.sourceSpan),i=Mm(n,"Loading",e.loading?.i18n,e.loading?.children,e.loading?.sourceSpan),s=Mm(n,"Placeholder",e.placeholder?.i18n,e.placeholder?.children,e.placeholder?.sourceSpan),o=Mm(n,"Error",e.error?.i18n,e.error?.children,e.error?.sourceSpan),a=n.job.allocateXrefId(),u=vV(a,r.xref,r.handle,t,n.job.allDeferrableDepsFn,e.sourceSpan);u.placeholderView=s?.xref??null,u.placeholderSlot=s?.handle??null,u.loadingSlot=i?.handle??null,u.errorSlot=o?.handle??null,u.placeholderMinimumTime=e.placeholder?.minimumTime??null,u.loadingMinimumTime=e.loading?.minimumTime??null,u.loadingAfterTime=e.loading?.afterTime??null,u.flags=iz(e),n.create.push(u);let c=[],l=[];Pb("hydrate",e.hydrateTriggers,c,l,n,a),Pb("none",e.triggers,c,l,n,a),Pb("prefetch",e.prefetchTriggers,c,l,n,a),c.some(h=>h.modifier==="none")||l.some(h=>h.modifier==="none")||c.push(xo(a,{kind:rt.Idle},"none",null)),n.create.push(c),n.update.push(l)}function iz(n){return Object.keys(n.hydrateTriggers).length>0?1:null}function Pb(n,e,t,r,i,s){if(e.idle!==void 0){let o=xo(s,{kind:rt.Idle},n,e.idle.sourceSpan);t.push(o)}if(e.immediate!==void 0){let o=xo(s,{kind:rt.Immediate},n,e.immediate.sourceSpan);t.push(o)}if(e.timer!==void 0){let o=xo(s,{kind:rt.Timer,delay:e.timer.delay},n,e.timer.sourceSpan);t.push(o)}if(e.hover!==void 0){let o=xo(s,{kind:rt.Hover,targetName:e.hover.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},n,e.hover.sourceSpan);t.push(o)}if(e.interaction!==void 0){let o=xo(s,{kind:rt.Interaction,targetName:e.interaction.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},n,e.interaction.sourceSpan);t.push(o)}if(e.viewport!==void 0){let o=xo(s,{kind:rt.Viewport,targetName:e.viewport.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null,options:e.viewport.options?Te(e.viewport.options,i.job,e.viewport.sourceSpan):null},n,e.viewport.sourceSpan);t.push(o)}if(e.never!==void 0){let o=xo(s,{kind:rt.Never},n,e.never.sourceSpan);t.push(o)}if(e.when!==void 0){if(e.when.value instanceof Jh)throw new Error("Unexpected interpolation in defer block when trigger");let o=nV(s,Te(e.when.value,i.job,e.when.sourceSpan),n,e.when.sourceSpan);r.push(o)}}function sz(n,e){if(e.i18n instanceof Kn&&WH(e.i18n)){let t=n.job.allocateXrefId();n.create.push(bV(t,e.i18n,GA(e.i18n).name,null));for(let[r,i]of Object.entries(C(C({},e.vars),e.placeholders)))i instanceof Gc?KM(n,i,r):YM(n,i,r);n.create.push(wV(t))}else throw Error(`Unhandled i18n metadata type for ICU: ${e.i18n?.constructor.name}`)}function oz(n,e){let t=n.job.allocateView(n.xref),r=`\u0275$index_${t.xref}`,i=`\u0275$count_${t.xref}`,s=new Set;t.contextVariables.set(e.item.name,e.item.value);for(let y of e.contextVariables)y.value==="$index"&&s.add(y.name),y.name==="$index"?t.contextVariables.set("$index",y.value).set(r,y.value):y.name==="$count"?t.contextVariables.set("$count",y.value).set(i,y.value):t.aliases.add({kind:un.Alias,name:null,identifier:y.name,expression:az(y,r,i)});let o=Qt(e.trackBy.span,e.sourceSpan),a=Te(e.trackBy,n.job,o);Ks(t,e.children);let u=null,c=null;e.empty!==null&&(u=n.job.allocateView(n.xref),Ks(u,e.empty.children),c=Ug(n,u.xref,e.empty));let l={$index:s,$implicit:e.item.name};if(e.i18n!==void 0&&!(e.i18n instanceof Ro))throw Error("AssertionError: Unhandled i18n metadata type or @for");if(e.empty?.i18n!==void 0&&!(e.empty.i18n instanceof Ro))throw Error("AssertionError: Unhandled i18n metadata type or @empty");let d=e.i18n,h=e.empty?.i18n,f=Ug(n,t.xref,e),p=uV(t.xref,u?.xref??null,f,a,l,c,d,h,e.startSourceSpan,e.sourceSpan);n.create.push(p);let g=Te(e.expression,n.job,Qt(e.expression.span,e.sourceSpan)),v=tV(p.xref,p.handle,g,e.sourceSpan);n.update.push(v)}function az(n,e,t){switch(n.value){case"$index":return new vn(e);case"$count":return new vn(t);case"$first":return new vn(e).identical(N(0));case"$last":return new vn(e).identical(new vn(t).minus(N(1)));case"$even":return new vn(e).modulo(N(2)).identical(N(0));case"$odd":return new vn(e).modulo(N(2)).notIdentical(N(0));default:throw new Error(`AssertionError: unknown @for loop variable ${n.value}`)}}function uz(n,e){let t=n.job.allocateXrefId();n.create.push(yV(t,e.name,e.sourceSpan)),n.update.push(iV(t,e.name,Te(e.value,n.job,e.valueSpan),e.sourceSpan))}function Te(n,e,t){if(n instanceof gr)return Te(n.ast,e,t);if(n instanceof ns)return n.receiver instanceof Ai&&!(n.receiver instanceof Po)?new vn(n.name):new Ur(Te(n.receiver,e,t),n.name,null,Qt(n.span,t));if(n instanceof qc){if(n.receiver instanceof Ai)throw new Error("Unexpected ImplicitReceiver");return new _r(Te(n.receiver,e,t),n.args.map(r=>Te(r,e,t)),void 0,Qt(n.span,t))}else{if(n instanceof mr)return N(n.value,void 0,Qt(n.span,t));if(n instanceof Lc)switch(n.operator){case"+":return new su(nh.Plus,Te(n.expr,e,t),void 0,Qt(n.span,t));case"-":return new su(nh.Minus,Te(n.expr,e,t),void 0,Qt(n.span,t));default:throw new Error(`AssertionError: unknown unary operator ${n.operator}`)}else if(n instanceof qn){let r=VV.get(n.operation);if(r===void 0)throw new Error(`AssertionError: unknown binary operator ${n.operation}`);return new Fe(r,Te(n.left,e,t),Te(n.right,e,t),void 0,Qt(n.span,t))}else{if(n instanceof Po)return new Bo(e.root.xref);if(n instanceof uu)return new Gs(Te(n.receiver,e,t),Te(n.key,e,t),void 0,Qt(n.span,t));if(n instanceof zc)throw new Error("AssertionError: Chain in unknown context");if(n instanceof cu){let r=n.keys.map((i,s)=>{let o=n.values[s];return new Uc(i.key,Te(o,e,t),i.quoted)});return new as(r,void 0,Qt(n.span,t))}else{if(n instanceof dh)return new Ii(n.expressions.map(r=>Te(r,e,t)));if(n instanceof Jm)return new os(Te(n.condition,e,t),Te(n.trueExp,e,t),Te(n.falseExp,e,t),void 0,Qt(n.span,t));if(n instanceof mh)return Te(n.expression,e,t);if(n instanceof eg)return new pu(e.allocateXrefId(),new En,n.name,[Te(n.exp,e,t),...n.args.map(r=>Te(r,e,t))]);if(n instanceof lh)return new tl(Te(n.receiver,e,t),Te(n.key,e,t),Qt(n.span,t));if(n instanceof ch)return new el(Te(n.receiver,e,t),n.name);if(n instanceof tg)return new mu(Te(n.receiver,e,t),n.args.map(r=>Te(r,e,t)));if(n instanceof zn)return new Vh(Qt(n.span,t));if(n instanceof hh)return sB(Te(n.expression,e,t),Qt(n.span,t));if(n instanceof fh)return Zh(Te(n.expression,e,t));if(n instanceof ph)return new zm(Te(n.expression,e,t),void 0,Qt(n.span,t));if(n instanceof vh)return mA(n,e,t);if(n instanceof gh)return new rh(Te(n.tag,e,t),mA(n.template,e,t),void 0,Qt(n.span,t));if(n instanceof yh)return new Si(Te(n.expression,e,t),void 0,Qt(n.span,t));if(n instanceof rg)return new jc(n.body,n.flags,t);throw new Error(`Unhandled expression type "${n.constructor.name}" in file "${t?.start.file.url}"`)}}}}function mA(n,e,t){return new sh(n.elements.map(r=>new qm(r.text,Qt(r.span,t))),n.expressions.map(r=>Te(r,e,t)),Qt(n.span,t))}function Kw(n,e,t,r){let i;return e instanceof Jh?i=new Mt(e.strings,e.expressions.map(s=>Te(s,n,null)),Object.keys(zs(t)?.placeholders??{})):e instanceof mt?i=Te(e,n,null):i=N(e),i}var QM=new Map([[$e.Property,Z.Property],[$e.TwoWay,Z.TwoWayProperty],[$e.Attribute,Z.Attribute],[$e.Class,Z.ClassName],[$e.Style,Z.StyleProperty],[$e.LegacyAnimation,Z.LegacyAnimation],[$e.Animation,Z.Animation]]);function cz(n){return Mi(n.tagName??"")[1]===nu}function zs(n){if(n==null)return null;if(!(n instanceof Kn))throw Error(`Expected i18n meta to be a Message, but got: ${n.constructor.name}`);return n}function lz(n,e,t){let r=new Array,i=new Set;for(let s of t.attributes){let o=tu.securityContext(t.name,s.name,!0);r.push(hu(e.xref,Z.Attribute,s.name,Kw(n.job,s.value,s.i18n),null,o,!0,!1,null,zs(s.i18n),s.sourceSpan)),s.i18n&&i.add(s.name)}for(let s of t.inputs)i.has(s.name)&&console.error(`On component ${n.job.componentName}, the binding ${s.name} is both an i18n attribute and a property. You may want to remove the property binding. This will become a compilation error in future versions of Angular.`),r.push(hu(e.xref,QM.get(s.type),s.name,Kw(n.job,Yh(s.value),s.i18n),s.unit,s.securityContext,!1,!1,null,zs(s.i18n)??null,s.sourceSpan));n.create.push(r.filter(s=>s?.kind===m.ExtractedAttribute)),n.update.push(r.filter(s=>s?.kind===m.Binding));for(let s of t.outputs){if(s.type===Yn.LegacyAnimation&&s.phase===null)throw Error("Animation listener should have a phase");s.type===Yn.TwoWay?n.create.push(bM(e.xref,e.handle,s.name,e.tag,XM(n,s.handler,s.handlerSpan),s.sourceSpan)):s.type===Yn.Animation?n.create.push(_M(e.xref,e.handle,s.name,e.tag,Gh(n,s.handler,s.handlerSpan),s.name.endsWith("enter")?"enter":"leave",s.target,!1,s.sourceSpan)):n.create.push(PE(e.xref,e.handle,s.name,e.tag,Gh(n,s.handler,s.handlerSpan),s.phase,s.target,!1,s.sourceSpan))}r.some(s=>s?.i18nMessage)!==null&&n.create.push(EM(n.job.allocateXrefId(),new En,e.xref))}function dz(n,e,t,r){let i=new Array;for(let s of t.templateAttrs)if(s instanceof Yc){let o=tu.securityContext(nu,s.name,!0);i.push(km(n,e.xref,$e.Attribute,s.name,s.value,null,o,!0,r,zs(s.i18n),s.sourceSpan))}else i.push(km(n,e.xref,s.type,s.name,Yh(s.value),s.unit,s.securityContext,!0,r,zs(s.i18n),s.sourceSpan));for(let s of t.attributes){let o=tu.securityContext(nu,s.name,!0);i.push(km(n,e.xref,$e.Attribute,s.name,s.value,null,o,!1,r,zs(s.i18n),s.sourceSpan))}for(let s of t.inputs)i.push(km(n,e.xref,s.type,s.name,Yh(s.value),s.unit,s.securityContext,!1,r,zs(s.i18n),s.sourceSpan));n.create.push(i.filter(s=>s?.kind===m.ExtractedAttribute)),n.update.push(i.filter(s=>s?.kind===m.Binding));for(let s of t.outputs){if(s.type===Yn.LegacyAnimation&&s.phase===null)throw Error("Animation listener should have a phase");if(r===yr.NgTemplate&&(s.type===Yn.TwoWay?n.create.push(bM(e.xref,e.handle,s.name,e.tag,XM(n,s.handler,s.handlerSpan),s.sourceSpan)):n.create.push(PE(e.xref,e.handle,s.name,e.tag,Gh(n,s.handler,s.handlerSpan),s.phase,s.target,!1,s.sourceSpan))),r===yr.Structural&&s.type!==Yn.LegacyAnimation){let o=tu.securityContext(nu,s.name,!1);n.create.push(Nr(e.xref,Z.Property,null,s.name,null,null,null,o))}}i.some(s=>s?.i18nMessage)!==null&&n.create.push(EM(n.job.allocateXrefId(),new En,e.xref))}function km(n,e,t,r,i,s,o,a,u,c,l){let d=typeof i=="string";if(u===yr.Structural){if(!a)switch(t){case $e.Property:case $e.Class:case $e.Style:return Nr(e,Z.Property,null,r,null,null,c,o);case $e.TwoWay:return Nr(e,Z.TwoWayProperty,null,r,null,null,c,o)}if(!d&&(t===$e.Attribute||t===$e.LegacyAnimation||t===$e.Animation))return null}let h=QM.get(t);return u===yr.NgTemplate&&(t===$e.Class||t===$e.Style||t===$e.Attribute&&!d)&&(h=Z.Property),hu(e,h,r,Kw(n.job,i,c),s,o,d,a,u,c,l)}function Gh(n,e,t){e=Yh(e);let r=new Array,i=e instanceof zc?e.expressions:[e];if(i.length===0)throw new Error("Expected listener to have non-empty expression list.");let s=i.map(a=>Te(a,n.job,t)),o=s.pop();return r.push(...s.map(a=>li(new Nn(a,a.sourceSpan)))),r.push(li(new _n(o,o.sourceSpan))),r}function XM(n,e,t){e=Yh(e);let r=new Array;if(e instanceof zc)if(e.expressions.length===1)e=e.expressions[0];else throw new Error("Expected two-way listener to have a single expression.");let i=Te(e,n.job,t),s=new vn("$event"),o=new Eg(i,s);return r.push(li(new Nn(o))),r.push(li(new _n(s))),r}function Yh(n){return n instanceof gr?n.ast:n}function ZM(n,e){hz(n.localRefs);for(let{name:t,value:r}of e.references)n.localRefs.push({name:t,target:r})}function hz(n){if(!Array.isArray(n))throw new Error("AssertionError: expected an array")}function Qt(n,e){if(e===null)return null;let t=e.start.moveBy(n.start),r=e.start.moveBy(n.end),i=e.fullStart.moveBy(n.start);return new ge(t,r,i)}function Ug(n,e,t){let r=null;for(let i of t.children)if(!(i instanceof Qg||i instanceof wE)){if(r!==null)return null;if(i instanceof us||i instanceof Vr&&i.tagName!==null)r=i;else return null}if(r!==null){for(let s of r.attributes)if(!s.name.startsWith(qH)){let o=tu.securityContext(nu,s.name,!0);n.update.push(hu(e,Z.Attribute,s.name,N(s.value),null,o,!0,!1,null,zs(s.i18n),s.sourceSpan))}for(let s of r.inputs)if(s.type!==$e.LegacyAnimation&&s.type!==$e.Animation&&s.type!==$e.Attribute){let o=tu.securityContext(nu,s.name,!0);n.create.push(Nr(e,Z.Property,null,s.name,null,null,null,o))}let i=r instanceof us?r.name:r.tagName;return i===nu?null:i}return null}var fz=!1;function pz(){return fz}function Hg(n,e){return Yg(ke(xE).bitwiseAnd(N(n),null),e)}function mz(n){return(n.descendants?1:0)|(n.static?2:0)|(n.emitDistinctChangesOnly?4:0)}function gz(n,e){if(Array.isArray(n.predicate)){let t=[];return n.predicate.forEach(r=>{let i=r.split(",").map(s=>N(s.trim()));t.push(...i)}),e.getConstLiteral(Ge(t),!0)}else switch(n.predicate.forwardRef){case 0:case 2:return n.predicate.expression;case 1:return ee(w.resolveForwardRef).callFn([n.predicate.expression])}}function JM(n,e,t){let r=[];return t!==void 0&&r.push(...t),n.isSignal&&r.push(new Ur(ke(Ah),n.propertyName)),r.push(gz(n,e),N(mz(n))),n.read&&r.push(n.read),r}var LE=Symbol("queryAdvancePlaceholder");function e1(n){let e=[],t=0,r=()=>{t>0&&(e.unshift(ee(w.queryAdvance).callFn(t===1?[]:[N(t)]).toStmt()),t=0)};for(let i=n.length-1;i>=0;i--){let s=n[i];s===LE?t++:(r(),e.unshift(s))}return r(),e}function vz(n,e,t){let r=[],i=[],s=YA(c=>i.push(c),CE),o=null,a=null;n.forEach(c=>{let l=JM(c,e);if(c.isSignal?(o??=ee(w.viewQuerySignal),o=o.callFn(l)):(a??=ee(w.viewQuery),a=a.callFn(l)),c.isSignal){i.push(LE);return}let d=s(),h=ee(w.loadQuery).callFn([]),f=ee(w.queryRefresh).callFn([d.set(h)]),p=ke(Ah).prop(c.propertyName).set(c.first?d.prop("first"):d);i.push(f.and(p).toStmt())}),o!==null&&r.push(new Nn(o)),a!==null&&r.push(new Nn(a));let u=t?`${t}_Query`:null;return ko([new cn(xE,yE),new cn(Ah,null)],[Hg(1,r),Hg(2,e1(i))],Lr,null,u)}function yz(n,e,t){let r=[],i=[],s=YA(c=>i.push(c),CE),o=null,a=null;for(let c of n){let l=JM(c,e,[ke("dirIndex")]);if(c.isSignal?(o??=ee(w.contentQuerySignal),o=o.callFn(l)):(a??=ee(w.contentQuery),a=a.callFn(l)),c.isSignal){i.push(LE);continue}let d=s(),h=ee(w.loadQuery).callFn([]),f=ee(w.queryRefresh).callFn([d.set(h)]),p=ke(Ah).prop(c.propertyName).set(c.first?d.prop("first"):d);i.push(f.and(p).toStmt())}o!==null&&r.push(new Nn(o)),a!==null&&r.push(new Nn(a));let u=t?`${t}_ContentQueries`:null;return ko([new cn(xE,yE),new cn(Ah,null),new cn("dirIndex",null)],[Hg(1,r),Hg(2,e1(i))],Lr,null,u)}var Qw=class extends z8{constructor(){super(Uw)}parse(e,t,r){return super.parse(e,t,r)}},Pm=".",_z="attr",Ob="animate",bz="class",wz="style",Ez="*",Nb="animate-",Xw=class{_exprParser;_schemaRegistry;errors;constructor(e,t,r){this._exprParser=e,this._schemaRegistry=t,this.errors=r}createBoundHostProperties(e,t){let r=[];for(let i of Object.keys(e)){let s=e[i];typeof s=="string"?this.parsePropertyBinding(i,s,!0,!1,t,t.start.offset,void 0,[],r,t):this._reportError(`Value of the host property binding "${i}" needs to be a string representing an expression but got "${s}" (${typeof s})`,t)}return r}createDirectiveHostEventAsts(e,t){let r=[];for(let i of Object.keys(e)){let s=e[i];typeof s=="string"?this.parseEvent(i,s,!1,t,t,[],r,t):this._reportError(`Value of the host listener "${i}" needs to be a string representing an expression but got "${s}" (${typeof s})`,t)}return r}parseInterpolation(e,t,r){let i=t.fullStart.offset;try{let s=this._exprParser.parseInterpolation(e,t,i,r);return s&&this.errors.push(...s.errors),s}catch(s){return this._reportError(`${s}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",t,i)}}parseInterpolationExpression(e,t){let r=t.start.offset;try{let i=this._exprParser.parseInterpolationExpression(e,t,r);return i&&this.errors.push(...i.errors),i}catch(i){return this._reportError(`${i}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",t,r)}}parseInlineTemplateBinding(e,t,r,i,s,o,a,u){let c=r.start.offset+Ez.length,l=this._parseTemplateBindings(e,t,r,c,i);for(let d of l){let h=Eo(r,d.sourceSpan),f=d.key.source,p=Eo(r,d.key.span);if(d instanceof _h){let g=d.value?d.value.source:"$implicit",v=d.value?Eo(r,d.value.span):void 0;a.push(new ew(f,g,h,p,v))}else if(d.value){let g=u?h:r,v=Eo(r,d.value.ast.sourceSpan);this._parsePropertyAst(f,d.value,!1,g,p,v,s,o)}else s.push([f,""]),this.parseLiteralAttr(f,null,p,i,void 0,s,o,p)}}_parseTemplateBindings(e,t,r,i,s){try{let o=this._exprParser.parseTemplateBindings(e,t,r,i,s);return o.errors.forEach(a=>this.errors.push(a)),o.warnings.forEach(a=>{this._reportError(a,r,To.WARNING)}),o.templateBindings}catch(o){return this._reportError(`${o}`,r),[]}}parseLiteralAttr(e,t,r,i,s,o,a,u){Rb(e)?(e=e.substring(1),u!==void 0&&(u=Eo(u,new Br(u.start.offset+1,u.end.offset))),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',r,To.ERROR),this._parseLegacyAnimation(e,t,r,i,u,s,o,a)):a.push(new kc(e,this._exprParser.wrapLiteralPrimitive(t,"",i),Ji.LITERAL_ATTR,r,u,s))}parsePropertyBinding(e,t,r,i,s,o,a,u,c,l){e.length===0&&this._reportError("Property name is missing in binding",s);let d=!1;e.startsWith(Nb)?(d=!0,e=e.substring(Nb.length),l!==void 0&&(l=Eo(l,new Br(l.start.offset+Nb.length,l.end.offset)))):Rb(e)&&(d=!0,e=e.substring(1),l!==void 0&&(l=Eo(l,new Br(l.start.offset+1,l.end.offset)))),d?this._parseLegacyAnimation(e,t,s,o,l,a,u,c):e.startsWith(`${Ob}${Pm}`)?this._parseAnimation(e,this.parseBinding(t,r,a||s,o),s,l,a,u,c):this._parsePropertyAst(e,this.parseBinding(t,r,a||s,o),i,s,l,a,u,c)}parsePropertyInterpolation(e,t,r,i,s,o,a,u){let c=this.parseInterpolation(t,i||r,u);return c?(this._parsePropertyAst(e,c,!1,r,a,i,s,o),!0):!1}_parsePropertyAst(e,t,r,i,s,o,a,u){a.push([e,t.source]),u.push(new kc(e,t,r?Ji.TWO_WAY:Ji.DEFAULT,i,s,o))}_parseAnimation(e,t,r,i,s,o,a){o.push([e,t.source]),a.push(new kc(e,t,Ji.ANIMATION,r,i,s))}_parseLegacyAnimation(e,t,r,i,s,o,a,u){e.length===0&&this._reportError("Animation trigger is missing",r);let c=this.parseBinding(t||"undefined",!1,o||r,i);a.push([e,c.source]),u.push(new kc(e,c,Ji.LEGACY_ANIMATION,r,s,o))}parseBinding(e,t,r,i){try{let s=t?this._exprParser.parseSimpleBinding(e,r,i):this._exprParser.parseBinding(e,r,i);return s&&this.errors.push(...s.errors),s}catch(s){return this._reportError(`${s}`,r),this._exprParser.wrapLiteralPrimitive("ERROR",r,i)}}createBoundElementProperty(e,t,r=!1,i=!0){if(t.isLegacyAnimation)return new sg(t.name,$e.LegacyAnimation,it.NONE,t.expression,null,t.sourceSpan,t.keySpan,t.valueSpan);let s=null,o,a=null,u=t.name.split(Pm),c;if(u.length>1)if(u[0]==_z){a=u.slice(1).join(Pm),r||this._validatePropertyOrAttributeName(a,t.sourceSpan,!0),c=Fb(this._schemaRegistry,e,a,!0);let l=a.indexOf(":");if(l>-1){let d=a.substring(0,l),h=a.substring(l+1);a=Rm(d,h)}o=$e.Attribute}else u[0]==bz?(a=u[1],o=$e.Class,c=[it.NONE]):u[0]==wz?(s=u.length>2?u[2]:null,a=u[1],o=$e.Style,c=[it.STYLE]):u[0]==Ob&&(a=t.name,o=$e.Animation,c=[it.NONE]);if(a===null){let l=this._schemaRegistry.getMappedPropName(t.name);a=i?l:t.name,c=Fb(this._schemaRegistry,e,l,!1),o=t.type===Ji.TWO_WAY?$e.TwoWay:$e.Property,r||this._validatePropertyOrAttributeName(l,t.sourceSpan,!1)}return new sg(a,o,c[0],t.expression,s,t.sourceSpan,t.keySpan,t.valueSpan)}parseEvent(e,t,r,i,s,o,a,u){e.length===0&&this._reportError("Event name is missing in binding",i),Rb(e)?(e=e.slice(1),u!==void 0&&(u=Eo(u,new Br(u.start.offset+1,u.end.offset))),this._parseLegacyAnimationEvent(e,t,i,s,a,u)):this._parseRegularEvent(e,t,r,i,s,o,a,u)}calcPossibleSecurityContexts(e,t,r){let i=this._schemaRegistry.getMappedPropName(t);return Fb(this._schemaRegistry,e,i,r)}parseEventListenerName(e){let[t,r]=mB(e,[null,e]);return{eventName:r,target:t}}parseLegacyAnimationEventName(e){let t=gB(e,[e,null]);return{eventName:t[0],phase:t[1]===null?null:t[1].toLowerCase()}}_parseLegacyAnimationEvent(e,t,r,i,s,o){let{eventName:a,phase:u}=this.parseLegacyAnimationEventName(e),c=this._parseAction(t,i);s.push(new ig(a,u,Yn.LegacyAnimation,c,r,i,o)),a.length===0&&this._reportError("Animation event name is missing in binding",r),u?u!=="start"&&u!=="done"&&this._reportError(`The provided animation output phase value "${u}" for "@${a}" is not supported (use start or done)`,r):this._reportError(`The animation trigger output event (@${a}) is missing its phase value name (start or done are currently supported)`,r)}_parseRegularEvent(e,t,r,i,s,o,a,u){let{eventName:c,target:l}=this.parseEventListenerName(e),d=this.errors.length,h=this._parseAction(t,s),f=this.errors.length===d;o.push([e,h.source]),r&&f&&!this._isAllowedAssignmentEvent(h)&&this._reportError("Unsupported expression in a two-way binding",i);let p=Yn.Regular;r&&(p=Yn.TwoWay),e.startsWith(`${Ob}${Pm}`)&&(p=Yn.Animation),a.push(new ig(c,l,p,h,i,s,u))}_parseAction(e,t){let r=t&&t.start?t.start.offset:0;try{let i=this._exprParser.parseAction(e,t,r);return i&&this.errors.push(...i.errors),!i||i.ast instanceof zn?(this._reportError("Empty expressions are not allowed",t),this._exprParser.wrapLiteralPrimitive("ERROR",t,r)):i}catch(i){return this._reportError(`${i}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",t,r)}}_reportError(e,t,r=To.ERROR){this.errors.push(new ue(t,e,r))}_validatePropertyOrAttributeName(e,t,r){let i=r?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);i.error&&this._reportError(i.msg,t,To.ERROR)}_isAllowedAssignmentEvent(e){return e instanceof gr?this._isAllowedAssignmentEvent(e.ast):e instanceof mh?this._isAllowedAssignmentEvent(e.expression):e instanceof qc&&e.args.length===1&&e.receiver instanceof ns&&e.receiver.name==="$any"&&e.receiver.receiver instanceof Ai&&!(e.receiver.receiver instanceof Po)?this._isAllowedAssignmentEvent(e.args[0]):(e instanceof ns||e instanceof uu)&&!Zw(e)}};function Zw(n){return n instanceof ch||n instanceof lh?!0:n instanceof yh?Zw(n.expression):n instanceof ns||n instanceof uu||n instanceof qc?Zw(n.receiver):!1}function Rb(n){return n[0]=="@"}function Fb(n,e,t,r){let i,s=o=>n.securityContext(o,t,r);return e===null?i=n.allKnownElementNames().map(s):(i=[],$c.parse(e).forEach(o=>{let a=o.element?[o.element]:n.allKnownElementNames(),u=new Set(o.notSelectors.filter(l=>l.isElementSelector()).map(l=>l.element)),c=a.filter(l=>!u.has(l));i.push(...c.map(s))})),i.length===0?[it.NONE]:Array.from(new Set(i)).sort()}function Eo(n,e){let t=e.start-n.start.offset,r=e.end-n.end.offset;return new ge(n.start.moveBy(t),n.end.moveBy(r),n.fullStart.moveBy(t),n.details)}function Cz(n){if(n==null||n.length===0||n[0]=="/")return!1;let e=n.match(xz);return e===null||e[1]=="package"||e[1]=="asset"}var xz=/^([^:/?#]+):/,Dz="select",Sz="link",Iz="rel",Tz="href",Az="stylesheet",Mz="style",kz="script",Pz="ngNonBindable",Oz="ngProjectAs";function t1(n){let e=null,t=null,r=null,i=!1,s="";n.attrs.forEach(u=>{let c=u.name.toLowerCase();c==Dz?e=u.value:c==Tz?t=u.value:c==Iz?r=u.value:u.name==Pz?i=!0:u.name==Oz&&u.value.length>0&&(s=u.value)}),e=Nz(e);let o=n.name.toLowerCase(),a=Fr.OTHER;return tw(o)?a=Fr.NG_CONTENT:o==Mz?a=Fr.STYLE:o==kz?a=Fr.SCRIPT:o==Sz&&r==Az&&(a=Fr.STYLESHEET),new Jw(a,e,t,i,s)}var Fr=(function(n){return n[n.NG_CONTENT=0]="NG_CONTENT",n[n.STYLE=1]="STYLE",n[n.STYLESHEET=2]="STYLESHEET",n[n.SCRIPT=3]="SCRIPT",n[n.OTHER=4]="OTHER",n})(Fr||{}),Jw=class{type;selectAttr;hrefAttr;nonBindable;projectAs;constructor(e,t,r,i,s){this.type=e,this.selectAttr=t,this.hrefAttr=r,this.nonBindable=i,this.projectAs=s}};function Nz(n){return n===null||n.length===0?"*":n}var Rz=/^\s*([0-9A-Za-z_$]*)\s+of\s+([\S\s]*)/,Fz=/^track\s+([\S\s]*)/,Lz=/^(as\s+)(.*)/,t0=/^else[^\S\r\n]+if/,Bz=/^let\s+([\S\s]*)/,$z=/^[$A-Z_][0-9A-Z_$]*$/i,gA=/(\s*)(\S+)(\s*)/,th=new Set(["$index","$first","$last","$even","$odd","$count"]);function vA(n){return n==="empty"}function yA(n){return n==="else"||t0.test(n)}function Vz(n,e,t,r){let i=Wz(e),s=[],o=_A(n,i,r);o!==null&&s.push(new Qa(o.expression,pt(t,n.children,n.children),o.expressionAlias,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.nameSpan,n.i18n));for(let d of e)if(t0.test(d.name)){let h=_A(d,i,r);if(h!==null){let f=pt(t,d.children,d.children);s.push(new Qa(h.expression,f,h.expressionAlias,d.sourceSpan,d.startSourceSpan,d.endSourceSpan,d.nameSpan,d.i18n))}}else if(d.name==="else"){let h=pt(t,d.children,d.children);s.push(new Qa(null,h,null,d.sourceSpan,d.startSourceSpan,d.endSourceSpan,d.nameSpan,d.i18n))}let a=s.length>0?s[0].startSourceSpan:n.startSourceSpan,u=s.length>0?s[s.length-1].endSourceSpan:n.endSourceSpan,c=n.sourceSpan,l=s[s.length-1];return l!==void 0&&(c=new ge(a.start,l.sourceSpan.end)),{node:new lg(s,c,n.startSourceSpan,u,n.nameSpan),errors:i}}function jz(n,e,t,r){let i=[],s=Hz(n,i,r),o=null,a=null;for(let u of e)u.name==="empty"?a!==null?i.push(new ue(u.sourceSpan,"@for loop can only have one @empty block")):u.parameters.length>0?i.push(new ue(u.sourceSpan,"@empty block cannot have parameters")):a=new Dh(pt(t,u.children,u.children),u.sourceSpan,u.startSourceSpan,u.endSourceSpan,u.nameSpan,u.i18n):i.push(new ue(u.sourceSpan,`Unrecognized @for loop block "${u.name}"`));if(s!==null)if(s.trackBy===null)i.push(new ue(n.startSourceSpan,'@for loop must have a "track" expression'));else{let u=a?.endSourceSpan??n.endSourceSpan,c=new ge(n.sourceSpan.start,u?.end??n.sourceSpan.end);zz(s.trackBy.expression,s.trackBy.keywordSpan,i),o=new Kc(s.itemName,s.expression,s.trackBy.expression,s.trackBy.keywordSpan,s.context,pt(t,n.children,n.children),a,c,n.sourceSpan,n.startSourceSpan,u,n.nameSpan,n.i18n)}return{node:o,errors:i}}function Uz(n,e,t){let r=Gz(n),i=n.parameters.length>0?Kh(n.parameters[0],t):t.parseBinding("",!1,n.sourceSpan,0),s=[],o=[],a=null;for(let u of n.children){if(!(u instanceof ii))continue;if((u.name!=="case"||u.parameters.length===0)&&u.name!=="default"){o.push(new dg(u.name,u.sourceSpan,u.nameSpan));continue}let c=u.name==="case"?Kh(u.parameters[0],t):null,l=new xh(c,pt(e,u.children,u.children),u.sourceSpan,u.startSourceSpan,u.endSourceSpan,u.nameSpan,u.i18n);c===null?a=l:s.push(l)}return a!==null&&s.push(a),{node:new cg(i,s,o,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.nameSpan),errors:r}}function Hz(n,e,t){if(n.parameters.length===0)return e.push(new ue(n.startSourceSpan,"@for loop does not have an expression")),null;let[r,...i]=n.parameters,s=Yz(r,e)?.match(Rz);if(!s||s[2].trim().length===0)return e.push(new ue(r.sourceSpan,'Cannot parse expression. @for loop expression must match the pattern "<identifier> of <expression>"')),null;let[,o,a]=s;th.has(o)&&e.push(new ue(r.sourceSpan,`@for loop item name cannot be one of ${Array.from(th).join(", ")}.`));let u=r.expression.split(" ")[0],c=new ge(r.sourceSpan.start,r.sourceSpan.start.moveBy(u.length)),l={itemName:new Oo(o,"$implicit",c,c),trackBy:null,expression:Kh(r,t,a),context:Array.from(th,d=>{let h=new ge(n.startSourceSpan.end,n.startSourceSpan.end);return new Oo(d,d,h,h)})};for(let d of i){let h=d.expression.match(Bz);if(h!==null){let p=new ge(d.sourceSpan.start.moveBy(h[0].length-h[1].length),d.sourceSpan.end);qz(d.sourceSpan,h[1],p,o,l.context,e);continue}let f=d.expression.match(Fz);if(f!==null){if(l.trackBy!==null)e.push(new ue(d.sourceSpan,'@for loop can only have one "track" expression'));else{let p=Kh(d,t,f[1]);p.ast instanceof zn&&e.push(new ue(n.startSourceSpan,'@for loop must have a "track" expression'));let g=new ge(d.sourceSpan.start,d.sourceSpan.start.moveBy(5));l.trackBy={expression:p,keywordSpan:g}}continue}e.push(new ue(d.sourceSpan,`Unrecognized @for loop parameter "${d.expression}"`))}return l}function zz(n,e,t){let r=new eE;n.ast.visit(r),r.hasPipe&&t.push(new ue(e,"Cannot use pipes in track expressions"))}function qz(n,e,t,r,i,s){let o=e.split(","),a=t.start;for(let u of o){let c=u.split("="),l=c.length===2?c[0].trim():"",d=c.length===2?c[1].trim():"";if(l.length===0||d.length===0)s.push(new ue(n,'Invalid @for loop "let" parameter. Parameter should match the pattern "<name> = <variable name>"'));else if(!th.has(d))s.push(new ue(n,`Unknown "let" parameter variable "${d}". The allowed variables are: ${Array.from(th).join(", ")}`));else if(l===r)s.push(new ue(n,`Invalid @for loop "let" parameter. Variable cannot be called "${r}"`));else if(i.some(h=>h.name===l))s.push(new ue(n,`Duplicate "let" parameter variable "${d}"`));else{let[,h,f]=c[0].match(gA)??[],p=h!==void 0&&c.length===2?new ge(a.moveBy(h.length),a.moveBy(h.length+f.length)):t,g;if(c.length===2){let[,y,E]=c[1].match(gA)??[];g=y!==void 0?new ge(a.moveBy(c[0].length+1+y.length),a.moveBy(c[0].length+1+y.length+E.length)):void 0}let v=new ge(p.start,g?.end??p.end);i.push(new Oo(l,d,v,p,g))}a=a.moveBy(u.length+1)}}function Wz(n){let e=[],t=!1;for(let r=0;r<n.length;r++){let i=n[r];i.name==="else"?(t?e.push(new ue(i.startSourceSpan,"Conditional can only have one @else block")):n.length>1&&r<n.length-1?e.push(new ue(i.startSourceSpan,"@else block must be last inside the conditional")):i.parameters.length>0&&e.push(new ue(i.startSourceSpan,"@else block cannot have parameters")),t=!0):t0.test(i.name)||e.push(new ue(i.startSourceSpan,`Unrecognized conditional block @${i.name}`))}return e}function Gz(n){let e=[],t=!1;if(n.parameters.length!==1)return e.push(new ue(n.startSourceSpan,"@switch block must have exactly one parameter")),e;for(let r of n.children)if(!(r instanceof Hh||r instanceof gu&&r.value.trim().length===0)){if(!(r instanceof ii)||r.name!=="case"&&r.name!=="default"){e.push(new ue(r.sourceSpan,"@switch block can only contain @case and @default blocks"));continue}r.name==="default"?(t?e.push(new ue(r.startSourceSpan,"@switch block can only have one @default block")):r.parameters.length>0&&e.push(new ue(r.startSourceSpan,"@default block cannot have parameters")),t=!0):r.name==="case"&&r.parameters.length!==1&&e.push(new ue(r.startSourceSpan,"@case block must have exactly one parameter"))}return e}function Kh(n,e,t){let r,i;return typeof t=="string"?(r=Math.max(0,n.expression.lastIndexOf(t)),i=r+t.length):(r=0,i=n.expression.length),e.parseBinding(n.expression.slice(r,i),!1,n.sourceSpan,n.sourceSpan.start.offset+r)}function _A(n,e,t){if(n.parameters.length===0)return e.push(new ue(n.startSourceSpan,"Conditional block does not have an expression")),null;let r=Kh(n.parameters[0],t),i=null;for(let s=1;s<n.parameters.length;s++){let o=n.parameters[s],a=o.expression.match(Lz);if(a===null)e.push(new ue(o.sourceSpan,`Unrecognized conditional parameter "${o.expression}"`));else if(n.name!=="if"&&!t0.test(n.name))e.push(new ue(o.sourceSpan,'"as" expression is only allowed on `@if` and `@else if` blocks'));else if(i!==null)e.push(new ue(o.sourceSpan,'Conditional can only have one "as" expression'));else{let u=a[2].trim();if($z.test(u)){let c=o.sourceSpan.start.moveBy(a[1].length),l=new ge(c,c.moveBy(u.length));i=new Oo(u,u,l,l)}else e.push(new ue(o.sourceSpan,'"as" expression must be a valid JavaScript identifier'))}}return{expression:r,expressionAlias:i}}function Yz(n,e){let t=n.expression,r=/^\s$/,i=0,s=0,o=t.length-1;for(let a=0;a<t.length;a++){let u=t[a];if(u==="(")s=a+1,i++;else{if(r.test(u))continue;break}}if(i===0)return t;for(let a=t.length-1;a>-1;a--){let u=t[a];if(u===")"){if(o=a,i--,i===0)break}else{if(r.test(u))continue;break}}return i!==0?(e.push(new ue(n.sourceSpan,"Unclosed parentheses in expression")),null):t.slice(s,o)}var eE=class extends Wc{hasPipe=!1;visitPipe(){this.hasPipe=!0}},Kz=/^\d+\.?\d*(ms|s)?$/,Qz=/^\s$/,bA=new Map([[Di,Wn],[rs,Hs],[$r,yn]]),Gn=(function(n){return n.IDLE="idle",n.TIMER="timer",n.INTERACTION="interaction",n.IMMEDIATE="immediate",n.HOVER="hover",n.VIEWPORT="viewport",n.NEVER="never",n})(Gn||{});function Xz({expression:n,sourceSpan:e},t,r){let i=n.indexOf("never"),s=new ge(e.start.moveBy(i),e.start.moveBy(i+5)),o=BE(n,e),a=$E(n,e);i===-1?r.push(new ue(e,'Could not find "never" keyword in expression')):VE("never",t,r,new sw(s,e,o,null,a))}function Lb({expression:n,sourceSpan:e},t,r,i){let s=n.indexOf("when"),o=new ge(e.start.moveBy(s),e.start.moveBy(s+4)),a=BE(n,e),u=$E(n,e);if(s===-1)i.push(new ue(e,'Could not find "when" keyword in expression'));else{let c=Qh(n,s+1),l=t.parseBinding(n.slice(c),!1,e,e.start.offset+c);VE("when",r,i,new og(l,e,a,o,u))}}function Bb({expression:n,sourceSpan:e},t,r,i,s){let o=n.indexOf("on"),a=new ge(e.start.moveBy(o),e.start.moveBy(o+2)),u=BE(n,e),c=$E(n,e);if(o===-1)i.push(new ue(e,'Could not find "on" keyword in expression'));else{let l=Qh(n,o+1),d=n.startsWith("hydrate");new tE(n,t,l,e,r,i,d?s6:i6,d,u,a,c).parse()}}function BE(n,e){return n.startsWith("prefetch")?new ge(e.start,e.start.moveBy(8)):null}function $E(n,e){return n.startsWith("hydrate")?new ge(e.start,e.start.moveBy(7)):null}var tE=class{expression;bindingParser;start;span;triggers;errors;validator;isHydrationTrigger;prefetchSpan;onSourceSpan;hydrateSpan;index=0;tokens;constructor(e,t,r,i,s,o,a,u,c,l,d){this.expression=e,this.bindingParser=t,this.start=r,this.span=i,this.triggers=s,this.errors=o,this.validator=a,this.isHydrationTrigger=u,this.prefetchSpan=c,this.onSourceSpan=l,this.hydrateSpan=d,this.tokens=new Wh().tokenize(e.slice(r))}parse(){for(;this.tokens.length>0&&this.index<this.tokens.length;){let e=this.token();if(!e.isIdentifier()){this.unexpectedToken(e);break}if(this.isFollowedByOrLast(vr))this.consumeTrigger(e,[]),this.advance();else if(this.isFollowedByOrLast($r)){this.advance();let t=this.errors.length,r=this.consumeParameters();if(this.errors.length!==t)break;this.consumeTrigger(e,r),this.advance()}else this.index<this.tokens.length-1&&this.unexpectedToken(this.tokens[this.index+1]);this.advance()}}advance(){this.index++}isFollowedByOrLast(e){return this.index===this.tokens.length-1?!0:this.tokens[this.index+1].isCharacter(e)}token(){return this.tokens[Math.min(this.index,this.tokens.length-1)]}consumeTrigger(e,t){let r=this.span.start.moveBy(this.start+e.index-this.tokens[0].index),i=new ge(r,r.moveBy(e.strValue.length)),s=r.moveBy(this.token().end-e.index),o=e.index===0,a=o?this.onSourceSpan:null,u=o?this.prefetchSpan:null,c=o?this.hydrateSpan:null,l=new ge(o?this.span.start:r,s);try{switch(e.toString()){case Gn.IDLE:this.trackTrigger("idle",Zz(t,i,l,u,a,c));break;case Gn.TIMER:this.trackTrigger("timer",Jz(t,i,l,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case Gn.INTERACTION:this.trackTrigger("interaction",n6(t,i,l,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;case Gn.IMMEDIATE:this.trackTrigger("immediate",e6(t,i,l,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case Gn.HOVER:this.trackTrigger("hover",t6(t,i,l,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;case Gn.VIEWPORT:this.trackTrigger("viewport",r6(this.start,this.isHydrationTrigger,this.bindingParser,t,i,l,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;default:throw new Error(`Unrecognized trigger type "${e}"`)}}catch(d){this.error(e,d.message)}}consumeParameters(){let e=[];if(!this.token().isCharacter($r))return this.unexpectedToken(this.token()),e;this.advance();let t=[],r=[];for(;this.index<this.tokens.length;){let i=this.token();if(i.isCharacter(yn)&&t.length===0){r.length&&e.push({expression:this.tokenRangeText(r),start:r[0].index});break}if(i.type===le.Character&&bA.has(i.numValue)&&t.push(bA.get(i.numValue)),t.length>0&&i.isCharacter(t[t.length-1])&&t.pop(),t.length===0&&i.isCharacter(vr)&&r.length>0){e.push({expression:this.tokenRangeText(r),start:r[0].index}),this.advance(),r=[];continue}r.push(i),this.advance()}return(!this.token().isCharacter(yn)||t.length>0)&&this.error(this.token(),"Unexpected end of expression"),this.index<this.tokens.length-1&&!this.tokens[this.index+1].isCharacter(vr)&&this.unexpectedToken(this.tokens[this.index+1]),e}tokenRangeText(e){return e.length===0?"":this.expression.slice(this.start+e[0].index,this.start+e[e.length-1].end)}trackTrigger(e,t){VE(e,this.triggers,this.errors,t)}error(e,t){let r=this.span.start.moveBy(this.start+e.index),i=r.moveBy(e.end-e.index);this.errors.push(new ue(new ge(r,i),t))}unexpectedToken(e){this.error(e,`Unexpected token "${e}"`)}};function VE(n,e,t,r){e[n]?t.push(new ue(r.sourceSpan,`Duplicate "${n}" trigger is not allowed`)):e[n]=r}function Zz(n,e,t,r,i,s){if(n.length>0)throw new Error(`"${Gn.IDLE}" trigger cannot have parameters`);return new ow(e,t,r,i,s)}function Jz(n,e,t,r,i,s){if(n.length!==1)throw new Error(`"${Gn.TIMER}" trigger must have exactly one parameter`);let o=zg(n[0].expression);if(o===null)throw new Error(`Could not parse time value of trigger "${Gn.TIMER}"`);return new uw(o,e,t,r,i,s)}function e6(n,e,t,r,i,s){if(n.length>0)throw new Error(`"${Gn.IMMEDIATE}" trigger cannot have parameters`);return new aw(e,t,r,i,s)}function t6(n,e,t,r,i,s,o){return o(Gn.HOVER,n),new ag(n[0]?.expression??null,e,t,r,i,s)}function n6(n,e,t,r,i,s,o){return o(Gn.INTERACTION,n),new ug(n[0]?.expression??null,e,t,r,i,s)}function r6(n,e,t,r,i,s,o,a,u,c){c(Gn.VIEWPORT,r);let l,d;if(r.length===0)l=d=null;else if(!r[0].expression.startsWith("{"))l=r[0].expression,d=null;else{let h=t.parseBinding(r[0].expression,!1,s,s.start.offset+n+r[0].start);if(h.ast instanceof cu){if(h.ast.keys.some(p=>p.key==="root"))throw new Error('The "root" option is not supported in the options parameter of the "viewport" trigger')}else throw new Error('Options parameter of the "viewport" trigger must be an object literal');let f=h.ast.keys.findIndex(p=>p.key==="trigger");if(f===-1)l=null,d=h.ast;else{let p=h.ast.values[f],g=(v,y)=>y!==f;if(!(p instanceof ns)||!(p.receiver instanceof Ai)||p.receiver instanceof Po)throw new Error('"trigger" option of the "viewport" trigger must be an identifier');l=p.name,d=new cu(h.ast.span,h.ast.sourceSpan,h.ast.keys.filter(g),h.ast.values.filter(g))}}if(e&&l!==null)throw new Error('"viewport" hydration trigger cannot have a "trigger"');if(d){let h=nE.findDynamicNode(d);if(h!==null)throw new Error(`Options of the "viewport" trigger must be an object literal containing only literal values, but "${h.constructor.name}" was found`)}return new bh(l,d,i,s,o,a,u)}function i6(n,e){if(e.length>1)throw new Error(`"${n}" trigger can only have zero or one parameters`)}function s6(n,e){if(n===Gn.VIEWPORT){if(e.length>1)throw new Error(`Hydration trigger "${n}" cannot have more than one parameter`);return}if(e.length>0)throw new Error(`Hydration trigger "${n}" cannot have parameters`)}function Qh(n,e=0){let t=!1;for(let r=e;r<n.length;r++)if(Qz.test(n[r]))t=!0;else if(t)return r;return-1}function zg(n){let e=n.match(Kz);if(!e)return null;let[t,r]=e;return parseFloat(t)*(r==="s"?1e3:1)}var nE=class n extends Wc{dynamicNode=null;static findDynamicNode(e){let t=new n;return t.visit(e),t.dynamicNode}visit(e){!(e instanceof gr)&&!(e instanceof mr)&&!(e instanceof dh)&&!(e instanceof cu)?this.dynamicNode=e:super.visit(e)}},o6=/^prefetch\s+when\s/,a6=/^prefetch\s+on\s/,u6=/^hydrate\s+when\s/,c6=/^hydrate\s+on\s/,l6=/^hydrate\s+never(\s*)$/,n1=/^minimum\s/,d6=/^after\s/,h6=/^when\s/,f6=/^on\s/;function rE(n){return n==="placeholder"||n==="loading"||n==="error"}function p6(n,e,t,r){let i=[],{placeholder:s,loading:o,error:a}=m6(e,i,t),{triggers:u,prefetchTriggers:c,hydrateTriggers:l}=_6(n,r,i),d=n.endSourceSpan,h=n.sourceSpan.end;if(e.length>0){let g=e[e.length-1];d=g.endSourceSpan,h=g.sourceSpan.end}let f=new ge(n.sourceSpan.start,h);return{node:new lu(pt(t,n.children,n.children),u,c,l,s,o,a,n.nameSpan,f,n.sourceSpan,n.startSourceSpan,d,n.i18n),errors:i}}function m6(n,e,t){let r=null,i=null,s=null;for(let o of n)try{if(!rE(o.name)){e.push(new ue(o.startSourceSpan,`Unrecognized block "@${o.name}"`));break}switch(o.name){case"placeholder":r!==null?e.push(new ue(o.startSourceSpan,"@defer block can only have one @placeholder block")):r=g6(o,t);break;case"loading":i!==null?e.push(new ue(o.startSourceSpan,"@defer block can only have one @loading block")):i=v6(o,t);break;case"error":s!==null?e.push(new ue(o.startSourceSpan,"@defer block can only have one @error block")):s=y6(o,t);break}}catch(a){e.push(new ue(o.startSourceSpan,a.message))}return{placeholder:r,loading:i,error:s}}function g6(n,e){let t=null;for(let r of n.parameters)if(n1.test(r.expression)){if(t!=null)throw new Error('@placeholder block can only have one "minimum" parameter');let i=zg(r.expression.slice(Qh(r.expression)));if(i===null)throw new Error('Could not parse time value of parameter "minimum"');t=i}else throw new Error(`Unrecognized parameter in @placeholder block: "${r.expression}"`);return new wh(pt(e,n.children,n.children),t,n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function v6(n,e){let t=null,r=null;for(let i of n.parameters)if(d6.test(i.expression)){if(t!=null)throw new Error('@loading block can only have one "after" parameter');let s=zg(i.expression.slice(Qh(i.expression)));if(s===null)throw new Error('Could not parse time value of parameter "after"');t=s}else if(n1.test(i.expression)){if(r!=null)throw new Error('@loading block can only have one "minimum" parameter');let s=zg(i.expression.slice(Qh(i.expression)));if(s===null)throw new Error('Could not parse time value of parameter "minimum"');r=s}else throw new Error(`Unrecognized parameter in @loading block: "${i.expression}"`);return new Eh(pt(e,n.children,n.children),t,r,n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function y6(n,e){if(n.parameters.length>0)throw new Error("@error block cannot have parameters");return new Ch(pt(e,n.children,n.children),n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function _6(n,e,t,r){let i={},s={},o={};for(let a of n.parameters)h6.test(a.expression)?Lb(a,e,i,t):f6.test(a.expression)?Bb(a,e,i,t):o6.test(a.expression)?Lb(a,e,s,t):a6.test(a.expression)?Bb(a,e,s,t):u6.test(a.expression)?Lb(a,e,o,t):c6.test(a.expression)?Bb(a,e,o,t):l6.test(a.expression)?Xz(a,o,t):t.push(new ue(a.sourceSpan,"Unrecognized trigger"));return o.never&&Object.keys(o).length>1&&t.push(new ue(n.startSourceSpan,"Cannot specify additional `hydrate` triggers if `hydrate never` is present")),{triggers:i,prefetchTriggers:s,hydrateTriggers:o}}var b6=/^(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*)$/,wA=1,EA=2,CA=3,xA=4,DA=5,w6=6,Hd=7,Co={BANANA_BOX:{start:"[(",end:")]"},PROPERTY:{start:"[",end:"]"},EVENT:{start:"(",end:")"}},$b="*",E6=new Set(["link","style","script","ng-template","ng-container","ng-content"]),C6=new Set(["ngProjectAs","ngNonBindable"]);function x6(n,e,t){let r=new iE(e,t),i=pt(r,n,n),s=e.errors.concat(r.errors),o={nodes:i,errors:s,styleUrls:r.styleUrls,styles:r.styles,ngContentSelectors:r.ngContentSelectors};return t.collectCommentNodes&&(o.commentNodes=r.commentNodes),o}var iE=class{bindingParser;options;errors=[];styles=[];styleUrls=[];ngContentSelectors=[];commentNodes=[];inI18nBlock=!1;processedNodes=new Set;constructor(e,t){this.bindingParser=e,this.options=t}visitElement(e){let t=Bm(e.i18n);t&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);let r=t1(e);if(r.type===Fr.SCRIPT)return null;if(r.type===Fr.STYLE){let y=D6(e);return y!==null&&this.styles.push(y),null}else if(r.type===Fr.STYLESHEET&&Cz(r.hrefAttr))return this.styleUrls.push(r.hrefAttr),null;let i=LB(e.name),{attributes:s,boundEvents:o,references:a,variables:u,templateVariables:c,elementHasInlineTemplate:l,parsedProperties:d,templateParsedProperties:h,i18nAttrsMeta:f}=this.prepareAttributes(e.attrs,i),p=this.extractDirectives(e),g;r.nonBindable?g=pt(SA,e.children).flat(1/0):g=pt(this,e.children,e.children);let v;if(r.type===Fr.NG_CONTENT){let y=r.selectAttr,E=e.attrs.map(M=>this.visitAttribute(M));v=new Qc(y,E,g,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n),this.ngContentSelectors.push(y)}else if(i){let y=this.categorizePropertyAttributes(e.name,d,f);v=new Vr(e.name,s,y.bound,o,p,[],g,a,u,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{let y=this.categorizePropertyAttributes(e.name,d,f);if(e.name==="ng-container")for(let E of y.bound)E.type===$e.Attribute&&this.reportError("Attribute bindings are not supported on ng-container. Use property bindings instead.",E.sourceSpan);v=new us(e.name,s,y.bound,o,p,g,a,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n)}return l&&(v=this.wrapInTemplate(v,h,c,f,i,t)),t&&(this.inI18nBlock=!1),v}visitAttribute(e){return new Yc(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return this.processedNodes.has(e)?null:this._visitTextWithInterpolation(e.value,e.sourceSpan,e.tokens,e.i18n)}visitExpansion(e){if(!e.i18n)return null;if(!Bm(e.i18n))throw new Error(`Invalid type "${e.i18n.constructor}" for "i18n" property of ${e.sourceSpan.toString()}. Expected a "Message"`);let t=e.i18n,r={},i={};return Object.keys(t.placeholders).forEach(s=>{let o=t.placeholders[s];if(s.startsWith(jB)){let a=s.trim(),u=this.bindingParser.parseInterpolationExpression(o.text,o.sourceSpan);r[a]=new Gc(u,o.sourceSpan)}else i[s]=this._visitTextWithInterpolation(o.text,o.sourceSpan,null)}),new zA(r,i,e.sourceSpan,t)}visitExpansionCase(e){return null}visitComment(e){return this.options.collectCommentNodes&&this.commentNodes.push(new Qg(e.value||"",e.sourceSpan)),null}visitLetDeclaration(e,t){let r=this.bindingParser.parseBinding(e.value,!1,e.valueSpan,e.valueSpan.start.offset);return r.errors.length===0&&r.ast instanceof zn&&this.reportError("@let declaration value cannot be empty",e.valueSpan),new wE(e.name,r,e.sourceSpan,e.nameSpan,e.valueSpan)}visitComponent(e){let t=Bm(e.i18n);if(t&&(this.inI18nBlock&&this.reportError("Cannot mark a component as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0),e.tagName!==null&&E6.has(e.tagName))return this.reportError(`Tag name "${e.tagName}" cannot be used as a component tag`,e.startSourceSpan),null;let{attributes:r,boundEvents:i,references:s,templateVariables:o,elementHasInlineTemplate:a,parsedProperties:u,templateParsedProperties:c,i18nAttrsMeta:l}=this.prepareAttributes(e.attrs,!1);this.validateSelectorlessReferences(s);let d=this.extractDirectives(e),h;e.attrs.find(g=>g.name==="ngNonBindable")?h=pt(SA,e.children).flat(1/0):h=pt(this,e.children,e.children);let f=this.categorizePropertyAttributes(e.tagName,u,l),p=new Xd(e.componentName,e.tagName,e.fullName,r,f.bound,i,d,h,s,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return a&&(p=this.wrapInTemplate(p,c,o,l,!1,t)),t&&(this.inI18nBlock=!1),p}visitDirective(){return null}visitBlockParameter(){return null}visitBlock(e,t){let r=Array.isArray(t)?t.indexOf(e):-1;if(r===-1)throw new Error("Visitor invoked incorrectly. Expecting visitBlock to be invoked siblings array as its context");if(this.processedNodes.has(e))return null;let i=null;switch(e.name){case"defer":i=p6(e,this.findConnectedBlocks(r,t,rE),this,this.bindingParser);break;case"switch":i=Uz(e,this,this.bindingParser);break;case"for":i=jz(e,this.findConnectedBlocks(r,t,vA),this,this.bindingParser);break;case"if":i=Vz(e,this.findConnectedBlocks(r,t,yA),this,this.bindingParser);break;default:let s;rE(e.name)?(s=`@${e.name} block can only be used after an @defer block.`,this.processedNodes.add(e)):vA(e.name)?(s=`@${e.name} block can only be used after an @for block.`,this.processedNodes.add(e)):yA(e.name)?(s=`@${e.name} block can only be used after an @if or @else if block.`,this.processedNodes.add(e)):s=`Unrecognized block @${e.name}.`,i={node:new dg(e.name,e.sourceSpan,e.nameSpan),errors:[new ue(e.sourceSpan,s)]};break}return this.errors.push(...i.errors),i.node}findConnectedBlocks(e,t,r){let i=[];for(let s=e+1;s<t.length;s++){let o=t[s];if(!(o instanceof Hh)){if(o instanceof gu&&o.value.trim().length===0){this.processedNodes.add(o);continue}if(!(o instanceof ii)||!r(o.name))break;i.push(o),this.processedNodes.add(o)}}return i}categorizePropertyAttributes(e,t,r){let i=[],s=[];return t.forEach(o=>{let a=r[o.name];if(o.isLiteral)s.push(new Yc(o.name,o.expression.source||"",o.sourceSpan,o.keySpan,o.valueSpan,a));else{let u=this.bindingParser.createBoundElementProperty(e,o,!0,!1);i.push(rw.fromBoundElementProperty(u,a))}}),{bound:i,literal:s}}prepareAttributes(e,t){let r=[],i=[],s=[],o=[],a=[],u={},c=[],l=[],d=!1;for(let h of e){let f=!1,p=IA(h.name),g=!1;if(h.i18n&&(u[h.name]=h.i18n),p.startsWith($b)){d&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",h.sourceSpan),g=!0,d=!0;let v=h.value,y=p.substring($b.length),E=[],M=h.valueSpan?h.valueSpan.fullStart.offset:h.sourceSpan.fullStart.offset+h.name.length;this.bindingParser.parseInlineTemplateBinding(y,v,h.sourceSpan,M,[],c,E,!0),l.push(...E.map(T=>new Oo(T.name,T.value,T.sourceSpan,T.keySpan,T.valueSpan)))}else f=this.parseAttribute(t,h,[],r,i,s,o);!f&&!g&&a.push(this.visitAttribute(h))}return{attributes:a,boundEvents:i,references:o,variables:s,templateVariables:l,elementHasInlineTemplate:d,parsedProperties:r,templateParsedProperties:c,i18nAttrsMeta:u}}parseAttribute(e,t,r,i,s,o,a){let u=IA(t.name),c=t.value,l=t.sourceSpan,d=t.valueSpan?t.valueSpan.fullStart.offset:l.fullStart.offset;function h(y,E,M){let T=t.name.length-u.length,R=y.start.moveBy(E.length+T),U=R.moveBy(M.length);return new ge(R,U,R,M)}let f=u.match(b6);if(f){if(f[wA]!=null){let y=f[Hd],E=h(l,f[wA],y);this.bindingParser.parsePropertyBinding(y,c,!1,!1,l,d,t.valueSpan,r,i,E)}else if(f[EA])if(e){let y=f[Hd],E=h(l,f[EA],y);this.parseVariable(y,c,l,E,t.valueSpan,o)}else this.reportError('"let-" is only supported on ng-template elements.',l);else if(f[CA]){let y=f[Hd],E=h(l,f[CA],y);this.parseReference(y,c,l,E,t.valueSpan,a)}else if(f[xA]){let y=[],E=f[Hd],M=h(l,f[xA],E);this.bindingParser.parseEvent(E,c,!1,l,t.valueSpan||l,r,y,M),Vb(y,s)}else if(f[DA]){let y=f[Hd],E=h(l,f[DA],y);this.bindingParser.parsePropertyBinding(y,c,!1,!0,l,d,t.valueSpan,r,i,E),this.parseAssignmentEvent(y,c,l,t.valueSpan,r,s,E,d)}else if(f[w6]){let y=h(l,"",u);this.bindingParser.parseLiteralAttr(u,c,l,d,t.valueSpan,r,i,y)}return!0}let p=null;if(u.startsWith(Co.BANANA_BOX.start)?p=Co.BANANA_BOX:u.startsWith(Co.PROPERTY.start)?p=Co.PROPERTY:u.startsWith(Co.EVENT.start)&&(p=Co.EVENT),p!==null&&u.endsWith(p.end)&&u.length>p.start.length+p.end.length){let y=u.substring(p.start.length,u.length-p.end.length),E=h(l,p.start,y);if(p.start===Co.BANANA_BOX.start)this.bindingParser.parsePropertyBinding(y,c,!1,!0,l,d,t.valueSpan,r,i,E),this.parseAssignmentEvent(y,c,l,t.valueSpan,r,s,E,d);else if(p.start===Co.PROPERTY.start)this.bindingParser.parsePropertyBinding(y,c,!1,!1,l,d,t.valueSpan,r,i,E);else{let M=[];this.bindingParser.parseEvent(y,c,!1,l,t.valueSpan||l,r,M,E),Vb(M,s)}return!0}let g=h(l,"",u);return this.bindingParser.parsePropertyInterpolation(u,c,l,t.valueSpan,r,i,g,t.valueTokens??null)}extractDirectives(e){let t=e instanceof pr?e.tagName:e.name,r=[],i=new Set;for(let s of e.directives){let o=!1;for(let f of s.attrs)f.name.startsWith($b)?(o=!0,this.reportError(`Shorthand template syntax "${f.name}" is not supported inside a directive context`,f.sourceSpan)):C6.has(f.name)&&(o=!0,this.reportError(`Attribute "${f.name}" is not supported in a directive context`,f.sourceSpan));if(!o&&i.has(s.name)&&(o=!0,this.reportError(`Cannot apply directive "${s.name}" multiple times on the same element`,s.sourceSpan)),o)continue;let{attributes:a,parsedProperties:u,boundEvents:c,references:l,i18nAttrsMeta:d}=this.prepareAttributes(s.attrs,!1);this.validateSelectorlessReferences(l);let{bound:h}=this.categorizePropertyAttributes(t,u,d);for(let f of h)f.type!==$e.Property&&f.type!==$e.TwoWay&&(o=!0,this.reportError("Binding is not supported in a directive context",f.sourceSpan));o||(i.add(s.name),r.push(new HA(s.name,a,h,c,l,s.sourceSpan,s.startSourceSpan,s.endSourceSpan,void 0)))}return r}filterAnimationAttributes(e){return e.filter(t=>!t.name.startsWith("animate."))}filterAnimationInputs(e){return e.filter(t=>t.type!==$e.Animation)}wrapInTemplate(e,t,r,i,s,o){let a=this.categorizePropertyAttributes("ng-template",t,i),u=[];a.literal.forEach(h=>u.push(h)),a.bound.forEach(h=>u.push(h));let c={attributes:[],inputs:[],outputs:[]};(e instanceof us||e instanceof Xd)&&(c.attributes.push(...this.filterAnimationAttributes(e.attributes)),c.inputs.push(...this.filterAnimationInputs(e.inputs)),c.outputs.push(...e.outputs));let l=s&&o?void 0:e.i18n,d;return e instanceof Xd?d=e.tagName:e instanceof Vr?d=null:d=e.name,new Vr(d,c.attributes,c.inputs,c.outputs,[],u,[e],[],r,!1,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,l)}_visitTextWithInterpolation(e,t,r,i){let s=PM(e),o=this.bindingParser.parseInterpolation(s,t,r);return o?new Gc(o,t,i):new Wa(s,t)}parseVariable(e,t,r,i,s,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',r):e.length===0&&this.reportError("Variable does not have a name",r),o.push(new Oo(e,t,r,i,s))}parseReference(e,t,r,i,s,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',r):e.length===0?this.reportError("Reference does not have a name",r):o.some(a=>a.name===e)&&this.reportError(`Reference "#${e}" is defined more than once`,r),o.push(new Sh(e,t,r,i,s))}parseAssignmentEvent(e,t,r,i,s,o,a,u){let c=[];this.bindingParser.parseEvent(`${e}Change`,t,!0,r,i||r,s,c,a),Vb(c,o)}validateSelectorlessReferences(e){if(e.length===0)return;let t=new Set;for(let r of e)r.value.length>0?this.reportError("Cannot specify a value for a local reference in this context",r.valueSpan||r.sourceSpan):t.has(r.name)?this.reportError("Duplicate reference names are not allowed",r.sourceSpan):t.add(r.name)}reportError(e,t,r=To.ERROR){this.errors.push(new ue(t,e,r))}},sE=class{visitElement(e){let t=t1(e);if(t.type===Fr.SCRIPT||t.type===Fr.STYLE||t.type===Fr.STYLESHEET)return null;let r=pt(this,e.children,null);return new us(e.name,pt(this,e.attrs),[],[],[],r,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid)}visitComment(e){return null}visitAttribute(e){return new Yc(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return new Wa(e.value,e.sourceSpan)}visitExpansion(e){return null}visitExpansionCase(e){return null}visitBlock(e,t){let r=[new Wa(e.startSourceSpan.toString(),e.startSourceSpan),...pt(this,e.children)];return e.endSourceSpan!==null&&r.push(new Wa(e.endSourceSpan.toString(),e.endSourceSpan)),r}visitBlockParameter(e,t){return null}visitLetDeclaration(e,t){return new Wa(`@let ${e.name} = ${e.value};`,e.sourceSpan)}visitComponent(e,t){let r=pt(this,e.children,null);return new us(e.fullName,pt(this,e.attrs),[],[],[],r,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,!1)}visitDirective(e,t){return null}},SA=new sE;function IA(n){return/^data-/i.test(n)?n.substring(5):n}function Vb(n,e){e.push(...n.map(t=>iw.fromParsedEvent(t)))}function D6(n){return n.children.length!==1||!(n.children[0]instanceof gu)?null:n.children[0].value}var S6=[" ",`
`,"\r","	"];function I6(n,e,t={}){let{preserveWhitespaces:r,enableI18nLegacyMessageIdFormat:i}=t,s=t.enableSelectorless??!1,o=qg(s),u=new Qw().parse(n,e,J(C({leadingTriviaChars:S6},t),{tokenizeExpansionForms:!0,tokenizeBlocks:t.enableBlockSyntax??!0,tokenizeLet:t.enableLetSyntax??!0,selectorlessEnabled:s}));if(!t.alwaysAttemptHtmlToR3AstConversion&&u.errors&&u.errors.length>0){let T={preserveWhitespaces:r,errors:u.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(T.commentNodes=[]),T}let c=u.rootNodes,l=!(t.preserveSignificantWhitespace??!0),d=new Fg(!r,i,t.preserveSignificantWhitespace,l),h=d.visitAllWithErrors(c);if(!t.alwaysAttemptHtmlToR3AstConversion&&h.errors&&h.errors.length>0){let T={preserveWhitespaces:r,errors:h.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(T.commentNodes=[]),T}c=h.rootNodes,r||(c=pt(new Ng(!0,void 0,!1),c),d.hasI18nMeta&&(c=pt(new Fg(!1,void 0,!0,l),c)));let{nodes:f,errors:p,styleUrls:g,styles:v,ngContentSelectors:y,commentNodes:E}=x6(c,o,{collectCommentNodes:!!t.collectCommentNodes});p.push(...u.errors,...h.errors);let M={preserveWhitespaces:r,errors:p.length>0?p:null,nodes:f,styleUrls:g,styles:v,ngContentSelectors:y};return t.collectCommentNodes&&(M.commentNodes=E),M}var T6=new il;function qg(n=!1){return new Xw(new Rg(new Wh,n),T6,[])}var r1="%COMP%",A6=`_nghost-${r1}`,M6=`_ngcontent-${r1}`;function i1(n,e,t){let r=new Fo,i=gE(n.selector);return r.set("type",n.type.value),i.length>0&&r.set("selectors",Pc(i)),n.queries.length>0&&r.set("contentQueries",yz(n.queries,e,n.name)),n.viewQueries.length&&r.set("viewQuery",vz(n.viewQueries,e,n.name)),r.set("hostBindings",B6(n.host,n.typeSourceSpan,t,e,n.selector||"",n.name,r)),r.set("inputs",oT(n.inputs,!0)),r.set("outputs",oT(n.outputs)),n.exportAs!==null&&r.set("exportAs",Ge(n.exportAs.map(s=>N(s)))),n.isStandalone===!1&&r.set("standalone",N(!1)),n.isSignal&&r.set("signals",N(!0)),r}function s1(n,e){let t=[],r=e.providers,i=e.viewProviders;if(r||i){let s=[r||new Ii([])];i&&s.push(i),t.push(ee(w.ProvidersFeature).callFn(s))}if(e.hostDirectives?.length&&t.push(ee(w.HostDirectivesFeature).callFn([H6(e.hostDirectives)])),e.usesInheritance&&t.push(ee(w.InheritDefinitionFeature)),e.lifecycle.usesOnChanges&&t.push(ee(w.NgOnChangesFeature)),"externalStyles"in e&&e.externalStyles?.length){let s=e.externalStyles.map(o=>N(o));t.push(ee(w.ExternalStylesFeature).callFn([Ge(s)]))}t.length&&n.set("features",Ge(t))}function k6(n,e,t){let r=i1(n,e,t);s1(r,n);let i=ee(w.defineDirective).callFn([r.toLiteralMap()],void 0,!0),s=L6(n);return{expression:i,type:s,statements:[]}}function P6(n,e,t){let r=i1(n,e,t);s1(r,n);let i=n.selector&&$c.parse(n.selector),s=i&&i[0];if(s){let p=s.getAttrs();p.length&&r.set("attrs",e.getConstLiteral(Ge(p.map(g=>g!=null?N(g):N(void 0))),!0))}let o=n.name,a=null;if(n.defer.mode===1&&n.defer.dependenciesFn!==null){let p=`${o}_DeferFn`;e.statements.push(new qt(p,n.defer.dependenciesFn,void 0,an.Final)),a=ke(p)}let u=n.isStandalone&&!n.hasDirectiveDependencies?fr.DomOnly:fr.Full,c=GH(n.name,n.template.nodes,e,u,n.relativeContextFilePath,n.i18nUseExternalIds,n.defer,a,n.relativeTemplatePath,pz());zM(c,W.Tmpl);let l=HH(c,e);if(c.contentSelectors!==null&&r.set("ngContentSelectors",c.contentSelectors),r.set("decls",N(c.root.decls)),r.set("vars",N(c.root.vars)),c.consts.length>0&&(c.constsInitializers.length>0?r.set("consts",Ti([],[...c.constsInitializers,new _n(Ge(c.consts))])):r.set("consts",Ge(c.consts))),r.set("template",l),n.declarationListEmitMode!==3&&n.declarations.length>0)r.set("dependencies",N6(Ge(n.declarations.map(p=>p.type)),n.declarationListEmitMode));else if(n.declarationListEmitMode===3){let p=[n.type.value];n.rawImports&&p.push(n.rawImports),r.set("dependencies",ee(w.getComponentDepsFactory).callFn(p))}n.encapsulation===null&&(n.encapsulation=Va.Emulated);let d=!!n.externalStyles?.length;if(n.styles&&n.styles.length){let g=(n.encapsulation==Va.Emulated?U6(n.styles,M6,A6):n.styles).reduce((v,y)=>(y.trim().length>0&&v.push(e.getConstLiteral(N(y))),v),[]);g.length>0&&(d=!0,r.set("styles",Ge(g)))}!d&&n.encapsulation===Va.Emulated&&(n.encapsulation=Va.None),n.encapsulation!==Va.Emulated&&r.set("encapsulation",N(n.encapsulation)),n.animations!==null&&r.set("data",Qn([{key:"animation",value:n.animations,quoted:!1}])),n.changeDetection!==null&&(typeof n.changeDetection=="number"&&n.changeDetection!==mE.Default?r.set("changeDetection",N(n.changeDetection)):typeof n.changeDetection=="object"&&r.set("changeDetection",n.changeDetection));let h=ee(w.defineComponent).callFn([r.toLiteralMap()],void 0,!0),f=O6(n);return{expression:h,type:f,statements:[]}}function O6(n){let e=o1(n);return e.push(aE(n.template.ngContentSelectors)),e.push(bn(N(n.isStandalone))),e.push(a1(n)),n.isSignal&&e.push(bn(N(n.isSignal))),bn(ee(w.ComponentDeclaration,e))}function N6(n,e){switch(e){case 0:return n;case 1:return Ti([],n);case 2:let t=n.prop("map").callFn([ee(w.resolveForwardRef)]);return Ti([],t);case 3:throw new Error("Unsupported with an array of pre-resolved dependencies")}}function R6(n){return bn(N(n))}function oE(n){let e=Object.keys(n).map(t=>{let r=Array.isArray(n[t])?n[t][0]:n[t];return{key:t,value:N(r),quoted:!0}});return Qn(e)}function aE(n){return n.length>0?bn(Ge(n.map(e=>N(e)))):ss}function o1(n){let e=n.selector!==null?n.selector.replace(/\n/g,""):null;return[Kg(n.type.type,n.typeArgumentCount),e!==null?R6(e):ss,n.exportAs!==null?aE(n.exportAs):ss,bn(F6(n)),bn(oE(n.outputs)),aE(n.queries.map(t=>t.propertyName))]}function F6(n){return Qn(Object.keys(n.inputs).map(e=>{let t=n.inputs[e],r=[{key:"alias",value:N(t.bindingPropertyName),quoted:!0},{key:"required",value:N(t.required),quoted:!0}];return t.isSignal&&r.push({key:"isSignal",value:N(t.isSignal),quoted:!0}),{key:e,value:Qn(r),quoted:!0}}))}function L6(n){let e=o1(n);return e.push(ss),e.push(bn(N(n.isStandalone))),e.push(a1(n)),n.isSignal&&e.push(bn(N(n.isSignal))),bn(ee(w.DirectiveDeclaration,e))}function B6(n,e,t,r,i,s,o){let a=t.createBoundHostProperties(n.properties,e),u=t.createDirectiveHostEventAsts(n.listeners,e);n.specialAttributes.styleAttr&&(n.attributes.style=N(n.specialAttributes.styleAttr)),n.specialAttributes.classAttr&&(n.attributes.class=N(n.specialAttributes.classAttr));let c=YH({componentName:s,componentSelector:i,properties:a,events:u,attributes:n.attributes},t,r);zM(c,W.Host),o.set("hostAttrs",c.root.attributes);let l=c.root.vars;return l!==null&&l>0&&o.set("hostVars",N(l)),zH(c)}var $6=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;function V6(n){let e={},t={},r={},i={};for(let s of Object.keys(n)){let o=n[s],a=s.match($6);if(a===null)switch(s){case"class":if(typeof o!="string")throw new Error("Class binding must be string");i.classAttr=o;break;case"style":if(typeof o!="string")throw new Error("Style binding must be string");i.styleAttr=o;break;default:typeof o=="string"?e[s]=N(o):e[s]=o}else if(a[1]!=null){if(typeof o!="string")throw new Error("Property binding must be string");r[a[1]]=o}else if(a[2]!=null){if(typeof o!="string")throw new Error("Event binding must be string");t[a[2]]=o}}return{attributes:e,listeners:t,properties:r,specialAttributes:i}}function j6(n,e){let t=qg();return t.createDirectiveHostEventAsts(n.listeners,e),t.createBoundHostProperties(n.properties,e),t.errors}function U6(n,e,t){let r=new vw;return n.map(i=>r.shimCssText(i,e,t))}function a1(n){return n.hostDirectives?.length?bn(Ge(n.hostDirectives.map(e=>Qn([{key:"directive",value:Zh(e.directive.type),quoted:!1},{key:"inputs",value:oE(e.inputs||{}),quoted:!1},{key:"outputs",value:oE(e.outputs||{}),quoted:!1}])))):ss}function H6(n){let e=[],t=!1;for(let r of n){if(!r.inputs&&!r.outputs)e.push(r.directive.type);else{let i=[{key:"directive",value:r.directive.type,quoted:!1}];if(r.inputs){let s=TA(r.inputs);s&&i.push({key:"inputs",value:s,quoted:!1})}if(r.outputs){let s=TA(r.outputs);s&&i.push({key:"outputs",value:s,quoted:!1})}e.push(Qn(i))}r.isForwardReference&&(t=!0)}return t?new Mo([],[new _n(Ge(e))]):Ge(e)}function TA(n){let e=[];for(let t in n)n.hasOwnProperty(t)&&e.push(N(t),N(n[t]));return e.length>0?Ge(e):null}var uE=class extends Wc{visit(e){e instanceof gr?this.visit(e.ast):e.visit(this)}visitElement(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitTemplate(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.templateAttrs),this.visitAllTemplateNodes(e.variables),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitContent(e){this.visitAllTemplateNodes(e.children)}visitBoundAttribute(e){this.visit(e.value)}visitBoundEvent(e){this.visit(e.handler)}visitBoundText(e){this.visit(e.value)}visitIcu(e){Object.keys(e.vars).forEach(t=>this.visit(e.vars[t])),Object.keys(e.placeholders).forEach(t=>this.visit(e.placeholders[t]))}visitDeferredBlock(e){e.visitAll(this)}visitDeferredTrigger(e){e instanceof og?this.visit(e.value):e instanceof bh&&e.options!==null&&this.visit(e.options)}visitDeferredBlockPlaceholder(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockError(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockLoading(e){this.visitAllTemplateNodes(e.children)}visitSwitchBlock(e){this.visit(e.expression),this.visitAllTemplateNodes(e.cases)}visitSwitchBlockCase(e){e.expression&&this.visit(e.expression),this.visitAllTemplateNodes(e.children)}visitForLoopBlock(e){e.item.visit(this),this.visitAllTemplateNodes(e.contextVariables),this.visit(e.expression),this.visitAllTemplateNodes(e.children),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.visitAllTemplateNodes(e.children)}visitIfBlock(e){this.visitAllTemplateNodes(e.branches)}visitIfBlockBranch(e){e.expression&&this.visit(e.expression),e.expressionAlias?.visit(this),this.visitAllTemplateNodes(e.children)}visitLetDeclaration(e){this.visit(e.value)}visitComponent(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitDirective(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.references)}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitText(e){}visitUnknownBlock(e){}visitAllTemplateNodes(e){for(let t of e)this.visit(t)}};var cE=class{directiveMatcher;constructor(e){this.directiveMatcher=e}bind(e){if(!e.template&&!e.host)throw new Error("Empty bound targets are not supported");let t=new Map,r=[],i=new Set,s=new Map,o=new Map,a=new Map,u=new Map,c=new Map,l=new Map,d=new Set,h=new Set,f=[];if(e.template){let p=Wg.apply(e.template);z6(p,a),lE.apply(e.template,this.directiveMatcher,t,r,i,s,o),Gg.applyWithScope(e.template,p,u,c,l,d,h,f)}return e.host&&(t.set(e.host.node,e.host.directives),Gg.applyWithScope(e.host.node,Wg.apply(e.host.node),u,c,l,d,h,f)),new dE(e,t,r,i,s,o,u,c,l,a,d,h,f)}},Wg=class n{parentScope;rootNode;namedEntities=new Map;elementLikeInScope=new Set;childScopes=new Map;isDeferred;constructor(e,t){this.parentScope=e,this.rootNode=t,this.isDeferred=e!==null&&e.isDeferred?!0:t instanceof lu}static newRootScope(){return new n(null,null)}static apply(e){let t=n.newRootScope();return t.ingest(e),t}ingest(e){e instanceof Vr?(e.variables.forEach(t=>this.visitVariable(t)),e.children.forEach(t=>t.visit(this))):e instanceof Qa?(e.expressionAlias!==null&&this.visitVariable(e.expressionAlias),e.children.forEach(t=>t.visit(this))):e instanceof Kc?(this.visitVariable(e.item),e.contextVariables.forEach(t=>this.visitVariable(t)),e.children.forEach(t=>t.visit(this))):e instanceof xh||e instanceof Dh||e instanceof lu||e instanceof Ch||e instanceof wh||e instanceof Eh||e instanceof Qc?e.children.forEach(t=>t.visit(this)):e instanceof Ih||e.forEach(t=>t.visit(this))}visitElement(e){this.visitElementLike(e)}visitTemplate(e){e.directives.forEach(t=>t.visit(this)),e.references.forEach(t=>this.visitReference(t)),this.ingestScopedNode(e)}visitVariable(e){this.maybeDeclare(e)}visitReference(e){this.maybeDeclare(e)}visitDeferredBlock(e){this.ingestScopedNode(e),e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlock(e){e.cases.forEach(t=>t.visit(this))}visitSwitchBlockCase(e){this.ingestScopedNode(e)}visitForLoopBlock(e){this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlock(e){e.branches.forEach(t=>t.visit(this))}visitIfBlockBranch(e){this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){this.maybeDeclare(e)}visitComponent(e){this.visitElementLike(e)}visitDirective(e){e.references.forEach(t=>this.visitReference(t))}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundText(e){}visitText(e){}visitTextAttribute(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitElementLike(e){e.directives.forEach(t=>t.visit(this)),e.references.forEach(t=>this.visitReference(t)),e.children.forEach(t=>t.visit(this)),this.elementLikeInScope.add(e)}maybeDeclare(e){this.namedEntities.has(e.name)||this.namedEntities.set(e.name,e)}lookup(e){return this.namedEntities.has(e)?this.namedEntities.get(e):this.parentScope!==null?this.parentScope.lookup(e):null}getChildScope(e){let t=this.childScopes.get(e);if(t===void 0)throw new Error(`Assertion error: child scope for ${e} not found`);return t}ingestScopedNode(e){let t=new n(this,e);t.ingest(e),this.childScopes.set(e,t)}},lE=class n{directiveMatcher;directives;eagerDirectives;missingDirectives;bindings;references;isInDeferBlock=!1;constructor(e,t,r,i,s,o){this.directiveMatcher=e,this.directives=t,this.eagerDirectives=r,this.missingDirectives=i,this.bindings=s,this.references=o}static apply(e,t,r,i,s,o,a){new n(t,r,i,s,o,a).ingest(e)}ingest(e){e.forEach(t=>t.visit(this))}visitElement(e){this.visitElementOrTemplate(e)}visitTemplate(e){this.visitElementOrTemplate(e)}visitDeferredBlock(e){let t=this.isInDeferBlock;this.isInDeferBlock=!0,e.children.forEach(r=>r.visit(this)),this.isInDeferBlock=t,e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){e.children.forEach(t=>t.visit(this))}visitDeferredBlockError(e){e.children.forEach(t=>t.visit(this))}visitDeferredBlockLoading(e){e.children.forEach(t=>t.visit(this))}visitSwitchBlock(e){e.cases.forEach(t=>t.visit(this))}visitSwitchBlockCase(e){e.children.forEach(t=>t.visit(this))}visitForLoopBlock(e){e.item.visit(this),e.contextVariables.forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this)),e.empty?.visit(this)}visitForLoopBlockEmpty(e){e.children.forEach(t=>t.visit(this))}visitIfBlock(e){e.branches.forEach(t=>t.visit(this))}visitIfBlockBranch(e){e.expressionAlias?.visit(this),e.children.forEach(t=>t.visit(this))}visitContent(e){e.children.forEach(t=>t.visit(this))}visitComponent(e){if(this.directiveMatcher instanceof Vm){let t=this.directiveMatcher.match(e.componentName);t.length>0?this.trackSelectorlessMatchesAndDirectives(e,t):this.missingDirectives.add(e.componentName)}e.directives.forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this))}visitDirective(e){if(this.directiveMatcher instanceof Vm){let t=this.directiveMatcher.match(e.name);t.length>0?this.trackSelectorlessMatchesAndDirectives(e,t):this.missingDirectives.add(e.name)}}visitElementOrTemplate(e){if(this.directiveMatcher instanceof $m){let t=[],r=zB(e);this.directiveMatcher.match(r,(i,s)=>t.push(...s)),this.trackSelectorBasedBindingsAndDirectives(e,t)}else e.references.forEach(t=>{t.value.trim()===""&&this.references.set(t,e)});e.directives.forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this))}trackMatchedDirectives(e,t){t.length>0&&(this.directives.set(e,t),this.isInDeferBlock||this.eagerDirectives.push(...t))}trackSelectorlessMatchesAndDirectives(e,t){if(t.length===0)return;this.trackMatchedDirectives(e,t);let r=(i,s,o)=>{i[o].hasBindingPropertyName(s.name)&&this.bindings.set(s,i)};for(let i of t)e.inputs.forEach(s=>r(i,s,"inputs")),e.attributes.forEach(s=>r(i,s,"inputs")),e.outputs.forEach(s=>r(i,s,"outputs"));e.references.forEach(i=>this.references.set(i,{directive:t[0],node:e}))}trackSelectorBasedBindingsAndDirectives(e,t){this.trackMatchedDirectives(e,t),e.references.forEach(i=>{let s=null;if(i.value.trim()==="")s=t.find(o=>o.isComponent)||null;else if(s=t.find(o=>o.exportAs!==null&&o.exportAs.some(a=>a===i.value))||null,s===null)return;s!==null?this.references.set(i,{directive:s,node:e}):this.references.set(i,e)});let r=(i,s)=>{let o=t.find(u=>u[s].hasBindingPropertyName(i.name)),a=o!==void 0?o:e;this.bindings.set(i,a)};e.inputs.forEach(i=>r(i,"inputs")),e.attributes.forEach(i=>r(i,"inputs")),e instanceof Vr&&e.templateAttrs.forEach(i=>r(i,"inputs")),e.outputs.forEach(i=>r(i,"outputs"))}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundAttributeOrEvent(e){}visitText(e){}visitBoundText(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitLetDeclaration(e){}},Gg=class n extends uE{bindings;symbols;usedPipes;eagerPipes;deferBlocks;nestingLevel;scope;rootNode;level;visitNode=e=>e.visit(this);constructor(e,t,r,i,s,o,a,u,c){super(),this.bindings=e,this.symbols=t,this.usedPipes=r,this.eagerPipes=i,this.deferBlocks=s,this.nestingLevel=o,this.scope=a,this.rootNode=u,this.level=c}static applyWithScope(e,t,r,i,s,o,a,u){let c=e instanceof Vr?e:null;new n(r,i,o,a,u,s,t,c,0).ingest(e)}ingest(e){if(e instanceof Vr)e.variables.forEach(this.visitNode),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof Qa)e.expressionAlias!==null&&this.visitNode(e.expressionAlias),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof Kc)this.visitNode(e.item),e.contextVariables.forEach(t=>this.visitNode(t)),e.trackBy.visit(this),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof lu){if(this.scope.rootNode!==e)throw new Error(`Assertion error: resolved incorrect scope for deferred block ${e}`);this.deferBlocks.push([e,this.scope]),e.children.forEach(t=>t.visit(this)),this.nestingLevel.set(e,this.level)}else e instanceof xh||e instanceof Dh||e instanceof Ch||e instanceof wh||e instanceof Eh||e instanceof Qc?(e.children.forEach(t=>t.visit(this)),this.nestingLevel.set(e,this.level)):e instanceof Ih?this.nestingLevel.set(e,0):e.forEach(this.visitNode)}visitTemplate(e){e.inputs.forEach(this.visitNode),e.outputs.forEach(this.visitNode),e.directives.forEach(this.visitNode),e.templateAttrs.forEach(this.visitNode),e.references.forEach(this.visitNode),this.ingestScopedNode(e)}visitVariable(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitReference(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitDeferredBlock(e){this.ingestScopedNode(e),e.triggers.when?.value.visit(this),e.prefetchTriggers.when?.value.visit(this),e.hydrateTriggers.when?.value.visit(this),e.hydrateTriggers.never?.visit(this),e.placeholder&&this.visitNode(e.placeholder),e.loading&&this.visitNode(e.loading),e.error&&this.visitNode(e.error)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlockCase(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitForLoopBlock(e){e.expression.visit(this),this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlockBranch(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){super.visitLetDeclaration(e),this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitPipe(e,t){return this.usedPipes.add(e.name),this.scope.isDeferred||this.eagerPipes.add(e.name),super.visitPipe(e,t)}visitPropertyRead(e,t){return this.maybeMap(e,e.name),super.visitPropertyRead(e,t)}visitSafePropertyRead(e,t){return this.maybeMap(e,e.name),super.visitSafePropertyRead(e,t)}ingestScopedNode(e){let t=this.scope.getChildScope(e);new n(this.bindings,this.symbols,this.usedPipes,this.eagerPipes,this.deferBlocks,this.nestingLevel,t,e,this.level+1).ingest(e)}maybeMap(e,t){if(!(e.receiver instanceof Ai)||e.receiver instanceof Po)return;let r=this.scope.lookup(t);r!==null&&this.bindings.set(e,r)}},dE=class{target;directives;eagerDirectives;missingDirectives;bindings;references;exprTargets;symbols;nestingLevel;scopedNodeEntities;usedPipes;eagerPipes;deferredBlocks;deferredScopes;constructor(e,t,r,i,s,o,a,u,c,l,d,h,f){this.target=e,this.directives=t,this.eagerDirectives=r,this.missingDirectives=i,this.bindings=s,this.references=o,this.exprTargets=a,this.symbols=u,this.nestingLevel=c,this.scopedNodeEntities=l,this.usedPipes=d,this.eagerPipes=h,this.deferredBlocks=f.map(p=>p[0]),this.deferredScopes=new Map(f)}getEntitiesInScope(e){return this.scopedNodeEntities.get(e)??new Set}getDirectivesOfNode(e){return this.directives.get(e)||null}getReferenceTarget(e){return this.references.get(e)||null}getConsumerOfBinding(e){return this.bindings.get(e)||null}getExpressionTarget(e){return this.exprTargets.get(e)||null}getDefinitionNodeOfSymbol(e){return this.symbols.get(e)||null}getNestingLevel(e){return this.nestingLevel.get(e)||0}getUsedDirectives(){let e=new Set;return this.directives.forEach(t=>t.forEach(r=>e.add(r))),Array.from(e.values())}getEagerlyUsedDirectives(){let e=new Set(this.eagerDirectives);return Array.from(e.values())}getUsedPipes(){return Array.from(this.usedPipes)}getEagerlyUsedPipes(){return Array.from(this.eagerPipes)}getDeferBlocks(){return this.deferredBlocks}getDeferredTriggerTarget(e,t){if(!(t instanceof ug)&&!(t instanceof bh)&&!(t instanceof ag))return null;let r=t.reference;if(r===null){let s=null;if(e.placeholder!==null){for(let o of e.placeholder.children)if(!(o instanceof Qg)){if(s!==null)return null;o instanceof us&&(s=o)}}return s}let i=this.findEntityInScope(e,r);if(i instanceof Sh&&this.getDefinitionNodeOfSymbol(i)!==e){let s=this.getReferenceTarget(i);if(s!==null)return this.referenceTargetToElement(s)}if(e.placeholder!==null){let s=this.findEntityInScope(e.placeholder,r),o=s instanceof Sh?this.getReferenceTarget(s):null;if(o!==null)return this.referenceTargetToElement(o)}return null}isDeferred(e){for(let t of this.deferredBlocks){if(!this.deferredScopes.has(t))continue;let r=[this.deferredScopes.get(t)];for(;r.length>0;){let i=r.pop();if(i.elementLikeInScope.has(e))return!0;r.push(...i.childScopes.values())}}return!1}referencedDirectiveExists(e){return!this.missingDirectives.has(e)}findEntityInScope(e,t){let r=this.getEntitiesInScope(e);for(let i of r)if(i.name===t)return i;return null}referenceTargetToElement(e){return e instanceof us?e:e instanceof Vr||e.node instanceof Xd||e.node instanceof HA||e.node instanceof Ih?null:this.referenceTargetToElement(e.node)}};function z6(n,e){let t=new Map;function r(s){if(t.has(s.rootNode))return t.get(s.rootNode);let o=s.namedEntities,a;return s.parentScope!==null?a=new Map([...r(s.parentScope),...o]):a=new Map(o),t.set(s.rootNode,a),a}let i=[n];for(;i.length>0;){let s=i.pop();for(let o of s.childScopes.values())i.push(o);r(s)}for(let[s,o]of t)e.set(s,new Set(o.values()))}var hE=class{},fE=class{jitEvaluator;FactoryTarget=js;ResourceLoader=hE;elementSchemaRegistry=new il;constructor(e=new pw){this.jitEvaluator=e}compilePipe(e,t,r){let i={name:r.name,type:Xt(r.type),typeArgumentCount:0,deps:null,pipeName:r.pipeName,pure:r.pure,isStandalone:r.isStandalone},s=vT(i);return this.jitExpression(s.expression,e,t,[])}compilePipeDeclaration(e,t,r){let i=aq(r),s=vT(i);return this.jitExpression(s.expression,e,t,[])}compileInjectable(e,t,r){let{expression:i,statements:s}=aT({name:r.name,type:Xt(r.type),typeArgumentCount:r.typeArgumentCount,providedIn:NA(r.providedIn),useClass:Ac(r,"useClass"),useFactory:OA(r,"useFactory"),useValue:Ac(r,"useValue"),useExisting:Ac(r,"useExisting"),deps:r.deps?.map(d1)},!0);return this.jitExpression(i,e,t,s)}compileInjectableDeclaration(e,t,r){let{expression:i,statements:s}=aT({name:r.type.name,type:Xt(r.type),typeArgumentCount:0,providedIn:NA(r.providedIn),useClass:Ac(r,"useClass"),useFactory:OA(r,"useFactory"),useValue:Ac(r,"useValue"),useExisting:Ac(r,"useExisting"),deps:r.deps?.map(RA)},!0);return this.jitExpression(i,e,t,s)}compileInjector(e,t,r){let i={name:r.name,type:Xt(r.type),providers:r.providers&&r.providers.length>0?new Oe(r.providers):null,imports:r.imports.map(o=>new Oe(o))},s=gT(i);return this.jitExpression(s.expression,e,t,[])}compileInjectorDeclaration(e,t,r){let i=uq(r),s=gT(i);return this.jitExpression(s.expression,e,t,[])}compileNgModule(e,t,r){let i={kind:Ao.Global,type:Xt(r.type),bootstrap:r.bootstrap.map(Xt),declarations:r.declarations.map(Xt),publicDeclarationTypes:null,imports:r.imports.map(Xt),includeImportTypes:!0,exports:r.exports.map(Xt),selectorScopeMode:vg.Inline,containsForwardDecls:!1,schemas:r.schemas?r.schemas.map(Xt):null,id:r.id?new Oe(r.id):null},s=l$(i);return this.jitExpression(s.expression,e,t,[])}compileNgModuleDeclaration(e,t,r){let i=d$(r);return this.jitExpression(i,e,t,[])}compileDirective(e,t,r){let i=kA(r);return this.compileDirectiveFromMeta(e,t,i)}compileDirectiveDeclaration(e,t,r){let i=this.createParseSourceSpan("Directive",r.type.name,t),s=c1(r,i);return this.compileDirectiveFromMeta(e,t,s)}compileDirectiveFromMeta(e,t,r){let i=new Qm,s=qg(),o=k6(r,i,s);return this.jitExpression(o.expression,e,t,i.statements)}compileComponent(e,t,r){let{template:i,defer:s}=l1(r.template,r.name,t,r.preserveWhitespaces,void 0),o=J(C(C({},r),kA(r)),{selector:r.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:i,declarations:r.declarations.map(Y6),declarationListEmitMode:0,defer:s,styles:[...r.styles,...i.styles],encapsulation:r.encapsulation,changeDetection:r.changeDetection??null,animations:r.animations!=null?new Oe(r.animations):null,viewProviders:r.viewProviders!=null?new Oe(r.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null}),a=`ng:///${r.name}.js`;return this.compileComponentFromMeta(e,a,o)}compileComponentDeclaration(e,t,r){let i=this.createParseSourceSpan("Component",r.type.name,t),s=G6(r,i,t);return this.compileComponentFromMeta(e,t,s)}compileComponentFromMeta(e,t,r){let i=new Qm,s=qg(),o=P6(r,i,s);return this.jitExpression(o.expression,e,t,i.statements)}compileFactory(e,t,r){let i=ja({name:r.name,type:Xt(r.type),typeArgumentCount:r.typeArgumentCount,deps:X6(r.deps),target:r.target});return this.jitExpression(i.expression,e,t,i.statements)}compileFactoryDeclaration(e,t,r){let i=ja({name:r.type.name,type:Xt(r.type),typeArgumentCount:0,deps:Array.isArray(r.deps)?r.deps.map(RA):r.deps,target:r.target});return this.jitExpression(i.expression,e,t,i.statements)}createParseSourceSpan(e,t,r){return r$(e,t,r)}jitExpression(e,t,r,i){let s=[...i,new qt("$def",e,void 0,an.Exported)];return this.jitEvaluator.evaluateStatements(r,s,new gw(t),!0).$def}};function AA(n){return J(C({},n),{isSignal:n.isSignal,predicate:u1(n.predicate),read:n.read?new Oe(n.read):null,static:n.static,emitDistinctChangesOnly:n.emitDistinctChangesOnly})}function MA(n){return{propertyName:n.propertyName,first:n.first??!1,predicate:u1(n.predicate),descendants:n.descendants??!1,read:n.read?new Oe(n.read):null,static:n.static??!1,emitDistinctChangesOnly:n.emitDistinctChangesOnly??!0,isSignal:!!n.isSignal}}function u1(n){return Array.isArray(n)?n:bE(new Oe(n),1)}function kA(n){let e=oq(n.inputs||[]),t=Ub(n.outputs||[]),r=n.propMetadata,i={},s={};for(let a in r)r.hasOwnProperty(a)&&r[a].forEach(u=>{nq(u)?i[a]={bindingPropertyName:u.alias||a,classPropertyName:a,required:u.required||!1,isSignal:!!u.isSignal,transformFunction:u.transform!=null?new Oe(u.transform):null}:rq(u)&&(s[a]=u.alias||a)});let o=n.hostDirectives?.length?n.hostDirectives.map(a=>typeof a=="function"?{directive:Xt(a),inputs:null,outputs:null,isForwardReference:!1}:{directive:Xt(a.directive),isForwardReference:!1,inputs:a.inputs?Ub(a.inputs):null,outputs:a.outputs?Ub(a.outputs):null}):null;return J(C({},n),{typeArgumentCount:0,typeSourceSpan:n.typeSourceSpan,type:Xt(n.type),deps:null,host:C({},J6(n.propMetadata,n.typeSourceSpan,n.host)),inputs:C(C({},e),i),outputs:C(C({},t),s),queries:n.queries.map(AA),providers:n.providers!=null?new Oe(n.providers):null,viewQueries:n.viewQueries.map(AA),hostDirectives:o})}function c1(n,e){let t=n.hostDirectives?.length?n.hostDirectives.map(r=>({directive:Xt(r.directive),isForwardReference:!1,inputs:r.inputs?PA(r.inputs):null,outputs:r.outputs?PA(r.outputs):null})):null;return{name:n.type.name,type:Xt(n.type),typeSourceSpan:e,selector:n.selector??null,inputs:n.inputs?iq(n.inputs):{},outputs:n.outputs??{},host:q6(n.host),queries:(n.queries??[]).map(MA),viewQueries:(n.viewQueries??[]).map(MA),providers:n.providers!==void 0?new Oe(n.providers):null,exportAs:n.exportAs??null,usesInheritance:n.usesInheritance??!1,lifecycle:{usesOnChanges:n.usesOnChanges??!1},deps:null,typeArgumentCount:0,isStandalone:n.isStandalone??UA(n.version),isSignal:n.isSignal??!1,hostDirectives:t}}function q6(n={}){return{attributes:W6(n.attributes??{}),listeners:n.listeners??{},properties:n.properties??{},specialAttributes:{classAttr:n.classAttribute,styleAttr:n.styleAttribute}}}function PA(n){let e=null;for(let t=1;t<n.length;t+=2)e=e||{},e[n[t-1]]=n[t];return e}function W6(n){let e={};for(let t of Object.keys(n))e[t]=new Oe(n[t]);return e}function G6(n,e,t){let{template:r,defer:i}=l1(n.template,n.type.name,t,n.preserveWhitespaces??!1,n.deferBlockDependencies),s=[];if(n.dependencies)for(let a of n.dependencies)switch(a.kind){case"directive":case"component":s.push(jb(a));break;case"pipe":s.push(Q6(a));break}else(n.components||n.directives||n.pipes)&&(n.components&&s.push(...n.components.map(a=>jb(a,!0))),n.directives&&s.push(...n.directives.map(a=>jb(a))),n.pipes&&s.push(...K6(n.pipes)));let o=s.some(({kind:a})=>a===Zc.Directive||a===Zc.NgModule);return J(C({},c1(n,e)),{template:r,styles:n.styles??[],declarations:s,viewProviders:n.viewProviders!==void 0?new Oe(n.viewProviders):null,animations:n.animations!==void 0?new Oe(n.animations):null,defer:i,changeDetection:n.changeDetection??mE.Default,encapsulation:n.encapsulation??Va.Emulated,declarationListEmitMode:2,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null,hasDirectiveDependencies:o})}function Y6(n){return J(C({},n),{type:new Oe(n.type)})}function jb(n,e=null){return{kind:Zc.Directive,isComponent:e||n.kind==="component",selector:n.selector,type:new Oe(n.type),inputs:n.inputs??[],outputs:n.outputs??[],exportAs:n.exportAs??null}}function K6(n){return n?Object.keys(n).map(e=>({kind:Zc.Pipe,name:e,type:new Oe(n[e])})):[]}function Q6(n){return{kind:Zc.Pipe,name:n.name,type:new Oe(n.type)}}function l1(n,e,t,r,i){let s=I6(n,t,{preserveWhitespaces:r});if(s.errors!==null){let u=s.errors.map(c=>c.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${e}: ${u}`)}let a=new cE(null).bind({template:s.nodes});return{template:s,defer:Z6(a,i)}}function Ac(n,e){if(n.hasOwnProperty(e))return bE(new Oe(n[e]),0)}function OA(n,e){if(n.hasOwnProperty(e))return new Oe(n[e])}function NA(n){let e=typeof n=="function"?new Oe(n):new wn(n??null);return bE(e,0)}function X6(n){return n==null?null:n.map(d1)}function d1(n){let e=n.attribute!=null,t=n.token===null?null:new Oe(n.token),r=e?new Oe(n.attribute):t;return h1(r,e,n.host,n.optional,n.self,n.skipSelf)}function RA(n){let e=n.attribute??!1,t=n.token===null?null:new Oe(n.token);return h1(t,e,n.host??!1,n.optional??!1,n.self??!1,n.skipSelf??!1)}function h1(n,e,t,r,i,s){let o=e?N("unknown"):null;return{token:n,attributeNameType:o,host:t,optional:r,self:i,skipSelf:s}}function Z6(n,e){let t=n.getDeferBlocks(),r=new Map;for(let i=0;i<t.length;i++){let s=e?.[i];r.set(t[i],s?new Oe(s):null)}return{mode:0,blocks:r}}function J6(n,e,t){let r=V6(t||{}),i=j6(r,e);if(i.length)throw new Error(i.map(s=>s.msg).join(`
`));for(let s in n)n.hasOwnProperty(s)&&n[s].forEach(o=>{eq(o)?r.properties[o.hostPropertyName||s]=SB("this",s):tq(o)&&(r.listeners[o.eventName||s]=`${s}(${(o.args||[]).join(",")})`)});return r}function eq(n){return n.ngMetadataName==="HostBinding"}function tq(n){return n.ngMetadataName==="HostListener"}function nq(n){return n.ngMetadataName==="Input"}function rq(n){return n.ngMetadataName==="Output"}function iq(n){return Object.keys(n).reduce((e,t)=>{let r=n[t];return typeof r=="string"||Array.isArray(r)?e[t]=sq(r):e[t]={bindingPropertyName:r.publicName,classPropertyName:t,transformFunction:r.transformFunction!==null?new Oe(r.transformFunction):null,required:r.isRequired,isSignal:r.isSignal},e},{})}function sq(n){return typeof n=="string"?{bindingPropertyName:n,classPropertyName:n,transformFunction:null,required:!1,isSignal:!1}:{bindingPropertyName:n[0],classPropertyName:n[1],transformFunction:n[2]?new Oe(n[2]):null,required:!1,isSignal:!1}}function oq(n){return n.reduce((e,t)=>{if(typeof t=="string"){let[r,i]=f1(t);e[i]={bindingPropertyName:r,classPropertyName:i,required:!1,isSignal:!1,transformFunction:null}}else e[t.name]={bindingPropertyName:t.alias||t.name,classPropertyName:t.name,required:t.required||!1,isSignal:!1,transformFunction:t.transform!=null?new Oe(t.transform):null};return e},{})}function Ub(n){return n.reduce((e,t)=>{let[r,i]=f1(t);return e[i]=r,e},{})}function f1(n){let[e,t]=n.split(":",2).map(r=>r.trim());return[t??e,e]}function aq(n){return{name:n.type.name,type:Xt(n.type),typeArgumentCount:0,pipeName:n.name,deps:null,pure:n.pure??!0,isStandalone:n.isStandalone??UA(n.version)}}function uq(n){return{name:n.type.name,type:Xt(n.type),providers:n.providers!==void 0&&n.providers.length>0?new Oe(n.providers):null,imports:n.imports!==void 0?n.imports.map(e=>new Oe(e)):[]}}function cq(n){let e=n.ng||(n.ng={});e.\u0275compilerFacade=new fE}var pE=class{closedByParent=!1;implicitNamespacePrefix=null;isVoid=!1;ignoreFirstLf=!1;canSelfClose=!0;preventNamespaceInheritance=!1;requireExtraParent(e){return!1}isClosedByChild(e){return!1}getContentType(){return es.PARSABLE_DATA}},Tse=new pE;var Ase=new Yb("21.0.6");cq(Qd);var Rn=null,n0=!1,zE=1,lq=null,Zn=Symbol("SIGNAL");function ve(n){let e=Rn;return Rn=n,e}function i0(){return Rn}var ll={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nf(n){if(n0)throw new Error("");if(Rn===null)return;Rn.consumerOnSignalRead(n);let e=Rn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Rn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Rn.producers,t!==void 0&&t.producer===n)){Rn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Rn&&(!r||hq(i,Rn)))return;let s=hl(Rn),o={producer:n,consumer:Rn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Rn.producersTail=o,e!==void 0?e.nextProducer=o:Rn.producers=o,s&&v1(n,o)}function p1(){zE++}function qE(n){if(!(hl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===zE)){if(!n.producerMustRecompute(n)&&!sf(n)){HE(n);return}n.producerRecomputeValue(n),HE(n)}}function WE(n){if(n.consumers===void 0)return;let e=n0;n0=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||dq(r)}}finally{n0=e}}function GE(){return Rn?.consumerAllowSignalWrites!==!1}function dq(n){n.dirty=!0,WE(n),n.consumerMarkedDirty?.(n)}function HE(n){n.dirty=!1,n.lastCleanEpoch=zE}function dl(n){return n&&m1(n),ve(n)}function m1(n){n.producersTail=void 0,n.recomputing=!0}function rf(n,e){ve(e),n&&g1(n)}function g1(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(hl(n))do t=YE(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function sf(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(qE(t),r!==t.version))return!0}return!1}function yu(n){if(hl(n)){let e=n.producers;for(;e!==void 0;)e=YE(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function v1(n,e){let t=n.consumersTail,r=hl(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)v1(i.producer,i)}function YE(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!hl(e)){let s=e.producers;for(;s!==void 0;)s=YE(s)}return t}function hl(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function KE(n){lq?.(n)}function hq(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function QE(n,e){return Object.is(n,e)}function s0(n,e){let t=Object.create(fq);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(qE(t),nf(t),t.value===r0)throw t.error;return t.value};return r[Zn]=t,KE(t),r}var jE=Symbol("UNSET"),UE=Symbol("COMPUTING"),r0=Symbol("ERRORED"),fq=J(C({},ll),{value:jE,dirty:!0,error:null,equal:QE,kind:"computed",producerMustRecompute(n){return n.value===jE||n.value===UE},producerRecomputeValue(n){if(n.value===UE)throw new Error("");let e=n.value;n.value=UE;let t=dl(n),r,i=!1;try{r=n.computation(),ve(null),i=e!==jE&&e!==r0&&r!==r0&&n.equal(e,r)}catch(s){r=r0,n.error=s}finally{rf(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function pq(){throw new Error}var y1=pq;function _1(n){y1(n)}function XE(n){y1=n}var mq=null;function ZE(n,e){let t=Object.create(o0);t.value=n,e!==void 0&&(t.equal=e);let r=()=>b1(t);return r[Zn]=t,KE(t),[r,o=>of(t,o),o=>w1(t,o)]}function b1(n){return nf(n),n.value}function of(n,e){GE()||_1(n),n.equal(n.value,e)||(n.value=e,gq(n))}function w1(n,e){GE()||_1(n),of(n,e(n.value))}var o0=J(C({},ll),{equal:QE,value:void 0,kind:"signal"});function gq(n){n.version++,p1(),WE(n),mq?.(n)}function JE(n){let e=ve(null);try{return n()}finally{ve(e)}}var eC=J(C({},ll),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function tC(n){if(n.dirty=!1,n.version>0&&!sf(n))return;n.version++;let e=dl(n);try{n.cleanup(),n.fn()}finally{rf(n,e)}}function Pe(n){return typeof n=="function"}function fl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var a0=fl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function af(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Cn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Pe(r))try{r()}catch(s){e=s instanceof a0?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{E1(s)}catch(o){e=e??[],o instanceof a0?e=[...e,...o.errors]:e.push(o)}}if(e)throw new a0(e)}}add(e){var t;if(e&&e!==this)if(this.closed)E1(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&af(t,e)}remove(e){let{_finalizers:t}=this;t&&af(t,e),e instanceof n&&e._removeParent(this)}};Cn.EMPTY=(()=>{let n=new Cn;return n.closed=!0,n})();var nC=Cn.EMPTY;function u0(n){return n instanceof Cn||n&&"closed"in n&&Pe(n.remove)&&Pe(n.add)&&Pe(n.unsubscribe)}function E1(n){Pe(n)?n():n.unsubscribe()}var ki={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pl={setTimeout(n,e,...t){let{delegate:r}=pl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=pl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function c0(n){pl.setTimeout(()=>{let{onUnhandledError:e}=ki;if(e)e(n);else throw n})}function uf(){}var C1=rC("C",void 0,void 0);function x1(n){return rC("E",void 0,n)}function D1(n){return rC("N",n,void 0)}function rC(n,e,t){return{kind:n,value:e,error:t}}var _u=null;function ml(n){if(ki.useDeprecatedSynchronousErrorHandling){let e=!_u;if(e&&(_u={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=_u;if(_u=null,t)throw r}}else n()}function S1(n){ki.useDeprecatedSynchronousErrorHandling&&_u&&(_u.errorThrown=!0,_u.error=n)}var bu=class extends Cn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,u0(e)&&e.add(this)):this.destination=_q}static create(e,t,r){return new gl(e,t,r)}next(e){this.isStopped?sC(D1(e),this):this._next(e)}error(e){this.isStopped?sC(x1(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sC(C1,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vq=Function.prototype.bind;function iC(n,e){return vq.call(n,e)}var oC=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){l0(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){l0(r)}else l0(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){l0(t)}}},gl=class extends bu{constructor(e,t,r){super();let i;if(Pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ki.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&iC(e.next,s),error:e.error&&iC(e.error,s),complete:e.complete&&iC(e.complete,s)}):i=e}this.destination=new oC(i)}};function l0(n){ki.useDeprecatedSynchronousErrorHandling?S1(n):c0(n)}function yq(n){throw n}function sC(n,e){let{onStoppedNotification:t}=ki;t&&pl.setTimeout(()=>t(n,e))}var _q={closed:!0,next:uf,error:yq,complete:uf};var vl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pi(n){return n}function aC(...n){return uC(n)}function uC(n){return n.length===0?Pi:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=wq(t)?t:new gl(t,r,i);return ml(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=I1(r),new r((i,s)=>{let o=new gl({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[vl](){return this}pipe(...t){return uC(t)(this)}toPromise(t){return t=I1(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function I1(n){var e;return(e=n??ki.Promise)!==null&&e!==void 0?e:Promise}function bq(n){return n&&Pe(n.next)&&Pe(n.error)&&Pe(n.complete)}function wq(n){return n&&n instanceof bu||bq(n)&&u0(n)}function Eq(n){return Pe(n?.lift)}function ot(n){return e=>{if(Eq(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function at(n,e,t,r,i){return new cC(n,e,t,r,i)}var cC=class extends bu{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var T1=fl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Wt=(()=>{class n extends Ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new d0(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new T1}next(t){ml(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ml(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ml(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?nC:(this.currentObservers=null,s.push(t),new Cn(()=>{this.currentObservers=null,af(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Ye;return t.source=this,t}}return n.create=(e,t)=>new d0(e,t),n})(),d0=class extends Wt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:nC}};var xn=class extends Wt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var wr=new Ye(n=>n.complete());function A1(n){return n&&Pe(n.schedule)}function M1(n){return n[n.length-1]}function h0(n){return Pe(M1(n))?n.pop():void 0}function zo(n){return A1(M1(n))?n.pop():void 0}function Eu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function f0(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})}function k1(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wu(n){return this instanceof wu?(this.v=n,this):new wu(n)}function P1(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(v,y){s.push([f,g,v,y])>1||u(f,g)})},p&&(i[f]=p(i[f])))}function u(f,p){try{c(r[f](p))}catch(g){h(s[0][3],g)}}function c(f){f.value instanceof wu?Promise.resolve(f.value.v).then(l,d):h(s[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function h(f,p){f(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function O1(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof k1=="function"?k1(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}var p0=n=>n&&typeof n.length=="number"&&typeof n!="function";function m0(n){return Pe(n?.then)}function g0(n){return Pe(n[vl])}function v0(n){return Symbol.asyncIterator&&Pe(n?.[Symbol.asyncIterator])}function y0(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Cq(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _0=Cq();function b0(n){return Pe(n?.[_0])}function w0(n){return P1(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield wu(t.read());if(i)return yield wu(void 0);yield yield wu(r)}}finally{t.releaseLock()}})}function E0(n){return Pe(n?.getReader)}function Gt(n){if(n instanceof Ye)return n;if(n!=null){if(g0(n))return xq(n);if(p0(n))return Dq(n);if(m0(n))return Sq(n);if(v0(n))return N1(n);if(b0(n))return Iq(n);if(E0(n))return Tq(n)}throw y0(n)}function xq(n){return new Ye(e=>{let t=n[vl]();if(Pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Dq(n){return new Ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Sq(n){return new Ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,c0)})}function Iq(n){return new Ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function N1(n){return new Ye(e=>{Aq(n,e).catch(t=>e.error(t))})}function Tq(n){return N1(w0(n))}function Aq(n,e){var t,r,i,s;return f0(this,void 0,void 0,function*(){try{for(t=O1(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Er(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function C0(n,e=0){return ot((t,r)=>{t.subscribe(at(r,i=>Er(r,n,()=>r.next(i),e),()=>Er(r,n,()=>r.complete(),e),i=>Er(r,n,()=>r.error(i),e)))})}function x0(n,e=0){return ot((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function R1(n,e){return Gt(n).pipe(x0(e),C0(e))}function F1(n,e){return Gt(n).pipe(x0(e),C0(e))}function L1(n,e){return new Ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function B1(n,e){return new Ye(t=>{let r;return Er(t,e,()=>{r=n[_0](),Er(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Pe(r?.return)&&r.return()})}function D0(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ye(t=>{Er(t,e,()=>{let r=n[Symbol.asyncIterator]();Er(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function $1(n,e){return D0(w0(n),e)}function V1(n,e){if(n!=null){if(g0(n))return R1(n,e);if(p0(n))return L1(n,e);if(m0(n))return F1(n,e);if(v0(n))return D0(n,e);if(b0(n))return B1(n,e);if(E0(n))return $1(n,e)}throw y0(n)}function Ut(n,e){return e?V1(n,e):Gt(n)}function Ve(...n){let e=zo(n);return Ut(n,e)}function lC(n,e){let t=Pe(n)?n:()=>n,r=i=>i.error(t());return new Ye(e?i=>e.schedule(r,0,i):r)}function S0(n){return!!n&&(n instanceof Ye||Pe(n.lift)&&Pe(n.subscribe))}var Cu=fl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function bt(n,e){return ot((t,r)=>{let i=0;t.subscribe(at(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Mq}=Array;function kq(n,e){return Mq(e)?n(...e):n(e)}function I0(n){return bt(e=>kq(n,e))}var{isArray:Pq}=Array,{getPrototypeOf:Oq,prototype:Nq,keys:Rq}=Object;function T0(n){if(n.length===1){let e=n[0];if(Pq(e))return{args:e,keys:null};if(Fq(e)){let t=Rq(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Fq(n){return n&&typeof n=="object"&&Oq(n)===Nq}function A0(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function dC(...n){let e=zo(n),t=h0(n),{args:r,keys:i}=T0(n);if(r.length===0)return Ut([],e);let s=new Ye(Lq(r,e,i?o=>A0(i,o):Pi));return t?s.pipe(I0(t)):s}function Lq(n,e,t=Pi){return r=>{j1(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)j1(e,()=>{let c=Ut(n[u],e),l=!1;c.subscribe(at(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function j1(n,e,t){n?Er(t,n,e):e()}function U1(n,e,t,r,i,s,o,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let v=!1;Gt(t(g,l++)).subscribe(at(e,y=>{i?.(y),s?f(y):e.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;u.length&&c<r;){let y=u.shift();o?Er(e,o,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(at(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Fn(n,e,t=1/0){return Pe(e)?Fn((r,i)=>bt((s,o)=>e(r,s,i,o))(Gt(n(r,i))),t):(typeof e=="number"&&(t=e),ot((r,i)=>U1(r,i,n,t)))}function yl(n=1/0){return Fn(Pi,n)}function H1(){return yl(1)}function _l(...n){return H1()(Ut(n,zo(n)))}function cf(n){return new Ye(e=>{Gt(n()).subscribe(e)})}function hC(...n){let e=h0(n),{args:t,keys:r}=T0(n),i=new Ye(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),u=o,c=o;for(let l=0;l<o;l++){let d=!1;Gt(t[l]).subscribe(at(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?A0(r,a):a),s.complete())}))}});return e?i.pipe(I0(e)):i}function Oi(n,e){return ot((t,r)=>{let i=0;t.subscribe(at(r,s=>n.call(e,s,i++)&&r.next(s)))})}function bl(n){return ot((e,t)=>{let r=null,i=!1,s;r=e.subscribe(at(t,void 0,void 0,o=>{s=Gt(n(o,bl(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function lf(n,e){return Pe(e)?Fn(n,e,1):Fn(n,1)}function fC(n){return ot((e,t)=>{let r=!1;e.subscribe(at(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xs(n){return n<=0?()=>wr:ot((e,t)=>{let r=0;e.subscribe(at(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function z1(n=Bq){return ot((e,t)=>{let r=!1;e.subscribe(at(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Bq(){return new Cu}function pC(n){return ot((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Zs(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Oi((i,s)=>n(i,s,r)):Pi,Xs(1),t?fC(e):z1(()=>new Cu))}function M0(n){return n<=0?()=>wr:ot((e,t)=>{let r=[];e.subscribe(at(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function mC(...n){let e=zo(n);return ot((t,r)=>{(e?_l(n,t,e):_l(n,t)).subscribe(r)})}function hs(n,e){return ot((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(at(r,u=>{i?.unsubscribe();let c=0,l=s++;Gt(n(u,l)).subscribe(i=at(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function df(n){return ot((e,t)=>{Gt(n).subscribe(at(t,()=>t.complete(),uf)),!t.closed&&e.subscribe(t)})}function Jn(n,e,t){let r=Pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?ot((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(at(s,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),s.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Pi}var gC;function k0(){return gC}function fs(n){let e=gC;return gC=n,e}var q1=Symbol("NotFound");function wl(n){return n===q1||n?.name==="\u0275NotFound"}var B0="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",te=class extends Error{code;constructor(e,t){super(Cl(e,t)),this.code=e}};function $q(n){return`NG0${Math.abs(n)}`}function Cl(n,e){return`${$q(n)}${e?": "+e:""}`}var to=globalThis;function ut(n){for(let e in n)if(n[e]===ut)return e;throw Error("")}function Q1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function eo(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(eo).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function AC(n,e){return n?e?`${n} ${e}`:n:e||""}var Vq=ut({__forward_ref__:ut});function Ln(n){return n.__forward_ref__=Ln,n.toString=function(){return eo(this())},n}function Dn(n){return MC(n)?n():n}function MC(n){return typeof n=="function"&&n.hasOwnProperty(Vq)&&n.__forward_ref__===Ln}function Y(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ms(n){return{providers:n.providers||[],imports:n.imports||[]}}function yf(n){return jq(n,$0)}function kC(n){return yf(n)!==null}function jq(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Uq(n){let e=n?.[$0]??null;return e||null}function yC(n){return n&&n.hasOwnProperty(O0)?n[O0]:null}var $0=ut({\u0275prov:ut}),O0=ut({\u0275inj:ut}),he=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Y({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function PC(n){return n&&!!n.\u0275providers}var OC=ut({\u0275cmp:ut}),NC=ut({\u0275dir:ut}),RC=ut({\u0275pipe:ut}),FC=ut({\u0275mod:ut}),ff=ut({\u0275fac:ut}),Tu=ut({__NG_ELEMENT_ID__:ut}),W1=ut({__NG_ENV_ID__:ut});function LC(n){return V0(n,"@NgModule"),n[FC]||null}function Ko(n){return V0(n,"@Component"),n[OC]||null}function BC(n){return V0(n,"@Directive"),n[NC]||null}function X1(n){return V0(n,"@Pipe"),n[RC]||null}function V0(n,e){if(n==null)throw new te(-919,!1)}function Ni(n){return typeof n=="string"?n:n==null?"":String(n)}function Z1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ni(n)}var J1=ut({ngErrorCode:ut}),Hq=ut({ngErrorMessage:ut}),zq=ut({ngTokenPath:ut});function $C(n,e){return ek("",-200,e)}function j0(n,e){throw new te(-201,!1)}function ek(n,e,t){let r=new te(e,n);return r[J1]=e,r[Hq]=n,t&&(r[zq]=t),r}function qq(n){return n[J1]}var _C;function tk(){return _C}function er(n){let e=_C;return _C=n,e}function VC(n,e,t){let r=yf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;j0(n,"")}var Wq={},xu=Wq,Gq="__NG_DI_FLAG__",bC=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Du(t)||0;try{return this.injector.get(e,r&8?null:xu,r)}catch(i){if(wl(i))return i;throw i}}};function Yq(n,e=0){let t=k0();if(t===void 0)throw new te(-203,!1);if(t===null)return VC(n,void 0,e);{let r=Kq(e),i=t.retrieve(n,r);if(wl(i)){if(r.optional)return null;throw i}return i}}function ce(n,e=0){return(tk()||Yq)(Dn(n),e)}function $(n,e){return ce(n,Du(e))}function Du(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Kq(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function wC(n){let e=[];for(let t=0;t<n.length;t++){let r=Dn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],u=Qq(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(ce(i,s))}else e.push(ce(r))}return e}function Qq(n){return n[Gq]}function qo(n,e){let t=n.hasOwnProperty(ff);return t?n[ff]:null}function nk(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function rk(n){return n.flat(Number.POSITIVE_INFINITY)}function U0(n,e){n.forEach(t=>Array.isArray(t)?U0(t,e):e(t))}function jC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function _f(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ik(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function sk(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function ok(n,e,t){let r=xl(n,e);return r>=0?n[r|1]=t:(r=~r,sk(n,r,e,t)),r}function H0(n,e){let t=xl(n,e);if(t>=0)return n[t|1]}function xl(n,e){return Xq(n,e,1)}function Xq(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Qo={},qr=[],Dl=new he(""),UC=new he("",-1),HC=new he(""),pf=class{get(e,t=xu){if(t===xu){let i=ek("",-201);throw i.name="\u0275NotFound",i}return t}};function bf(n){return{\u0275providers:n}}function ak(...n){return{\u0275providers:zC(!0,n),\u0275fromNgModule:!0}}function zC(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return U0(e,o=>{let a=o;N0(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&uk(i,s),t}function uk(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];qC(i,s=>{e(s,r)})}}function N0(n,e,t,r){if(n=Dn(n),!n)return!1;let i=null,s=yC(n),o=!s&&Ko(n);if(!s&&!o){let u=n.ngModule;if(s=yC(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of u)N0(c,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{U0(s.imports,l=>{N0(l,e,t,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&uk(c,e)}if(!a){let c=qo(i)||(()=>new i);e({provide:i,useFactory:c,deps:qr},i),e({provide:HC,useValue:i,multi:!0},i),e({provide:Dl,useValue:()=>ce(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let c=n;qC(u,l=>{e(l,c)})}}else return!1;return i!==n&&n.providers!==void 0}function qC(n,e){for(let t of n)PC(t)&&(t=t.\u0275providers),Array.isArray(t)?qC(t,e):e(t)}var Zq=ut({provide:String,useValue:ut});function ck(n){return n!==null&&typeof n=="object"&&Zq in n}function Jq(n){return!!(n&&n.useExisting)}function eW(n){return!!(n&&n.useFactory)}function Su(n){return typeof n=="function"}function lk(n){return!!n.useClass}var wf=new he(""),P0={},G1={},vC;function Ef(){return vC===void 0&&(vC=new pf),vC}var dn=class{},Iu=class extends dn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,CC(e,o=>this.processProvider(o)),this.records.set(UC,El(void 0,this)),i.has("environment")&&this.records.set(dn,El(void 0,this));let s=this.records.get(wf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(HC,qr,{self:!0}))}retrieve(e,t){let r=Du(t)||0;try{return this.get(e,xu,r)}catch(i){if(wl(i))return i;throw i}}destroy(){hf(this),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return hf(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){hf(this);let t=fs(this),r=er(void 0),i;try{return e()}finally{fs(t),er(r)}}get(e,t=xu,r){if(hf(this),e.hasOwnProperty(W1))return e[W1](this);let i=Du(r),s,o=fs(this),a=er(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let l=sW(e)&&yf(e);l&&this.injectableDefInScope(l)?c=El(EC(e),P0):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let u=i&2?Ef():this.parent;return t=i&8&&t===xu?null:t,u.get(e,t)}catch(u){let c=qq(u);throw c===-200||c===-201?new te(c,null):u}finally{er(a),fs(o)}}resolveInjectorInitializers(){let e=ve(null),t=fs(this),r=er(void 0),i;try{let s=this.get(Dl,qr,{self:!0});for(let o of s)o()}finally{fs(t),er(r),ve(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(eo(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Dn(e);let t=Su(e)?e:Dn(e&&e.provide),r=nW(e);if(!Su(e)&&e.multi===!0){let i=this.records.get(t);i||(i=El(void 0,P0,!0),i.factory=()=>wC(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ve(null);try{if(t.value===G1)throw $C(eo(e));return t.value===P0&&(t.value=G1,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&iW(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ve(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Dn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function EC(n){let e=yf(n),t=e!==null?e.factory:qo(n);if(t!==null)return t;if(n instanceof he)throw new te(204,!1);if(n instanceof Function)return tW(n);throw new te(204,!1)}function tW(n){if(n.length>0)throw new te(204,!1);let t=Uq(n);return t!==null?()=>t.factory(n):()=>new n}function nW(n){if(ck(n))return El(void 0,n.useValue);{let e=WC(n);return El(e,P0)}}function WC(n,e,t){let r;if(Su(n)){let i=Dn(n);return qo(i)||EC(i)}else if(ck(n))r=()=>Dn(n.useValue);else if(eW(n))r=()=>n.useFactory(...wC(n.deps||[]));else if(Jq(n))r=(i,s)=>ce(Dn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Dn(n&&(n.useClass||n.provide));if(rW(n))r=()=>new i(...wC(n.deps));else return qo(i)||EC(i)}return r}function hf(n){if(n.destroyed)throw new te(205,!1)}function El(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rW(n){return!!n.deps}function iW(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function sW(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function CC(n,e){for(let t of n)Array.isArray(t)?CC(t,e):t&&PC(t)?CC(t.\u0275providers,e):e(t)}function tr(n,e){let t;n instanceof Iu?(hf(n),t=n):t=new bC(n);let r,i=fs(t),s=er(void 0);try{return e()}finally{fs(i),er(s)}}function dk(){return tk()!==void 0||k0()!=null}var Ri=0,fe=1,xe=2,Jt=3,hi=4,nr=5,Au=6,Sl=7,Ht=8,no=9,gs=10,gt=11,Il=12,GC=13,Mu=14,rr=15,Xo=16,ku=17,vs=18,Cf=19,YC=20,Js=21,z0=22,Wo=23,Gr=24,Pu=25,Ou=26,kt=27,hk=1,KC=6,Zo=7,xf=8,Nu=9,Bt=10;function ys(n){return Array.isArray(n)&&typeof n[hk]=="object"}function Fi(n){return Array.isArray(n)&&n[hk]===!0}function QC(n){return(n.flags&4)!==0}function Jo(n){return n.componentOffset>-1}function Tl(n){return(n.flags&1)===1}function _s(n){return!!n.template}function Al(n){return(n[xe]&512)!==0}function Ru(n){return(n[xe]&256)===256}var XC="svg",fk="math";function fi(n){for(;Array.isArray(n);)n=n[Ri];return n}function ZC(n,e){return fi(e[n])}function Li(n,e){return fi(e[n.index])}function Df(n,e){return n.data[e]}function JC(n,e){return n[e]}function e4(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function pi(n,e){let t=e[n];return ys(t)?t:t[Ri]}function pk(n){return(n[xe]&4)===4}function q0(n){return(n[xe]&128)===128}function mk(n){return Fi(n[Jt])}function mi(n,e){return e==null?null:n[e]}function t4(n){n[ku]=0}function n4(n){n[xe]&1024||(n[xe]|=1024,q0(n)&&Fu(n))}function gk(n,e){for(;n>0;)e=e[Mu],n--;return e}function Sf(n){return!!(n[xe]&9216||n[Gr]?.dirty)}function W0(n){n[gs].changeDetectionScheduler?.notify(8),n[xe]&64&&(n[xe]|=1024),Sf(n)&&Fu(n)}function Fu(n){n[gs].changeDetectionScheduler?.notify(0);let e=Go(n);for(;e!==null&&!(e[xe]&8192||(e[xe]|=8192,!q0(e)));)e=Go(e)}function r4(n,e){if(Ru(n))throw new te(911,!1);n[Js]===null&&(n[Js]=[]),n[Js].push(e)}function vk(n,e){if(n[Js]===null)return;let t=n[Js].indexOf(e);t!==-1&&n[Js].splice(t,1)}function Go(n){let e=n[Jt];return Fi(e)?e[Jt]:e}function i4(n){return n[Sl]??=[]}function s4(n){return n.cleanup??=[]}function yk(n,e,t,r){let i=i4(e);i.push(t),n.firstCreatePass&&s4(n).push(r,i.length-1)}var Ne={lFrame:Tk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var xC=!1;function _k(){return Ne.lFrame.elementDepthCount}function bk(){Ne.lFrame.elementDepthCount++}function o4(){Ne.lFrame.elementDepthCount--}function G0(){return Ne.bindingsEnabled}function a4(){return Ne.skipHydrationRootTNode!==null}function u4(n){return Ne.skipHydrationRootTNode===n}function c4(){Ne.skipHydrationRootTNode=null}function we(){return Ne.lFrame.lView}function Pt(){return Ne.lFrame.tView}function qe(n){return Ne.lFrame.contextLView=n,n[Ht]}function We(n){return Ne.lFrame.contextLView=null,n}function en(){let n=l4();for(;n!==null&&n.type===64;)n=n.parent;return n}function l4(){return Ne.lFrame.currentTNode}function wk(){let n=Ne.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ml(n,e){let t=Ne.lFrame;t.currentTNode=n,t.isParent=e}function d4(){return Ne.lFrame.isParent}function h4(){Ne.lFrame.isParent=!1}function f4(){return xC}function mf(n){let e=xC;return xC=n,e}function p4(){let n=Ne.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function m4(){return Ne.lFrame.bindingIndex}function Ek(n){return Ne.lFrame.bindingIndex=n}function ro(){return Ne.lFrame.bindingIndex++}function Y0(n){let e=Ne.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ck(){return Ne.lFrame.inI18n}function xk(n,e){let t=Ne.lFrame;t.bindingIndex=t.bindingRootIndex=n,K0(e)}function Dk(){return Ne.lFrame.currentDirectiveIndex}function K0(n){Ne.lFrame.currentDirectiveIndex=n}function Sk(n){let e=Ne.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function g4(){return Ne.lFrame.currentQueryIndex}function Q0(n){Ne.lFrame.currentQueryIndex=n}function oW(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[nr]:null}function v4(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=oW(s),i===null||(s=s[Mu],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ne.lFrame=Ik();return r.currentTNode=e,r.lView=n,!0}function X0(n){let e=Ik(),t=n[fe];Ne.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ik(){let n=Ne.lFrame,e=n===null?null:n.child;return e===null?Tk(n):e}function Tk(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Ak(){let n=Ne.lFrame;return Ne.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var y4=Ak;function Z0(){let n=Ak();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Mk(n){return(Ne.lFrame.contextLView=gk(n,Ne.lFrame.contextLView))[Ht]}function bs(){return Ne.lFrame.selectedIndex}function ea(n){Ne.lFrame.selectedIndex=n}function If(){let n=Ne.lFrame;return Df(n.tView,n.selectedIndex)}function ta(){Ne.lFrame.currentNamespace=XC}function na(){aW()}function aW(){Ne.lFrame.currentNamespace=null}function kk(){return Ne.lFrame.currentNamespace}var Pk=!0;function J0(){return Pk}function Tf(n){Pk=n}function DC(n,e=null,t=null,r){let i=_4(n,e,t,r);return i.resolveInjectorInitializers(),i}function _4(n,e=null,t=null,r,i=new Set){let s=[t||qr,ak(n)];return r=r||(typeof n=="object"?void 0:eo(n)),new Iu(s,e||Ef(),r||null,i)}var Wr=class n{static THROW_IF_NOT_FOUND=xu;static NULL=new pf;static create(e,t){if(Array.isArray(e))return DC({name:""},t,e,"");{let r=e.name??"";return DC({name:r},e.parent,e.providers,r)}}static \u0275prov=Y({token:n,providedIn:"any",factory:()=>ce(UC)});static __NG_ELEMENT_ID__=-1},hn=new he(""),ws=(()=>{class n{static __NG_ELEMENT_ID__=uW;static __NG_ENV_ID__=t=>t}return n})(),R0=class extends ws{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ru(this._lView)}onDestroy(e){let t=this._lView;return r4(t,e),()=>vk(t,e)}};function uW(){return new R0(we())}var Ok=!1,ra=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new xn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ye(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Y({token:n,providedIn:"root",factory:()=>new n})}return n})(),SC=class extends Wt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,dk()&&(this.destroyRef=$(ws,{optional:!0})??void 0,this.pendingTasks=$(ra,{optional:!0})??void 0)}emit(e){let t=ve(null);try{super.next(e)}finally{ve(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Cn&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ft=SC;function F0(...n){}function b4(n){let e,t;function r(){n=F0;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function w4(n){return queueMicrotask(()=>n()),()=>{n=F0}}var E4="isAngularZone",gf=E4+"_ID",cW=0,Cr=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ft(!1);onMicrotaskEmpty=new ft(!1);onStable=new ft(!1);onError=new ft(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Ok}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,hW(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(E4)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,lW,F0,F0);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},lW={};function C4(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function dW(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){b4(()=>{n.callbackScheduled=!1,IC(n),n.isCheckStableRunning=!0,C4(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),IC(n)}function hW(n){let e=()=>{dW(n)},t=cW++;n._inner=n._inner.fork({name:"angular",properties:{[E4]:!0,[gf]:t,[gf+t]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(fW(u))return r.invokeTask(s,o,a,u);try{return Y1(n),r.invokeTask(s,o,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),K1(n)}},onInvoke:(r,i,s,o,a,u,c)=>{try{return Y1(n),r.invoke(s,o,a,u,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!pW(u)&&e(),K1(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,IC(n),C4(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function IC(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Y1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function K1(n){n._nesting--,C4(n)}var vf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ft;onMicrotaskEmpty=new ft;onStable=new ft;onError=new ft;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function fW(n){return Nk(n,"__ignore_ng_zone__")}function pW(n){return Nk(n,"__scheduler_tick__")}function Nk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ps=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Bi=new he("",{factory:()=>{let n=$(Cr),e=$(dn),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(ps),t.handleError(r))})}}}),Rk={provide:Dl,useValue:()=>{let n=$(ps,{optional:!0})},multi:!0};function Re(n,e){let[t,r,i]=ZE(n,e?.equal),s=t,o=s[Zn];return s.set=r,s.update=i,s.asReadonly=Fk.bind(s),s}function Fk(){let n=this[Zn];if(n.readonlyFn===void 0){let e=()=>this();e[Zn]=n,n.readonlyFn=e}return n.readonlyFn}var Af=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=mW}return n})();function mW(){return new Af(we(),en())}var Yo=class{},Mf=new he("",{factory:()=>!0});var x4=new he("");var ev=(()=>{class n{static \u0275prov=Y({token:n,providedIn:"root",factory:()=>new TC})}return n})(),TC=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},L0=class{[Zn];constructor(e){this[Zn]=e}destroy(){this[Zn].destroy()}};function Lu(n,e){let t=e?.injector??$(Wr),r=e?.manualCleanup!==!0?t.get(ws):null,i,s=t.get(Af,null,{optional:!0}),o=t.get(Yo);return s!==null?(i=yW(s.view,o,n),r instanceof R0&&r._lView===s.view&&(r=null)):i=_W(n,t.get(ev),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new L0(i)}var Lk=J(C({},eC),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=mf(!1);try{tC(this)}finally{mf(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=ve(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ve(n)}}}),gW=J(C({},Lk),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(yu(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),vW=J(C({},Lk),{consumerMarkedDirty(){this.view[xe]|=8192,Fu(this.view),this.notifier.notify(13)},destroy(){if(yu(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Wo]?.delete(this)}});function yW(n,e,t){let r=Object.create(vW);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=Bk(r,t),n[Wo]??=new Set,n[Wo].add(r),r.consumerMarkedDirty(r),r}function _W(n,e,t){let r=Object.create(gW);return r.fn=Bk(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function Bk(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function tn(n){return JE(n)}function Vf(n){return{toString:n}.toString()}function SW(n){return typeof n=="function"}function p3(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var uv=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Bn=(()=>{let n=()=>m3;return n.ngInherit=!0,n})();function m3(n){return n.type.prototype.ngOnChanges&&(n.setInput=TW),IW}function IW(){let n=v3(this),e=n?.current;if(e){let t=n.previous;if(t===Qo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function TW(n,e,t,r,i){let s=this.declaredInputs[r],o=v3(n)||AW(n,{previous:Qo,current:null}),a=o.current||(o.current={}),u=o.previous,c=u[s];a[s]=new uv(c&&c.currentValue,t,u===Qo),p3(n,e,i,t)}var g3="__ngSimpleChanges__";function v3(n){return n[g3]||null}function AW(n,e){return n[g3]=e}var $k=[];var ct=function(n,e=null,t){for(let r=0;r<$k.length;r++){let i=$k[r];i(n,e,t)}},Ke=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ke||{});function MW(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=m3(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function y3(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),l!=null&&(n.destroyHooks??=[]).push(t,l)}}function rv(n,e,t){_3(n,e,3,t)}function iv(n,e,t,r){(n[xe]&3)===t&&_3(n,e,t,r)}function D4(n,e){let t=n[xe];(t&3)===e&&(t&=16383,t+=1,n[xe]=t)}function _3(n,e,t,r){let i=r!==void 0?n[ku]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[ku]+=65536),(a<s||s==-1)&&(kW(n,t,e,u),n[ku]=(n[ku]&4294901760)+u+2),u++}function Vk(n,e){ct(Ke.LifecycleHookStart,n,e);let t=ve(null);try{e.call(n)}finally{ve(t),ct(Ke.LifecycleHookEnd,n,e)}}function kW(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[xe]>>14<n[ku]>>16&&(n[xe]&3)===e&&(n[xe]+=16384,Vk(a,s)):Vk(a,s)}var Pl=-1,$u=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function PW(n){return(n.flags&8)!==0}function OW(n){return(n.flags&16)!==0}function NW(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];RW(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function b3(n){return n===3||n===4||n===6}function RW(n){return n.charCodeAt(0)===64}function Ol(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?jk(n,t,i,null,e[++r]):jk(n,t,i,null,null))}}return n}function jk(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function w3(n){return n!==Pl}function cv(n){return n&32767}function FW(n){return n>>16}function lv(n,e){let t=FW(n),r=e;for(;t>0;)r=r[Mu],t--;return r}var F4=!0;function dv(n){let e=F4;return F4=n,e}var LW=256,E3=LW-1,C3=5,BW=0,Es={};function $W(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Tu)&&(r=t[Tu]),r==null&&(r=t[Tu]=BW++);let i=r&E3,s=1<<i;e.data[n+(i>>C3)]|=s}function hv(n,e){let t=x3(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,S4(r.data,n),S4(e,null),S4(r.blueprint,null));let i=ax(n,e),s=n.injectorIndex;if(w3(i)){let o=cv(i),a=lv(i,e),u=a[fe].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function S4(n,e){n.push(0,0,0,0,0,0,0,0,e)}function x3(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ax(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=A3(i),r===null)return Pl;if(t++,i=i[Mu],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Pl}function L4(n,e,t){$W(n,e,t)}function VW(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(b3(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function D3(n,e,t){if(t&8||n!==void 0)return n;j0(e,"NodeInjector")}function S3(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[no],s=er(void 0);try{return i?i.get(e,r,t&8):VC(e,r,t&8)}finally{er(s)}}return D3(r,e,t)}function I3(n,e,t,r=0,i){if(n!==null){if(e[xe]&2048&&!(r&2)){let o=zW(n,e,t,r,Es);if(o!==Es)return o}let s=T3(n,e,t,r,Es);if(s!==Es)return s}return S3(e,t,r,i)}function T3(n,e,t,r,i){let s=UW(t);if(typeof s=="function"){if(!v4(e,n,r))return r&1?D3(i,t,r):S3(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))j0(t);else return o}finally{y4()}}else if(typeof s=="number"){let o=null,a=x3(n,e),u=Pl,c=r&1?e[rr][nr]:null;for((a===-1||r&4)&&(u=a===-1?ax(n,e):e[a+8],u===Pl||!Hk(r,!1)?a=-1:(o=e[fe],a=cv(u),e=lv(u,e)));a!==-1;){let l=e[fe];if(Uk(s,a,l.data)){let d=jW(a,e,t,o,r,c);if(d!==Es)return d}u=e[a+8],u!==Pl&&Hk(r,e[fe].data[a+8]===c)&&Uk(s,a,e)?(o=l,a=cv(u),e=lv(u,e)):a=-1}}return i}function jW(n,e,t,r,i,s){let o=e[fe],a=o.data[n+8],u=r==null?Jo(a)&&F4:r!=o&&(a.type&3)!==0,c=i&1&&s===a,l=sv(a,o,t,u,c);return l!==null?Nf(e,o,l,a,i):Es}function sv(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,u=n.directiveStart,c=n.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let p=o[f];if(f<u&&t===p||f>=u&&p.type===t)return f}if(i){let f=o[u];if(f&&_s(f)&&f.type===t)return u}return null}function Nf(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof $u){let a=s;if(a.resolving){let f=Z1(o[t]);throw $C(f)}let u=dv(a.canSeeViewProviders);a.resolving=!0;let c=o[t].type||o[t],l,d=a.injectImpl?er(a.injectImpl):null,h=v4(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&MW(t,o[t],e)}finally{d!==null&&er(d),dv(u),a.resolving=!1,y4()}}return s}function UW(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Tu)?n[Tu]:void 0;return typeof e=="number"?e>=0?e&E3:HW:e}function Uk(n,e,t){let r=1<<n;return!!(t[e+(n>>C3)]&r)}function Hk(n,e){return!(n&2)&&!(n&1&&e)}var Bu=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return I3(this._tNode,this._lView,e,Du(r),t)}};function HW(){return new Bu(en(),we())}function Yr(n){return Vf(()=>{let e=n.prototype.constructor,t=e[ff]||B4(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ff]||B4(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function B4(n){return MC(n)?()=>{let e=B4(Dn(n));return e&&e()}:qo(n)}function zW(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[xe]&2048&&!Al(o);){let a=T3(s,o,t,r|2,Es);if(a!==Es)return a;let u=s.parent;if(!u){let c=o[YC];if(c){let l=c.get(t,Es,r);if(l!==Es)return l}u=A3(o),o=o[Mu]}s=u}return i}function A3(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[nr]:null}function jf(n){return VW(en(),n)}function qW(){return Bl(en(),we())}function Bl(n,e){return new $n(Li(n,e))}var $n=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=qW}return n})();function WW(n){return n instanceof $n?n.nativeElement:n}function GW(){return this._results[Symbol.iterator]()}var fv=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Wt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=rk(e);(this._changesDetected=!nk(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=GW};function M3(n){return(n.flags&128)===128}var ux=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(ux||{}),k3=new Map,YW=0;function KW(){return YW++}function QW(n){k3.set(n[Cf],n)}function $4(n){k3.delete(n[Cf])}var zk="__ngContext__";function Nl(n,e){ys(e)?(n[zk]=e[Cf],QW(e)):n[zk]=e}function P3(n){return N3(n[Il])}function O3(n){return N3(n[hi])}function N3(n){for(;n!==null&&!Fi(n);)n=n[hi];return n}var XW;function cx(n){XW=n}var Tv=new he("",{factory:()=>ZW}),ZW="ng";var Av=new he(""),Uf=new he("",{providedIn:"platform",factory:()=>"unknown"});var Mv=new he("",{factory:()=>$(hn).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var R3="r";var F3="di";var L3=!1,B3=new he("",{factory:()=>L3});var JW=(n,e,t,r)=>{};function e7(n,e,t,r){JW(n,e,t,r)}function kv(n){return(n.flags&32)===32}var t7=()=>null;function $3(n,e,t=!1){return t7(n,e,t)}function V3(n,e){let t=n.contentQueries;if(t!==null){let r=ve(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Q0(s),a.contentQueries(2,e[o],o)}}}finally{ve(r)}}}function V4(n,e,t){Q0(0);let r=ve(null);try{e(n,t)}finally{ve(r)}}function lx(n,e,t){if(QC(e)){let r=ve(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let u=t[o];a.contentQueries(1,u,o)}}}finally{ve(r)}}}var Vi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Vi||{});var tv;function n7(){if(tv===void 0&&(tv=null,to.trustedTypes))try{tv=to.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return tv}function qk(n){return n7()?.createScriptURL(n)||n}var pv=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${B0})`}};function Pv(n){return n instanceof pv?n.changingThisBreaksApplicationSecurity:n}function dx(n,e){let t=j3(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${B0})`)}return t===e}function j3(n){return n instanceof pv&&n.getTypeName()||null}var r7=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function U3(n){return n=String(n),n.match(r7)?n:"unsafe:"+n}var i7=/^>|^->|<!--|-->|--!>|<!-$/g,s7=/(<|>)/g,o7="\u200B$1\u200B";function a7(n){return n.replace(i7,e=>e.replace(s7,o7))}function u7(n,e){return n.createText(e)}function c7(n,e,t){n.setValue(e,t)}function l7(n,e){return n.createComment(a7(e))}function H3(n,e,t){return n.createElement(e,t)}function mv(n,e,t,r,i){n.insertBefore(e,t,r,i)}function z3(n,e,t){n.appendChild(e,t)}function Wk(n,e,t,r,i){r!==null?mv(n,e,t,r,i):z3(n,e,t)}function q3(n,e,t,r){n.removeChild(null,e,t,r)}function d7(n,e,t){n.setAttribute(e,"style",t)}function h7(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function W3(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&NW(n,e,r),i!==null&&h7(n,e,i),s!==null&&d7(n,e,s)}var Ov=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ov||{});function Nv(n){let e=Y3();return e?e.sanitize(Ov.URL,n)||"":dx(n,"URL")?Pv(n):U3(Ni(n))}function G3(n){let e=Y3();if(e)return qk(e.sanitize(Ov.RESOURCE_URL,n)||"");if(dx(n,"ResourceURL"))return qk(Pv(n));throw new te(904,!1)}function f7(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?G3:Nv}function hx(n,e,t){return f7(e,t)(n)}function Y3(){let n=we();return n&&n[gs].sanitizer}function K3(n){return n instanceof Function?n():n}function p7(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var Q3="ng-template";function m7(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&p7(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(fx(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function fx(n){return n.type===4&&n.value!==Q3}function g7(n,e,t){let r=n.type===4&&!t?Q3:n.value;return e===r}function v7(n,e,t){let r=4,i=n.attrs,s=i!==null?b7(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!$i(r)&&!$i(u))return!1;if(o&&$i(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!g7(n,u,t)||u===""&&e.length===1){if($i(r))return!1;o=!0}}else if(r&8){if(i===null||!m7(n,i,u,t)){if($i(r))return!1;o=!0}}else{let c=e[++a],l=y7(u,i,fx(n),t);if(l===-1){if($i(r))return!1;o=!0;continue}if(c!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&c!==d){if($i(r))return!1;o=!0}}}}return $i(r)||o}function $i(n){return(n&1)===0}function y7(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return w7(e,n)}function X3(n,e,t=!1){for(let r=0;r<e.length;r++)if(v7(n,e[r],t))return!0;return!1}function _7(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function b7(n){for(let e=0;e<n.length;e++){let t=n[e];if(b3(t))return e}return n.length}function w7(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function E7(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Gk(n,e){return n?":not("+e.trim()+")":e}function C7(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!$i(o)&&(e+=Gk(s,i),i=""),r=o,s=s||!$i(r);t++}return i!==""&&(e+=Gk(s,i)),e}function x7(n){return n.map(C7).join(",")}function D7(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!$i(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var ir={};function px(n,e,t,r,i,s,o,a,u,c,l){let d=kt+r,h=d+i,f=S7(d,h),p=typeof c=="function"?c():c;return f[fe]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:l}}function S7(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ir);return t}function I7(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=px(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function mx(n,e,t,r,i,s,o,a,u,c,l){let d=e.blueprint.slice();return d[Ri]=i,d[xe]=r|4|128|8|64|1024,(c!==null||n&&n[xe]&2048)&&(d[xe]|=2048),t4(d),d[Jt]=d[Mu]=n,d[Ht]=t,d[gs]=o||n&&n[gs],d[gt]=a||n&&n[gt],d[no]=u||n&&n[no]||null,d[nr]=s,d[Cf]=KW(),d[Au]=l,d[YC]=c,d[rr]=e.type==2?n[rr]:d,d}function T7(n,e,t){let r=Li(e,n),i=I7(t),s=n[gs].rendererFactory,o=gx(n,mx(n,i,null,Z3(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function Z3(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function J3(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function gx(n,e){return n[Il]?n[GC][hi]=e:n[Il]=e,n[GC]=e,e}function V(n=1){e2(Pt(),we(),bs()+n,!1)}function e2(n,e,t,r){if(!r)if((e[xe]&3)===3){let s=n.preOrderCheckHooks;s!==null&&rv(e,s,t)}else{let s=n.preOrderHooks;s!==null&&iv(e,s,0,t)}ea(t)}var Rv=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Rv||{});function j4(n,e,t,r){let i=ve(null);try{let[s,o,a]=n.inputs[t],u=null;(o&Rv.SignalBased)!==0&&(u=e[s][Zn]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,s):p3(e,u,s,r)}finally{ve(i)}}var Cs=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Cs||{}),A7;function vx(n,e){return A7(n,e)}var Vu=new Set,Fv=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Fv||{}),zu=new he(""),Yk=new Set;function oa(n){Yk.has(n)||(Yk.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var yx=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Y({token:n,providedIn:"root",factory:()=>new n})}return n})(),t2=[0,1,2,3],n2=(()=>{class n{ngZone=$(Cr);scheduler=$(Yo);errorHandler=$(ps,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){$(zu,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ct(Ke.AfterRenderHooksStart),this.executing=!0;for(let r of t2)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ct(Ke.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[Pu]??=[]).push(t),Fu(r),r[xe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Fv.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Y({token:n,providedIn:"root",factory:()=>new n})}return n})(),gv=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Pu];e&&(this.view[Pu]=e.filter(t=>t!==this))}};function Lv(n,e){let t=e?.injector??$(Wr);return oa("NgAfterNextRender"),k7(n,t,e,!0)}function M7(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function k7(n,e,t,r){let i=e.get(yx);i.impl??=e.get(n2);let s=e.get(zu,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(ws):null,a=e.get(Af,null,{optional:!0}),u=new gv(i.impl,M7(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(u),u}var r2=new he("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:$(dn)})});function i2(n,e,t){let r=n.get(r2);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function P7(n,e){let t=n.get(r2);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function O7(n,e){for(let[t,r]of e)i2(n,r.animateFns)}function Kk(n,e,t,r){let i=n?.[Ou]?.enter;e!==null&&i&&i.has(t.index)&&O7(r,i)}function kl(n,e,t,r,i,s,o,a){if(i!=null){let u,c=!1;Fi(i)?u=i:ys(i)&&(c=!0,i=i[Ri]);let l=fi(i);n===0&&r!==null?(Kk(a,r,s,t),o==null?z3(e,r,l):mv(e,r,l,o||null,!0)):n===1&&r!==null?(Kk(a,r,s,t),mv(e,r,l,o||null,!0)):n===2?Qk(a,s,t,d=>{q3(e,l,c,d)}):n===3&&Qk(a,s,t,()=>{e.destroyNode(l)}),u!=null&&z7(e,n,t,u,s,r,o)}}function N7(n,e){s2(n,e),e[Ri]=null,e[nr]=null}function R7(n,e,t,r,i,s){r[Ri]=i,r[nr]=e,$v(n,r,t,1,i,s)}function s2(n,e){e[gs].changeDetectionScheduler?.notify(9),$v(n,e,e[gt],2,null,null)}function F7(n){let e=n[Il];if(!e)return I4(n[fe],n);for(;e;){let t=null;if(ys(e))t=e[Il];else{let r=e[Bt];r&&(t=r)}if(!t){for(;e&&!e[hi]&&e!==n;)ys(e)&&I4(e[fe],e),e=e[Jt];e===null&&(e=n),ys(e)&&I4(e[fe],e),t=e&&e[hi]}e=t}}function _x(n,e){let t=n[Nu],r=t.indexOf(e);t.splice(r,1)}function Bv(n,e){if(Ru(e))return;let t=e[gt];t.destroyNode&&$v(n,e,t,3,null,null),F7(e)}function I4(n,e){if(Ru(e))return;let t=ve(null);try{e[xe]&=-129,e[xe]|=256,e[Gr]&&yu(e[Gr]),$7(n,e),B7(n,e),e[fe].type===1&&e[gt].destroy();let r=e[Xo];if(r!==null&&Fi(e[Jt])){r!==e[Jt]&&_x(r,e);let i=e[vs];i!==null&&i.detachView(n)}$4(e)}finally{ve(t)}}function Qk(n,e,t,r){let i=n?.[Ou];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Vu.add(n),i2(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let u=0;u<o.animateFns.length;u++){let c=o.animateFns[u],{promise:l}=c();a.push(l)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),L7(n,r)}else n&&Vu.delete(n),r(!1)},i)}function L7(n,e){let t=n[Ou]?.running;if(t){t.then(()=>{n[Ou].running=void 0,Vu.delete(n),e(!0)});return}e(!1)}function B7(n,e){let t=n.cleanup,r=e[Sl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Sl]=null);let i=e[Js];if(i!==null){e[Js]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Wo];if(s!==null){e[Wo]=null;for(let o of s)o.destroy()}}function $7(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof $u)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];ct(Ke.LifecycleHookStart,a,u);try{u.call(a)}finally{ct(Ke.LifecycleHookEnd,a,u)}}else{ct(Ke.LifecycleHookStart,i,s);try{s.call(i)}finally{ct(Ke.LifecycleHookEnd,i,s)}}}}}function o2(n,e,t){return V7(n,e.parent,t)}function V7(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ri];if(Jo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Vi.None||i===Vi.Emulated)return null}return Li(r,t)}function a2(n,e,t){return U7(n,e,t)}function j7(n,e,t){return n.type&40?Li(n,t):null}var U7=j7,Xk;function bx(n,e,t,r){let i=o2(n,r,e),s=e[gt],o=r.parent||e[nr],a=a2(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Wk(s,i,t[u],a,!1);else Wk(s,i,t,a,!1);Xk!==void 0&&Xk(s,r,e,t,i)}function Pf(n,e){if(e!==null){let t=e.type;if(t&3)return Li(e,n);if(t&4)return U4(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Pf(n,r);{let i=n[e.index];return Fi(i)?U4(-1,i):fi(i)}}else{if(t&128)return Pf(n,e.next);if(t&32)return vx(e,n)()||fi(n[e.index]);{let r=u2(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Go(n[rr]);return Pf(i,r)}else return Pf(n,e.next)}}}return null}function u2(n,e){if(e!==null){let r=n[rr][nr],i=e.projection;return r.projection[i]}return null}function U4(n,e){let t=Bt+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return Pf(r,i)}return e[Zo]}function wx(n,e,t,r,i,s,o){for(;t!=null;){let a=r[no];if(t.type===128){t=t.next;continue}let u=r[t.index],c=t.type;if(o&&e===0&&(u&&Nl(fi(u),r),t.flags|=2),!kv(t))if(c&8)wx(n,e,t.child,r,i,s,!1),kl(e,n,a,i,u,t,s,r);else if(c&32){let l=vx(t,r),d;for(;d=l();)kl(e,n,a,i,d,t,s,r);kl(e,n,a,i,u,t,s,r)}else c&16?c2(n,e,r,t,i,s):kl(e,n,a,i,u,t,s,r);t=o?t.projectionNext:t.next}}function $v(n,e,t,r,i,s){wx(t,r,n.firstChild,e,i,s,!1)}function H7(n,e,t){let r=e[gt],i=o2(n,t,e),s=t.parent||e[nr],o=a2(s,t,e);c2(r,0,e,t,i,o)}function c2(n,e,t,r,i,s){let o=t[rr],u=o[nr].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];kl(e,n,t[no],i,l,r,s,t)}else{let c=u,l=o[Jt];M3(r)&&(c.flags|=128),wx(n,e,c,l,i,s,!0)}}function z7(n,e,t,r,i,s,o){let a=r[Zo],u=fi(r);a!==u&&kl(e,n,t,s,a,i,o);for(let c=Bt;c<r.length;c++){let l=r[c];$v(l[fe],l,n,e,s,a)}}function q7(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Cs.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Cs.Important),n.setStyle(t,r,i,s))}}function l2(n,e,t,r,i){let s=bs(),o=r&2;try{ea(-1),o&&e.length>kt&&e2(n,e,kt,!1);let a=o?Ke.TemplateUpdateStart:Ke.TemplateCreateStart;ct(a,i,t),t(r,i)}finally{ea(s);let a=o?Ke.TemplateUpdateEnd:Ke.TemplateCreateEnd;ct(a,i,t)}}function Vv(n,e,t){X7(n,e,t),(t.flags&64)===64&&Z7(n,e,t)}function Hf(n,e,t=Li){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function W7(n,e,t,r){let s=r.get(B3,L3)||t===Vi.ShadowDom||t===Vi.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return G7(o),o}function G7(n){Y7(n)}var Y7=()=>null;function K7(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function d2(n,e,t,r,i,s){let o=e[fe];if(Dx(n,o,e,t,r)){Jo(n)&&Q7(e,n.index);return}n.type&3&&(t=K7(t)),h2(n,e,t,r,i,s)}function h2(n,e,t,r,i,s){if(n.type&3){let o=Li(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function Q7(n,e){let t=pi(e,n);t[xe]&16||(t[xe]|=64)}function X7(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Jo(t)&&T7(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||hv(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],u=Nf(e,n,o,t);if(Nl(u,e),s!==null&&n9(e,o-r,u,a,t,s),_s(a)){let c=pi(t.index,e);c[Ht]=Nf(e,n,o,t)}}}function Z7(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=Dk();try{ea(s);for(let a=r;a<i;a++){let u=n.data[a],c=e[a];K0(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&J7(u,c)}}finally{ea(-1),K0(o)}}function J7(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Ex(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];X3(e,s.selectors,!1)&&(r??=[],_s(s)?r.unshift(s):r.push(s))}return r}function e9(n,e,t,r,i,s){let o=Li(n,e);t9(e[gt],o,s,n.value,t,r,i)}function t9(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Ni(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function n9(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let u=o[a],c=o[a+1];j4(r,t,u,c)}}function Cx(n,e,t,r,i){let s=kt+t,o=e[fe],a=i(o,e,n,r,t);e[s]=a,Ml(n,!0);let u=n.type===2;return u?(W3(e[gt],a,n),(_k()===0||Tl(n))&&Nl(a,e),bk()):Nl(a,e),J0()&&(!u||!kv(n))&&bx(o,e,a,n),n}function xx(n){let e=n;return d4()?h4():(e=e.parent,Ml(e,!1)),e}function r9(n,e){let t=n[no];if(!t)return;let r;try{r=t.get(Bi,null)}catch{r=null}r?.(e)}function Dx(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let u=0;u<o.length;u+=2){let c=o[u],l=o[u+1],d=e.data[c];j4(d,t[c],l,i),a=!0}if(s)for(let u of s){let c=t[u],l=e.data[u];j4(l,c,r,i),a=!0}return a}function i9(n,e){let t=pi(e,n),r=t[fe];s9(r,t);let i=t[Ri];i!==null&&t[Au]===null&&(t[Au]=$3(i,t[no])),ct(Ke.ComponentStart);try{Sx(r,t,t[Ht])}finally{ct(Ke.ComponentEnd,t[Ht])}}function s9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Sx(n,e,t){X0(e);try{let r=n.viewQuery;r!==null&&V4(1,r,t);let i=n.template;i!==null&&l2(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[vs]?.finishViewCreation(n),n.staticContentQueries&&V3(n,e),n.staticViewQueries&&V4(2,n.viewQuery,t);let s=n.components;s!==null&&o9(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[xe]&=-5,Z0()}}function o9(n,e){for(let t=0;t<e.length;t++)i9(n,e[t])}function zf(n,e,t,r){let i=ve(null);try{let s=e.tView,a=n[xe]&4096?4096:16,u=mx(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];u[Xo]=c;let l=n[vs];return l!==null&&(u[vs]=l.createEmbeddedView(s)),Sx(s,u,t),u}finally{ve(i)}}function Rl(n,e){return!e||e.firstChild===null||M3(n)}function Rf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(fi(s)),Fi(s)&&f2(s,r);let o=t.type;if(o&8)Rf(n,e,t.child,r);else if(o&32){let a=vx(t,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=u2(e,t);if(Array.isArray(a))r.push(...a);else{let u=Go(e[rr]);Rf(u[fe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function f2(n,e){for(let t=Bt;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&Rf(r[fe],r,i,e)}n[Zo]!==n[Ri]&&e.push(n[Zo])}function p2(n){if(n[Pu]!==null){for(let e of n[Pu])e.impl.addSequence(e);n[Pu].length=0}}var m2=[];function a9(n){return n[Gr]??u9(n)}function u9(n){let e=m2.pop()??Object.create(l9);return e.lView=n,e}function c9(n){n.lView[Gr]!==n&&(n.lView=null,m2.push(n))}var l9=J(C({},ll),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Fu(n.lView)},consumerOnSignalRead(){this.lView[Gr]=this}});function d9(n){let e=n[Gr]??Object.create(h9);return e.lView=n,e}var h9=J(C({},ll),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Go(n.lView);for(;e&&!g2(e[fe]);)e=Go(e);e&&n4(e)},consumerOnSignalRead(){this.lView[Gr]=this}});function g2(n){return n.type!==2}function v2(n){if(n[Wo]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Wo])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[xe]&8192)}}var f9=100;function y2(n,e=0){let r=n[gs].rendererFactory,i=!1;i||r.begin?.();try{p9(n,e)}finally{i||r.end?.()}}function p9(n,e){let t=f4();try{mf(!0),H4(n,e);let r=0;for(;Sf(n);){if(r===f9)throw new te(103,!1);r++,H4(n,1)}}finally{mf(t)}}function m9(n,e,t,r){if(Ru(e))return;let i=e[xe],s=!1,o=!1;X0(e);let a=!0,u=null,c=null;s||(g2(n)?(c=a9(e),u=dl(c)):i0()===null?(a=!1,c=d9(e),u=dl(c)):e[Gr]&&(yu(e[Gr]),e[Gr]=null));try{t4(e),Ek(n.bindingStartIndex),t!==null&&l2(n,e,t,2,r);let l=(i&3)===3;if(!s)if(l){let f=n.preOrderCheckHooks;f!==null&&rv(e,f,null)}else{let f=n.preOrderHooks;f!==null&&iv(e,f,0,null),D4(e,0)}if(o||g9(e),v2(e),_2(e,0),n.contentQueries!==null&&V3(n,e),!s)if(l){let f=n.contentCheckHooks;f!==null&&rv(e,f)}else{let f=n.contentHooks;f!==null&&iv(e,f,1),D4(e,1)}y9(n,e);let d=n.components;d!==null&&w2(e,d,0);let h=n.viewQuery;if(h!==null&&V4(2,h,r),!s)if(l){let f=n.viewCheckHooks;f!==null&&rv(e,f)}else{let f=n.viewHooks;f!==null&&iv(e,f,2),D4(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[z0]){for(let f of e[z0])f();e[z0]=null}s||(p2(e),e[xe]&=-73)}catch(l){throw s||Fu(e),l}finally{c!==null&&(rf(c,u),a&&c9(c)),Z0()}}function _2(n,e){for(let t=P3(n);t!==null;t=O3(t))for(let r=Bt;r<t.length;r++){let i=t[r];b2(i,e)}}function g9(n){for(let e=P3(n);e!==null;e=O3(e)){if(!(e[xe]&2))continue;let t=e[Nu];for(let r=0;r<t.length;r++){let i=t[r];n4(i)}}}function v9(n,e,t){ct(Ke.ComponentStart);let r=pi(e,n);try{b2(r,t)}finally{ct(Ke.ComponentEnd,r[Ht])}}function b2(n,e){q0(n)&&H4(n,e)}function H4(n,e){let r=n[fe],i=n[xe],s=n[Gr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&sf(s)),o||=!1,s&&(s.dirty=!1),n[xe]&=-9217,o)m9(r,n,r.template,n[Ht]);else if(i&8192){let a=ve(null);try{v2(n),_2(n,1);let u=r.components;u!==null&&w2(n,u,1),p2(n)}finally{ve(a)}}}function w2(n,e,t){for(let r=0;r<e.length;r++)v9(n,e[r],t)}function y9(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ea(~i);else{let s=i,o=t[++r],a=t[++r];xk(o,s);let u=e[s];ct(Ke.HostBindingsUpdateStart,u);try{a(2,u)}finally{ct(Ke.HostBindingsUpdateEnd,u)}}}}finally{ea(-1)}}function Ix(n,e){let t=f4()?64:1088;for(n[gs].changeDetectionScheduler?.notify(e);n;){n[xe]|=t;let r=Go(n);if(Al(n)&&!r)return n;n=r}return null}function E2(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function C2(n,e){let t=Bt+e;if(t<n.length)return n[t]}function qf(n,e,t,r=!0){let i=e[fe];if(_9(i,e,n,t),r){let o=U4(t,n),a=e[gt],u=a.parentNode(n[Zo]);u!==null&&R7(i,n[nr],a,e,u,o)}let s=e[Au];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function x2(n,e){let t=Ff(n,e);return t!==void 0&&Bv(t[fe],t),t}function Ff(n,e){if(n.length<=Bt)return;let t=Bt+e,r=n[t];if(r){let i=r[Xo];i!==null&&i!==n&&_x(i,r),e>0&&(n[t-1][hi]=r[hi]);let s=_f(n,Bt+e);N7(r[fe],r);let o=s[vs];o!==null&&o.detachView(s[fe]),r[Jt]=null,r[hi]=null,r[xe]&=-129}return r}function _9(n,e,t,r){let i=Bt+r,s=t.length;r>0&&(t[i-1][hi]=e),r<s-Bt?(e[hi]=t[i],jC(t,Bt+r,e)):(t.push(e),e[hi]=null),e[Jt]=t;let o=e[Xo];o!==null&&t!==o&&D2(o,e);let a=e[vs];a!==null&&a.insertView(n),W0(e),e[xe]|=128}function D2(n,e){let t=n[Nu],r=e[Jt];if(ys(r))n[xe]|=2;else{let i=r[Jt][rr];e[rr]!==i&&(n[xe]|=2)}t===null?n[Nu]=[e]:t.push(e)}var ia=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[fe];return Rf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ht]}set context(e){this._lView[Ht]=e}get destroyed(){return Ru(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Jt];if(Fi(e)){let t=e[xf],r=t?t.indexOf(this):-1;r>-1&&(Ff(e,r),_f(t,r))}this._attachedToViewContainer=!1}Bv(this._lView[fe],this._lView)}onDestroy(e){r4(this._lView,e)}markForCheck(){Ix(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[xe]&=-129}reattach(){W0(this._lView),this._lView[xe]|=128}detectChanges(){this._lView[xe]|=1024,y2(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Al(this._lView),t=this._lView[Xo];t!==null&&!e&&_x(t,this._lView),s2(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=Al(this._lView),r=this._lView[Xo];r!==null&&!t&&D2(r,this._lView),W0(this._lView)}};var sa=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=b9;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=zf(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ia(s)}}return n})();function b9(){return Tx(en(),we())}function Tx(n,e){return n.type&4?new sa(e,n,Bl(n,e)):null}function $l(n,e,t,r,i){let s=n.data[e];if(s===null)s=w9(n,e,t,r,i),Ck()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=wk();s.injectorIndex=o===null?-1:o.injectorIndex}return Ml(s,!0),s}function w9(n,e,t,r,i){let s=l4(),o=d4(),a=o?s:s&&s.parent,u=n.data[e]=C9(n,a,t,e,r,i);return E9(n,u,s,o),u}function E9(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function C9(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return a4()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function x9(n){let e=n[KC]??[],r=n[Jt][gt],i=[];for(let s of e)s.data[F3]!==void 0?i.push(s):D9(s,r);n[KC]=i}function D9(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[R3];for(;t<i;){let s=r.nextSibling;q3(e,r,!1),r=s,t++}}}var S9=()=>null,I9=()=>null;function vv(n,e){return S9(n,e)}function S2(n,e,t){return I9(n,e,t)}var I2=class{},jv=class{},z4=class{resolveComponentFactory(e){throw new te(917,!1)}},Wf=class{static NULL=new z4},ju=class{},xs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>T9()}return n})();function T9(){let n=we(),e=en(),t=pi(e.index,n);return(ys(t)?t:n)[gt]}var T2=(()=>{class n{static \u0275prov=Y({token:n,providedIn:"root",factory:()=>null})}return n})();var ov={},q4=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ov,r);return i!==ov||t===ov?i:this.parentInjector.get(e,t,r)}};function yv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=AC(i,a);else if(s==2){let u=a,c=e[++o];r=AC(r,u+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ee(n,e=0){let t=we();if(t===null)return ce(n,e);let r=en();return I3(r,t,Dn(n),e)}function A2(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,u=null,c=null;for(let l of o)if(l.resolveHostDirectives!==null){[a,u,c]=l.resolveHostDirectives(o);break}k9(n,e,t,a,s,u,c)}s!==null&&r!==null&&A9(t,r,s)}function A9(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new te(-301,!1);r.push(e[i],s)}}function M9(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function k9(n,e,t,r,i,s,o){let a=r.length,u=null;for(let h=0;h<a;h++){let f=r[h];u===null&&_s(f)&&(u=f,M9(n,t,h)),L4(hv(t,e),n,f.type)}L9(t,n.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let c=!1,l=!1,d=J3(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(t.mergedAttrs=Ol(t.mergedAttrs,f.hostAttrs),O9(n,t,e,d,f),F9(d,f,i),o!==null&&o.has(f)){let[g,v]=o.get(f);t.directiveToIndex.set(f.type,[d,g+t.directiveStart,v+t.directiveStart])}else(s===null||!s.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let p=f.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),d++}P9(n,t,s)}function P9(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Zk(0,e,i,r),Zk(1,e,i,r),e3(e,r,!1);else{let s=t.get(i);Jk(0,e,s,r),Jk(1,e,s,r),e3(e,r,!0)}}}function Zk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),M2(e,s)}}function Jk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),M2(e,o)}}function M2(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function e3(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||fx(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let c=i[u];for(let l of c)if(l===e){o??=[],o.push(u,r[a+1]);break}}else if(t&&s.hasOwnProperty(u)){let c=s[u];for(let l=0;l<c.length;l+=2)if(c[l]===e){o??=[],o.push(c[l+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function O9(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=qo(i.type,!0)),o=new $u(s,_s(i),Ee,null);n.blueprint[r]=o,t[r]=o,N9(n,e,r,J3(n,t,i.hostVars,ir),i)}function N9(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;R9(o)!=a&&o.push(a),o.push(t,r,s)}}function R9(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function F9(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_s(e)&&(t[""]=n)}}function L9(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Ax(n,e,t,r,i,s,o,a){let u=e[fe],c=u.consts,l=mi(c,o),d=$l(u,n,t,r,l);return s&&A2(u,e,d,mi(c,a),i),d.mergedAttrs=Ol(d.mergedAttrs,d.attrs),d.attrs!==null&&yv(d,d.attrs,!1),d.mergedAttrs!==null&&yv(d,d.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,d),d}function Mx(n,e){y3(n,e),QC(e)&&n.queries.elementEnd(e)}function B9(n,e,t,r,i,s){let o=e.consts,a=mi(o,i),u=$l(e,n,t,r,a);if(u.mergedAttrs=Ol(u.mergedAttrs,u.attrs),s!=null){let c=mi(o,s);u.localNames=[];for(let l=0;l<c.length;l+=2)u.localNames.push(c[l],-1)}return u.attrs!==null&&yv(u,u.attrs,!1),u.mergedAttrs!==null&&yv(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function kx(n){return P2(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function k2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function P2(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function O2(n,e,t){return n[e]=t}function gi(n,e,t){if(t===ir)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Px(n,e,t,r){let i=gi(n,e,t);return gi(n,e+1,r)||i}function N2(n,e,t,r,i){let s=Px(n,e,t,r);return gi(n,e+2,i)||s}function av(n,e,t){return function r(i){let s=Jo(n)?pi(n.index,e):e;Ix(s,5);let o=e[Ht],a=t3(e,o,t,i),u=r.__ngNextListenerFn__;for(;u;)a=t3(e,o,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function t3(n,e,t,r){let i=ve(null);try{return ct(Ke.OutputStart,e,t),t(r)!==!1}catch(s){return r9(n,s),!1}finally{ct(Ke.OutputEnd,e,t),ve(i)}}function R2(n,e,t,r,i,s,o,a){let u=Tl(n),c=!1,l=null;if(!r&&u&&(l=V9(e,t,s,n.index)),l!==null){let d=l.__ngLastListenerFn__||l;d.__ngNextListenerFn__=o,l.__ngLastListenerFn__=o,c=!0}else{let d=Li(n,t),h=r?r(d):d;e7(t,h,s,a);let f=i.listen(h,s,a);if(!$9(s)){let p=r?g=>r(fi(g[n.index])):n.index;F2(p,e,t,s,a,f,!1)}}return c}function $9(n){return n.startsWith("animation")||n.startsWith("transition")}function V9(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Sl],u=i[s+2];return a&&a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function F2(n,e,t,r,i,s,o){let a=e.firstCreatePass?s4(e):null,u=i4(t),c=u.length;u.push(i,s),a&&a.push(r,n,c,(c+1)*(o?-1:1))}function n3(n,e,t,r,i,s){let o=e[t],a=e[fe],c=a.data[t].outputs[r],d=o[c].subscribe(s);F2(n.index,a,e,i,s,d,!0)}var W4=Symbol("BINDING");var _v=class extends Wf{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ko(e);return new Fl(t,this.ngModule)}};function j9(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Rv.SignalBased)!==0};return i&&(s.transform=i),s})}function U9(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function H9(n,e,t){let r=e instanceof dn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new q4(t,r):t}function z9(n){let e=n.get(ju,null);if(e===null)throw new te(407,!1);let t=n.get(T2,null),r=n.get(Yo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function q9(n,e){let t=L2(n);return H3(e,t,t==="svg"?XC:t==="math"?fk:null)}function L2(n){return(n.selectors[0][0]||"div").toLowerCase()}var Fl=class extends jv{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=j9(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=U9(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=x7(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){ct(Ke.DynamicComponentStart);let a=ve(null);try{let u=this.componentDef,c=W9(r,u,o,s),l=H9(u,i||this.ngModule,e),d=z9(l),h=d.rendererFactory.createRenderer(null,u),f=r?W7(h,r,u.encapsulation,l):q9(u,h),p=o?.some(r3)||s?.some(y=>typeof y!="function"&&y.bindings.some(r3)),g=mx(null,c,null,512|Z3(u),null,null,d,h,l,null,$3(f,l,!0));g[kt]=f,X0(g);let v=null;try{let y=Ax(kt,g,2,"#host",()=>c.directiveRegistry,!0,0);W3(h,f,y),Nl(f,g),Vv(c,g,y),lx(c,y,g),Mx(c,y),t!==void 0&&Y9(y,this.ngContentSelectors,t),v=pi(y.index,g),g[Ht]=v[Ht],Sx(c,g,null)}catch(y){throw v!==null&&$4(v),$4(g),y}finally{ct(Ke.DynamicComponentEnd),Z0()}return new bv(this.componentType,g,!!p)}finally{ve(a)}}};function W9(n,e,t,r){let i=n?["ng-version","21.0.6"]:D7(e.selectors[0]),s=null,o=null,a=0;if(t)for(let l of t)a+=l[W4].requiredVars,l.create&&(l.targetIdx=0,(s??=[]).push(l)),l.update&&(l.targetIdx=0,(o??=[]).push(l));if(r)for(let l=0;l<r.length;l++){let d=r[l];if(typeof d!="function")for(let h of d.bindings){a+=h[W4].requiredVars;let f=l+1;h.create&&(h.targetIdx=f,(s??=[]).push(h)),h.update&&(h.targetIdx=f,(o??=[]).push(h))}}let u=[e];if(r)for(let l of r){let d=typeof l=="function"?l:l.type,h=BC(d);u.push(h)}return px(0,null,G9(s,o),1,a,u,null,null,null,[i],null)}function G9(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function r3(n){let e=n[W4].kind;return e==="input"||e==="twoWay"}var bv=class extends I2{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Df(t[fe],kt),this.location=Bl(this._tNode,t),this.instance=pi(this._tNode.index,t)[Ht],this.hostView=this.changeDetectorRef=new ia(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=Dx(r,i[fe],i,e,t);this.previousInputValues.set(e,t);let o=pi(r.index,i);Ix(o,1)}get injector(){return new Bu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Y9(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var io=(()=>{class n{static __NG_ELEMENT_ID__=K9}return n})();function K9(){let n=en();return $2(n,we())}var Q9=io,B2=class extends Q9{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Bl(this._hostTNode,this._hostLView)}get injector(){return new Bu(this._hostTNode,this._hostLView)}get parentInjector(){let e=ax(this._hostTNode,this._hostLView);if(w3(e)){let t=lv(e,this._hostLView),r=cv(e),i=t[fe].data[r+8];return new Bu(i,t)}else return new Bu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=i3(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=vv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Rl(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let u=e&&!SW(e),c;if(u)c=t;else{let v=t||{};c=v.index,r=v.injector,i=v.projectableNodes,s=v.environmentInjector||v.ngModuleRef,o=v.directives,a=v.bindings}let l=u?e:new Fl(Ko(e)),d=r||this.parentInjector;if(!s&&l.ngModule==null){let y=(u?d:this.parentInjector).get(dn,null);y&&(s=y)}let h=Ko(l.componentType??{}),f=vv(this._lContainer,h?.id??null),p=f?.firstChild??null,g=l.create(d,i,p,s,o,a);return this.insertImpl(g.hostView,c,Rl(this._hostTNode,f)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(mk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Jt],c=new B2(u,u[nr],u[Jt]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return qf(o,i,s,r),e.attachToViewContainerRef(),jC(T4(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=i3(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ff(this._lContainer,t);r&&(_f(T4(this._lContainer),t),Bv(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ff(this._lContainer,t);return r&&_f(T4(this._lContainer),t)!=null?new ia(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function i3(n){return n[xf]}function T4(n){return n[xf]||(n[xf]=[])}function $2(n,e){let t,r=e[n.index];return Fi(r)?t=r:(t=E2(r,e,null,n),e[n.index]=t,gx(e,t)),Z9(t,e,n,r),new B2(t,n,e)}function X9(n,e){let t=n[gt],r=t.createComment(""),i=Li(e,n),s=t.parentNode(i);return mv(t,s,r,t.nextSibling(i),!1),r}var Z9=tG,J9=()=>!1;function eG(n,e,t){return J9(n,e,t)}function tG(n,e,t,r){if(n[Zo])return;let i;t.type&8?i=fi(r):i=X9(e,t),n[Zo]=i}var G4=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Y4=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Ox(e,t).matches!==null&&this.queries[t].setDirty()}},wv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=cG(e):this.predicate=e}},K4=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Q4=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,nG(t,s)),this.matchTNodeWithReadOption(e,t,sv(t,e,s,!1,!1))}else r===sa?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,sv(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===$n||i===io||i===sa&&t.type&4)this.addMatch(t.index,-2);else{let s=sv(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function nG(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function rG(n,e){return n.type&11?Bl(n,e):n.type&4?Tx(n,e):null}function iG(n,e,t,r){return t===-1?rG(e,n):t===-2?sG(n,e,r):Nf(n,n[fe],t,e)}function sG(n,e,t){if(t===$n)return Bl(e,n);if(t===sa)return Tx(e,n);if(t===io)return $2(e,n)}function V2(n,e,t,r){let i=e[vs].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let c=o[u];if(c<0)a.push(null);else{let l=s[c];a.push(iG(e,l,o[u+1],t.metadata.read))}}i.matches=a}return i.matches}function X4(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=V2(n,e,i,t);for(let a=0;a<s.length;a+=2){let u=s[a];if(u>0)r.push(o[a/2]);else{let c=s[a+1],l=e[-u];for(let d=Bt;d<l.length;d++){let h=l[d];h[Xo]===h[Jt]&&X4(h[fe],h,c,r)}if(l[Nu]!==null){let d=l[Nu];for(let h=0;h<d.length;h++){let f=d[h];X4(f[fe],f,c,r)}}}}}return r}function oG(n,e){return n[vs].queries[e].queryList}function j2(n,e,t){let r=new fv((t&4)===4);return yk(n,e,r,r.destroy),(e[vs]??=new Y4).queries.push(new G4(r))-1}function aG(n,e,t){let r=Pt();return r.firstCreatePass&&(U2(r,new wv(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),j2(r,we(),e)}function uG(n,e,t,r){let i=Pt();if(i.firstCreatePass){let s=en();U2(i,new wv(e,t,r),s.index),lG(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return j2(i,we(),t)}function cG(n){return n.split(",").map(e=>e.trim())}function U2(n,e,t){n.queries===null&&(n.queries=new K4),n.queries.track(new Q4(e,t))}function lG(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Ox(n,e){return n.queries.getByIndex(e)}function dG(n,e){let t=n[fe],r=Ox(t,e);return r.crossesNgTemplate?X4(t,n,e,[]):V2(t,n,r,e)}var Uu=class{},Uv=class{};var Ev=class extends Uu{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new _v(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=LC(e);this._bootstrapComponents=K3(s.bootstrap),this._r3Injector=_4(e,t,[{provide:Uu,useValue:this},{provide:Wf,useValue:this.componentFactoryResolver},...r],eo(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cv=class extends Uv{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ev(this.moduleType,e,[])}};var Lf=class extends Uu{injector;componentFactoryResolver=new _v(this);instance=null;constructor(e){super();let t=new Iu([...e.providers,{provide:Uu,useValue:this},{provide:Wf,useValue:this.componentFactoryResolver}],e.parent||Ef(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Gf(n,e,t=null){return new Lf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var hG=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zC(!1,t.type),i=r.length>0?Gf([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Y({token:n,providedIn:"environment",factory:()=>new n(ce(dn))})}return n})();function Qe(n){return Vf(()=>{let e=H2(n),t=J(C({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ux.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(hG).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vi.Emulated,styles:n.styles||qr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&oa("NgStandalone"),z2(t);let r=n.dependencies;return t.directiveDefs=s3(r,fG),t.pipeDefs=s3(r,X1),t.id=gG(t),t})}function fG(n){return Ko(n)||BC(n)}function so(n){return Vf(()=>({type:n.type,bootstrap:n.bootstrap||qr,declarations:n.declarations||qr,imports:n.imports||qr,exports:n.exports||qr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pG(n,e){if(n==null)return Qo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,u;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,u=i[3]||null):(s=i,o=i,a=Rv.None,u=null),t[s]=[r,a,u],e[s]=o}return t}function mG(n){if(n==null)return Qo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function vt(n){return Vf(()=>{let e=H2(n);return z2(e),e})}function Vl(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function H2(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Qo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||qr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:pG(n.inputs,e),outputs:mG(n.outputs),debugInfo:null}}function z2(n){n.features?.forEach(e=>e(n))}function s3(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function gG(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function vG(n){return Object.getPrototypeOf(n.prototype).constructor}function sr(n){let e=vG(n.type),t=!0,r=[n];for(;e;){let i;if(_s(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=A4(n.inputs),o.declaredInputs=A4(n.declaredInputs),o.outputs=A4(n.outputs);let a=i.hostBindings;a&&EG(n,a);let u=i.viewQuery,c=i.contentQueries;if(u&&bG(n,u),c&&wG(n,c),yG(n,i),Q1(n.outputs,i.outputs),_s(i)&&i.data.animation){let l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===sr&&(t=!1)}}e=Object.getPrototypeOf(e)}_G(r)}function yG(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function _G(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ol(i.hostAttrs,t=Ol(t,i.hostAttrs))}}function A4(n){return n===Qo?{}:n===qr?[]:n}function bG(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function wG(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function EG(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function q2(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Ol(n.mergedAttrs,n.attrs);let l=n.tView=px(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),l.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ml(n,!1);let u=xG(t,e,n,r);J0()&&bx(t,e,u,n),Nl(u,e);let c=E2(u,e,u,n);e[r+kt]=c,gx(e,c),eG(c,n,e)}function CG(n,e,t,r,i,s,o,a,u,c,l){let d=t+kt,h;return e.firstCreatePass?(h=$l(e,d,4,o||null,a||null),G0()&&A2(e,n,h,mi(e.consts,c),Ex),y3(e,h)):h=e.data[d],q2(h,n,e,t,r,i,s,u),Tl(h)&&Vv(e,n,h),c!=null&&Hf(n,h,l),h}function Bf(n,e,t,r,i,s,o,a,u,c,l){let d=t+kt,h;if(e.firstCreatePass){if(h=$l(e,d,4,o||null,a||null),c!=null){let f=mi(e.consts,c);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=e.data[d];return q2(h,n,e,t,r,i,s,u),c!=null&&Hf(n,h,l),h}function je(n,e,t,r,i,s,o,a){let u=we(),c=Pt(),l=mi(c.consts,s);return CG(u,c,n,e,t,r,i,l,void 0,o,a),je}var xG=DG;function DG(n,e,t,r){return Tf(!0),e[gt].createComment("")}var Nx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function W2(n){return typeof n=="function"&&n[Zn]!==void 0}function Rx(n){return W2(n)&&typeof n.set=="function"}var Fx=new he("");function aa(n){return!!n&&typeof n.then=="function"}function Lx(n){return!!n&&typeof n.subscribe=="function"}var G2=new he("");var Bx=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=$(G2,{optional:!0})??[];injector=$(Wr);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=tr(this.injector,i);if(aa(s))t.push(s);else if(Lx(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hv=new he("");function Y2(){XE(()=>{let n="";throw new te(600,n)})}function K2(n){return n.isBoundToModule}var SG=10;var ua=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=$(Bi);afterRenderManager=$(yx);zonelessEnabled=$(Mf);rootEffectScheduler=$(ev);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Wt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=$(ra);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(bt(t=>!t))}constructor(){$(zu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=$(dn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Wr.NULL){return this._injector.get(Cr).run(()=>{ct(Ke.BootstrapComponentStart);let o=t instanceof jv;if(!this._injector.get(Bx).done){let p="";throw new te(405,p)}let u;o?u=t:u=this._injector.get(Wf).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let c=K2(u)?void 0:this._injector.get(Uu),l=r||u.selector,d=u.create(i,[],l,c),h=d.location.nativeElement,f=d.injector.get(Fx,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Of(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),ct(Ke.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ct(Ke.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Fv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ct(Ke.ChangeDetectionEnd),new te(101,!1);let t=ve(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ve(t),this.afterTick.next(),ct(Ke.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ju,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<SG;){ct(Ke.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ct(Ke.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Sf(i))continue;let s=r&&!this.zonelessEnabled?0:1;y2(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Sf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Of(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Hv,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Of(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Of(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ca(n,e,t,r){let i=we(),s=ro();if(gi(i,s,e)){let o=Pt(),a=If();e9(a,i,n,e,t,r)}return ca}var She=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Z4=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function M4(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function IG(n,e,t,r){let i,s,o=0,a=n.length-1,u=void 0;if(Array.isArray(e)){ve(r);let c=e.length-1;for(ve(null);o<=a&&o<=c;){let l=n.at(o),d=e[o],h=M4(o,l,o,d,t);if(h!==0){h<0&&n.updateValue(o,d),o++;continue}let f=n.at(a),p=e[c],g=M4(a,f,c,p,t);if(g!==0){g<0&&n.updateValue(a,p),a--,c--;continue}let v=t(o,l),y=t(a,f),E=t(o,d);if(Object.is(E,y)){let M=t(c,p);Object.is(M,v)?(n.swap(o,a),n.updateValue(a,p),c--,a--):n.move(a,o),n.updateValue(o,d),o++;continue}if(i??=new xv,s??=a3(n,o,a,t),J4(n,i,o,E))n.updateValue(o,d),o++,a++;else if(s.has(E))i.set(v,n.detach(o)),a--;else{let M=n.create(o,e[o]);n.attach(o,M),o++,a++}}for(;o<=c;)o3(n,i,t,o,e[o]),o++}else if(e!=null){ve(r);let c=e[Symbol.iterator]();ve(null);let l=c.next();for(;!l.done&&o<=a;){let d=n.at(o),h=l.value,f=M4(o,d,o,h,t);if(f!==0)f<0&&n.updateValue(o,h),o++,l=c.next();else{i??=new xv,s??=a3(n,o,a,t);let p=t(o,h);if(J4(n,i,o,p))n.updateValue(o,h),o++,a++,l=c.next();else if(!s.has(p))n.attach(o,n.create(o,h)),o++,a++,l=c.next();else{let g=t(o,d);i.set(g,n.detach(o)),a--}}}for(;!l.done;)o3(n,i,t,n.length,l.value),l=c.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(c=>{n.destroy(c)})}function J4(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function o3(n,e,t,r,i){if(J4(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function a3(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var xv=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Ds(n,e,t,r,i,s,o,a){oa("NgControlFlow");let u=we(),c=Pt(),l=mi(c.consts,s);return Bf(u,c,n,e,t,r,i,l,256,o,a),$x}function $x(n,e,t,r,i,s,o,a){oa("NgControlFlow");let u=we(),c=Pt(),l=mi(c.consts,s);return Bf(u,c,n,e,t,r,i,l,512,o,a),$x}function Ss(n,e){oa("NgControlFlow");let t=we(),r=ro(),i=t[r]!==ir?t[r]:-1,s=i!==-1?Dv(t,kt+i):void 0,o=0;if(gi(t,r,n)){let a=ve(null);try{if(s!==void 0&&x2(s,o),n!==-1){let u=kt+n,c=Dv(t,u),l=rx(t[fe],u),d=S2(c,l,t),h=zf(t,l,e,{dehydratedView:d});qf(c,h,o,Rl(l,d))}}finally{ve(a)}}else if(s!==void 0){let a=C2(s,o);a!==void 0&&(a[Ht]=e)}}var ex=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Bt}};var tx=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function qu(n,e,t,r,i,s,o,a,u,c,l,d,h){oa("NgControlFlow");let f=we(),p=Pt(),g=u!==void 0,v=we(),y=a?o.bind(v[rr][Ht]):o,E=new tx(g,y);v[kt+n]=E,Bf(f,p,n+1,e,t,r,i,mi(p.consts,s),256),g&&Bf(f,p,n+2,u,c,l,d,mi(p.consts,h),512)}var nx=class extends Z4{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Bt}at(e){return this.getLView(e)[Ht].$implicit}attach(e,t){let r=t[Au];this.needsIndexUpdate||=e!==this.length,qf(this.lContainer,t,e,Rl(this.templateTNode,r)),TG(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,AG(this.lContainer,e),MG(this.lContainer,e)}create(e,t){let r=vv(this.lContainer,this.templateTNode.tView.ssrId);return zf(this.hostLView,this.templateTNode,new ex(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Bv(e[fe],e)}updateValue(e,t){this.getLView(e)[Ht].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ht].$index=e}getLView(e){return kG(this.lContainer,e)}};function Wu(n){let e=ve(null),t=bs();try{let r=we(),i=r[fe],s=r[t],o=t+1,a=Dv(r,o);if(s.liveCollection===void 0){let c=rx(i,o);s.liveCollection=new nx(a,r,c)}else s.liveCollection.reset();let u=s.liveCollection;if(IG(u,n,s.trackByFn,e),u.updateIndexes(),s.hasEmptyBlock){let c=ro(),l=u.length===0;if(gi(r,c,l)){let d=t+2,h=Dv(r,d);if(l){let f=rx(i,d),p=S2(h,f,r),g=zf(r,f,void 0,{dehydratedView:p});qf(h,g,0,Rl(f,p))}else i.firstUpdatePass&&x9(h),x2(h,0)}}}finally{ve(e)}}function Dv(n,e){return n[e]}function TG(n,e){if(n.length<=Bt)return;let t=Bt+e,r=n[t],i=r?r[Ou]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[no];P7(s,i),Vu.delete(r),i.detachedLeaveAnimationFns=void 0}}function AG(n,e){if(n.length<=Bt)return;let t=Bt+e,r=n[t],i=r?r[Ou]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function MG(n,e){return Ff(n,e)}function kG(n,e){return C2(n,e)}function rx(n,e){return Df(n,e)}function X(n,e,t){let r=we(),i=ro();if(gi(r,i,e)){let s=Pt(),o=If();d2(o,r,n,e,r[gt],t)}return X}function u3(n,e,t,r,i){Dx(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=we(),s=i[fe],o=n+kt,a=s.firstCreatePass?Ax(o,i,2,e,Ex,G0(),t,r):s.data[o];if(Cx(a,i,n,e,Q2),Tl(a)){let u=i[fe];Vv(u,i,a),lx(u,a,i)}return r!=null&&Hf(i,a),x}function D(){let n=Pt(),e=en(),t=xx(e);return n.firstCreatePass&&Mx(n,t),u4(t)&&c4(),o4(),t.classesWithoutHost!=null&&PW(t)&&u3(n,t,we(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&OW(t)&&u3(n,t,we(),t.stylesWithoutHost,!1),D}function Dt(n,e,t,r){return x(n,e,t,r),D(),Dt}function or(n,e,t,r){let i=we(),s=i[fe],o=n+kt,a=s.firstCreatePass?B9(o,s,2,e,t,r):s.data[o];return Cx(a,i,n,e,Q2),r!=null&&Hf(i,a),or}function xr(){let n=en(),e=xx(n);return u4(e)&&c4(),o4(),xr}function jl(n,e,t,r){return or(n,e,t,r),xr(),jl}var Q2=(n,e,t,r,i)=>(Tf(!0),H3(e[gt],r,kk()));function Yf(n,e,t){let r=we(),i=r[fe],s=n+kt,o=i.firstCreatePass?Ax(s,r,8,"ng-container",Ex,G0(),e,t):i.data[s];if(Cx(o,r,n,"ng-container",PG),Tl(o)){let a=r[fe];Vv(a,r,o),lx(a,o,r)}return t!=null&&Hf(r,o),Yf}function Kf(){let n=Pt(),e=en(),t=xx(e);return n.firstCreatePass&&Mx(n,t),Kf}var PG=(n,e,t,r,i)=>(Tf(!0),l7(e[gt],""));function St(){return we()}function zv(n,e,t){let r=we(),i=ro();if(gi(r,i,e)){let s=Pt(),o=If();h2(o,r,n,e,r[gt],t)}return zv}var kf=void 0;function OG(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var NG=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",kf,kf,kf],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",OG],k4={};function qv(n){let e=RG(n),t=c3(e);if(t)return t;let r=e.split("-")[0];if(t=c3(r),t)return t;if(r==="en")return NG;throw new te(701,!1)}function c3(n){return n in k4||(k4[n]=to.ng&&to.ng.common&&to.ng.common.locales&&to.ng.common.locales[n]),k4[n]}var Gu=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Gu||{});function RG(n){return n.toLowerCase().replace(/_/g,"-")}var Qf="en-US";var FG=Qf;function X2(n){typeof n=="string"&&(FG=n.toLowerCase().replace(/_/g,"-"))}function ye(n,e,t){let r=we(),i=Pt(),s=en();return Z2(i,r,r[gt],s,n,e,t),ye}function oo(n,e,t){let r=we(),i=Pt(),s=en();return(s.type&3||t)&&R2(s,i,r,t,r[gt],n,e,av(s,r,e)),oo}function Z2(n,e,t,r,i,s,o){let a=!0,u=null;if((r.type&3||o)&&(u??=av(r,e,s),R2(r,n,e,o,t,i,s,u)&&(a=!1)),a){let c=r.outputs?.[i],l=r.hostDirectiveOutputs?.[i];if(l&&l.length)for(let d=0;d<l.length;d+=2){let h=l[d],f=l[d+1];u??=av(r,e,s),n3(r,e,h,f,i,u)}if(c&&c.length)for(let d of c)u??=av(r,e,s),n3(r,e,d,i,i,u)}}function oe(n=1){return Mk(n)}function LG(n,e){let t=null,r=_7(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?X3(n,s,!0):E7(r,s))return i}return t}function Vx(n){let e=we()[rr][nr];if(!e.projection){let t=n?n.length:1,r=e.projection=ik(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?LG(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function jx(n,e=0,t,r,i,s){let o=we(),a=Pt(),u=r?n+1:null;u!==null&&Bf(o,a,u,r,i,s,null,t);let c=$l(a,kt+n,16,null,t||null);c.projection===null&&(c.projection=e),h4();let d=!o[Au]||a4();o[rr][nr].projection[c.projection]===null&&u!==null?BG(o,a,u):d&&!kv(c)&&H7(a,o,c)}function BG(n,e,t){let r=kt+t,i=e.data[r],s=n[r],o=vv(s,i.tView.ssrId),a=zf(n,i,void 0,{dehydratedView:o});qf(s,a,0,Rl(i,o))}function Wv(n,e,t,r){return uG(n,e,t,r),Wv}function Dr(n,e,t){return aG(n,e,t),Dr}function Vn(n){let e=we(),t=Pt(),r=g4();Q0(r+1);let i=Ox(t,r);if(n.dirty&&pk(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=dG(e,r);n.reset(s,WW),n.notifyOnChanges()}return!0}return!1}function jn(){return oG(we(),g4())}function nv(n,e){return n<<17|e<<2}function Hu(n){return n>>17&32767}function $G(n){return(n&2)==2}function VG(n,e){return n&131071|e<<17}function ix(n){return n|2}function Ll(n){return(n&131068)>>2}function P4(n,e){return n&-131069|e<<2}function jG(n){return(n&1)===1}function sx(n){return n|1}function UG(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Hu(o),u=Ll(o);n[r]=t;let c=!1,l;if(Array.isArray(t)){let d=t;l=d[1],(l===null||xl(d,l)>0)&&(c=!0)}else l=t;if(i)if(u!==0){let h=Hu(n[a+1]);n[r+1]=nv(h,a),h!==0&&(n[h+1]=P4(n[h+1],r)),n[a+1]=VG(n[a+1],r)}else n[r+1]=nv(a,0),a!==0&&(n[a+1]=P4(n[a+1],r)),a=r;else n[r+1]=nv(u,0),a===0?a=r:n[u+1]=P4(n[u+1],r),u=r;c&&(n[r+1]=ix(n[r+1])),l3(n,l,r,!0),l3(n,l,r,!1),HG(e,l,n,r,s),o=nv(a,u),s?e.classBindings=o:e.styleBindings=o}function HG(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&xl(s,e)>=0&&(t[r+1]=sx(t[r+1]))}function l3(n,e,t,r){let i=n[t+1],s=e===null,o=r?Hu(i):Ll(i),a=!1;for(;o!==0&&(a===!1||s);){let u=n[o],c=n[o+1];zG(u,e)&&(a=!0,n[o+1]=r?sx(c):ix(c)),o=r?Hu(c):Ll(c)}a&&(n[t+1]=r?ix(i):sx(i))}function zG(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?xl(n,e)>=0:!1}function ze(n,e){return qG(n,e,null,!0),ze}function qG(n,e,t,r){let i=we(),s=Pt(),o=Y0(2);if(s.firstUpdatePass&&GG(s,n,o,r),e!==ir&&gi(i,o,e)){let a=s.data[bs()];ZG(s,a,i,i[gt],n,i[o+1]=JG(e,t),r,o)}}function WG(n,e){return e>=n.expandoStartIndex}function GG(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[bs()],o=WG(n,t);eY(s,r)&&e===null&&!o&&(e=!1),e=YG(i,s,e,r),UG(i,s,e,t,o,r)}}function YG(n,e,t,r){let i=Sk(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=O4(null,n,e,t,r),t=$f(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=O4(i,n,e,t,r),s===null){let u=KG(n,e,r);u!==void 0&&Array.isArray(u)&&(u=O4(null,n,e,u[1],r),u=$f(u,e.attrs,r),QG(n,e,r,u))}else s=XG(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function KG(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ll(r)!==0)return n[Hu(r)]}function QG(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Hu(i)]=r}function XG(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=$f(r,o,t)}return $f(r,e.attrs,t)}function O4(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=$f(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function $f(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ok(n,o,t?!0:e[++s]))}return n===void 0?null:n}function ZG(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let u=n.data,c=u[a+1],l=jG(c)?d3(u,e,t,i,Ll(c),o):void 0;if(!Sv(l)){Sv(s)||$G(c)&&(s=d3(u,null,t,i,a,o));let d=ZC(bs(),t);q7(r,o,d,i,s)}}function d3(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let u=n[i],c=Array.isArray(u),l=c?u[1]:u,d=l===null,h=t[i+1];h===ir&&(h=d?qr:void 0);let f=d?H0(h,r):l===r?h:void 0;if(c&&!Sv(f)&&(f=H0(u,r)),Sv(f)&&(a=f,o))return a;let p=n[i+1];i=o?Hu(p):Ll(p)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=H0(u,r))}return a}function Sv(n){return n!==void 0}function JG(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=eo(Pv(n)))),n}function eY(n,e){return(n.flags&(e?8:16))!==0}function P(n,e=""){let t=we(),r=Pt(),i=n+kt,s=r.firstCreatePass?$l(r,i,1,e,null):r.data[i],o=tY(r,t,s,e,n);t[i]=o,J0()&&bx(r,t,o,s),Ml(s,!1)}var tY=(n,e,t,r,i)=>(Tf(!0),u7(e[gt],r));function nY(n,e,t,r=""){return gi(n,ro(),t)?e+Ni(t)+r:ir}function rY(n,e,t,r,i,s=""){let o=m4(),a=Px(n,o,t,i);return Y0(2),a?e+Ni(t)+r+Ni(i)+s:ir}function iY(n,e,t,r,i,s,o,a=""){let u=m4(),c=N2(n,u,t,i,o);return Y0(3),c?e+Ni(t)+r+Ni(i)+s+Ni(o)+a:ir}function Sr(n){return Ot("",n),Sr}function Ot(n,e,t){let r=we(),i=nY(r,n,e,t);return i!==ir&&Ux(r,bs(),i),Ot}function Is(n,e,t,r,i){let s=we(),o=rY(s,n,e,t,r,i);return o!==ir&&Ux(s,bs(),o),Is}function Gv(n,e,t,r,i,s,o){let a=we(),u=iY(a,n,e,t,r,i,s,o);return u!==ir&&Ux(a,bs(),u),Gv}function Ux(n,e,t){let r=ZC(e,n);c7(n[gt],r,t)}function ar(n,e,t){Rx(e)&&(e=e());let r=we(),i=ro();if(gi(r,i,e)){let s=Pt(),o=If();d2(o,r,n,e,r[gt],t)}return ar}function Ir(n,e){let t=Rx(n);return t&&n.set(e),t}function ur(n,e){let t=we(),r=Pt(),i=en();return Z2(r,t,t[gt],i,n,e),ur}function Hx(n){return gi(we(),ro(),n)?Ni(n):ir}function h3(n,e,t){let r=Pt();r.firstCreatePass&&J2(e,r.data,r.blueprint,_s(n),t)}function J2(n,e,t,r,i){if(n=Dn(n),Array.isArray(n))for(let s=0;s<n.length;s++)J2(n[s],e,t,r,i);else{let s=Pt(),o=we(),a=en(),u=Su(n)?n:Dn(n.provide),c=WC(n),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Su(n)||!n.multi){let f=new $u(c,i,Ee,null),p=R4(u,e,i?l:l+h,d);p===-1?(L4(hv(a,o),s,u),N4(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{let f=R4(u,e,l+h,d),p=R4(u,e,l,l+h),g=f>=0&&t[f],v=p>=0&&t[p];if(i&&!v||!i&&!g){L4(hv(a,o),s,u);let y=aY(i?oY:sY,t.length,i,r,c,n);!i&&v&&(t[p].providerFactory=y),N4(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)}else{let y=eP(t[i?p:f],c,!i&&r);N4(s,n,f>-1?f:p,y)}!i&&r&&v&&t[p].componentProviders++}}}function N4(n,e,t,r){let i=Su(e),s=lk(e);if(i||s){let u=(s?Dn(e.useClass):e).prototype.ngOnDestroy;if(u){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let l=c.indexOf(t);l===-1?c.push(t,[r,u]):c[l+1].push(r,u)}else c.push(t,u)}}}function eP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function R4(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function sY(n,e,t,r,i){return ox(this.multi,[])}function oY(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Nf(r,r[fe],this.providerFactory.index,i);o=u.slice(0,a),ox(s,o);for(let c=a;c<u.length;c++)o.push(u[c])}else o=[],ox(s,o);return o}function ox(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function aY(n,e,t,r,i,s){let o=new $u(n,t,Ee,null);return o.multi=[],o.index=e,o.componentProviders=0,eP(o,i,r&&!t),o}function Kr(n,e){return t=>{t.providersResolver=(r,i)=>h3(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>h3(r,i?i(e):e,!0))}}function tP(n,e){let t=n[e];return t===ir?void 0:t}function uY(n,e,t,r,i,s,o){let a=e+t;return Px(n,a,i,s)?O2(n,a+2,o?r.call(o,i,s):r(i,s)):tP(n,a+2)}function cY(n,e,t,r,i,s,o,a){let u=e+t;return N2(n,u,i,s,o)?O2(n,u+3,a?r.call(a,i,s,o):r(i,s,o)):tP(n,u+3)}function ao(n,e){let t=Pt(),r,i=n+kt;t.firstCreatePass?(r=lY(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=qo(r.type,!0)),o,a=er(Ee);try{let u=dv(!1),c=s();return dv(u),e4(t,we(),i,c),c}finally{er(a)}}function lY(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function la(n,e,t,r){let i=n+kt,s=we(),o=JC(s,i);return nP(s,i)?uY(s,p4(),e,o.transform,t,r,o):o.transform(t,r)}function zx(n,e,t,r,i){let s=n+kt,o=we(),a=JC(o,s);return nP(o,s)?cY(o,p4(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function nP(n,e){return n[fe].data[e].pure}var Iv=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},qx=(()=>{class n{compileModuleSync(t){return new Cv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=LC(t),s=K3(i.declarations).reduce((o,a)=>{let u=Ko(a);return u&&o.push(new Fl(u)),o},[]);return new Iv(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rP=(()=>{class n{applicationErrorHandler=$(Bi);appRef=$(ua);taskService=$(ra);ngZone=$(Cr);zonelessEnabled=$(Mf);tracing=$(zu,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Cn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(x4,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?w4:b4;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,w4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iP(){return[{provide:Yo,useExisting:rP},{provide:Cr,useClass:vf},{provide:Mf,useValue:!0}]}function dY(){return typeof $localize<"u"&&$localize.locale||Qf}var Xf=new he("",{factory:()=>$(Xf,{optional:!0,skipSelf:!0})||dY()});function Xe(n,e){return s0(n,e?.equal)}var uP=Symbol("InputSignalNode#UNSET"),DY=J(C({},o0),{transformFn:void 0,applyValueToInputSignal(n,e){of(n,e)}});function cP(n,e){let t=Object.create(DY);t.value=n,t.transformFn=e?.transform;function r(){if(nf(t),t.value===uP){let i=null;throw new te(-950,i)}return t.value}return r[Zn]=t,r}var Kv=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>jf(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function sP(n,e){return cP(n,e)}function SY(n){return cP(uP,n)}var lP=(sP.required=SY,sP);var Wx=new he(""),IY=new he("");function Zf(n){return!n.moduleRef}function TY(n){let e=Zf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Cr);return t.run(()=>{Zf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Bi),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Zf(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Wx);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Wx);o.add(s),n.moduleRef.onDestroy(()=>{Of(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return MY(r,t,()=>{let s=e.get(ra),o=s.add(),a=e.get(Bx);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Xf,Qf);if(X2(u||Qf),!e.get(IY,!0))return Zf(n)?e.get(ua):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Zf(n)){let l=e.get(ua);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return AY?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var AY;function MY(n,e,t){try{let r=t();return aa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Yv=null;function kY(n=[],e){return Wr.create({name:e,providers:[{provide:wf,useValue:"platform"},{provide:Wx,useValue:new Set([()=>Yv=null])},...n]})}function PY(n=[]){if(Yv)return Yv;let e=kY(n);return Yv=e,Y2(),OY(e),e}function OY(n){let e=n.get(Av,null);tr(n,()=>{e?.forEach(t=>t())})}var da=(()=>{class n{static __NG_ELEMENT_ID__=NY}return n})();function NY(n){return RY(en(),we(),(n&16)===16)}function RY(n,e,t){if(Jo(n)&&!t){let r=pi(n.index,e);return new ia(r,r)}else if(n.type&175){let r=e[rr];return new ia(r,e)}return null}var Gx=class{constructor(){}supports(e){return kx(e)}create(e){return new Yx(e)}},FY=(n,e)=>e,Yx=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||FY}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<oP(r,i,s)?t:r,a=oP(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<c&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!kx(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,k2(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Kx(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qv),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Kx=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Qx=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Qv=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Qx,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function oP(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function aP(){return new Xx([new Gx])}var Xx=(()=>{class n{factories;static \u0275prov=Y({token:n,providedIn:"root",factory:aP});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=$(n,{optional:!0,skipSelf:!0});return n.create(t,r||aP())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new te(901,!1)}}return n})();function dP(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ct(Ke.BootstrapApplicationStart);try{let s=i?.injector??PY(r),o=[iP(),Rk,...t||[]],a=new Lf({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return TY({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{ct(Ke.BootstrapApplicationEnd)}}function Yu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var hP=null;function vi(){return hP}function Zx(n){hP??=n}var Jf=class{},Ul=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>$(fP),providedIn:"platform"})}return n})();var fP=(()=>{class n extends Ul{_location;_history;_doc=$(hn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vi().getBaseHref(this._doc)}onPopState(t){let r=vi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=vi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Xv(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function pP(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ji(n){return n&&n[0]!=="?"?`?${n}`:n}var Ts=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>$(LY),providedIn:"root"})}return n})(),Jx=new he(""),LY=(()=>{class n extends Ts{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(hn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Xv(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ji(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ji(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ji(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(Ul),ce(Jx,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hl=(()=>{class n{_subject=new Wt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=VY(pP(mP(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ji(r))}normalize(t){return n.stripTrailingSlash($Y(this._basePath,mP(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ji(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ji(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ji;static joinWithSlash=Xv;static stripTrailingSlash=pP;static \u0275fac=function(r){return new(r||n)(ce(Ts))};static \u0275prov=Y({token:n,factory:()=>BY(),providedIn:"root"})}return n})();function BY(){return new Hl(ce(Ts))}function $Y(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function mP(n){return n.replace(/\/index.html$/,"")}function VY(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var nD=(()=>{class n extends Ts{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Xv(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ji(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ji(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(Ul),ce(Jx,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})();var rD=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(rD||{});var As={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function zl(n,e){let t=qv(n),r=t[Gu.NumberSymbols][e];if(typeof r>"u"){if(e===As.CurrencyDecimal)return t[Gu.NumberSymbols][As.Decimal];if(e===As.CurrencyGroup)return t[Gu.NumberSymbols][As.Group]}return r}function _P(n,e){return qv(n)[Gu.NumberFormats][e]}var jY=/^(\d+)?\.((\d+)(-(\d+))?)?$/,gP=22,Zv=".",ep="0",UY=";",HY=",",eD="#";function zY(n,e,t,r,i,s,o=!1){let a="",u=!1;if(!isFinite(n))a=zl(t,As.Infinity);else{let c=GY(n);o&&(c=WY(c));let l=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){let E=s.match(jY);if(E===null)throw new te(2306,!1);let M=E[1],T=E[3],R=E[5];M!=null&&(l=tD(M)),T!=null&&(d=tD(T)),R!=null?h=tD(R):T!=null&&d>h&&(h=d)}YY(c,d,h);let f=c.digits,p=c.integerLen,g=c.exponent,v=[];for(u=f.every(E=>!E);p<l;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?v=f.splice(p,f.length):(v=f,f=[0]);let y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(zl(t,r)),v.length&&(a+=zl(t,i)+v.join("")),g&&(a+=zl(t,As.Exponential)+"+"+g)}return n<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function bP(n,e,t){let r=_P(e,rD.Decimal),i=qY(r,zl(e,As.MinusSign));return zY(n,i,e,As.Group,As.Decimal,t)}function qY(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(UY),i=r[0],s=r[1],o=i.indexOf(Zv)!==-1?i.split(Zv):[i.substring(0,i.lastIndexOf(ep)+1),i.substring(i.lastIndexOf(ep)+1)],a=o[0],u=o[1]||"";t.posPre=a.substring(0,a.indexOf(eD));for(let l=0;l<u.length;l++){let d=u.charAt(l);d===ep?t.minFrac=t.maxFrac=l+1:d===eD?t.maxFrac=l+1:t.posSuf+=d}let c=a.split(HY);if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){let l=i.length-t.posPre.length-t.posSuf.length,d=s.indexOf(eD);t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+l).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function WY(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function GY(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(Zv))>-1&&(e=e.replace(Zv,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===ep;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===ep;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>gP&&(r=r.splice(0,gP-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function YY(n,e,t){if(e>t)throw new te(2307,!1);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=s!==0,c=e+n.integerLen,l=r.reduceRight(function(d,h,f,p){return h=h+d,p[f]=h<10?h:h-10,u&&(p[f]===0&&f>=c?p.pop():u=!1),h>=10?1:0},0);l&&(r.unshift(l),n.integerLen++)}function tD(n){let e=parseInt(n);if(isNaN(e))throw new te(2305,!1);return e}var Jv=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ql=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Jv(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),vP(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);vP(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ee(io),Ee(sa),Ee(Xx))};static \u0275dir=vt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function vP(n,e){n.context.$implicit=e.item}var lr=(()=>{class n{_viewContainer;_context=new ey;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yP(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yP(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ee(io),Ee(sa))};static \u0275dir=vt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ey=class{$implicit=null;ngIf=null};function yP(n,e){if(n&&!n.createEmbeddedView)throw new te(2020,!1)}function wP(n,e){return new te(2100,!1)}var iD=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!KY(t))return null;i||=this._locale;try{let s=QY(t);return bP(s,i,r)}catch(s){throw wP(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Ee(Xf,16))};static \u0275pipe=Vl({name:"number",type:n,pure:!0})}return n})();function KY(n){return!(n==null||n===""||n!==n)}function QY(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new te(2309,!1);return n}var sD=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw wP(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Vl({name:"slice",type:n,pure:!1})}return n})();var et=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=so({type:n});static \u0275inj=ms({})}return n})();function oD(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var tp=class{};var EP="browser";var np=class{_doc;constructor(e){this._doc=e}manager},ty=(()=>{class n extends np{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(ce(hn))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),iy=new he(""),lD=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof ty));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof ty);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ce(iy),ce(Cr))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),aD="ng-app-id";function CP(n){for(let e of n)e.remove()}function xP(n,e){let t=e.createElement("style");return t.textContent=n,t}function XY(n,e,t,r){let i=n.head?.querySelectorAll(`style[${aD}="${e}"],link[${aD}="${e}"]`);if(i)for(let s of i)s.removeAttribute(aD),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function cD(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var dD=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,XY(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,xP);r?.forEach(i=>this.addUsage(i,this.external,cD))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(CP(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])CP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,xP(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,cD(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ce(hn),ce(Tv),ce(Mv,8),ce(Uf))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),uD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},hD=/%COMP%/g;var SP="%COMP%",ZY=`_nghost-${SP}`,JY=`_ngcontent-${SP}`,eK=!0,tK=new he("",{factory:()=>eK});function nK(n){return JY.replace(hD,n)}function rK(n){return ZY.replace(hD,n)}function IP(n,e){return e.map(t=>t.replace(hD,n))}var fD=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,s,o,a,u=null,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=u,this.tracingService=c,this.defaultRenderer=new rp(t,o,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof ry?i.applyToHost(t):i instanceof ip&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case Vi.Emulated:s=new ry(u,c,r,this.appId,l,o,a,d);break;case Vi.ShadowDom:return new ny(u,t,r,o,a,this.nonce,d,c);case Vi.ExperimentalIsolatedShadowDom:return new ny(u,t,r,o,a,this.nonce,d);default:s=new ip(u,c,r,l,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ce(lD),ce(dD),ce(Tv),ce(tK),ce(hn),ce(Cr),ce(Mv),ce(zu,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),rp=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(uD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(DP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(DP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=uD[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=uD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Cs.DashCase|Cs.Important)?e.style.setProperty(t,r,i&Cs.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Cs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=vi().getGlobalEventTarget(this.doc,e),!e))throw new te(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function DP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ny=class extends rp{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,u){super(e,i,s,a),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let c=r.styles;c=IP(r.id,c);for(let d of c){let h=document.createElement("style");o&&h.setAttribute("nonce",o),h.textContent=d,this.shadowRoot.appendChild(h)}let l=r.getExternalStyles?.();if(l)for(let d of l){let h=cD(d,i);o&&h.setAttribute("nonce",o),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ip=class extends rp{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let c=r.styles;this.styles=u?IP(u,c):c,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Vu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ry=class extends ip{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,u){let c=i+"-"+r.id;super(e,t,r,s,o,a,u,c),this.contentAttr=nK(c),this.hostAttr=rK(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var sy=class n extends Jf{supportsDOMEvents=!0;static makeCurrent(){Zx(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=iK();return t==null?null:sK(t)}resetBaseElement(){sp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return oD(document.cookie,e)}},sp=null;function iK(){return sp=sp||document.head.querySelector("base"),sp?sp.getAttribute("href"):null}function sK(n){return new URL(n,document.baseURI).pathname}var oK=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),TP=["alt","control","meta","shift"],aK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},AP=(()=>{class n extends np{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vi().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),TP.forEach(c=>{let l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=aK[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),TP.forEach(o=>{if(o!==i){let a=uK[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ce(hn))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})();function pD(n,e,t){let r=C({rootComponent:n,platformRef:t?.platformRef},cK(e));return dP(r)}function cK(n){return{appProviders:[...pK,...n?.providers??[]],platformProviders:fK}}function lK(){sy.makeCurrent()}function dK(){return new ps}function hK(){return cx(document),document}var fK=[{provide:Uf,useValue:EP},{provide:Av,useValue:lK,multi:!0},{provide:hn,useFactory:hK}];var pK=[{provide:wf,useValue:"root"},{provide:ps,useFactory:dK},{provide:iy,useClass:ty,multi:!0},{provide:iy,useClass:AP,multi:!0},fD,dD,lD,{provide:ju,useExisting:fD},{provide:tp,useClass:oK},[]];var MP=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ce(hn))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ae="primary",yp=Symbol("RouteTitle"),_D=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Zu(n){return new _D(n)}function $P(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function dy(n){return new Promise((e,t)=>{n.pipe(Zs()).subscribe({next:r=>e(r),error:r=>t(r)})})}function gK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ms(n[t],e[t]))return!1;return!0}function Ms(n,e){let t=n?bD(n):void 0,r=e?bD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!VP(n[i],e[i]))return!1;return!0}function bD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function VP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function jP(n){return n.length>0?n[n.length-1]:null}function ec(n){return S0(n)?n:aa(n)?Ut(Promise.resolve(n)):Ve(n)}function UP(n){return S0(n)?dy(n):Promise.resolve(n)}var vK={exact:zP,subset:qP},HP={exact:yK,subset:_K,ignored:()=>!0};function kP(n,e,t){return vK[t.paths](n.root,e.root,t.matrixParams)&&HP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function yK(n,e){return Ms(n,e)}function zP(n,e,t){if(!Qu(n.segments,e.segments)||!uy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!zP(n.children[r],e.children[r],t))return!1;return!0}function _K(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>VP(n[t],e[t]))}function qP(n,e,t){return WP(n,e,e.segments,t)}function WP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Qu(i,t)||e.hasChildren()||!uy(i,t,r))}else if(n.segments.length===t.length){if(!Qu(n.segments,t)||!uy(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!qP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Qu(n.segments,i)||!uy(n.segments,i,r)||!n.children[Ae]?!1:WP(n.children[Ae],e,s,r)}}function uy(n,e,t){return e.every((r,i)=>HP[t](n[i].parameters,r.parameters))}var Hi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new nt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Zu(this.queryParams),this._queryParamMap}toString(){return EK.serialize(this)}},nt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cy(this)}},fa=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Zu(this.parameters),this._parameterMap}toString(){return YP(this)}};function bK(n,e){return Qu(n,e)&&n.every((t,r)=>Ms(t.parameters,e[r].parameters))}function Qu(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function wK(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ae&&(t=t.concat(e(i,r)))}),t}var _p=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>new pa,providedIn:"root"})}return n})(),pa=class{parse(e){let t=new ED(e);return new Hi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${op(e.root,!0)}`,r=DK(e.queryParams),i=typeof e.fragment=="string"?`#${CK(e.fragment)}`:"";return`${t}${r}${i}`}},EK=new pa;function cy(n){return n.segments.map(e=>YP(e)).join("/")}function op(n,e){if(!n.hasChildren())return cy(n);if(e){let t=n.children[Ae]?op(n.children[Ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ae&&r.push(`${i}:${op(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=wK(n,(r,i)=>i===Ae?[op(n.children[Ae],!1)]:[`${i}:${op(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ae]!=null?`${cy(n)}/${t[0]}`:`${cy(n)}/(${t.join("//")})`}}function GP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oy(n){return GP(n).replace(/%3B/gi,";")}function CK(n){return encodeURI(n)}function wD(n){return GP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ly(n){return decodeURIComponent(n)}function PP(n){return ly(n.replace(/\+/g,"%20"))}function YP(n){return`${wD(n.path)}${xK(n.parameters)}`}function xK(n){return Object.entries(n).map(([e,t])=>`;${wD(e)}=${wD(t)}`).join("")}function DK(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${oy(t)}=${oy(i)}`).join("&"):`${oy(t)}=${oy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var SK=/^[^\/()?;#]+/;function mD(n){let e=n.match(SK);return e?e[0]:""}var IK=/^[^\/()?;=#]+/;function TK(n){let e=n.match(IK);return e?e[0]:""}var AK=/^[^=?&#]+/;function MK(n){let e=n.match(AK);return e?e[0]:""}var kK=/^[^&#]+/;function PK(n){let e=n.match(kK);return e?e[0]:""}var ED=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ae]=new nt(e,t)),r}parseSegment(){let e=mD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new fa(ly(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=TK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=mD(this.remaining);i&&(r=i,this.capture(r))}e[ly(t)]=ly(r)}parseQueryParam(e){let t=MK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=PK(this.remaining);o&&(r=o,this.capture(r))}let i=PP(t),s=PP(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=mD(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ae);let o=this.parseChildren();t[s??Ae]=Object.keys(o).length===1&&o[Ae]?o[Ae]:new nt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function KP(n){return n.segments.length>0?new nt([],{[Ae]:n}):n}function QP(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=QP(i);if(r===Ae&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new nt(n.segments,e);return OK(t)}function OK(n){if(n.numberOfChildren===1&&n.children[Ae]){let e=n.children[Ae];return new nt(n.segments.concat(e.segments),e.children)}return n}function ma(n){return n instanceof Hi}function XP(n,e,t=null,r=null,i=new pa){let s=ZP(n);return JP(s,e,t,r,i)}function ZP(n){let e;function t(s){let o={};for(let u of s.children){let c=t(u);o[u.outlet]=c}let a=new nt(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=KP(r);return e??i}function JP(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return gD(s,s,s,t,r,i);let o=NK(e);if(o.toRoot())return gD(s,s,new nt([],{}),t,r,i);let a=RK(o,s,n),u=a.processChildren?up(a.segmentGroup,a.index,o.commands):tO(a.segmentGroup,a.index,o.commands);return gD(s,a.segmentGroup,u,t,r,i)}function hy(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function dp(n){return typeof n=="object"&&n!=null&&n.outlets}function OP(n,e,t){n||="\u0275";let r=new Hi;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function gD(n,e,t,r,i,s){let o={};for(let[c,l]of Object.entries(r??{}))o[c]=Array.isArray(l)?l.map(d=>OP(c,d,s)):OP(c,l,s);let a;n===e?a=t:a=eO(n,e,t);let u=KP(QP(a));return new Hi(u,o,i)}function eO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=eO(s,e,t)}),new nt(n.segments,r)}var fy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hy(r[0]))throw new te(4003,!1);let i=r.find(dp);if(i&&i!==jP(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new fy(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new fy(t,e,r)}var Gl=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function RK(n,e,t){if(n.isAbsolute)return new Gl(e,!0,0);if(!t)return new Gl(e,!1,NaN);if(t.parent===null)return new Gl(t,!0,0);let r=hy(n.commands[0])?0:1,i=t.segments.length-1+r;return FK(t,i,n.numberOfDoubleDots)}function FK(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new Gl(r,!1,i-s)}function LK(n){return dp(n[0])?n[0].outlets:{[Ae]:n}}function tO(n,e,t){if(n??=new nt([],{}),n.segments.length===0&&n.hasChildren())return up(n,e,t);let r=BK(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new nt(n.segments.slice(0,r.pathIndex),{});return s.children[Ae]=new nt(n.segments.slice(r.pathIndex),n.children),up(s,0,i)}else return r.match&&i.length===0?new nt(n.segments,{}):r.match&&!n.hasChildren()?CD(n,e,t):r.match?up(n,0,i):CD(n,e,t)}function up(n,e,t){if(t.length===0)return new nt(n.segments,{});{let r=LK(t),i={};if(Object.keys(r).some(s=>s!==Ae)&&n.children[Ae]&&n.numberOfChildren===1&&n.children[Ae].segments.length===0){let s=up(n.children[Ae],e,t);return new nt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=tO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new nt(n.segments,i)}}function BK(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(dp(a))break;let u=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!RP(u,c,o))return s;r+=2}else{if(!RP(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function CD(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(dp(s)){let u=$K(s.outlets);return new nt(r,u)}if(i===0&&hy(t[0])){let u=n.segments[e];r.push(new fa(u.path,NP(t[0]))),i++;continue}let o=dp(s)?s.outlets[Ae]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&hy(a)?(r.push(new fa(o,NP(a))),i+=2):(r.push(new fa(o,{})),i++)}return new nt(r,{})}function $K(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=CD(new nt([],{}),0,r))}),e}function NP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function RP(n,e,t){return n==t.path&&Ms(e,t.parameters)}var cp="imperative",fn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(fn||{}),Xr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ju=class extends Xr{type=fn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zi=class extends Xr{urlAfterRedirects;type=fn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dr=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(dr||{}),hp=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(hp||{}),ks=class extends Xr{reason;code;type=fn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},uo=class extends Xr{reason;code;type=fn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Kl=class extends Xr{error;target;type=fn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fp=class extends Xr{urlAfterRedirects;state;type=fn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},py=class extends Xr{urlAfterRedirects;state;type=fn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},my=class extends Xr{urlAfterRedirects;state;shouldActivate;type=fn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gy=class extends Xr{urlAfterRedirects;state;type=fn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vy=class extends Xr{urlAfterRedirects;state;type=fn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yy=class{route;type=fn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_y=class{route;type=fn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},by=class{snapshot;type=fn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wy=class{snapshot;type=fn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ey=class{snapshot;type=fn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cy=class{snapshot;type=fn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var pp=class{},Ql=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function VK(n){return!(n instanceof pp)&&!(n instanceof Ql)}function jK(n,e){return n.providers&&!n._injector&&(n._injector=Gf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ui(n){return n.outlet||Ae}function UK(n,e){let t=n.filter(r=>Ui(r)===e);return t.push(...n.filter(r=>Ui(r)!==e)),t}function Jl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var xy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Jl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ed(this.rootInjector)}},ed=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ce(dn))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=xD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=xD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=DD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return DD(e,this._root).map(t=>t.value)}};function xD(n,e){if(n===e.value)return e;for(let t of e.children){let r=xD(n,t);if(r)return r}return null}function DD(n,e){if(n===e.value)return[e];for(let t of e.children){let r=DD(n,t);if(r.length)return r.unshift(e),r}return[]}var Qr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Wl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var mp=class extends Dy{snapshot;constructor(e,t){super(e),this.snapshot=t,kD(this,e)}toString(){return this.snapshot.toString()}};function nO(n){let e=HK(n),t=new xn([new fa("",{})]),r=new xn({}),i=new xn({}),s=new xn({}),o=new xn(""),a=new qi(t,r,s,o,i,Ae,n,e.root);return a.snapshot=e.root,new mp(new Qr(a,[]),e)}function HK(n){let e={},t={},r={},s=new Xu([],e,r,"",t,Ae,n,null,{});return new gp("",new Qr(s,[]))}var qi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(bt(c=>c[yp]))??Ve(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(bt(e=>Zu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(bt(e=>Zu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Sy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:C(C({},e.params),n.params),data:C(C({},e.data),n.data),resolve:C(C(C(C({},n.data),e.data),i?.data),n._resolvedData)}:r={params:C({},n.params),data:C({},n.data),resolve:C(C({},n.data),n._resolvedData??{})},i&&iO(i)&&(r.resolve[yp]=i.title),r}var Xu=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[yp]}constructor(e,t,r,i,s,o,a,u,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Zu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Zu(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},gp=class extends Dy{url;constructor(e,t){super(t),this.url=e,kD(this,t)}toString(){return rO(this._root)}};function kD(n,e){e.value._routerState=n,e.children.forEach(t=>kD(n,t))}function rO(n){let e=n.children.length>0?` { ${n.children.map(rO).join(", ")} } `:"";return`${n.value}${e}`}function vD(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ms(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ms(e.params,t.params)||n.paramsSubject.next(t.params),gK(e.url,t.url)||n.urlSubject.next(t.url),Ms(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function SD(n,e){let t=Ms(n.params,e.params)&&bK(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||SD(n.parent,e.parent))}function iO(n){return typeof n.title=="string"||n.title===null}var sO=new he(""),bp=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ae;activateEvents=new ft;deactivateEvents=new ft;attachEvents=new ft;detachEvents=new ft;routerOutletData=lP();parentContexts=$(ed);location=$(io);changeDetector=$(da);inputBinder=$(My,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new ID(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=vt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Bn]})}return n})(),ID=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===qi?this.route:e===ed?this.childContexts:e===sO?this.outletData:this.parent.get(e,t)}},My=new he("");var PD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Qe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Dt(0,"router-outlet")},dependencies:[bp],encapsulation:2})}return n})();function OD(n){let e=n.children&&n.children.map(OD),t=e?J(C({},n),{children:e}):C({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ae&&(t.component=PD),t}function zK(n,e,t){let r=vp(n,e._root,t?t._root:void 0);return new mp(r,e)}function vp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=qK(n,e,t);return new Qr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>vp(n,a)),o}}let r=WK(e.value),i=e.children.map(s=>vp(n,s));return new Qr(r,i)}}function qK(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return vp(n,r,i);return vp(n,r)})}function WK(n){return new qi(new xn(n.url),new xn(n.params),new xn(n.queryParams),new xn(n.fragment),new xn(n.data),n.outlet,n.component,n)}var Xl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},oO="ngNavigationCancelingError";function Iy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ma(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=aO(!1,dr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function aO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[oO]=!0,t.cancellationCode=e,t}function GK(n){return uO(n)&&ma(n.url)}function uO(n){return!!n&&n[oO]}var YK=(n,e,t,r)=>bt(i=>(new TD(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),TD=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Wl(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Wl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Wl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Wl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Cy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new wy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(vD(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),vD(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ty=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Yl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function KK(n,e,t){let r=n._root,i=e?e._root:null;return ap(r,i,t,[r.value])}function QK(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function td(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!kC(n)?n:e.get(n):r}function ap(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Wl(e);return n.children.forEach(o=>{XK(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>lp(a,t.getContext(o),i)),i}function XK(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=ZK(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ty(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ap(n,e,a?a.children:null,r,i):ap(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Yl(a.outlet.component,o))}else o&&lp(e,a,i),i.canActivateChecks.push(new Ty(r)),s.component?ap(n,null,a?a.children:null,r,i):ap(n,null,t,r,i);return i}function ZK(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Qu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qu(n.url,e.url)||!Ms(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!SD(n,e)||!Ms(n.queryParams,e.queryParams);case"paramsChange":default:return!SD(n,e)}}function lp(n,e,t){let r=Wl(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?lp(o,e.children.getContext(s),t):lp(o,null,t):lp(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Yl(e.outlet.component,i)):t.canDeactivateChecks.push(new Yl(null,i)):t.canDeactivateChecks.push(new Yl(null,i))}function wp(n){return typeof n=="function"}function JK(n){return typeof n=="boolean"}function eQ(n){return n&&wp(n.canLoad)}function tQ(n){return n&&wp(n.canActivate)}function nQ(n){return n&&wp(n.canActivateChild)}function rQ(n){return n&&wp(n.canDeactivate)}function iQ(n){return n&&wp(n.canMatch)}function cO(n){return n instanceof Cu||n?.name==="EmptyError"}var ay=Symbol("INITIAL_VALUE");function Zl(){return hs(n=>dC(n.map(e=>e.pipe(Xs(1),mC(ay)))).pipe(bt(e=>{for(let t of e)if(t!==!0){if(t===ay)return ay;if(t===!1||sQ(t))return t}return!0}),Oi(e=>e!==ay),Xs(1)))}function sQ(n){return ma(n)||n instanceof Xl}function lO(n){return n.aborted?Ve(void 0).pipe(Xs(1)):new Ye(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function dO(n){return df(lO(n))}function oQ(n,e){return Fn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Ve(J(C({},t),{guardsResult:!0})):aQ(o,r,i,n).pipe(Fn(a=>a&&JK(a)?uQ(r,s,n,e):Ve(a)),bt(a=>J(C({},t),{guardsResult:a})))})}function aQ(n,e,t,r){return Ut(n).pipe(Fn(i=>fQ(i.component,i.route,t,e,r)),Zs(i=>i!==!0,!0))}function uQ(n,e,t,r){return Ut(e).pipe(lf(i=>_l(lQ(i.route.parent,r),cQ(i.route,r),hQ(n,i.path,t),dQ(n,i.route,t))),Zs(i=>i!==!0,!0))}function cQ(n,e){return n!==null&&e&&e(new Ey(n)),Ve(!0)}function lQ(n,e){return n!==null&&e&&e(new by(n)),Ve(!0)}function dQ(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Ve(!0);let i=r.map(s=>cf(()=>{let o=Jl(e)??t,a=td(s,o),u=tQ(a)?a.canActivate(e,n):tr(o,()=>a(e,n));return ec(u).pipe(Zs())}));return Ve(i).pipe(Zl())}function hQ(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>QK(o)).filter(o=>o!==null).map(o=>cf(()=>{let a=o.guards.map(u=>{let c=Jl(o.node)??t,l=td(u,c),d=nQ(l)?l.canActivateChild(r,n):tr(c,()=>l(r,n));return ec(d).pipe(Zs())});return Ve(a).pipe(Zl())}));return Ve(s).pipe(Zl())}function fQ(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Ve(!0);let o=s.map(a=>{let u=Jl(e)??i,c=td(a,u),l=rQ(c)?c.canDeactivate(n,e,t,r):tr(u,()=>c(n,e,t,r));return ec(l).pipe(Zs())});return Ve(o).pipe(Zl())}function pQ(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Ve(!0);let o=s.map(a=>{let u=td(a,n),c=eQ(u)?u.canLoad(e,t):tr(n,()=>u(e,t)),l=ec(c);return i?l.pipe(dO(i)):l});return Ve(o).pipe(Zl(),hO(r))}function hO(n){return aC(Jn(e=>{if(typeof e!="boolean")throw Iy(n,e)}),bt(e=>e===!0))}function mQ(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Ve(!0);let o=s.map(a=>{let u=td(a,n),c=iQ(u)?u.canMatch(e,t):tr(n,()=>u(e,t)),l=ec(c);return i?l.pipe(dO(i)):l});return Ve(o).pipe(Zl(),hO(r))}var Ku=class fO extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,fO.prototype)}},AD=class pO extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,pO.prototype)}};function gQ(n){throw new te(4e3,!1)}function vQ(n){throw aO(!1,dr.GuardRejected)}var yQ=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Ae])throw gQ(`${e.redirectTo}`);i=i.children[Ae]}}async applyRedirectCommands(e,t,r,i,s){let o=await _Q(t,i,s);if(o instanceof Hi)throw new AD(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new AD(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Hi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new nt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function _Q(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:u,params:c,data:l,title:d}=e;return dy(ec(tr(t,()=>r({params:c,data:l,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:u,title:d}))))}var MD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bQ(n,e,t,r,i,s){let o=mO(n,e,t);return o.matched?(r=jK(e,r),mQ(r,e,t,i,s).pipe(bt(a=>a===!0?o:C({},MD)))):Ve(o)}function mO(n,e,t){if(e.path==="**")return wQ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?C({},MD):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||$P)(t,n,e);if(!i)return C({},MD);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?C(C({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function wQ(n){return{matched:!0,parameters:n.length>0?jP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function FP(n,e,t,r){return t.length>0&&xQ(n,t,r)?{segmentGroup:new nt(e,CQ(r,new nt(t,n.children))),slicedSegments:[]}:t.length===0&&DQ(n,t,r)?{segmentGroup:new nt(n.segments,EQ(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new nt(n.segments,n.children),slicedSegments:t}}function EQ(n,e,t,r){let i={};for(let s of t)if(ky(n,e,s)&&!r[Ui(s)]){let o=new nt([],{});i[Ui(s)]=o}return C(C({},r),i)}function CQ(n,e){let t={};t[Ae]=e;for(let r of n)if(r.path===""&&Ui(r)!==Ae){let i=new nt([],{});t[Ui(r)]=i}return t}function xQ(n,e,t){return t.some(r=>ky(n,e,r)&&Ui(r)!==Ae)}function DQ(n,e,t){return t.some(r=>ky(n,e,r))}function ky(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function SQ(n,e,t){return e.length===0&&!n.children[t]}var IQ=class{};async function TQ(n,e,t,r,i,s,o="emptyOnly",a){return new MQ(n,e,t,r,i,o,s,a).recognize()}var AQ=31,MQ=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new yQ(this.urlSerializer,this.urlTree)}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}async recognize(){let e=FP(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Qr(r,t),s=new gp("",i),o=XP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Xu([],Object.freeze({}),Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ae,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Ae,t),rootSnapshot:t}}catch(r){if(r instanceof AD)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ku?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof Qr?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let u of Object.keys(r.children))u==="primary"?s.unshift(u):s.push(u);let o=[];for(let u of s){let c=r.children[u],l=UK(t,u),d=await this.processSegmentGroup(e,l,c,u,i);o.push(...d)}let a=gO(o);return kQ(a),a}async processSegment(e,t,r,i,s,o,a){for(let u of t)try{return await this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,a)}catch(c){if(c instanceof Ku||cO(c))continue;throw c}if(SQ(r,i,s))return new IQ;throw new Ku(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,u){if(Ui(r)!==o&&(o===Ae||!ky(i,s,r)))throw new Ku(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u);throw new Ku(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:u,parameters:c,consumedSegments:l,positionalParamSegments:d,remainingSegments:h}=mO(t,i,s);if(!u)throw new Ku(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AQ&&(this.allowRedirects=!1));let f=new Xu(s,c,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,LP(i),Ui(i),i.component??i._loadedComponent??null,i,BP(i)),p=Sy(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let g=await this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d,f,e),v=await this.applyRedirects.lineralizeSegments(i,g);return this.processSegment(e,r,t,v.concat(h),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await dy(bQ(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Ku(t);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),c=r._loadedInjector??e,{parameters:l,consumedSegments:d,remainingSegments:h}=a,f=new Xu(d,l,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,LP(r),Ui(r),r.component??r._loadedComponent??null,r,BP(r)),p=Sy(f,o,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let{segmentGroup:g,slicedSegments:v}=FP(t,d,h,u);if(v.length===0&&g.hasChildren()){let M=await this.processChildren(c,u,g,f);return new Qr(f,M)}if(u.length===0&&v.length===0)return new Qr(f,[]);let y=Ui(r)===s,E=await this.processSegment(c,u,g,v,y?Ae:s,!0,f);return new Qr(f,E instanceof Qr?[E]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await dy(pQ(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw vQ(t)}return{routes:[],injector:e}}};function kQ(n){n.sort((e,t)=>e.value.outlet===Ae?-1:t.value.outlet===Ae?1:e.value.outlet.localeCompare(t.value.outlet))}function PQ(n){let e=n.value.routeConfig;return e&&e.path===""}function gO(n){let e=[],t=new Set;for(let r of n){if(!PQ(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=gO(r.children);e.push(new Qr(r.value,i))}return e.filter(r=>!t.has(r))}function LP(n){return n.data||{}}function BP(n){return n.resolve||{}}var OQ=new he("",{factory:()=>TQ});function NQ(n,e,t,r,i,s,o){let a=n.get(OQ);return Fn(u=>Ve(u).pipe(hs(c=>a(n,e,t,r,c.extractedUrl,i,s,o)),bt(({state:c,tree:l})=>J(C({},u),{targetSnapshot:c,urlAfterRedirects:l}))))}function RQ(n,e){return Fn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ve(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let c of vO(u))o.add(c);let a=0;return Ut(o).pipe(lf(u=>s.has(u)?FQ(u,r,n,e):(u.data=Sy(u,u.parent,n).resolve,Ve(void 0))),Jn(()=>a++),M0(1),Fn(u=>a===o.size?Ve(t):wr))})}function vO(n){let e=n.children.map(t=>vO(t)).flat();return[n,...e]}function FQ(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!iO(i)&&(s[yp]=i.title),cf(()=>(n.data=Sy(n,n.parent,t).resolve,LQ(s,n,e,r).pipe(bt(o=>(n._resolvedData=o,n.data=C(C({},n.data),o),null)))))}function LQ(n,e,t,r){let i=bD(n);if(i.length===0)return Ve({});let s={};return Ut(i).pipe(Fn(o=>BQ(n[o],e,t,r).pipe(Zs(),Jn(a=>{if(a instanceof Xl)throw Iy(new pa,a);s[o]=a}))),M0(1),bt(()=>s),bl(o=>cO(o)?wr:lC(o)))}function BQ(n,e,t,r){let i=Jl(e)??r,s=td(n,i),o=s.resolve?s.resolve(e,t):tr(i,()=>s(e,t));return ec(o)}function yD(n){return hs(e=>{let t=n(e);return t?Ut(t).pipe(bt(()=>e)):Ve(e)})}var ND=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ae);return r}getResolvedTitleForRoute(t){return t.data[yp]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>$(yO),providedIn:"root"})}return n})(),yO=(()=>{class n extends ND{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ce(MP))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nd=new he("",{factory:()=>({})}),Ep=new he(""),_O=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=$(qx);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await UP(tr(t,()=>r.loadComponent())),o=await EO(wO(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await bO(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function bO(n,e,t,r){let i=await UP(tr(t,()=>n.loadChildren())),s=await EO(wO(i)),o;s instanceof Uv||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,u,c=!1;return Array.isArray(o)?(u=o,c=!0):(a=o.create(t).injector,u=a.get(Ep,[],{optional:!0,self:!0}).flat()),{routes:u.map(OD),injector:a}}function $Q(n){return n&&typeof n=="object"&&"default"in n}function wO(n){return $Q(n)?n.default:n}async function EO(n){return n}var Py=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>$(VQ),providedIn:"root"})}return n})(),VQ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CO=new he("");var jQ=()=>{},xO=new he(""),DO=(()=>{class n{currentNavigation=Re(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Re(null);events=new Wt;transitionAbortWithErrorSubject=new Wt;configLoader=$(_O);environmentInjector=$(dn);destroyRef=$(ws);urlSerializer=$(_p);rootContexts=$(ed);location=$(Hl);inputBindingEnabled=$(My,{optional:!0})!==null;titleStrategy=$(ND);options=$(nd,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=$(Py);createViewTransition=$(CO,{optional:!0});navigationErrorHandler=$(xO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ve(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new yy(i)),r=i=>this.events.next(new _y(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;tn(()=>{this.transitions?.next(J(C({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new xn(null),this.transitions.pipe(Oi(r=>r!==null),hs(r=>{let i=!1,s=new AbortController;return Ve(r).pipe(hs(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",dr.SupersededByNewNavigation),wr;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?J(C({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&c!=="reload")return this.events.next(new uo(o.id,this.urlSerializer.serialize(o.rawUrl),"",hp.IgnoredSameUrlNavigation)),o.resolve(!1),wr;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Ve(o).pipe(hs(l=>(this.events.next(new Ju(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?wr:Promise.resolve(l))),NQ(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Jn(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=l.urlAfterRedirects,h));let d=new fp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:d,source:h,restoredState:f,extras:p}=o,g=new Ju(l,this.urlSerializer.serialize(d),h,f);this.events.next(g);let v=nO(this.rootComponentType).snapshot;return this.currentTransition=r=J(C({},o),{targetSnapshot:v,urlAfterRedirects:d,extras:J(C({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(y=>(y.finalUrl=d,y)),Ve(r)}else return this.events.next(new uo(o.id,this.urlSerializer.serialize(o.extractedUrl),"",hp.IgnoredByUrlHandlingStrategy)),o.resolve(!1),wr}),Jn(o=>{let a=new py(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),bt(o=>(this.currentTransition=r=J(C({},o),{guards:KK(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),oQ(this.environmentInjector,o=>this.events.next(o)),Jn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Iy(this.urlSerializer,o.guardsResult);let a=new my(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Oi(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",dr.GuardRejected),!1)),yD(o=>{if(o.guards.canActivateChecks.length!==0)return Ve(o).pipe(Jn(a=>{let u=new gy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),hs(a=>{let u=!1;return Ve(a).pipe(RQ(this.paramsInheritanceStrategy,this.environmentInjector),Jn({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",dr.NoDataFromResolver)}}))}),Jn(a=>{let u=new vy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),yD(o=>{let a=c=>{let l=[];if(c.routeConfig?._loadedComponent)c.component=c.routeConfig?._loadedComponent;else if(c.routeConfig?.loadComponent){let d=Jl(c)??this.environmentInjector;l.push(this.configLoader.loadComponent(d,c.routeConfig).then(h=>{c.component=h}))}for(let d of c.children)l.push(...a(d));return l},u=a(o.targetSnapshot.root);return u.length===0?Ve(o):Ut(Promise.all(u).then(()=>o))}),yD(()=>this.afterPreactivation()),hs(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return u?Ut(u).pipe(bt(()=>r)):Ve(r)}),bt(o=>{let a=zK(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=J(C({},o),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),Jn(()=>{this.events.next(new pp)}),YK(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Xs(1),df(lO(s.signal).pipe(Oi(()=>!i&&!r.targetRouterState),Jn(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",dr.Aborted)}))),Jn({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=jQ,a)),this.lastSuccessfulNavigation.set(tn(this.currentNavigation)),this.events.next(new zi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),df(this.transitionAbortWithErrorSubject.pipe(Jn(o=>{throw o}))),pC(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",dr.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),bl(o=>{if(this.destroyed)return r.resolve(!1),wr;if(i=!0,uO(o))this.events.next(new ks(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),GK(o)?this.events.next(new Ql(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Kl(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let u=tr(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Xl){let{message:c,cancellationCode:l}=Iy(this.urlSerializer,u);this.events.next(new ks(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Ql(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return wr}))}))}cancelNavigationTransition(t,r,i){let s=new ks(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=tn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UQ(n){return n!==cp}var SO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>$(HQ),providedIn:"root"})}return n})(),Ay=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},HQ=(()=>{class n extends Ay{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RD=(()=>{class n{urlSerializer=$(_p);options=$(nd,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=$(Hl);urlHandlingStrategy=$(Py);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Hi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Hi?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=nO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>$(IO),providedIn:"root"})}return n})(),IO=(()=>{class n extends RD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ju?this.updateStateMemento():t instanceof uo?this.commitTransition(r):t instanceof fp?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof pp?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ks&&t.code!==dr.SupersededByNewNavigation&&t.code!==dr.Redirect?this.restoreHistory(r):t instanceof Kl?this.restoreHistory(r,!0):t instanceof zi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,u=C(C({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=C(C({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FD(n,e){n.events.pipe(Oi(t=>t instanceof zi||t instanceof ks||t instanceof Kl||t instanceof uo),bt(t=>t instanceof zi||t instanceof uo?0:(t instanceof ks?t.code===dr.Redirect||t.code===dr.SupersededByNewNavigation:!1)?2:1),Oi(t=>t!==2),Xs(1)).subscribe(()=>{e()})}var zQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},yi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=$(Nx);stateManager=$(RD);options=$(nd,{optional:!0})||{};pendingTasks=$(ra);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=$(DO);urlSerializer=$(_p);location=$(Hl);urlHandlingStrategy=$(Py);injector=$(dn);_events=new Wt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=$(SO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=$(Ep,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!$(My,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Cn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=tn(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ks&&r.code!==dr.Redirect&&r.code!==dr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof zi)this.navigated=!0;else if(r instanceof Ql){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=C({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UQ(i.source)},o);this.scheduleNavigation(a,cp,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}VK(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=C({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(u=>{this.disposed||this.injector.get(Bi)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return tn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(OD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=C(C({},this.currentUrlTree.queryParams),s);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}l!==null&&(l=this.removeEmptyProps(l));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=ZP(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return JP(d,t,l,c??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ma(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,cp,null,r)}navigate(t,r={skipLocationChange:!1}){return WQ(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Cl(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=C({},zQ):r===!1?i=C({},qQ):i=r,ma(t))return kP(this.currentUrlTree,t,i);let s=this.parseUrl(t);return kP(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c;o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,u=h});let l=this.pendingTasks.add();return FD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WQ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}var Tr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Re(null);get href(){return tn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Wt;applicationErrorHandler=$(Bi);options=$(nd,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set($(new Kv("href"),{optional:!0}));let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof zi&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ma(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(c=>{this.applicationErrorHandler(c)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:ma(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ee(yi),Ee(qi),jf("tabindex"),Ee(xs),Ee($n),Ee(Ts))};static \u0275dir=vt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ye("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&ca("href",i.reactiveHref(),hx)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Yu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Yu],replaceUrl:[2,"replaceUrl","replaceUrl",Yu],routerLink:"routerLink"},features:[Bn]})}return n})(),LD=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new ft;link=$(Tr,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(o=>{o instanceof zi&&this.update()})}ngAfterContentInit(){Ve(this.links.changes,Ve(null)).pipe(yl()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ut(t).pipe(yl()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=YQ(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Ee(yi),Ee($n),Ee(xs),Ee(da))};static \u0275dir=vt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&Wv(s,Tr,5),r&2){let o;Vn(o=jn())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Bn]})}return n})();function YQ(n){return!!n.paths}var KQ=new he("");function BD(n,...e){return bf([{provide:Ep,multi:!0,useValue:n},[],{provide:qi,useFactory:QQ},{provide:Hv,multi:!0,useFactory:XQ},e.map(t=>t.\u0275providers)])}function QQ(){return $(yi).routerState.root}function XQ(){let n=$(Wr);return e=>{let t=n.get(ua);if(e!==t.components[0])return;let r=n.get(yi),i=n.get(ZQ);n.get(JQ)===1&&r.initialNavigation(),n.get(eX,null,{optional:!0})?.setUpPreloading(),n.get(KQ,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZQ=new he("",{factory:()=>new Wt}),JQ=new he("",{factory:()=>1});var eX=new he("");var Sn={production:!0,supabaseUrl:"https://plvtjfzvxyrycyogiqxu.supabase.co",supabaseKey:"sb_publishable_khftBsbc-UM39EMBiCnyzA_OKuSUA0I",vkAppId:"54417167",vkRedirectUrl:"https://kartoshk4.github.io/finance-tracker"};var TO=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);var rd=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},Cp=class extends rd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},id=class extends rd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},sd=class extends rd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},Oy=(function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n})(Oy||{});var xp=class{constructor(e,{headers:t={},customFetch:r,region:i=Oy.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=TO(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return f0(this,arguments,void 0,function*(t,r={}){var i;let s,o;try{let{headers:a,method:u,body:c,signal:l,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let p=new URL(`${this.url}/${t}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(h["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(h["Content-Type"]="application/json",g=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?g=JSON.stringify(c):g=c;let v=l;d&&(o=new AbortController,s=setTimeout(()=>o.abort(),d),l?(v=o.signal,l.addEventListener("abort",()=>o.abort())):v=o.signal);let y=yield this.fetch(p.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g,signal:v}).catch(R=>{throw new Cp(R)}),E=y.headers.get("x-relay-error");if(E&&E==="true")throw new id(y);if(!y.ok)throw new sd(y);let M=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return M==="application/json"?T=yield y.json():M==="application/octet-stream"||M==="application/pdf"?T=yield y.blob():M==="text/event-stream"?T=y:M==="multipart/form-data"?T=yield y.formData():T=yield y.text(),{data:T,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof sd||a instanceof id?a.context:void 0}}finally{s&&clearTimeout(s)}})}};var MO=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},tX=class{constructor(n){var e,t;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,u=null,c=s.status,l=s.statusText;if(s.ok){var d,h;if(t.method!=="HEAD"){var f;let y=await s.text();y===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((f=t.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=y:a=JSON.parse(y))}let g=(d=t.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),v=(h=s.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");g&&v&&v.length>1&&(u=parseInt(v[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,u=null,c=406,l="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;let g=await s.text();try{o=JSON.parse(g),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,l="OK")}catch{s.status===404&&g===""?(c=204,l="No Content"):o={message:g}}if(o&&t.isMaybeSingle&&(!(o==null||(p=o.details)===null||p===void 0)&&p.includes("0 rows"))&&(o=null,c=200,l="OK"),o&&t.shouldThrowOnError)throw new MO(o)}return{error:o,data:a,count:u,status:c,statusText:l}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="",u=s?.cause;if(u){var c,l,d,h;let p=(c=u?.message)!==null&&c!==void 0?c:"",g=(l=u?.code)!==null&&l!==void 0?l:"";a=`${(d=s?.name)!==null&&d!==void 0?d:"FetchError"}: ${s?.message}`,a+=`

Caused by: ${(h=u?.name)!==null&&h!==void 0?h:"Error"}: ${p}`,g&&(a+=` (${g})`),u?.stack&&(a+=`
${u.stack}`)}else{var f;a=(f=s?.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(n,e)}returns(){return this}overrideTypes(){return this}},nX=class extends tX{select(n){let e=!1,t=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:i=r}={}){let s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){let r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:r=t}={}){let i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${n}`),this.url.searchParams.set(s,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;let a=[n?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${u}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}},AO=new RegExp("[,()]"),od=class extends nX{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){let t=Array.from(new Set(e)).map(r=>typeof r=="string"&&AO.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){let t=Array.from(new Set(e)).map(r=>typeof r=="string"&&AO.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let s=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${i}fts${s}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){let r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},rX=class{constructor(n,{headers:e={},schema:t,fetch:r}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=r}select(n,e){let{head:t=!1,count:r}=e??{},i=t?"HEAD":"GET",s=!1,o=(n??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new od({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:t=!0}={}){var r;let i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(n)){let s=n.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(s.length>0){let o=[...new Set(s)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new od({method:i,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:i=!0}={}){var s;let o="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(n)){let a=n.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){let u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new od({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(n,{count:e}={}){var t;let r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new od({method:r,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:n}={}){var e;let t="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new od({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},kO=class PO{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new rX(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new PO(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var o;let a,u=new URL(`${this.url}/rpc/${e}`),c,l=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(l)),d=r&&Object.values(t).some(l);d?(a="POST",c=t):r||i?(a=r?"HEAD":"GET",Object.entries(t).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{u.searchParams.append(f,p)})):(a="POST",c=t);let h=new Headers(this.headers);return d?h.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&h.set("Prefer",`count=${s}`),new od({method:a,url:u,headers:h,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};var $D=class{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let t=globalThis.process;if(t){let r=t.versions;if(r&&r.node){let i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){let r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}},VD=$D;var OO="2.90.0";var NO=`realtime-js/${OO}`,jD="1.0.0",RO="2.0.0",UD=jD;var Dp=1e4,FO=1e3,LO=100,ga=(function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n})(ga||{}),nn=(function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n})(nn||{}),_i=(function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n})(_i||{}),HD=(function(n){return n.websocket="websocket",n})(HD||{}),tc=(function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n})(tc||{});var Ny=class{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;let i=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var t,r;let i=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,t,r){var i,s;let o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",u=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,l=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(l).length===0?"":JSON.stringify(l);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+a.length+o.length+c.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),p=new DataView(f),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,u.length),p.setUint8(g++,a.length),p.setUint8(g++,o.length),p.setUint8(g++,c.length),p.setUint8(g++,d.length),p.setUint8(g++,t),Array.from(u,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(a,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(o,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(c,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(d,y=>p.setUint8(g++,y.charCodeAt(0)));var v=new Uint8Array(f.byteLength+r.byteLength);return v.set(new Uint8Array(f),0),v.set(new Uint8Array(r),f.byteLength),v.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){let r=JSON.parse(e),[i,s,o,a,u]=r;return t({join_ref:i,ref:s,topic:o,event:a,payload:u})}return t({})}_binaryDecode(e){let t=new DataView(e),r=t.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,i)}}_decodeUserBroadcast(e,t,r){let i=t.getUint8(1),s=t.getUint8(2),o=t.getUint8(3),a=t.getUint8(4),u=this.HEADER_LENGTH+4,c=r.decode(e.slice(u,u+i));u=u+i;let l=r.decode(e.slice(u,u+s));u=u+s;let d=r.decode(e.slice(u,u+o));u=u+o;let h=e.slice(u,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:l,payload:f};return o>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}};var ad=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var It=(function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n})(It||{}),qD=(n,e,t={})=>{var r;let i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=iX(o,n,e,i),s),{}):{}},iX=(n,e,t,r)=>{let i=e.find(a=>a.name===n),s=i?.type,o=t[n];return s&&!r.includes(s)?BO(s,o):zD(o)},BO=(n,e)=>{if(n.charAt(0)==="_"){let t=n.slice(1,n.length);return uX(e,t)}switch(n){case It.bool:return sX(e);case It.float4:case It.float8:case It.int2:case It.int4:case It.int8:case It.numeric:case It.oid:return oX(e);case It.json:case It.jsonb:return aX(e);case It.timestamp:return cX(e);case It.abstime:case It.date:case It.daterange:case It.int4range:case It.int8range:case It.money:case It.reltime:case It.text:case It.time:case It.timestamptz:case It.timetz:case It.tsrange:case It.tstzrange:return zD(e);default:return zD(e)}},zD=n=>n,sX=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},oX=n=>{if(typeof n=="string"){let e=parseFloat(n);if(!Number.isNaN(e))return e}return n},aX=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},uX=(n,e)=>{if(typeof n!="string")return n;let t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s,o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>BO(e,a))}return n},cX=n=>typeof n=="string"?n.replace(" ","T"):n,Ry=n=>{let e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};var ud=class{constructor(e,t,r={},i=Dp){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Sp=class n{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,s,o),this.pendingDiffs.forEach(u=>{this.state=n.syncDiff(this.state,u,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let s=this.cloneDeep(e),o=this.transformState(t),a={},u={};return this.map(s,(c,l)=>{o[c]||(u[c]=l)}),this.map(o,(c,l)=>{let d=s[c];if(d){let h=l.map(v=>v.presence_ref),f=d.map(v=>v.presence_ref),p=l.filter(v=>f.indexOf(v.presence_ref)<0),g=d.filter(v=>h.indexOf(v.presence_ref)<0);p.length>0&&(a[c]=p),g.length>0&&(u[c]=g)}else a[c]=l}),this.syncDiff(s,{joins:a,leaves:u},r,i)}static syncDiff(e,t,r,i){let{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,u)=>{var c;let l=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(u),l.length>0){let d=e[a].map(f=>f.presence_ref),h=l.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,l,u)}),this.map(o,(a,u)=>{let c=e[a];if(!c)return;let l=u.map(d=>d.presence_ref);c=c.filter(d=>l.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,u),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Ip=(function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n})(Ip||{}),co=(function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n})(co||{});var Tp=class n{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ud(this,_i.join,this.params,this.timeout),this.rejoinTimer=new ad(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_i.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Sp(this),this.broadcastEndpointURL=Ry(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==nn.closed){let{config:{broadcast:o,presence:a,private:u}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],l=!!this.bindings[Ip.PRESENCE]&&this.bindings[Ip.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e?.(co.CHANNEL_ERROR,f)),this._onClose(()=>e?.(co.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e?.(co.SUBSCRIBED);return}else{let g=this.bindings.postgres_changes,v=(p=g?.length)!==null&&p!==void 0?p:0,y=[];for(let E=0;E<v;E++){let M=g[E],{filter:{event:T,schema:R,table:U,filter:q}}=M,H=f&&f[E];if(H&&H.event===T&&n.isFilterValueEqual(H.schema,R)&&n.isFilterValueEqual(H.table,U)&&n.isFilterValueEqual(H.filter,q))y.push(Object.assign(Object.assign({},M),{id:H.id}));else{this.unsubscribe(),this.state=nn.errored,e?.(co.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(co.SUBSCRIBED);return}}).receive("error",f=>{this.state=nn.errored,e?.(co.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(co.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===nn.joined&&e===Ip.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;if(t==null)return Promise.reject("Payload is required for httpSend()");let s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);let o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let u=a.statusText;try{let c=await a.json();u=c.error||c.message||u}catch{}return Promise.reject(new Error(u))}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let u={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{let c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,u;let c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=nn.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_i.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new ud(this,_i.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nn.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){let i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ud(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>LO){let t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;let o=e.toLocaleLowerCase(),{close:a,error:u,leave:c,join:l}=_i;if(r&&[a,u,c,l].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,g,v;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(g=f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,g,v,y,E,M;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let T=f.id,R=(p=f.filter)===null||p===void 0?void 0:p.event;return T&&((g=t.ids)===null||g===void 0?void 0:g.includes(T))&&(R==="*"||R?.toLocaleLowerCase()===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{let T=(E=(y=f?.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return T==="*"||T===((M=t?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:g,table:v,commit_timestamp:y,type:E,errors:M}=p;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:E,new:{},old:{},errors:M}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===nn.closed}_isJoined(){return this.state===nn.joined}_isJoining(){return this.state===nn.joining}_isLeaving(){return this.state===nn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&n.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_i.close,{},e)}_onError(e){this._on(_i.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=qD(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=qD(e.columns,e.old_record)),t}};var WD=()=>{},Fy={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},dX=[1e3,2e3,5e3,1e4],hX=1e4,fX=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ap=class{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dp,this.transport=null,this.heartbeatIntervalMs=Fy.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=WD,this.ref=0,this.reconnectTimer=null,this.vsn=UD,this.logger=WD,this.conn=null,this.sendBuffer=[],this.serializer=new Ny,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${HD.websocket}`,this.httpEndpoint=Ry(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=VD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");let t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ga.connecting:return tc.Connecting;case ga.open:return tc.Open;case ga.closing:return tc.Closing;default:return tc.Closed}}isConnected(){return this.connectionState()===tc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{let s=new Tp(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){let{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(FO,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Fy.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){let c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",c)}catch(l){this.log("error","error in heartbeat callback",l)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:s,ref:o}=t,a=o?`(${o})`:"",u=s.status||"";this.log("receive",`${u} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ga.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ga.open||this.conn.readyState===ga.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(_i.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([fX],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{let s={access_token:t,version:NO};t&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(_i.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ad(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fy.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,o,a,u,c,l,d,h,f;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Dp,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Fy.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:WD,this.vsn=(u=e?.vsn)!==null&&u!==void 0?u:UD,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:p=>dX[p-1]||hX,this.vsn){case jD:this.encode=(l=e?.encode)!==null&&l!==void 0?l:(p,g)=>g(JSON.stringify(p)),this.decode=(d=e?.decode)!==null&&d!==void 0?d:(p,g)=>g(JSON.parse(p));break;case RO:this.encode=(h=e?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=e?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};var Mp=class extends Error{constructor(n,e){super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function pX(n,e,t){let r=new URL(e,n);if(t)for(let[i,s]of Object.entries(t))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function mX(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function gX(n){let e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:i,body:s,headers:o}){let a=pX(n.baseUrl,r,i),u=await mX(n.auth),c=await e(a,{method:t,headers:C(C(C({},s?{"Content-Type":"application/json"}:{}),u),o),body:s?JSON.stringify(s):void 0}),l=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&l?JSON.parse(l):l;if(!c.ok){let f=d?h:void 0,p=f?.error;throw new Mp(p?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:p?.type,icebergCode:p?.code,details:f})}return{status:c.status,headers:c.headers,data:h}}}}function Ly(n){return n.join("")}var vX=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){let e=n?{parent:Ly(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){let t={namespace:n.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ly(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ly(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ly(n.namespace)}`}),!0}catch(e){if(e instanceof Mp&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof Mp&&t.status===409)return;throw t}}};function cd(n){return n.join("")}var yX=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cd(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${cd(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){let t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${cd(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${cd(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(n){let e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cd(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){let e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${cd(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof Mp&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof Mp&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},$O=class{constructor(n){let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);let t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=gX({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new vX(this.client,e),this.tableOps=new yX(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};var By=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function Nt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var _X=class extends By{constructor(n,e,t){super(n),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},KD=class extends By{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}},ZD=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),bX=()=>Response,QD=n=>{if(Array.isArray(n))return n.map(t=>QD(t));if(typeof n=="function"||n!==Object(n))return n;let e={};return Object.entries(n).forEach(([t,r])=>{let i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=QD(r)}),e},wX=n=>{if(typeof n!="object"||n===null)return!1;let e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},EX=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function kp(n){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(n)}function CX(n,e){if(kp(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function xX(n){var e=CX(n,"string");return kp(e)=="symbol"?e:e+""}function DX(n,e,t){return(e=xX(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function be(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VO(Object(t),!0).forEach(function(r){DX(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var GD=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},SX=async(n,e,t)=>{n instanceof await bX()&&!t?.noResolveJson?n.json().then(r=>{let i=n.status||500,s=r?.statusCode||i+"";e(new _X(GD(r),i,s))}).catch(r=>{e(new KD(GD(r),r))}):e(new KD(GD(n),n))},IX=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(wX(r)?(i.headers=be({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),be(be({},i),t))};async function Op(n,e,t,r,i,s){return new Promise((o,a)=>{n(t,IX(e,r,i,s)).then(u=>{if(!u.ok)throw u;return r?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>SX(u,a,r))})}async function Pp(n,e,t,r){return Op(n,"GET",e,t,r)}async function Wi(n,e,t,r,i){return Op(n,"POST",e,r,i,t)}async function XD(n,e,t,r,i){return Op(n,"PUT",e,r,i,t)}async function TX(n,e,t,r){return Op(n,"HEAD",e,be(be({},t),{},{noResolveJson:!0}),r)}async function JD(n,e,t,r,i){return Op(n,"DELETE",e,r,i,t)}var AX=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Nt(e))return{data:null,error:e};throw e}}},HO;HO=Symbol.toStringTag;var MX=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[HO]="BlobDownloadBuilder",this.promise=null}asStream(){return new AX(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Nt(e))return{data:null,error:e};throw e}}},kX={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},PX=class{constructor(n,e={},t,r){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=t,this.fetch=ZD(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,e,t,r){var i=this;try{let s,o=be(be({},jO),r),a=be(be({},i.headers),n==="POST"&&{"x-upsert":String(o.upsert)}),u=o.metadata;typeof Blob<"u"&&t instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),u&&s.append("metadata",i.encodeMetadata(u)),s.append("",t)):typeof FormData<"u"&&t instanceof FormData?(s=t,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),u&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(u))):(s=t,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,u&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r?.headers&&(a=be(be({},a),r.headers));let c=i._removeEmptyFolders(e),l=i._getFinalPath(c),d=await(n=="PUT"?XD:Wi)(i.fetch,`${i.url}/object/${l}`,s,be({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Nt(s))return{data:null,error:s};throw s}}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,r){var i=this;let s=i._removeEmptyFolders(n),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let u,c=be({upsert:jO.upsert},r),l=be(be({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&t instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",t)):typeof FormData<"u"&&t instanceof FormData?(u=t,u.append("cacheControl",c.cacheControl)):(u=t,l["cache-control"]=`max-age=${c.cacheControl}`,l["content-type"]=c.contentType),{data:{path:s,fullPath:(await XD(i.fetch,a.toString(),u,{headers:l})).Key},error:null}}catch(u){if(i.shouldThrowOnError)throw u;if(Nt(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(n,e){var t=this;try{let r=t._getFinalPath(n),i=be({},t.headers);e?.upsert&&(i["x-upsert"]="true");let s=await Wi(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(t.url+s.url),a=o.searchParams.get("token");if(!a)throw new By("No token returned by API");return{data:{signedUrl:o.toString(),path:n,token:a},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var r=this;try{return{data:await Wi(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}}async copy(n,e,t){var r=this;try{return{data:{path:(await Wi(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}}async createSignedUrl(n,e,t){var r=this;try{let i=r._getFinalPath(n),s=await Wi(r.fetch,`${r.url}/object/sign/${i}`,be({expiresIn:e},t?.transform?{transform:t.transform}:{}),{headers:r.headers}),o=t?.download?`&download=${t.download===!0?"":t.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}}async createSignedUrls(n,e,t){var r=this;try{let i=await Wi(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),s=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{data:i.map(o=>be(be({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}}download(n,e){let t=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),i=r?`?${r}`:"",s=this._getFinalPath(n),o=()=>Pp(this.fetch,`${this.url}/${t}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new MX(o,this.shouldThrowOnError)}async info(n){var e=this;let t=e._getFinalPath(n);try{return{data:QD(await Pp(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}}async exists(n){var e=this;let t=e._getFinalPath(n);try{return await TX(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Nt(r)&&r instanceof KD){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){let t=this._getFinalPath(n),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);let s=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${t}${a}`)}}}async remove(n){var e=this;try{return{data:await JD(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}}async list(n,e,t){var r=this;try{let i=be(be(be({},kX),e),{},{prefix:n||""});return{data:await Wi(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},t),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Nt(i))return{data:null,error:i};throw i}}async listV2(n,e){var t=this;try{let r=be({},n);return{data:await Wi(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},e),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){let e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}},zO="2.90.0",qO={"X-Client-Info":`storage-js/${zO}`},OX=class{constructor(n,e={},t,r){this.shouldThrowOnError=!1;let i=new URL(n);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=be(be({},qO),e),this.fetch=ZD(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var e=this;try{let t=e.listBucketOptionsToQueryString(n);return{data:await Pp(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await Pp(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}}async createBucket(n,e={public:!1}){var t=this;try{return{data:await Wi(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}}async updateBucket(n,e){var t=this;try{return{data:await XD(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Nt(r))return{data:null,error:r};throw r}}async emptyBucket(n){var e=this;try{return{data:await Wi(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await JD(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(n){let e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},NX=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=be(be({},qO),e),this.fetch=ZD(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await Wi(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}}async listBuckets(n){var e=this;try{let t=new URLSearchParams;n?.limit!==void 0&&t.set("limit",n.limit.toString()),n?.offset!==void 0&&t.set("offset",n.offset.toString()),n?.sortColumn&&t.set("sortColumn",n.sortColumn),n?.sortOrder&&t.set("sortOrder",n.sortOrder),n?.search&&t.set("search",n.search);let r=t.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Pp(e.fetch,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await JD(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Nt(t))return{data:null,error:t};throw t}}from(n){var e=this;if(!EX(n))throw new By("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let t=new $O({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(i,s){let o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}}}})}},eS={"X-Client-Info":`storage-js/${zO}`,"Content-Type":"application/json"},WO=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Zr(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var YD=class extends WO{constructor(n,e,t){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},RX=class extends WO{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}};var tS=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);var FX=n=>{if(typeof n!="object"||n===null)return!1;let e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var UO=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),LX=async(n,e,t)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){let r=n.status||500,i=n;if(typeof i.json=="function")i.json().then(s=>{let o=s?.statusCode||s?.code||r+"";e(new YD(UO(s),r,o))}).catch(()=>{let s=r+"";e(new YD(i.statusText||`HTTP ${r} error`,r,s))});else{let s=r+"";e(new YD(i.statusText||`HTTP ${r} error`,r,s))}}else e(new RX(UO(n),n))},BX=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(FX(r)?(i.headers=be({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,be(be({},i),t))};async function $X(n,e,t,r,i,s){return new Promise((o,a)=>{n(t,BX(e,r,i,s)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;let c=u.headers.get("content-type");return!c||!c.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>LX(u,a,r))})}async function Jr(n,e,t,r,i){return $X(n,"POST",e,r,i,t)}var VX=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=be(be({},eS),e),this.fetch=tS(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}async getIndex(n,e){var t=this;try{return{data:await Jr(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}}async listIndexes(n){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}async deleteIndex(n,e){var t=this;try{return{data:await Jr(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}}},jX=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=be(be({},eS),e),this.fetch=tS(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var e=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Jr(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}async getVectors(n){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}async listVectors(n){var e=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await Jr(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}async queryVectors(n){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}async deleteVectors(n){var e=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Jr(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}},UX=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=be(be({},eS),e),this.fetch=tS(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}async listBuckets(n={}){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await Jr(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Zr(t))return{data:null,error:t};throw t}}},HX=class extends UX{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new zX(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},zX=class extends VX{constructor(n,e,t,r){super(n,e,r),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new qX(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},qX=class extends jX{constructor(n,e,t,r,i){super(n,e,i),this.vectorBucketName=t,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,be(be({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},GO=class extends OX{constructor(n,e={},t,r){super(n,e,t,r)}from(n){return new PX(this.url,this.headers,n,this.fetch)}get vectors(){return new HX(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new NX(this.url+"/iceberg",this.headers,this.fetch)}};var $y="2.90.0";var nc=30*1e3,Vy=3,jy=Vy*nc,YO="http://localhost:9999",KO="supabase.auth.token";var QO={"X-Client-Info":`gotrue-js/${$y}`};var Np="X-Supabase-Api-Version",nS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ZO=600*1e3;var va=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function ie(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Uy=class extends va{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function JO(n){return ie(n)&&n.name==="AuthApiError"}var bi=class extends va{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},Gi=class extends va{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}},In=class extends Gi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function eN(n){return ie(n)&&n.name==="AuthSessionMissingError"}var lo=class extends Gi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},rc=class extends Gi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},ic=class extends Gi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function tN(n){return ie(n)&&n.name==="AuthImplicitGrantRedirectError"}var Rp=class extends Gi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Hy=class extends Gi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var ld=class extends Gi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function zy(n){return ie(n)&&n.name==="AuthRetryableFetchError"}var Fp=class extends Gi{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var sc=class extends Gi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var qy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nN=` 	
\r=`.split(""),WX=(()=>{let n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<nN.length;e+=1)n[nN[e].charCodeAt(0)]=-2;for(let e=0;e<qy.length;e+=1)n[qy[e].charCodeAt(0)]=e;return n})();function rN(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(qy[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(qy[r]),e.queuedBits-=6}}function iN(n,e,t){let r=WX[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function rS(n){let e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{KX(o,r,t)};for(let o=0;o<n.length;o+=1)iN(n.charCodeAt(o),i,s);return e.join("")}function GX(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function YX(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}GX(r,e)}}function KX(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ya(n){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)iN(n.charCodeAt(i),t,r);return new Uint8Array(e)}function sN(n){let e=[];return YX(n,t=>e.push(t)),new Uint8Array(e)}function ho(n){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>rN(i,t,r)),rN(null,t,r),e.join("")}function oN(n){return Math.round(Date.now()/1e3)+n}function aN(){return Symbol("auth-callback")}var rn=()=>typeof window<"u"&&typeof document<"u",oc={tested:!1,writable:!1},Wy=()=>{if(!rn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oc.tested)return oc.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),oc.tested=!0,oc.writable=!0}catch{oc.tested=!0,oc.writable=!1}return oc.writable};function uN(n){let e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}var Gy=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),cN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ac=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},_a=async(n,e)=>{let t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},pn=async(n,e)=>{await n.removeItem(e)},Lp=class n{constructor(){this.promise=new n.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};Lp.promiseConstructor=Promise;function Yy(n){let e=n.split(".");if(e.length!==3)throw new sc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!XO.test(e[r]))throw new sc("JWT not in base64url format");return{header:JSON.parse(rS(e[0])),payload:JSON.parse(rS(e[1])),signature:ya(e[2]),raw:{header:e[0],payload:e[1]}}}async function lN(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function dN(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{let o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function QX(n){return("0"+n.toString(16)).substr(-2)}function XX(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,QX).join("")}async function ZX(n){let t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function JX(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let t=await ZX(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function uc(n,e,t=!1){let r=XX(),i=r;t&&(i+="/PASSWORD_RECOVERY"),await ac(n,`${e}-code-verifier`,i);let s=await JX(r);return[s,r===s?"plain":"s256"]}var eZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hN(n){let e=n.headers.get(Np);if(!e||!e.match(eZ))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function fN(n){if(!n)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function pN(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var tZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cc(n){if(!tZ.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ky(){let n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){let r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mN(n,e){return new Proxy(n,{get:(t,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,i)}})}function iS(n){return JSON.parse(JSON.stringify(n))}var lc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),nZ=[502,503,504];async function gN(n){var e;if(!cN(n))throw new ld(lc(n),0);if(nZ.includes(n.status))throw new ld(lc(n),n.status);let t;try{t=await n.json()}catch(s){throw new bi(lc(s),s)}let r,i=hN(n);if(i&&i.getTime()>=nS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Fp(lc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new In}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Fp(lc(t),n.status,t.weak_password.reasons);throw new Uy(lc(t),n.status||500,r)}var rZ=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function me(n,e,t,r){var i;let s=Object.assign({},r?.headers);s[Np]||(s[Np]=nS["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await iZ(n,e,t+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(u):{data:Object.assign({},u),error:null}}async function iZ(n,e,t,r,i,s){let o=rZ(e,r,i,s),a;try{a=await n(t,Object.assign({},o))}catch(u){throw console.error(u),new ld(lc(u),0)}if(a.ok||await gN(a),r?.noResolveJson)return a;try{return await a.json()}catch(u){await gN(u)}}function wi(n){var e;let t=null;sZ(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=oN(n.expires_in)));let r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function sS(n){let e=wi(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ps(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function vN(n){return{data:n,error:null}}function yN(n){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=Eu(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},u=Object.assign({},o);return{data:{properties:a,user:u},error:null}}function oS(n){return n}function sZ(n){return n.access_token&&n.refresh_token&&n.expires_in}var Qy=["global","local","others"];var dd=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Gy(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Qy[0]){if(Qy.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qy.join(", ")}`);try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ps})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{let{options:t}=e,r=Eu(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:yN,redirectTo:t?.redirectTo})}catch(t){if(ie(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ps})}catch(t){if(ie(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,u;try{let c={nextPage:null,lastPage:0,total:0},l=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:oS});if(l.error)throw l.error;let d=await l.json(),h=(o=l.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(u=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&u!==void 0?u:[];return f.length>0&&(f.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ie(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){cc(e);try{return await me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ps})}catch(t){if(ie(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){cc(e);try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ps})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){cc(e);try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ps})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){cc(e.userId);try{let{data:t,error:r}=await me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(ie(t))return{data:null,error:t};throw t}}async _deleteFactor(e){cc(e.userId),cc(e.id);try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,s,o,a,u;try{let c={nextPage:null,lastPage:0,total:0},l=await me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:oS});if(l.error)throw l.error;let d=await l.json(),h=(o=l.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(u=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&u!==void 0?u:[];return f.length>0&&(f.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ie(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ie(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ie(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ie(t))return{data:null,error:t};throw t}}};function aS(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}var dc={debug:!!(globalThis&&Wy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Bp=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Xy=class extends Bp{};async function uS(n,e,t){dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),dc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Xy(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(dc.debug)try{let s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function _N(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function cS(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function bN(n){return parseInt(n,16)}function wN(n){let e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function EN(n){var e;let{chainId:t,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:u,resources:c,scheme:l,uri:d,version:h}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}let f=cS(n.address),p=l?`${l}://${r}`:r,g=n.statement?`${n.statement}
`:"",v=`${p} wants you to sign in with your Ethereum account:
${f}

${g}`,y=`URI: ${d}
Version: ${h}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),u&&(y+=`
Request ID: ${u}`),c){let E=`
Resources:`;for(let M of c){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);E+=`
- ${M}`}y+=E}return`${v}
${y}`}var Rt=class extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}},hc=class extends Rt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}};function CN({error:n,options:e}){var t,r,i;let{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Rt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){let o=window.location.hostname;if(lS(o)){if(s.rp.id!==o)return new Rt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function xN({error:n,options:e}){let{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Rt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){let r=window.location.hostname;if(lS(r)){if(t.rpId!==r)return new Rt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var dS=class{createNewAbortSignal(){if(this.controller){let t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}},oZ=new dS;function SN(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);let{challenge:e,user:t,excludeCredentials:r}=n,i=Eu(n,["challenge","user","excludeCredentials"]),s=ya(e).buffer,o=Object.assign(Object.assign({},t),{id:ya(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){let c=r[u];a.excludeCredentials[u]=Object.assign(Object.assign({},c),{id:ya(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function IN(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);let{challenge:e,allowCredentials:t}=n,r=Eu(n,["challenge","allowCredentials"]),i=ya(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){let a=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ya(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function TN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let t=n;return{id:n.id,rawId:n.id,response:{attestationObject:ho(new Uint8Array(n.response.attestationObject)),clientDataJSON:ho(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function AN(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:ho(new Uint8Array(i.authenticatorData)),clientDataJSON:ho(new Uint8Array(i.clientDataJSON)),signature:ho(new Uint8Array(i.signature)),userHandle:i.userHandle?ho(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lS(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function DN(){var n,e;return!!(rn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function aZ(n){try{let e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new hc("Browser returned unexpected credential type",e)}:{data:null,error:new hc("Empty credential response",e)}}catch(e){return{data:null,error:CN({error:e,options:n})}}}async function uZ(n){try{let e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new hc("Browser returned unexpected credential type",e)}:{data:null,error:new hc("Empty credential response",e)}}catch(e){return{data:null,error:xN({error:e,options:n})}}}var cZ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},lZ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Zy(...n){let e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of n)if(i)for(let s in i){let o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(t(o))r[s]=o;else if(e(o)){let a=r[s];e(a)?r[s]=Zy(a,o):r[s]=Zy(o)}else r[s]=o}return r}function dZ(n,e){return Zy(cZ,n,e||{})}function hZ(n,e){return Zy(lZ,n,e||{})}var Jy=class{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{let{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};let u=i??oZ.createNewAbortSignal();if(o.webauthn.type==="create"){let{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{let c=dZ(o.webauthn.credential_options.publicKey,s?.create),{data:l,error:d}=await aZ({publicKey:c,signal:u});return l?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:l}},error:null}:{data:null,error:d}}case"request":{let c=hZ(o.webauthn.credential_options.publicKey,s?.request),{data:l,error:d}=await uZ(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:u}));return l?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:l}},error:null}:{data:null,error:d}}}}catch(o){return ie(o)?{data:null,error:o}:{data:null,error:new bi("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!t)return{data:null,error:new va("rpId is required for WebAuthn authentication")};try{if(!DN())return{data:null,error:new bi("Browser does not support WebAuthn",null)};let{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};let{webauthn:u}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:u.type,rpId:t,rpOrigins:r,credential_response:u.credential_response}})}catch(o){return ie(o)?{data:null,error:o}:{data:null,error:new bi("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!t)return{data:null,error:new va("rpId is required for WebAuthn registration")};try{if(!DN())return{data:null,error:new bi("Browser does not support WebAuthn",null)};let{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(l=>{var d;return(d=l.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(l=>l?this.client.mfa.unenroll({factorId:l?.id}):void 0),{data:null,error:a};let{data:u,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:t,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:c}}catch(o){return ie(o)?{data:null,error:o}:{data:null,error:new bi("Unexpected error in register",o)}}}};_N();var fZ={url:YO,storageKey:KO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function MN(n,e,t){return await t()}var hd={},pZ=(()=>{class n{get jwks(){var t,r;return(r=(t=hd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){hd[this.storageKey]=Object.assign(Object.assign({},hd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=hd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){hd[this.storageKey]=Object.assign(Object.assign({},hd[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let o=Object.assign(Object.assign({},fZ),t);if(this.storageKey=o.storageKey,this.instanceID=(r=n.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,n.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&rn()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new dd({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Gy(o.fetch),this.lock=o.lock||MN,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&rn()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=uS:this.lock=MN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Jy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Wy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=aS(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=aS(this.memoryStorage)),rn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${$y}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},i="none";if(rn()&&(r=uN(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),rn()&&this.detectSessionInUrl&&i!=="none"){let{data:s,error:o}=await this._getSessionFromURL(r,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),tN(o)){let c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return{error:o}}let{session:a,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ie(r)?this._returnResult({error:r}):this._returnResult({error:new bi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,i,s;try{let o=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:wi}),{data:a,error:u}=o;if(u||!a)return this._returnResult({data:{user:null,session:null},error:u});let c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(o){if(ie(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var r,i,s;try{let o;if("email"in t){let{email:d,password:h,options:f}=t,p=null,g=null;this.flowType==="pkce"&&([p,g]=await uc(this.storage,this.storageKey)),o=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},xform:wi})}else if("phone"in t){let{phone:d,password:h,options:f}=t;o=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:wi})}else throw new rc("You must provide either an email or phone number and a password");let{data:a,error:u}=o;if(u||!a)return await pn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});let c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(o){if(await pn(this.storage,`${this.storageKey}-code-verifier`),ie(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let r;if("email"in t){let{email:o,password:a,options:u}=t;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:sS})}else if("phone"in t){let{phone:o,password:a,options:u}=t;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:sS})}else throw new rc("You must provide either an email or phone number and a password");let{data:i,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!i||!i.session||!i.user){let o=new lo;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,i,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){let{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,i,s,o,a,u,c,l,d,h,f;let p,g;if("message"in t)p=t.message,g=t.signature;else{let{chain:v,wallet:y,statement:E,options:M}=t,T;if(rn())if(typeof y=="object")T=y;else{let pe=window;if("ethereum"in pe&&typeof pe.ethereum=="object"&&"request"in pe.ethereum&&typeof pe.ethereum.request=="function")T=pe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=y}let R=new URL((r=M?.url)!==null&&r!==void 0?r:window.location.href),U=await T.request({method:"eth_requestAccounts"}).then(pe=>pe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let q=cS(U[0]),H=(i=M?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!H){let pe=await T.request({method:"eth_chainId"});H=bN(pe)}let K={domain:R.host,address:q,statement:E,uri:R.href,version:"1",chainId:H,nonce:(s=M?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=M?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(u=M?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=M?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(l=M?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(d=M?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=EN(K),g=await T.request({method:"personal_sign",params:[wN(p),q]})}try{let{data:v,error:y}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:wi});if(y)throw y;if(!v||!v.session||!v.user){let E=new lo;return this._returnResult({data:{user:null,session:null},error:E})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(ie(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,i,s,o,a,u,c,l,d,h,f,p;let g,v;if("message"in t)g=t.message,v=t.signature;else{let{chain:y,wallet:E,statement:M,options:T}=t,R;if(rn())if(typeof E=="object")R=E;else{let q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))R=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=E}let U=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in R&&R.signIn){let q=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),M?{statement:M}:null)),H;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")H=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)H=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)g=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),v=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${U.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(s=(i=T?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=T?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((a=T?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((u=T?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((h=(d=T?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...T.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);let q=await R.signMessage(new TextEncoder().encode(g),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=q}}try{let{data:y,error:E}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:ho(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:wi});if(E)throw E;if(!y||!y.session||!y.user){let M=new lo;return this._returnResult({data:{user:null,session:null},error:M})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:E})}catch(y){if(ie(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){let r=await _a(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Hy;let{data:o,error:a}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:wi});if(await pn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){let u=new lo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(await pn(this.storage,`${this.storageKey}-code-verifier`),ie(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{let{options:r,provider:i,token:s,access_token:o,nonce:a}=t,u=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:wi}),{data:c,error:l}=u;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c||!c.session||!c.user){let d=new lo;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:l})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,i,s,o,a;try{if("email"in t){let{email:u,options:c}=t,l=null,d=null;this.flowType==="pkce"&&([l,d]=await uc(this.storage,this.storageKey));let{error:h}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:l,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){let{phone:u,options:c}=t,{data:l,error:d}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:d})}throw new rc("You must provide either an email or phone number.")}catch(u){if(await pn(this.storage,`${this.storageKey}-code-verifier`),ie(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(t){var r,i;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(i=t.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:u}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:wi});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,l=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(s){if(ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,i,s,o,a;try{let u=null,c=null;this.flowType==="pkce"&&([u,c]=await uc(this.storage,this.storageKey));let l=await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:c}),headers:this.headers,xform:vN});return!((o=l.data)===null||o===void 0)&&o.url&&rn()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(u){if(await pn(this.storage,`${this.storageKey}-code-verifier`),ie(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{let{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new In;let{error:s}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(ie(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{let r=`${this.url}/resend`;if("email"in t){let{email:i,type:s,options:o}=t,{error:a}=await me(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){let{phone:i,type:s,options:o}=t,{data:a,error:u}=await me(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:u})}throw new rc("You must provide either an email or phone number and a type")}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,r=await _a(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};let i=t.expires_at?t.expires_at*1e3-Date.now()<jy:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){let a=await _a(this.userStorage,this.storageKey+"-user");a?.user?t.user=a.user:t.user=Ky()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};t.user=mN(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;let r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ps}):await this._useSession(async r=>{var i,s,o;let{data:a,error:u}=r;if(u)throw u;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new In}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Ps})})}catch(r){if(ie(r))return eN(r)&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async i=>{let{data:s,error:o}=i;if(o)throw o;if(!s.session)throw new In;let a=s.session,u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=await uc(this.storage,this.storageKey));let{data:l,error:d}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:a.access_token,xform:Ps});if(d)throw d;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await pn(this.storage,`${this.storageKey}-code-verifier`),ie(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new In;let r=Date.now()/1e3,i=r,s=!0,o=null,{payload:a}=Yy(t.access_token);if(a.exp&&(i=a.exp,s=i<=r),s){let{data:u,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!u)return{data:{user:null,session:null},error:null};o=u}else{let{data:u,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(ie(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var i;if(!t){let{data:a,error:u}=r;if(u)throw u;t=(i=a.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new In;let{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!rn())throw new ic("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ic(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ic("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Rp("No code detected.");let{data:M,error:T}=await this._exchangeCodeForSession(t.code);if(T)throw T;let R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:M.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:u,expires_at:c,token_type:l}=t;if(!o||!u||!a||!l)throw new ic("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(u),f=d+h;c&&(f=parseInt(c));let p=f-d;p*1e3<=nc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);let{data:v,error:y}=await this._getUser(o);if(y)throw y;let E={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:f,refresh_token:a,token_type:l,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:t.type},error:null})}catch(i){if(ie(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){let r=await _a(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:s,error:o}=r;if(o)return this._returnResult({error:o});let a=(i=s.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:u}=await this.admin.signOut(a,t);if(u&&!(JO(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return t!=="others"&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){let r=aN(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async r=>{var i,s;try{let{data:{session:o},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await uc(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await pn(this.storage,`${this.storageKey}-code-verifier`),ie(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{let{data:i,error:s}=await this._useSession(async o=>{var a,u,c,l,d;let{data:h,error:f}=o;if(f)throw f;let p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return rn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(ie(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var i;try{let{error:s,data:{session:o}}=r;if(s)throw s;let{options:a,provider:u,token:c,access_token:l,nonce:d}=t,h=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:u,id_token:c,access_token:l,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:wi}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new lo}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await pn(this.storage,`${this.storageKey}-code-verifier`),ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var i,s;let{data:o,error:a}=r;if(a)throw a;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){let r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await dN(async s=>(s>0&&await lN(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:wi})),(s,o)=>{let a=200*Math.pow(2,s);return o&&zy(o)&&Date.now()+a-i<nc})}catch(i){if(this._debug(r,"error",i),ie(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),rn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let s=await _a(this.storage,this.storageKey);if(s&&this.userStorage){let a=await _a(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await ac(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a?.user)!==null&&t!==void 0?t:Ky()}else if(s&&!s.user&&!s.user){let a=await _a(this.storage,this.storageKey+"-user");a&&a?.user?(s.user=a.user,await pn(this.storage,this.storageKey+"-user"),await ac(this.storage,this.storageKey,s)):s.user=Ky()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}let o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<jy;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${jy}s`),o){if(this.autoRefreshToken&&s.refresh_token){let{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),zy(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:u}=await this._getUser(s.access_token);!u&&a?.user?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var r,i;if(!t)throw new In;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Lp;let{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new In;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),ie(o)){let a={data:null,error:o};return zy(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,i=!0){let s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await pn(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await ac(this.userStorage,this.storageKey+"-user",{user:r.user});let s=Object.assign({},r);delete s.user;let o=iS(s);await ac(this.storage,this.storageKey,o)}else{let s=iS(r);await ac(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await pn(this.storage,this.storageKey),await pn(this.storage,this.storageKey+"-code-verifier"),await pn(this.storage,this.storageKey+"-user"),this.userStorage&&await pn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&rn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),nc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);let r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let t=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((i.expires_at*1e3-t)/nc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${nc}ms, refresh threshold is ${Vy} ticks`),s<=Vy&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){let r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,i){let s=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[o,a]=await uc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(u.toString())}if(i?.queryParams){let o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var i;let{data:s,error:o}=r;return o?this._returnResult({data:null,error:o}):await me(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var i,s;let{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});let u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:l}=await me(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});let a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?TN(t.webauthn.credential_response):AN(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:c}=await me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:c}))})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});let a=await me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:u}=a;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:SN(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:IN(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){let{data:r,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let s={all:[],phone:[],totp:[],webauthn:[]};for(let o of(t=r?.factors)!==null&&t!==void 0?t:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;let{data:{session:i},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:o}=Yy(i.access_token),a=null;o.aal&&(a=o.aal);let u=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");let l=o.amr||[];return{data:{currentLevel:a,nextLevel:u,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;return s?this._returnResult({data:null,error:s}):i?await me(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new In})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async i=>{let{data:{session:s},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new In});let a=await me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return a.data&&a.data.redirect_url&&rn()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(ie(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,r){try{return await this._useSession(async i=>{let{data:{session:s},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new In});let a=await me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return a.data&&a.data.redirect_url&&rn()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(ie(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{let{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?await me(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new In})})}catch(t){if(ie(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;return s?this._returnResult({data:null,error:s}):i?(await me(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new In})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let i=r.keys.find(u=>u.kid===t);if(i)return i;let s=Date.now();if(i=this.jwks.keys.find(u=>u.kid===t),i&&this.jwks_cached_at+ZO>s)return i;let{data:o,error:a}=await me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,i=o.keys.find(u=>u.kid===t),!i)?null:i}async getClaims(t,r={}){try{let i=t;if(!i){let{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});i=p.session.access_token}let{header:s,payload:o,signature:a,raw:{header:u,payload:c}}=Yy(i);r?.allowExpired||fN(o.exp);let l=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!l){let{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:o,header:s,signature:a},error:null}}let d=pN(s.alg),h=await crypto.subtle.importKey("jwk",l,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,sN(`${u}.${c}`)))throw new sc("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(i){if(ie(i))return this._returnResult({data:null,error:i});throw i}}}return n.nextInstanceID={},n})(),hS=pZ;var mZ=hS,fS=mZ;var gZ="2.90.0",$p="";typeof Deno<"u"?$p="deno":typeof document<"u"?$p="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$p="react-native":$p="node";var vZ={"X-Client-Info":`supabase-js-${$p}/${gZ}`},yZ={headers:vZ},_Z={schema:"public"},bZ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wZ={};function Vp(n){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(n)}function EZ(n,e){if(Vp(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function CZ(n){var e=EZ(n,"string");return Vp(e)=="symbol"?e:e+""}function xZ(n,e,t){return(e=CZ(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kN(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $t(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kN(Object(t),!0).forEach(function(r){xZ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kN(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var DZ=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),SZ=()=>Headers,IZ=(n,e,t)=>{let r=DZ(t),i=SZ();return async(s,o)=>{var a;let u=(a=await e())!==null&&a!==void 0?a:n,c=new i(o?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(s,$t($t({},o),{},{headers:c}))}};function TZ(n){return n.endsWith("/")?n:n+"/"}function AZ(n,e){var t,r;let{db:i,auth:s,realtime:o,global:a}=n,{db:u,auth:c,realtime:l,global:d}=e,h={db:$t($t({},u),i),auth:$t($t({},c),s),realtime:$t($t({},l),o),storage:{},global:$t($t($t({},d),a),{},{headers:$t($t({},(t=d?.headers)!==null&&t!==void 0?t:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}function MZ(n){let e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(TZ(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var kZ=class extends fS{constructor(n){super(n)}},PZ=class{constructor(n,e,t){var r,i;this.supabaseUrl=n,this.supabaseKey=e;let s=MZ(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);let o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:_Z,realtime:wZ,auth:$t($t({},bZ),{},{storageKey:o}),global:yZ},u=AZ(t??{},a);if(this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(l,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=u.auth)!==null&&c!==void 0?c:{},this.headers,u.global.fetch)}this.fetch=IZ(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient($t({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(l=>this.realtime.setAuth(l)).catch(l=>console.warn("Failed to set initial Realtime auth token:",l)),this.rest=new kO(new URL("rest/v1",s).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new GO(this.storageUrl.href,this.headers,this.fetch,t?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new xp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();let{data:r}=await n.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:u,throwOnError:c},l,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kZ({url:this.authUrl.href,headers:$t($t({},h),l),storageKey:s,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:i,flowType:o,lock:a,debug:u,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Ap(this.realtimeUrl.href,$t($t({},n),{},{params:$t($t({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e?.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},PN=(n,e,t)=>new PZ(n,e,t);function OZ(){if(typeof window<"u")return!1;let n=globalThis.process;if(!n)return!1;let e=n.version;if(e==null)return!1;let t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}OZ()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Os=class n{client;constructor(){this.client=PN(Sn.supabaseUrl,Sn.supabaseKey)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var Yt=class n{constructor(e){this.supabase=e;this.init()}_user=Re(null);_loading=Re(!1);STORAGE_KEY="vk_user_data";TOKEN_KEY="vk_access_token";user=Xe(()=>this._user());isAuthenticated=Xe(()=>!!this._user());loading=Xe(()=>this._loading());init(){let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{this._user.set(JSON.parse(e))}catch(t){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0434\u0430\u043D\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0438\u0437 localStorage:",t),localStorage.removeItem(this.STORAGE_KEY)}}async handleLoginSuccess(e){this._loading.set(!0);try{if(console.log("VK login payload:",e),e.access_token&&e.user_id){if(localStorage.setItem(this.TOKEN_KEY,e.access_token),e.id_token)try{let t=this.parseIdToken(e.id_token);if(t){await this.saveUserData(t);return}}catch(t){console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0440\u0430\u0441\u043F\u0430\u0440\u0441\u0438\u0442\u044C id_token, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C VK API:",t)}await this.fetchUserData({access_token:e.access_token,user_id:e.user_id});return}if(e.user){let t={id:e.user.id?.toString()||e.userId?.toString()||"",firstName:e.user.first_name||e.user.firstName||"",lastName:e.user.last_name||e.user.lastName||"",photo:e.user.photo_200||e.user.photo||void 0,email:e.user.email||e.email||void 0};if(!t.id||!t.firstName)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u043E\u043B\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F");(e.access_token||e.token)&&localStorage.setItem(this.TOKEN_KEY,e.access_token||e.token),await this.saveUserData(t);return}if(e.token&&e.userId){localStorage.setItem(this.TOKEN_KEY,e.token),await this.fetchUserData({access_token:e.token,user_id:e.userId});return}throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u041E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442 \u0442\u043E\u043A\u0435\u043D \u0438\u043B\u0438 user_id")}catch(t){console.error("VK login error:",t),alert(t.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 \u0412\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u0435")}finally{this._loading.set(!1)}}async exchangeCodeForToken(e,t){let r=window.VKIDSDK||window.VKID;if(!r||!r.Auth)throw new Error("VK ID SDK \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D");try{let i=await r.Auth.exchangeCode(e,t);if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.lastError){let s=chrome.runtime.lastError.message;s&&!s.includes("message port closed")&&console.warn("Chrome runtime error (ignored):",s)}if(!i?.access_token||!i?.user_id)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0442\u043E\u043A\u0435\u043D \u0434\u043E\u0441\u0442\u0443\u043F\u0430");return localStorage.setItem(this.TOKEN_KEY,i.access_token),i}catch(i){let s=i?.message||i?.toString()||"";if(s.includes("runtime.lastError")||s.includes("message port closed")||s.includes("Extension context invalidated"))return null;throw console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043C\u0435\u043D\u0430 \u043A\u043E\u0434\u0430 \u043D\u0430 \u0442\u043E\u043A\u0435\u043D:",i),new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043C\u0435\u043D\u044F\u0442\u044C \u043A\u043E\u0434 \u043D\u0430 \u0442\u043E\u043A\u0435\u043D \u0434\u043E\u0441\u0442\u0443\u043F\u0430")}}parseIdToken(e){try{let t=e.split(".");if(t.length!==3)return console.error("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 JWT \u0442\u043E\u043A\u0435\u043D\u0430"),null;let r=t[1];for(;r.length%4;)r+="=";r=r.replace(/-/g,"+").replace(/_/g,"/");let i=atob(r),s=JSON.parse(i);console.log("\u0414\u0430\u043D\u043D\u044B\u0435 \u0438\u0437 id_token:",s);let o={id:s.sub||s.user_id?.toString()||s.id?.toString()||"",firstName:s.given_name||s.first_name||s.firstName||"",lastName:s.family_name||s.last_name||s.lastName||"",photo:s.picture||s.photo_200||s.photo||void 0,email:s.email||void 0};return o.id?(o.firstName||(o.firstName="\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"),o):(console.warn("\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D user_id \u0432 id_token"),null)}catch(t){return console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0430\u0440\u0441\u0438\u043D\u0433\u0430 id_token:",t),null}}async fetchUserData(e){let t=e.user_id.toString();try{let r=`https://api.vk.com/method/users.get?user_ids=${t}&fields=photo_200,email&access_token=${e.access_token}&v=5.199&callback=jsonp_callback_${Date.now()}`,i=await this.jsonpRequest(r);if(i.error)throw new Error(i.error.error_msg||"\u041E\u0448\u0438\u0431\u043A\u0430 VK API");if(!i.response||i.response.length===0)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F");let s=i.response[0],o={id:t,firstName:s.first_name||"",lastName:s.last_name||"",photo:s.photo_200||void 0,email:s.email||void 0};await this.saveUserData(o)}catch(r){if(console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F:",r),t){let i={id:t,firstName:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C",lastName:""};await this.saveUserData(i),console.warn("\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0438\u0437-\u0437\u0430 \u043E\u0448\u0438\u0431\u043A\u0438 API")}else throw new Error(r.message||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F")}}jsonpRequest(e){return new Promise((t,r)=>{let i=`jsonp_callback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;window[i]=o=>{delete window[i],document.body.removeChild(s),t(o)};let s=document.createElement("script");s.src=e.replace("callback=jsonp_callback_",`callback=${i}`),s.onerror=()=>{delete window[i],document.body.removeChild(s),r(new Error("JSONP request failed"))},document.body.appendChild(s)})}async saveUserData(e){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),this._user.set(e);try{await this.saveUserToSupabase(e)}catch(t){console.warn("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0432 Supabase:",t)}}async saveUserToSupabase(e){try{let{error:t}=await this.supabase.client.from("users").upsert({vk_id:e.id,first_name:e.firstName,last_name:e.lastName,photo:e.photo,email:e.email,updated_at:new Date().toISOString()},{onConflict:"vk_id"});t&&console.warn("Supabase upsert error:",t)}catch(t){console.warn("Error saving user to Supabase:",t)}}signOut(){localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.TOKEN_KEY),this._user.set(null);let e=window.VKIDSDK||window.VKID;if(e?.Auth)try{e.Auth.logout?.()}catch(t){console.warn("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u044B\u0445\u043E\u0434\u0435 \u0438\u0437 VK ID:",t)}}static \u0275fac=function(t){return new(t||n)(ce(Os))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var RZ=["vkContainer"],t_=class n{constructor(e,t){this.el=e;this.auth=t}vkContainer;ngAfterViewInit(){"VKIDSDK"in window?setTimeout(()=>{this.initVk()},200):this.loadSDK()}loadSDK(){if(document.querySelector('script[src*="@vkid/sdk"]')){let r=setInterval(()=>{"VKIDSDK"in window&&(clearInterval(r),setTimeout(()=>{this.initVk()},200))},100);setTimeout(()=>{clearInterval(r),"VKIDSDK"in window||console.error("VK ID SDK \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D \u043F\u043E\u0441\u043B\u0435 \u043E\u0436\u0438\u0434\u0430\u043D\u0438\u044F")},1e4);return}let t=document.createElement("script");t.src="https://unpkg.com/@vkid/sdk@2/dist-sdk/umd/index.js",t.async=!0,t.onload=()=>{setTimeout(()=>{this.initVk()},200)},t.onerror=()=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 VK ID SDK")},document.head.appendChild(t)}initVk(){if(!("VKIDSDK"in window)){console.error("VK ID SDK \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D. \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u0441\u043A\u0440\u0438\u043F\u0442\u0430 \u0432 index.html");return}if(!Sn.vkAppId){console.error("VK App ID \u043D\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043D \u0432 environment.ts");return}let e=window.VKIDSDK;try{let t=null;if(this.vkContainer?.nativeElement?t=this.vkContainer.nativeElement:t=this.el.nativeElement.querySelector("div"),!t){console.error("\u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0434\u043B\u044F VK OneTap \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D"),console.error("ElementRef:",this.el.nativeElement),console.error("ViewChild:",this.vkContainer);return}console.log("\u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u043D\u0430\u0439\u0434\u0435\u043D, \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F VK OneTap..."),console.log("VKID SDK \u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D:",!!e),console.log("VK App ID:",Sn.vkAppId);let r=window.location.origin,i=window.location.pathname,s=Sn.vkRedirectUrl||"";if(s=s.trim(),!s){let u=document.querySelector("base")?.getAttribute("href")||"/",c=u!=="/"?u.replace(/\/$/,""):"";s=r+c}s.length>1&&s.endsWith("/")&&(s=s.slice(0,-1));let o=r.includes("github.io")&&s.includes(r);r!==s&&Sn.vkRedirectUrl&&Sn.vkRedirectUrl!==r&&!o&&(console.warn(`\u26A0\uFE0F \u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415: redirectUrl \u0438\u0437 environment (${Sn.vkRedirectUrl}) \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u0435\u0442 \u0441 \u0442\u0435\u043A\u0443\u0449\u0438\u043C origin (${r})`),console.warn('\u042D\u0442\u043E \u043C\u043E\u0436\u0435\u0442 \u0432\u044B\u0437\u0432\u0430\u0442\u044C \u043E\u0448\u0438\u0431\u043A\u0443 "redirect_uri is missing or invalid"'),console.warn("\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C, \u0447\u0442\u043E \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F VK \u0443\u043A\u0430\u0437\u0430\u043D \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 redirect URI"),console.warn("\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u044F: \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0442\u0435\u043A\u0443\u0449\u0438\u0439 origin \u043A\u0430\u043A redirectUrl \u0438\u043B\u0438 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F VK")),console.log("=== VK ID SDK Configuration ==="),console.log("Current origin:",r),console.log("Current full URL:",window.location.href),console.log("Environment redirectUrl:",Sn.vkRedirectUrl),console.log("Final redirectUrl:",s),console.log("VK App ID:",Sn.vkAppId),console.log("================================");try{let u={app:Number(Sn.vkAppId),redirectUrl:s};e.ConfigResponseMode&&e.ConfigResponseMode.Callback?u.responseMode=e.ConfigResponseMode.Callback:u.responseMode="callback",e.ConfigSource&&e.ConfigSource.LOWCODE?u.source=e.ConfigSource.LOWCODE:u.source="lowcode",u.scope="",e.Config.init(u),console.log("\u2705 VKID Config \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E")}catch(u){console.error("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 Config:",u),console.error("\u0414\u0435\u0442\u0430\u043B\u0438 \u043E\u0448\u0438\u0431\u043A\u0438:",{message:u.message,code:u.code,redirectUrl:s});let c=u.message||JSON.stringify(u);c.includes("redirect_uri")||c.includes("redirect")?alert(`\u041E\u0448\u0438\u0431\u043A\u0430 redirect URI!

\u0422\u0435\u043A\u0443\u0449\u0438\u0439 redirectUrl: ${s}
\u0422\u0435\u043A\u0443\u0449\u0438\u0439 origin: ${r}

\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C, \u0447\u0442\u043E \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F VK (\u0440\u0430\u0437\u0434\u0435\u043B "\u0414\u043E\u0432\u0435\u0440\u0435\u043D\u043D\u044B\u0439 redirect URI") \u0443\u043A\u0430\u0437\u0430\u043D:
${s}

\u041E\u0448\u0438\u0431\u043A\u0430: ${c}`):alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 VK ID SDK: "+c);return}if(typeof e.OneTap!="function"){console.error("VKID.OneTap \u043D\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u0435\u0439. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u0430:",Object.keys(e));return}let a=new e.OneTap;console.log("OneTap \u0441\u043E\u0437\u0434\u0430\u043D");try{a.render({container:t,fastAuthEnabled:!1,showAlternativeLogin:!0}).on(e.WidgetEvents?.ERROR||"error",u=>{if(u?.code===2||u?.text==="New tab has been closed"){console.log("\u2139\uFE0F \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0437\u0430\u043A\u0440\u044B\u043B \u043E\u043A\u043D\u043E \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438");return}if(console.error("\u274C VKID error:",u),console.error("\u041A\u043E\u0434 \u043E\u0448\u0438\u0431\u043A\u0438:",u?.code),console.error("\u0422\u0435\u043A\u0441\u0442 \u043E\u0448\u0438\u0431\u043A\u0438:",u?.text||u?.message),u?.code!==2){let c=u?.text||u?.message||JSON.stringify(u);c&&!c.includes("closed")&&console.warn("\u26A0\uFE0F \u041E\u0448\u0438\u0431\u043A\u0430 VK ID SDK:",c)}}).on(e.OneTapInternalEvents?.LOGIN_SUCCESS||"login_success",u=>{console.log("OneTap LOGIN_SUCCESS:",u);let c=u.code,l=u.device_id;if(!c){console.error("\u041A\u043E\u0434 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043D\u0435 \u043F\u043E\u043B\u0443\u0447\u0435\u043D \u0438\u0437 payload");return}e.Auth&&typeof e.Auth.exchangeCode=="function"?e.Auth.exchangeCode(c,l).then(d=>{if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.lastError){let h=chrome.runtime.lastError.message;h&&!h.includes("message port closed")&&console.warn("Chrome runtime error (ignored):",h)}console.log("VKID auth success:",d),this.auth.handleLoginSuccess(C({code:c,device_id:l},d))}).catch(d=>{let h=d?.message||d?.toString()||"";if(h.includes("runtime.lastError")||h.includes("message port closed")||h.includes("Extension context invalidated")||h.includes("The message port closed before a response was received")){console.warn("\u0418\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C \u043E\u0448\u0438\u0431\u043A\u0443 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u044F \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430:",h),this.auth.handleLoginSuccess(u);return}console.error("VKID exchange code error:",d),alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043C\u0435\u043D\u0435 \u043A\u043E\u0434\u0430 \u043D\u0430 \u0442\u043E\u043A\u0435\u043D: "+(d.message||d))}):(console.error("VKID.Auth.exchangeCode \u043D\u0435 \u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D"),this.auth.handleLoginSuccess(u))}),console.log("OneTap \u0432\u0438\u0434\u0436\u0435\u0442 \u043E\u0442\u0440\u0435\u043D\u0434\u0435\u0440\u0435\u043D")}catch(u){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u043D\u0434\u0435\u0440\u0438\u043D\u0433\u0430 OneTap:",u)}}catch(t){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 VK ID SDK:",t),console.error("VKIDSDK object:",window.VKIDSDK)}}static \u0275fac=function(t){return new(t||n)(Ee($n),Ee(Yt))};static \u0275cmp=Qe({type:n,selectors:[["app-vk-login"]],viewQuery:function(t,r){if(t&1&&Dr(RZ,5),t&2){let i;Vn(i=jn())&&(r.vkContainer=i.first)}},decls:2,vars:0,consts:[["vkContainer",""]],template:function(t,r){t&1&&jl(0,"div",null,0)},dependencies:[et],encapsulation:2})};var n_=class n{auth=$(Yt);showTimer;checkAuthInterval;isRendered=!1;floatingOneTap=null;constructor(){Lu(()=>{if(this.auth.isAuthenticated()&&this.floatingOneTap&&this.isRendered)try{this.floatingOneTap.close(),this.isRendered=!1}catch(t){console.warn("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u0438 FloatingOneTap:",t)}})}ngAfterViewInit(){this.checkAuthAndInit()}ngOnDestroy(){if(this.showTimer&&clearTimeout(this.showTimer),this.checkAuthInterval&&clearInterval(this.checkAuthInterval),this.floatingOneTap)try{this.floatingOneTap.close()}catch(e){console.warn("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u0438 FloatingOneTap:",e)}}checkAuthAndInit(){this.auth.isAuthenticated()||(this.showTimer=setTimeout(()=>{!this.auth.isAuthenticated()&&!this.isRendered&&this.initFloatingOneTap()},3e4))}initFloatingOneTap(){if(!("VKIDSDK"in window)){console.warn("VK ID SDK \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D \u0434\u043B\u044F FloatingOneTap");return}if(!Sn.vkAppId){console.warn("VK App ID \u043D\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043D");return}let e=window.VKIDSDK;try{let r=Sn.vkRedirectUrl||window.location.origin;if(r.length>1&&r.endsWith("/")&&(r=r.slice(0,-1)),e.Config.init({app:Number(Sn.vkAppId),redirectUrl:r,responseMode:e.ConfigResponseMode?.Callback||"callback",source:e.ConfigSource?.LOWCODE||"lowcode",scope:""}),typeof e.FloatingOneTap!="function"){console.warn("VKID.FloatingOneTap \u043D\u0435 \u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D");return}this.floatingOneTap=new e.FloatingOneTap,this.floatingOneTap.render({scheme:"dark",contentId:1,appName:"Finance Tracker",showAlternativeLogin:!0}).on(e.WidgetEvents?.ERROR||"error",i=>{if(i?.code===2||i?.text==="New tab has been closed"){console.log("\u2139\uFE0F \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0437\u0430\u043A\u0440\u044B\u043B \u043E\u043A\u043D\u043E \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438 (FloatingOneTap)");return}console.error("FloatingOneTap error:",i)}).on(e.FloatingOneTapInternalEvents?.LOGIN_SUCCESS||"login_success",i=>{console.log("FloatingOneTap LOGIN_SUCCESS:",i);let s=i.code,o=i.device_id;if(!s){console.error("\u041A\u043E\u0434 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043D\u0435 \u043F\u043E\u043B\u0443\u0447\u0435\u043D \u0438\u0437 payload");return}e.Auth&&typeof e.Auth.exchangeCode=="function"?e.Auth.exchangeCode(s,o).then(a=>{if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.lastError){let u=chrome.runtime.lastError.message;u&&!u.includes("message port closed")&&console.warn("Chrome runtime error (ignored):",u)}console.log("FloatingOneTap auth success:",a),this.floatingOneTap&&this.floatingOneTap.close(),this.auth.handleLoginSuccess(C({code:s,device_id:o},a))}).catch(a=>{let u=a?.message||a?.toString()||"";if(u.includes("runtime.lastError")||u.includes("message port closed")||u.includes("Extension context invalidated")||u.includes("The message port closed before a response was received")){console.warn("\u0418\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C \u043E\u0448\u0438\u0431\u043A\u0443 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u044F \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430:",u),this.auth.handleLoginSuccess(i);return}console.error("FloatingOneTap exchange code error:",a)}):(console.error("VKID.Auth.exchangeCode \u043D\u0435 \u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D"),this.auth.handleLoginSuccess(i))}),this.isRendered=!0,console.log("\u2705 FloatingOneTap \u043E\u0442\u0440\u0435\u043D\u0434\u0435\u0440\u0435\u043D")}catch(t){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 FloatingOneTap:",t)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["app-floating-one-tap"]],decls:0,vars:0,template:function(t,r){},dependencies:[et],encapsulation:2})};var r_=class n{currentYear=new Date().getFullYear();scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["app-footer"]],decls:22,vars:1,consts:[[1,"app-footer"],[1,"footer-content"],[1,"footer-section"],[1,"footer-title"],[1,"footer-description"],[1,"footer-section-title"],[1,"footer-nav"],["routerLink","/","routerLinkActive","active",3,"click"],["routerLink","/history","routerLinkActive","active",3,"click"],["routerLink","/faq","routerLinkActive","active",3,"click"],["routerLink","/about","routerLinkActive","active",3,"click"],[1,"footer-bottom"],[1,"footer-copyright"]],template:function(t,r){t&1&&(or(0,"footer",0)(1,"div",1)(2,"div",2)(3,"h3",3),P(4,"Finance Tracker"),xr(),or(5,"p",4),P(6," \u0423\u0434\u043E\u0431\u043D\u043E\u0435 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0434\u043B\u044F \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u043B\u0438\u0447\u043D\u044B\u0445 \u0444\u0438\u043D\u0430\u043D\u0441\u043E\u0432. \u041A\u043E\u043D\u0442\u0440\u043E\u043B\u0438\u0440\u0443\u0439\u0442\u0435 \u0434\u043E\u0445\u043E\u0434\u044B \u0438 \u0440\u0430\u0441\u0445\u043E\u0434\u044B, \u0430\u043D\u0430\u043B\u0438\u0437\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0443. "),xr()(),or(7,"div",2)(8,"h4",5),P(9,"\u041D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044F"),xr(),or(10,"nav",6)(11,"a",7),oo("click",function(){return r.scrollToTop()}),P(12,"\u0413\u043B\u0430\u0432\u043D\u0430\u044F"),xr(),or(13,"a",8),oo("click",function(){return r.scrollToTop()}),P(14,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F"),xr(),or(15,"a",9),oo("click",function(){return r.scrollToTop()}),P(16,"FAQ"),xr(),or(17,"a",10),oo("click",function(){return r.scrollToTop()}),P(18,"\u041E \u043D\u0430\u0441"),xr()()()(),or(19,"div",11)(20,"p",12),P(21),xr()()()),t&2&&(V(21),Ot(" \xA9 ",r.currentYear," Finance Tracker. \u0412\u0441\u0435 \u043F\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043D\u044B. "))},dependencies:[et],styles:['@charset "UTF-8";.app-footer[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border-top:1px solid var(--color-border);padding:var(--space-2xl) var(--space-md);margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-xl);margin-bottom:var(--space-xl)}.footer-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.footer-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary);margin:0}.footer-description[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);line-height:1.6;margin:0}.footer-section-title[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;color:var(--color-text-primary);margin:0;margin-bottom:var(--space-xs)}.footer-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.footer-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);text-decoration:none;transition:color var(--transition-fast);padding:var(--space-xs) 0}.footer-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.footer-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:500}.footer-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.footer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);margin:0}.footer-tech[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm)}.footer-tech[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);background-color:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-sm);font-size:.75rem;color:var(--color-text-secondary);font-weight:500}.footer-bottom[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding-top:var(--space-xl);border-top:1px solid var(--color-border);text-align:center}.footer-copyright[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-tertiary);margin:0}.footer-link[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;transition:color var(--transition-fast)}.footer-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media(max-width:768px){.app-footer[_ngcontent-%COMP%]{padding:var(--space-xl) var(--space-md)}.footer-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--space-lg);margin-bottom:var(--space-lg)}.footer-nav[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}}@media(min-width:2560px){.footer-content[_ngcontent-%COMP%]{max-width:2000px}}@media(min-width:3840px){.footer-content[_ngcontent-%COMP%]{max-width:2800px}}']})};var i_=class n{snackbarRef=Re(null);register(e){this.snackbarRef.set(e)}success(e,t=3e3){this.show(e,"success",t)}error(e,t=4e3){this.show(e,"error",t)}info(e,t=3e3){this.show(e,"info",t)}warning(e,t=3500){this.show(e,"warning",t)}show(e,t="info",r){let i=this.snackbarRef();i?i.show(e,t,r):console.warn("Snackbar component not registered. Message:",e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};function FZ(n,e){if(n&1){let t=St();x(0,"button",5),ye("click",function(){qe(t);let i=oe(2);return We(i.close())}),P(1," \xD7 "),D()}}function LZ(n,e){if(n&1&&(x(0,"div",1)(1,"span",2),P(2),D(),x(3,"span",3),P(4),D(),je(5,FZ,2,0,"button",4),D()),n&2){let t=oe();ze("success",t.type()==="success")("error",t.type()==="error")("info",t.type()==="info")("warning",t.type()==="warning"),V(2),Sr(t.getIcon()),V(2),Sr(t.message()),V(),X("ngIf",t.showClose())}}var s_=class n{snackbarService=$(i_);message=Re("");type=Re("info");duration=Re(3e3);showClose=Re(!0);isVisible=Re(!1);timeoutId=null;ngOnInit(){this.snackbarService.register({show:(e,t,r)=>{this.show(e,t,r)}})}ngOnDestroy(){this.timeoutId!==null&&clearTimeout(this.timeoutId)}getIcon(){switch(this.type()){case"success":return"\u2713";case"error":return"\u2715";case"warning":return"\u26A0";case"info":default:return"\u2139"}}show(e,t="info",r){this.message.set(e),this.type.set(t),r!==void 0&&this.duration.set(r),this.isVisible.set(!0),this.timeoutId!==null&&clearTimeout(this.timeoutId),this.duration()>0&&(this.timeoutId=window.setTimeout(()=>{this.close()},this.duration()))}close(){this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.isVisible.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["app-snackbar"]],inputs:{message:"message",type:"type",duration:"duration",showClose:"showClose"},decls:1,vars:1,consts:[["class","snackbar",3,"success","error","info","warning",4,"ngIf"],[1,"snackbar"],[1,"snackbar-icon"],[1,"snackbar-message"],["class","snackbar-close","aria-label","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",3,"click",4,"ngIf"],["aria-label","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"snackbar-close",3,"click"]],template:function(t,r){t&1&&je(0,LZ,6,11,"div",0),t&2&&X("ngIf",r.isVisible())},dependencies:[et,lr],styles:[".snackbar[_ngcontent-%COMP%]{position:fixed;bottom:24px;left:50%;transform:translate(-50%);background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-md) var(--space-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-sm);max-width:90%;min-width:300px;z-index:10000;animation:_ngcontent-%COMP%_slideUp .3s ease-out;font-size:.875rem}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translate(-50%) translateY(100px);opacity:0}to{transform:translate(-50%) translateY(0);opacity:1}}.snackbar.success[_ngcontent-%COMP%]{border-color:#10b98180;background:linear-gradient(135deg,#10b9811a,#10b9810d)}.snackbar.error[_ngcontent-%COMP%]{border-color:#ef444480;background:linear-gradient(135deg,#ef44441a,#ef44440d)}.snackbar.info[_ngcontent-%COMP%]{border-color:#3b82f680;background:linear-gradient(135deg,#3b82f61a,#3b82f60d)}.snackbar.warning[_ngcontent-%COMP%]{border-color:#f59e0b80;background:linear-gradient(135deg,#f59e0b1a,#f59e0b0d)}.snackbar-icon[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1;flex-shrink:0}.snackbar-message[_ngcontent-%COMP%]{flex:1;color:var(--color-text-primary);line-height:1.5}.snackbar-close[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-text-secondary);font-size:1.5rem;line-height:1;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:var(--radius-sm);transition:all var(--transition-fast);flex-shrink:0}.snackbar-close[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-secondary);color:var(--color-text-primary)}@media(max-width:480px){.snackbar[_ngcontent-%COMP%]{bottom:16px;left:16px;right:16px;transform:none;max-width:none;min-width:auto;padding:var(--space-sm) var(--space-md);font-size:.8125rem}@keyframes slideUp{0%{transform:translateY(100px);opacity:0}to{transform:translateY(0);opacity:1}}}"]})};function BZ(n,e){n&1&&(x(0,"div",16),P(1," \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430... "),D())}function $Z(n,e){n&1&&(x(0,"div",19),Dt(1,"app-vk-login"),D())}function VZ(n,e){if(n&1&&Dt(0,"img",25),n&2){let t,r,i=oe(3);X("src",(t=i.authService.user())==null?null:t.photo,Nv)("alt",(r=i.authService.user())==null?null:r.firstName)}}function jZ(n,e){if(n&1){let t=St();x(0,"div",20)(1,"div",21),je(2,VZ,1,2,"img",22),x(3,"span",23),P(4),D()(),x(5,"button",24),ye("click",function(){qe(t);let i=oe(2);return We(i.signOut())}),P(6," \u0412\u044B\u0439\u0442\u0438 "),D()()}if(n&2){let t,r,i=oe(2);V(2),X("ngIf",(t=i.authService.user())==null?null:t.photo),V(2),Is(" ",(r=i.authService.user())==null?null:r.firstName," ",(r=i.authService.user())==null?null:r.lastName," ")}}function UZ(n,e){if(n&1&&(x(0,"div"),je(1,$Z,2,0,"div",17)(2,jZ,7,3,"div",18),D()),n&2){let t=oe();V(),X("ngIf",!t.authService.isAuthenticated()),V(),X("ngIf",t.authService.isAuthenticated())}}function HZ(n,e){n&1&&Dt(0,"app-floating-one-tap")}var o_=class n{authService=$(Yt);router=$(yi);async signOut(){try{this.authService.signOut()}catch(e){console.error("Error signing out:",e)}}goToHome(){this.router.navigate(["/"]),window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["app-root"]],decls:26,vars:3,consts:[[1,"app"],[1,"app-header"],["title","\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E",1,"app-logo",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"logo-icon"],["d","M12 2L2 7L12 12L22 7L12 2Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M2 17L12 22L22 17","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M2 12L12 17L22 12","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"app-nav"],["routerLink","/","routerLinkActive","active"],["routerLink","/history","routerLinkActive","active"],["routerLink","/faq","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],[1,"app-auth"],["class","auth-loading",4,"ngIf"],[4,"ngIf"],[1,"app-content"],[1,"auth-loading"],["class","auth-actions",4,"ngIf"],["class","auth-user",4,"ngIf"],[1,"auth-actions"],[1,"auth-user"],[1,"auth-user-info"],["class","auth-user-photo",3,"src","alt",4,"ngIf"],[1,"auth-user-name"],["title","\u0412\u044B\u0439\u0442\u0438",1,"auth-button","auth-button-out",3,"click"],[1,"auth-user-photo",3,"src","alt"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"header",1)(2,"div",2),ye("click",function(){return r.goToHome()}),ta(),x(3,"svg",3),Dt(4,"path",4)(5,"path",5)(6,"path",6),D(),na(),x(7,"h1"),P(8,"Finance Tracker"),D()(),x(9,"nav",7)(10,"a",8),P(11,"\u0413\u043B\u0430\u0432\u043D\u0430\u044F"),D(),x(12,"a",9),P(13,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F"),D(),x(14,"a",10),P(15,"FAQ"),D(),x(16,"a",11),P(17,"\u041E \u043D\u0430\u0441"),D(),x(18,"div",12),je(19,BZ,2,0,"div",13)(20,UZ,3,2,"div",14),D()()(),x(21,"main",15),Dt(22,"router-outlet"),D(),Dt(23,"app-footer"),je(24,HZ,1,0,"app-floating-one-tap",14),Dt(25,"app-snackbar"),D()),t&2&&(V(19),X("ngIf",r.authService.loading()),V(),X("ngIf",!r.authService.loading()),V(4),X("ngIf",!r.authService.isAuthenticated()&&!r.authService.loading()))},dependencies:[bp,Tr,LD,et,lr,t_,n_,r_,s_],styles:['@charset "UTF-8";.app[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;background-color:var(--color-bg-primary);width:100%;overflow-x:hidden}.app-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-border);padding:var(--space-lg) var(--space-md);background-color:var(--color-bg-card);box-shadow:var(--shadow-sm);position:sticky;top:0;z-index:10;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);width:100%;max-width:100%;box-sizing:border-box}.app-logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);cursor:pointer;transition:all var(--transition-fast);-webkit-user-select:none;user-select:none}.app-logo[_ngcontent-%COMP%]:hover{opacity:.8;transform:translateY(-1px)}.app-logo[_ngcontent-%COMP%]:active{transform:translateY(0)}.app-logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{width:32px;height:32px;color:var(--color-primary);flex-shrink:0}.app-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--color-text-primary);margin:0;white-space:nowrap}.app-nav[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);align-items:center}.app-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border-radius:var(--radius-md);transition:all var(--transition-fast);color:var(--color-text-secondary);font-size:.875rem;white-space:nowrap;display:inline-flex;align-items:center;justify-content:center;min-height:36px}.app-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-secondary);color:var(--color-text-primary)}.app-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.app-content[_ngcontent-%COMP%]{flex:1;padding:var(--space-lg) var(--space-md);max-width:1400px;width:100%;margin:0 auto;box-sizing:border-box;min-height:0}@media(max-width:768px){.app-content[_ngcontent-%COMP%]{touch-action:pan-y;overflow-y:auto;-webkit-overflow-scrolling:touch}}.app-auth[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);flex-wrap:wrap;justify-content:flex-end}.auth-loading[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-tertiary)}.auth-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.auth-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.auth-user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.auth-user-photo[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover;border:2px solid var(--color-border)}.auth-user-name[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:500}.auth-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;border:none;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center;gap:var(--space-xs);min-height:36px;white-space:nowrap}.auth-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.auth-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.auth-button-vk[_ngcontent-%COMP%]{background-color:#07f;color:#fff}.auth-button-vk[_ngcontent-%COMP%]:hover{background-color:#06d}.auth-button-vk[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.auth-button-out[_ngcontent-%COMP%]{background-color:var(--color-bg-secondary);color:var(--color-text-secondary)}.auth-button-out[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-tertiary);color:var(--color-text-primary)}@media(max-width:480px){.app-header[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-sm);gap:var(--space-sm)}.app-logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{width:28px;height:28px}.app-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.125rem}.app-nav[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;gap:var(--space-sm)}.app-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);font-size:.8125rem}.app-auth[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.auth-user[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.auth-user-name[_ngcontent-%COMP%]{max-width:120px;font-size:.8125rem}.auth-button[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);font-size:.8125rem}.app-content[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-sm)}}@media(min-width:481px)and (max-width:768px){.app-header[_ngcontent-%COMP%]{padding:var(--space-md);flex-direction:row;align-items:center}.app-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.app-nav[_ngcontent-%COMP%]{width:auto}.app-content[_ngcontent-%COMP%]{padding:var(--space-md)}}@media(min-width:769px)and (max-width:1024px){.app-content[_ngcontent-%COMP%]{max-width:1200px;padding:var(--space-lg) var(--space-md)}}@media(min-width:1025px)and (max-width:1440px){.app-content[_ngcontent-%COMP%]{max-width:1400px}}@media(min-width:1441px)and (max-width:1920px){.app-content[_ngcontent-%COMP%]{max-width:1600px;padding:var(--space-xl) var(--space-lg)}.app-header[_ngcontent-%COMP%]{padding:var(--space-xl) var(--space-lg);max-width:100%}}@media(min-width:1921px)and (max-width:2560px){.app-content[_ngcontent-%COMP%]{max-width:1800px;padding:var(--space-2xl) var(--space-xl)}.app-header[_ngcontent-%COMP%]{padding:var(--space-xl) var(--space-lg)}.app-header[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{width:36px;height:36px}.app-header[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem}.app-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1rem;padding:var(--space-sm) var(--space-lg)}}@media(min-width:2561px)and (max-width:3840px){.app-content[_ngcontent-%COMP%]{max-width:2400px;padding:var(--space-2xl) var(--space-xl)}.app-header[_ngcontent-%COMP%]{padding:var(--space-xl) var(--space-lg)}.app-header[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{width:40px;height:40px}.app-header[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.app-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.125rem;padding:var(--space-md) var(--space-xl)}.auth-user-photo[_ngcontent-%COMP%]{width:40px;height:40px}.auth-user-name[_ngcontent-%COMP%]{font-size:1rem}.auth-button[_ngcontent-%COMP%]{font-size:1rem;padding:var(--space-sm) var(--space-lg)}}@media(min-width:3841px){.app-content[_ngcontent-%COMP%]{max-width:3200px;padding:var(--space-2xl) var(--space-xl)}.app-header[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}.app-header[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{width:48px;height:48px}.app-header[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem}}']})};var UN=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ee(xs),Ee($n))};static \u0275dir=vt({type:n})}return n})(),m_=(()=>{class n extends UN{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=vt({type:n,features:[sr]})}return n})(),fc=new he("");var zZ={provide:fc,useExisting:Ln(()=>gd),multi:!0};function qZ(){let n=vi()?vi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var WZ=new he(""),gd=(()=>{class n extends UN{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!qZ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ee(xs),Ee($n),Ee(WZ,8))};static \u0275dir=vt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ye("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Kr([zZ]),sr]})}return n})();function GZ(n){return n==null||HN(n)===0}function HN(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Gp=new he(""),zN=new he("");function YZ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function KZ(n){return GZ(n.value)?{required:!0}:null}function QZ(n){return e=>{let t=e.value?.length??HN(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function ON(n){return null}function qN(n){return n!=null}function WN(n){return aa(n)?Ut(n):n}function GN(n){let e={};return n.forEach(t=>{e=t!=null?C(C({},e),t):e}),Object.keys(e).length===0?null:e}function YN(n,e){return e.map(t=>t(n))}function XZ(n){return!n.validate}function KN(n){return n.map(e=>XZ(e)?e:t=>e.validate(t))}function ZZ(n){if(!n)return null;let e=n.filter(qN);return e.length==0?null:function(t){return GN(YN(t,e))}}function gS(n){return n!=null?ZZ(KN(n)):null}function JZ(n){if(!n)return null;let e=n.filter(qN);return e.length==0?null:function(t){let r=YN(t,e).map(WN);return hC(r).pipe(bt(GN))}}function vS(n){return n!=null?JZ(KN(n)):null}function NN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eJ(n){return n._rawValidators}function tJ(n){return n._rawAsyncValidators}function pS(n){return n?Array.isArray(n)?n:[n]:[]}function u_(n,e){return Array.isArray(n)?n.includes(e):n===e}function RN(n,e){let t=pS(e);return pS(n).forEach(i=>{u_(t,i)||t.push(i)}),t}function FN(n,e){return pS(e).filter(t=>!u_(n,t))}var c_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},md=class extends c_{name;get formDirective(){return null}get path(){return null}},Wp=class extends c_{_parent=null;name=null;valueAccessor=null},l_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var g_=(()=>{class n extends l_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ee(Wp,2))};static \u0275dir=vt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ze("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[sr]})}return n})(),v_=(()=>{class n extends l_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ee(md,10))};static \u0275dir=vt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ze("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[sr]})}return n})();var jp="VALID",a_="INVALID",fd="PENDING",Up="DISABLED",ba=class{},d_=class extends ba{value;source;constructor(e,t){super(),this.value=e,this.source=t}},zp=class extends ba{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},qp=class extends ba{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},pd=class extends ba{status;source;constructor(e,t){super(),this.status=e,this.source=t}},mS=class extends ba{source;constructor(e){super(),this.source=e}},h_=class extends ba{source;constructor(e){super(),this.source=e}};function QN(n){return(y_(n)?n.validators:n)||null}function nJ(n){return Array.isArray(n)?gS(n):n||null}function XN(n,e){return(y_(e)?e.asyncValidators:n)||null}function rJ(n){return Array.isArray(n)?vS(n):n||null}function y_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function iJ(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[t])throw new te(1001,"")}function sJ(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new te(1002,"")})}var f_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return tn(this.statusReactive)}set status(e){tn(()=>this.statusReactive.set(e))}_status=Xe(()=>this.statusReactive());statusReactive=Re(void 0);get valid(){return this.status===jp}get invalid(){return this.status===a_}get pending(){return this.status==fd}get disabled(){return this.status===Up}get enabled(){return this.status!==Up}errors;get pristine(){return tn(this.pristineReactive)}set pristine(e){tn(()=>this.pristineReactive.set(e))}_pristine=Xe(()=>this.pristineReactive());pristineReactive=Re(!0);get dirty(){return!this.pristine}get touched(){return tn(this.touchedReactive)}set touched(e){tn(()=>this.touchedReactive.set(e))}_touched=Xe(()=>this.touchedReactive());touchedReactive=Re(!1);get untouched(){return!this.touched}_events=new Wt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(RN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(RN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FN(e,this._rawAsyncValidators))}hasValidator(e){return u_(this._rawValidators,e)}hasAsyncValidator(e){return u_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(J(C({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new qp(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new qp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(J(C({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new zp(!0,r))}markAsPending(e={}){this.status=fd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(J(C({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Up,this.errors=null,this._forEachChild(i=>{i.disable(J(C({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new d_(this.value,r)),this._events.next(new pd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(J(C({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=jp,this._forEachChild(r=>{r.enable(J(C({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(J(C({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jp||this.status===fd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new d_(this.value,t)),this._events.next(new pd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(J(C({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Up:jp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=fd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=WN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new pd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ft,this.statusChanges=new ft}_calculateStatus(){return this._allControlsDisabled()?Up:this.errors?a_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fd)?fd:this._anyControlsHaveStatus(a_)?a_:jp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new zp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new qp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){y_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=nJ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rJ(this._rawAsyncValidators)}},p_=class extends f_{constructor(e,t,r){super(QN(t),XN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){sJ(this,!0,e),Object.keys(e).forEach(r=>{iJ(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,J(C({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new h_(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var yS=new he("",{factory:()=>_S}),_S="always";function oJ(n,e){return[...e.path,n]}function ZN(n,e,t=_S){JN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),uJ(n,e),lJ(n,e),cJ(n,e),aJ(n,e)}function LN(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function aJ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function JN(n,e){let t=eJ(n);e.validator!==null?n.setValidators(NN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=tJ(n);e.asyncValidator!==null?n.setAsyncValidators(NN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();LN(e._rawValidators,i),LN(e._rawAsyncValidators,i)}function uJ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&eR(n,e)})}function cJ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&eR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function eR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lJ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function dJ(n,e){n==null,JN(n,e)}function hJ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function fJ(n){return Object.getPrototypeOf(n.constructor)===m_}function pJ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mJ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===gd?t=s:fJ(s)?r=s:i=s}),i||r||t||null}var gJ={provide:md,useExisting:Ln(()=>Yp)},Hp=Promise.resolve(),Yp=(()=>{class n extends md{callSetDisabledState;get submitted(){return tn(this.submittedReactive)}_submitted=Xe(()=>this.submittedReactive());submittedReactive=Re(!1);_directives=new Set;form;ngSubmit=new ft;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new p_({},gS(t),vS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Hp.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ZN(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Hp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Hp.then(()=>{let r=this._findContainer(t.path),i=new p_({});dJ(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Hp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Hp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),pJ(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new mS(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Ee(Gp,10),Ee(zN,10),Ee(yS,8))};static \u0275dir=vt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ye("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Kr([gJ]),sr]})}return n})();function BN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $N(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var vJ=class extends f_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(QN(t),XN(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),y_(t)&&(t.nonNullable||t.initialValueIsDefault)&&($N(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new h_(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){$N(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yJ={provide:Wp,useExisting:Ln(()=>Kp)},VN=Promise.resolve(),Kp=(()=>{class n extends Wp{_changeDetectorRef;callSetDisabledState;control=new vJ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ft;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mJ(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),hJ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ZN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){VN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Yu(r);VN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?oJ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Ee(md,9),Ee(Gp,10),Ee(zN,10),Ee(fc,10),Ee(da,8),Ee(yS,8))};static \u0275dir=vt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Kr([yJ]),sr,Bn]})}return n})();var __=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=vt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),_J={provide:fc,useExisting:Ln(()=>bS),multi:!0},bS=(()=>{class n extends m_{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=vt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ye("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Kr([_J]),sr]})}return n})();var bJ={provide:fc,useExisting:Ln(()=>b_),multi:!0};function tR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function wJ(n){return n.split(":")[0]}var b_=(()=>{class n extends m_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=$(ua).injector;destroyRef=$(ws);cdr=$(da);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Lv({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=tR(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=wJ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=vt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ye("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Kr([bJ]),sr]})}return n})(),nR=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(tR(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Ee($n),Ee(xs),Ee(b_,9))};static \u0275dir=vt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),EJ={provide:fc,useExisting:Ln(()=>rR),multi:!0};function jN(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function CJ(n){return n.split(":")[0]}var rR=(()=>{class n extends m_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let u=o[a],c=this._getOptionValue(u.value);i.push(c)}}else{let o=r.options;for(let a=0;a<o.length;a++){let u=o[a];if(u.selected){let c=this._getOptionValue(u.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=CJ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=vt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ye("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Kr([EJ]),sr]})}return n})(),iR=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(jN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(jN(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Ee($n),Ee(xs),Ee(rR,9))};static \u0275dir=vt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function xJ(n){return typeof n=="number"?n:parseInt(n,10)}function DJ(n){return typeof n=="number"?n:parseFloat(n)}var wS=(()=>{class n{_validator=ON;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ON,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=vt({type:n,features:[Bn]})}return n})();var SJ={provide:Gp,useExisting:Ln(()=>ES),multi:!0},ES=(()=>{class n extends wS{min;inputName="min";normalizeInput=t=>DJ(t);createValidator=t=>YZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=vt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ca("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Kr([SJ]),sr]})}return n})(),IJ={provide:Gp,useExisting:Ln(()=>Qp),multi:!0};var Qp=(()=>{class n extends wS{required;inputName="required";normalizeInput=Yu;createValidator=t=>KZ;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=vt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ca("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Kr([IJ]),sr]})}return n})();var TJ={provide:Gp,useExisting:Ln(()=>CS),multi:!0},CS=(()=>{class n extends wS{maxlength;inputName="maxlength";normalizeInput=t=>xJ(t);createValidator=t=>QZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=vt({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ca("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Kr([TJ]),sr]})}return n})();var AJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=so({type:n});static \u0275inj=ms({})}return n})();var vd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yS,useValue:t.callSetDisabledState??_S}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=so({type:n});static \u0275inj=ms({imports:[AJ]})}return n})();var w_=class n{constructor(e){this.supabase=e}authService=$(Yt);getUserId(){return this.authService.user()?.id||null}fromRow(e){return{id:e.id,title:e.title,category:e.category||void 0,total:e.total,lastUpdated:e.last_updated,isFavorite:e.is_favorite??!1,sortOrder:e.sort_order}}toRow(e){let t=this.getUserId(),r={id:e.id,title:e.title,category:e.category||"income",total:e.total,last_updated:e.lastUpdated,is_favorite:e.isFavorite??!1,sort_order:e.sortOrder};return t&&(r.user_id=t),r}async getAll(){let e=this.getUserId();if(!e)return console.warn("User ID not available, returning empty array"),[];let{data:t,error:r}=await this.supabase.client.from("items").select("id, title, category, total, last_updated, is_favorite, sort_order, user_id").eq("user_id",e);if(r)throw console.error("Error fetching items:",r),r;return(t??[]).map(i=>this.fromRow(i))}async save(e){let t=this.getUserId();if(!t)throw new Error("User ID not available, cannot save items");if(e.length===0){let{data:u,error:c}=await this.supabase.client.from("items").select("id").eq("user_id",t);if(c)throw c;if(u&&u.length>0){let l=u.map(h=>h.id),{error:d}=await this.supabase.client.from("items").delete().in("id",l);if(d)throw d}return}let r=e.map(u=>this.toRow(u)),{error:i}=await this.supabase.client.from("items").upsert(r,{onConflict:"id"});if(i)throw console.error("Upsert error:",i),console.error("Trying to upsert:",r),i;let s=new Set(e.map(u=>u.id)),{data:o,error:a}=await this.supabase.client.from("items").select("id").eq("user_id",t);if(a)throw a;if(o){let u=o.map(c=>c.id).filter(c=>!s.has(c));if(u.length>0){let{error:c}=await this.supabase.client.from("items").delete().in("id",u);if(c)throw c}}}static \u0275fac=function(t){return new(t||n)(ce(Os))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var yd=class n{get(e){let t=localStorage.getItem(e);return t?JSON.parse(t):[]}set(e,t){localStorage.setItem(e,JSON.stringify(t))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var E_=class n{constructor(e){this.storage=e}KEY="demo_items";async getAll(){return this.storage.get(this.KEY)||[]}async save(e){this.storage.set(this.KEY,e)}async clear(){localStorage.removeItem(this.KEY)}static \u0275fac=function(t){return new(t||n)(ce(yd))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var wa=class n{STORAGE_KEY="finance_tracker_history";_history=Re([]);history=Xe(()=>this._history());constructor(){this.load()}load(){try{let e=localStorage.getItem(this.STORAGE_KEY);if(e){let t=JSON.parse(e);this._history.set(t)}}catch(e){console.error("Error loading history:",e)}}save(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this._history()))}catch(e){console.error("Error saving history:",e)}}addEntry(e){let t=C({id:crypto.randomUUID(),timestamp:new Date().toISOString()},e);this._history.update(r=>[t,...r].slice(0,100)),this.save()}clear(){this._history.set([]),localStorage.removeItem(this.STORAGE_KEY)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var _d=class n{supabaseRepo=$(w_);localRepo=$(E_);historyStore=$(wa);authService=$(Yt);_items=Re([]);items=Xe(()=>this._items());get repo(){return this.authService.isAuthenticated()?this.supabaseRepo:this.localRepo}isDemoMode=Xe(()=>!this.authService.isAuthenticated());isReloading=!1;constructor(){this.load(),Lu(()=>{let e=this.authService.isAuthenticated();this.isReloading||(this.isReloading=!0,setTimeout(()=>{this.load().catch(t=>console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0434\u0430\u043D\u043D\u044B\u0445:",t)).finally(()=>{setTimeout(()=>{this.isReloading=!1},500)})},100))})}async load(){try{let e=await this.repo.getAll();if(this.isDemoMode()){let t=e.filter(s=>s.id.startsWith("demo-")),r=e.filter(s=>!s.id.startsWith("demo-")),i=t.length>0&&t.some(s=>s.id==="demo-7"||s.id==="demo-8");if(t.length===0||t.length>0&&!i){console.log("\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u044B \u0441\u0442\u0430\u0440\u044B\u0435 \u0434\u0435\u043C\u043E-\u0434\u0430\u043D\u043D\u044B\u0435, \u043E\u0431\u043D\u043E\u0432\u043B\u044F\u044E..."),await this.loadDemoData();let o=[...(await this.localRepo.getAll()).filter(a=>a.id.startsWith("demo-")),...r];await this.localRepo.save(o),this._items.set(o);return}}this._items.set(e)}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439:",e),this.isDemoMode()&&await this.loadDemoData()}}async loadDemoData(){console.log("\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043D\u043E\u0432\u044B\u0445 \u0434\u0435\u043C\u043E-\u0434\u0430\u043D\u043D\u044B\u0445 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439...");let t=(await this.localRepo.getAll()).filter(o=>!o.id.startsWith("demo-")),r=new Date,i=[{id:"demo-1",title:"\u0417\u0430\u0440\u043F\u043B\u0430\u0442\u0430",category:"income",total:5e4,lastUpdated:r.toISOString(),isFavorite:!0,sortOrder:0},{id:"demo-2",title:"\u041F\u0440\u043E\u0434\u0443\u043A\u0442\u044B",category:"expense",total:23500,lastUpdated:new Date(r.getTime()-864e5).toISOString(),isFavorite:!0,sortOrder:1},{id:"demo-3",title:"\u0422\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442",category:"expense",total:4500,lastUpdated:new Date(r.getTime()-2*864e5).toISOString(),sortOrder:2},{id:"demo-4",title:"\u0420\u0430\u0437\u0432\u043B\u0435\u0447\u0435\u043D\u0438\u044F",category:"expense",total:12e3,lastUpdated:new Date(r.getTime()-3*864e5).toISOString(),sortOrder:3},{id:"demo-5",title:"\u041A\u043E\u043C\u043C\u0443\u043D\u0430\u043B\u044C\u043D\u044B\u0435 \u0443\u0441\u043B\u0443\u0433\u0438",category:"expense",total:8e3,lastUpdated:new Date(r.getTime()-5*864e5).toISOString(),isFavorite:!0,sortOrder:4},{id:"demo-6",title:"\u041E\u0434\u0435\u0436\u0434\u0430",category:"expense",total:15e3,lastUpdated:new Date(r.getTime()-7*864e5).toISOString(),sortOrder:5},{id:"demo-7",title:"\u0424\u0440\u0438\u043B\u0430\u043D\u0441",category:"income",total:25e3,lastUpdated:new Date(r.getTime()-4*864e5).toISOString(),sortOrder:6},{id:"demo-8",title:"\u041A\u0430\u0444\u0435 \u0438 \u0440\u0435\u0441\u0442\u043E\u0440\u0430\u043D\u044B",category:"expense",total:8500,lastUpdated:new Date(r.getTime()-1*864e5).toISOString(),sortOrder:7}],s=[...i,...t];await this.repo.save(s),this._items.set(s),console.log("\u0414\u0435\u043C\u043E-\u0434\u0430\u043D\u043D\u044B\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B:",i.length,"\u0434\u0435\u043C\u043E-\u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439,",t.length,"\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0445 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439")}getUserItemsCount(){return this._items().filter(e=>!e.id.startsWith("demo-")).length}canCreateInDemoMode(){return this.isDemoMode()?this.getUserItemsCount()<2:!0}async create(e){if(this.isDemoMode()&&!this.canCreateInDemoMode())throw new Error("DEMO_LIMIT_REACHED");let t={id:crypto.randomUUID(),title:e,total:0,lastUpdated:new Date().toISOString()};this._items.update(r=>[...r,t]),await this.repo.save(this._items()),this.isDemoMode()||this.historyStore.addEntry({action:"created",entityType:"item",entityId:t.id,entityTitle:e,details:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0430"})}async applyDelta(e,t){this._items.update(r=>r.map(i=>i.id===e?J(C({},i),{total:i.total+t,lastUpdated:new Date().toISOString()}):i)),await this.repo.save(this._items())}async delete(e){let t=this._items().find(r=>r.id===e);if(t){if(this.isDemoMode()&&t.id.startsWith("demo-"))throw new Error("\u0414\u0435\u043C\u043E-\u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u043D\u0435\u043B\u044C\u0437\u044F \u0443\u0434\u0430\u043B\u0438\u0442\u044C. \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u0438 \u0443\u0434\u0430\u043B\u044F\u0442\u044C \u0441\u0432\u043E\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438.");this.isDemoMode()||this.historyStore.addEntry({action:"deleted",entityType:"item",entityId:e,entityTitle:t.title,details:`\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F "${t.category==="income"?"\u0414\u043E\u0445\u043E\u0434":"\u0420\u0430\u0441\u0445\u043E\u0434"}" \u0443\u0434\u0430\u043B\u0435\u043D\u0430`}),this._items.update(r=>r.filter(i=>i.id!==e)),await this.repo.save(this._items())}}async toggleFavorite(e){this._items.update(t=>t.map(r=>r.id===e?J(C({},r),{isFavorite:!r.isFavorite}):r)),await this.repo.save(this._items())}async updateSortOrder(e){let t=e.map((r,i)=>J(C({},r),{sortOrder:i}));this._items.set(t),await this.repo.save(this._items())}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var C_=class n{constructor(e){this.supabase=e}authService=$(Yt);getUserId(){return this.authService.user()?.id||null}async getAll(){let e=this.getUserId();if(!e)return console.warn("User ID not available, returning empty array"),[];let{data:t,error:r}=await this.supabase.client.from("transactions").select("id,item_id,subcategory_id,type,amount,date,notes,user_id").eq("user_id",e);if(r)throw console.error("Error fetching transactions:",r),r;return t??[]}async save(e){try{let t=this.getUserId();if(!t)throw new Error("User ID not available, cannot save transactions");let r=e.map(u=>J(C({},u),{user_id:t}));if(e.length===0){let{data:u,error:c}=await this.supabase.client.from("transactions").select("id").eq("user_id",t);if(c)throw c;if(u&&u.length>0){let l=u.map(h=>h.id),{error:d}=await this.supabase.client.from("transactions").delete().in("id",l);if(d)throw d}return}let{error:i}=await this.supabase.client.from("transactions").upsert(r,{onConflict:"id"});if(i)throw console.error("Upsert error:",i),console.error("Trying to upsert:",r),i;let s=new Set(e.map(u=>u.id)),{data:o,error:a}=await this.supabase.client.from("transactions").select("id").eq("user_id",t);if(a)throw a;if(o){let u=o.map(c=>c.id).filter(c=>!s.has(c));if(u.length>0){let{error:c}=await this.supabase.client.from("transactions").delete().in("id",u);if(c)throw c}}}catch(t){throw console.error("Error saving transactions:",t),t}}static \u0275fac=function(t){return new(t||n)(ce(Os))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var x_=class n{constructor(e){this.storage=e}KEY="demo_transactions";async getAll(){return this.storage.get(this.KEY)||[]}async save(e){this.storage.set(this.KEY,e)}async clear(){localStorage.removeItem(this.KEY)}static \u0275fac=function(t){return new(t||n)(ce(yd))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var bd=class n{supabaseRepo=$(C_);localRepo=$(x_);historyStore=$(wa);authService=$(Yt);_tx=Re([]);all=Xe(()=>this._tx());get repo(){return this.authService.isAuthenticated()?this.supabaseRepo:this.localRepo}isDemoMode=Xe(()=>!this.authService.isAuthenticated());isReloading=!1;constructor(){this.load(),Lu(()=>{let e=this.authService.isAuthenticated();this.isReloading||(this.isReloading=!0,setTimeout(()=>{this.load().catch(t=>console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439:",t)).finally(()=>{setTimeout(()=>{this.isReloading=!1},500)})},100))})}async load(){try{let e=await this.repo.getAll();if(this.isDemoMode()){let t=e.length>0&&e.some(i=>i.id.startsWith("demo-tx-")),r=e.length>0&&e.some(i=>i.id==="demo-tx-f1"||i.id==="demo-tx-p5"||i.id==="demo-tx-r5"||i.id==="demo-tx-u1"||i.id==="demo-tx-c1");if(e.length===0||t&&!r){console.log("\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u044B \u0441\u0442\u0430\u0440\u044B\u0435 \u0434\u0435\u043C\u043E-\u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438, \u043E\u0431\u043D\u043E\u0432\u043B\u044F\u044E..."),await this.localRepo.clear(),await this.loadDemoTransactions();return}}this._tx.set(e)}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439:",e),this.isDemoMode()&&await this.loadDemoTransactions()}}async loadDemoTransactions(){console.log("\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043D\u043E\u0432\u044B\u0445 \u0434\u0435\u043C\u043E-\u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439...");let e=new Date,t=[],r=i=>{let s=new Date(e);return s.setDate(s.getDate()-i),s.setHours(Math.floor(Math.random()*12)+9,Math.floor(Math.random()*60),0,0),s.toISOString()};t.push({id:"demo-tx-1",item_id:"demo-1",type:"income",amount:5e4,date:r(2),notes:"\u0417\u0430\u0440\u043F\u043B\u0430\u0442\u0430 \u0437\u0430 \u044F\u043D\u0432\u0430\u0440\u044C"}),t.push({id:"demo-tx-f1",item_id:"demo-7",type:"income",amount:15e3,date:r(4),notes:"\u041F\u0440\u043E\u0435\u043A\u0442 #1"},{id:"demo-tx-f2",item_id:"demo-7",type:"income",amount:1e4,date:r(8),notes:"\u041F\u0440\u043E\u0435\u043A\u0442 #2"}),t.push({id:"demo-tx-p1",item_id:"demo-2",type:"expense",amount:8500,date:r(0),notes:"\u0411\u043E\u043B\u044C\u0448\u043E\u0439 \u043C\u0430\u0433\u0430\u0437\u0438\u043D \u043D\u0430 \u043D\u0435\u0434\u0435\u043B\u044E"},{id:"demo-tx-p2",item_id:"demo-2",type:"expense",amount:3200,date:r(3),notes:"\u041E\u0432\u043E\u0449\u0438 \u0438 \u0444\u0440\u0443\u043A\u0442\u044B"},{id:"demo-tx-p3",item_id:"demo-2",type:"expense",amount:4800,date:r(7),notes:"\u041C\u043E\u043B\u043E\u0447\u043D\u044B\u0435 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u044B"},{id:"demo-tx-p4",item_id:"demo-2",type:"expense",amount:2900,date:r(10),notes:"\u0425\u043B\u0435\u0431 \u0438 \u0432\u044B\u043F\u0435\u0447\u043A\u0430"},{id:"demo-tx-p5",item_id:"demo-2",type:"expense",amount:4100,date:r(14),notes:"\u041C\u044F\u0441\u043E \u0438 \u0440\u044B\u0431\u0430"}),t.push({id:"demo-tx-t1",item_id:"demo-3",type:"expense",amount:1500,date:r(0),notes:"\u041F\u0440\u043E\u0435\u0437\u0434\u043D\u043E\u0439 \u043D\u0430 \u043C\u0435\u0441\u044F\u0446"},{id:"demo-tx-t2",item_id:"demo-3",type:"expense",amount:500,date:r(5),notes:"\u0422\u0430\u043A\u0441\u0438"},{id:"demo-tx-t3",item_id:"demo-3",type:"expense",amount:800,date:r(12),notes:"\u0411\u0435\u043D\u0437\u0438\u043D"},{id:"demo-tx-t4",item_id:"demo-3",type:"expense",amount:1700,date:r(15),notes:"\u041F\u0440\u043E\u0435\u0437\u0434\u043D\u043E\u0439 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0439 \u043C\u0435\u0441\u044F\u0446"}),t.push({id:"demo-tx-e1",item_id:"demo-4",type:"expense",amount:2500,date:r(1),notes:"\u041A\u0438\u043D\u043E\u0442\u0435\u0430\u0442\u0440"},{id:"demo-tx-e2",item_id:"demo-4",type:"expense",amount:4500,date:r(4),notes:"\u0420\u0435\u0441\u0442\u043E\u0440\u0430\u043D"},{id:"demo-tx-e3",item_id:"demo-4",type:"expense",amount:3e3,date:r(9),notes:"\u041A\u043E\u043D\u0446\u0435\u0440\u0442"},{id:"demo-tx-e4",item_id:"demo-4",type:"expense",amount:2e3,date:r(13),notes:"\u0411\u043E\u0443\u043B\u0438\u043D\u0433"}),t.push({id:"demo-tx-u1",item_id:"demo-5",type:"expense",amount:3500,date:r(5),notes:"\u042D\u043B\u0435\u043A\u0442\u0440\u0438\u0447\u0435\u0441\u0442\u0432\u043E"},{id:"demo-tx-u2",item_id:"demo-5",type:"expense",amount:2500,date:r(6),notes:"\u0412\u043E\u0434\u0430 \u0438 \u043A\u0430\u043D\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F"},{id:"demo-tx-u3",item_id:"demo-5",type:"expense",amount:2e3,date:r(7),notes:"\u041E\u0442\u043E\u043F\u043B\u0435\u043D\u0438\u0435"}),t.push({id:"demo-tx-c1",item_id:"demo-6",type:"expense",amount:8500,date:r(7),notes:"\u041A\u0443\u0440\u0442\u043A\u0430"},{id:"demo-tx-c2",item_id:"demo-6",type:"expense",amount:3500,date:r(8),notes:"\u041E\u0431\u0443\u0432\u044C"},{id:"demo-tx-c3",item_id:"demo-6",type:"expense",amount:3e3,date:r(9),notes:"\u0414\u0436\u0438\u043D\u0441\u044B"}),t.push({id:"demo-tx-r1",item_id:"demo-8",type:"expense",amount:1200,date:r(0),notes:"\u041A\u043E\u0444\u0435 \u043D\u0430 \u0440\u0430\u0431\u043E\u0442\u0435"},{id:"demo-tx-r2",item_id:"demo-8",type:"expense",amount:1800,date:r(2),notes:"\u041E\u0431\u0435\u0434 \u0432 \u043A\u0430\u0444\u0435"},{id:"demo-tx-r3",item_id:"demo-8",type:"expense",amount:2500,date:r(4),notes:"\u0423\u0436\u0438\u043D \u0432 \u0440\u0435\u0441\u0442\u043E\u0440\u0430\u043D\u0435"},{id:"demo-tx-r4",item_id:"demo-8",type:"expense",amount:900,date:r(6),notes:"\u0411\u044B\u0441\u0442\u0440\u044B\u0439 \u043E\u0431\u0435\u0434"},{id:"demo-tx-r5",item_id:"demo-8",type:"expense",amount:2100,date:r(8),notes:"\u041A\u043E\u0444\u0435 \u0438 \u0434\u0435\u0441\u0435\u0440\u0442"}),t.sort((i,s)=>new Date(s.date).getTime()-new Date(i.date).getTime()),await this.repo.save(t),this._tx.set(t),console.log("\u0414\u0435\u043C\u043E-\u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B:",t.length,"\u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439")}byItem(e){return Xe(()=>this._tx().filter(t=>t.item_id===e))}async add(e,t,r,i,s,o){if(this.isDemoMode())throw new Error("\u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438");let a={id:crypto.randomUUID(),item_id:e,type:t,amount:r,date:i||new Date().toISOString(),notes:s?.trim()||void 0,subcategory_id:o||void 0};return this._tx.update(u=>[...u,a]),await this.repo.save(this._tx()),this.isDemoMode()||this.historyStore.addEntry({action:"created",entityType:"transaction",entityId:a.id,entityTitle:`${t==="income"?"\u0414\u043E\u0445\u043E\u0434":"\u0420\u0430\u0441\u0445\u043E\u0434"}: ${r} \u20BD`,details:"\u0422\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044F \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430"}),t==="income"?r:-r}async delete(e){if(this.isDemoMode())throw new Error("\u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0443\u0434\u0430\u043B\u044F\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438");let t=this._tx().find(i=>i.id===e);if(!t)return 0;let r=t.type==="income"?-t.amount:t.amount;return this._tx.update(i=>i.filter(s=>s.id!==e)),await this.repo.save(this._tx()),this.isDemoMode()||this.historyStore.addEntry({action:"deleted",entityType:"transaction",entityId:e,entityTitle:`${t.type==="income"?"\u0414\u043E\u0445\u043E\u0434":"\u0420\u0430\u0441\u0445\u043E\u0434"}: ${t.amount} \u20BD`,details:"\u0422\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044F \u0443\u0434\u0430\u043B\u0435\u043D\u0430"}),r}async update(e,t){let r=this._tx().find(a=>a.id===e);if(!r)return 0;let i=r.type==="income"?-r.amount:r.amount,s=C(C(C(C(C({},r),t.amount!==void 0&&{amount:t.amount}),t.date!==void 0&&{date:t.date?new Date(t.date).toISOString():r.date}),t.notes!==void 0&&{notes:t.notes?.trim()||void 0}),t.subcategory_id!==void 0&&{subcategory_id:t.subcategory_id||void 0});return this._tx.update(a=>a.map(u=>u.id===e?s:u)),await this.repo.save(this._tx()),(s.type==="income"?s.amount:-s.amount)+i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};function Jp(n){return n+.5|0}var Ea=(n,e,t)=>Math.max(Math.min(n,t),e);function Xp(n){return Ea(Jp(n*2.55),0,255)}function Ca(n){return Ea(Jp(n*255),0,255)}function fo(n){return Ea(Jp(n/2.55)/100,0,1)}function aR(n){return Ea(Jp(n*100),0,100)}var Ei={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},DS=[..."0123456789ABCDEF"],MJ=n=>DS[n&15],kJ=n=>DS[(n&240)>>4]+DS[n&15],D_=n=>(n&240)>>4===(n&15),PJ=n=>D_(n.r)&&D_(n.g)&&D_(n.b)&&D_(n.a);function OJ(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Ei[n[1]]*17,g:255&Ei[n[2]]*17,b:255&Ei[n[3]]*17,a:e===5?Ei[n[4]]*17:255}:(e===7||e===9)&&(t={r:Ei[n[1]]<<4|Ei[n[2]],g:Ei[n[3]]<<4|Ei[n[4]],b:Ei[n[5]]<<4|Ei[n[6]],a:e===9?Ei[n[7]]<<4|Ei[n[8]]:255})),t}var NJ=(n,e)=>n<255?e(n):"";function RJ(n){var e=PJ(n)?MJ:kJ;return n?"#"+e(n.r)+e(n.g)+e(n.b)+NJ(n.a,e):void 0}var FJ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dR(n,e,t){let r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function LJ(n,e,t){let r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function BJ(n,e,t){let r=dR(n,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function $J(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function SS(n){let t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2,u,c,l;return s!==o&&(l=s-o,c=a>.5?l/(2-s-o):l/(s+o),u=$J(t,r,i,l,s),u=u*60+.5),[u|0,c||0,a]}function IS(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Ca)}function TS(n,e,t){return IS(dR,n,e,t)}function VJ(n,e,t){return IS(BJ,n,e,t)}function jJ(n,e,t){return IS(LJ,n,e,t)}function hR(n){return(n%360+360)%360}function UJ(n){let e=FJ.exec(n),t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Xp(+e[5]):Ca(+e[5]));let i=hR(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=VJ(i,s,o):e[1]==="hsv"?r=jJ(i,s,o):r=TS(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function HJ(n,e){var t=SS(n);t[0]=hR(t[0]+e),t=TS(t),n.r=t[0],n.g=t[1],n.b=t[2]}function zJ(n){if(!n)return;let e=SS(n),t=e[0],r=aR(e[1]),i=aR(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${fo(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var uR={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cR={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function qJ(){let n={},e=Object.keys(cR),t=Object.keys(uR),r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,uR[s]);s=parseInt(cR[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var S_;function WJ(n){S_||(S_=qJ(),S_.transparent=[0,0,0,0]);let e=S_[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var GJ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function YJ(n){let e=GJ.exec(n),t=255,r,i,s;if(e){if(e[7]!==r){let o=+e[7];t=e[8]?Xp(o):Ea(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Xp(r):Ea(r,0,255)),i=255&(e[4]?Xp(i):Ea(i,0,255)),s=255&(e[6]?Xp(s):Ea(s,0,255)),{r,g:i,b:s,a:t}}}function KJ(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${fo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var xS=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,wd=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function QJ(n,e,t){let r=wd(fo(n.r)),i=wd(fo(n.g)),s=wd(fo(n.b));return{r:Ca(xS(r+t*(wd(fo(e.r))-r))),g:Ca(xS(i+t*(wd(fo(e.g))-i))),b:Ca(xS(s+t*(wd(fo(e.b))-s))),a:n.a+t*(e.a-n.a)}}function I_(n,e,t){if(n){let r=SS(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=TS(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function fR(n,e){return n&&Object.assign(e||{},n)}function lR(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ca(n[3]))):(e=fR(n,{r:0,g:0,b:0,a:1}),e.a=Ca(e.a)),e}function XJ(n){return n.charAt(0)==="r"?YJ(n):UJ(n)}var Zp=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,r;t==="object"?r=lR(e):t==="string"&&(r=OJ(e)||WJ(e)||XJ(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=fR(this._rgb);return e&&(e.a=fo(e.a)),e}set rgb(e){this._rgb=lR(e)}rgbString(){return this._valid?KJ(this._rgb):void 0}hexString(){return this._valid?RJ(this._rgb):void 0}hslString(){return this._valid?zJ(this._rgb):void 0}mix(e,t){if(e){let r=this.rgb,i=e.rgb,s,o=t===s?.5:t,a=2*o-1,u=r.a-i.a,c=((a*u===-1?a:(a+u)/(1+a*u))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=QJ(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=Ca(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Jp(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return I_(this._rgb,2,e),this}darken(e){return I_(this._rgb,2,-e),this}saturate(e){return I_(this._rgb,1,e),this}desaturate(e){return I_(this._rgb,1,-e),this}rotate(e){return HJ(this._rgb,e),this}};function Fs(){}var xR=(()=>{let n=0;return()=>n++})();function Be(n){return n==null}function wt(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ue(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ft(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ar(n,e){return Ft(n)?n:e}function Se(n,e){return typeof n>"u"?e:n}var DR=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,PS=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function yt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function lt(n,e,t,r){let i,s,o;if(wt(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(Ue(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function nm(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function k_(n){if(wt(n))return n.map(k_);if(Ue(n)){let e=Object.create(null),t=Object.keys(n),r=t.length,i=0;for(;i<r;++i)e[t[i]]=k_(n[t[i]]);return e}return n}function SR(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function ZJ(n,e,t,r){if(!SR(n))return;let i=e[n],s=t[n];Ue(i)&&Ue(s)?Cd(i,s,r):e[n]=k_(s)}function Cd(n,e,t){let r=wt(e)?e:[e],i=r.length;if(!Ue(n))return n;t=t||{};let s=t.merger||ZJ,o;for(let a=0;a<i;++a){if(o=r[a],!Ue(o))continue;let u=Object.keys(o);for(let c=0,l=u.length;c<l;++c)s(u[c],n,o,t)}return n}function Dd(n,e){return Cd(n,e,{merger:JJ})}function JJ(n,e,t){if(!SR(n))return;let r=e[n],i=t[n];Ue(r)&&Ue(i)?Dd(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=k_(i))}var pR={"":n=>n,x:n=>n.x,y:n=>n.y};function eee(n){let e=n.split("."),t=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function tee(n){let e=eee(n);return t=>{for(let r of e){if(r==="")break;t=t&&t[r]}return t}}function go(n,e){return(pR[e]||(pR[e]=tee(e)))(n)}function R_(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Sd=n=>typeof n<"u",po=n=>typeof n=="function",OS=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function IR(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Ze=Math.PI,Et=2*Ze,nee=Et+Ze,P_=Number.POSITIVE_INFINITY,ree=Ze/180,Vt=Ze/2,pc=Ze/4,mR=Ze*2/3,mo=Math.log10,Yi=Math.sign;function Id(n,e,t){return Math.abs(n-e)<t}function NS(n){let e=Math.round(n);n=Id(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(mo(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function TR(n){let e=[],t=Math.sqrt(n),r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function iee(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function vc(n){return!iee(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function AR(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function RS(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ci(n){return n*(Ze/180)}function F_(n){return n*(180/Ze)}function FS(n){if(!Ft(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function LS(n,e){let t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t);return s<-.5*Ze&&(s+=Et),{angle:s,distance:i}}function O_(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function see(n,e){return(n-e+nee)%Et-Ze}function Tn(n){return(n%Et+Et)%Et}function Td(n,e,t,r){let i=Tn(n),s=Tn(e),o=Tn(t),a=Tn(s-i),u=Tn(o-i),c=Tn(i-s),l=Tn(i-o);return i===s||i===o||r&&s===o||a>u&&c<l}function sn(n,e,t){return Math.max(e,Math.min(t,n))}function MR(n){return sn(n,-32768,32767)}function Ls(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function L_(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}var Ns=(n,e,t,r)=>L_(n,t,r?i=>{let s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),kR=(n,e,t)=>L_(n,t,r=>n[r][e]>=t);function PR(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}var OR=["push","pop","shift","splice","unshift"];function NR(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),OR.forEach(t=>{let r="_onData"+R_(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function BS(n,e){let t=n._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(OR.forEach(s=>{delete n[s]}),delete n._chartjs)}function $S(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var VS=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function jS(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,VS.call(window,()=>{r=!1,n.apply(e,t)}))}}function RR(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}var B_=n=>n==="start"?"left":n==="end"?"right":"center",An=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,FR=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function US(n,e,t){let r=e.length,i=0,s=r;if(n._sorted){let{iScale:o,vScale:a,_parsed:u}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,l=o.axis,{min:d,max:h,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(i=Math.min(Ns(u,l,d).lo,t?r:Ns(e,l,o.getPixelForValue(d)).lo),c){let g=u.slice(0,i+1).reverse().findIndex(v=>!Be(v[a.axis]));i-=Math.max(0,g)}i=sn(i,0,r-1)}if(p){let g=Math.max(Ns(u,o.axis,h,!0).hi+1,t?0:Ns(e,l,o.getPixelForValue(h),!0).hi+1);if(c){let v=u.slice(g-1).findIndex(y=>!Be(y[a.axis]));g+=Math.max(0,v)}s=sn(g,i,r)-i}else s=r-i}return{start:i,count:s}}function HS(n){let{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;let s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}var T_=n=>n===0||n===1,gR=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Et/t)),vR=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Et/t)+1,Ed={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Vt)+1,easeOutSine:n=>Math.sin(n*Vt),easeInOutSine:n=>-.5*(Math.cos(Ze*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>T_(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>T_(n)?n:gR(n,.075,.3),easeOutElastic:n=>T_(n)?n:vR(n,.075,.3),easeInOutElastic(n){return T_(n)?n:n<.5?.5*gR(n*2,.1125,.45):.5+.5*vR(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ed.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ed.easeInBounce(n*2)*.5:Ed.easeOutBounce(n*2-1)*.5+.5};function zS(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function qS(n){return zS(n)?n:new Zp(n)}function AS(n){return zS(n)?n:new Zp(n).saturate(.5).darken(.1).hexString()}var oee=["x","y","borderWidth","radius","tension"],aee=["color","borderColor","backgroundColor"];function uee(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:aee},numbers:{type:"number",properties:oee}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function cee(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var yR=new Map;function lee(n,e){e=e||{};let t=n+JSON.stringify(e),r=yR.get(t);return r||(r=new Intl.NumberFormat(n,e),yR.set(t,r)),r}function Ad(n,e,t){return lee(e,t).format(n)}var LR={values(n){return wt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let r=this.chart.options.locale,i,s=n;if(t.length>1){let c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=dee(n,t)}let o=mo(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(u,this.options.ticks.format),Ad(n,r,u)},logarithmic(n,e,t){if(n===0)return"0";let r=t[e].significand||n/Math.pow(10,Math.floor(mo(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?LR.numeric.call(this,n,e,t):""}};function dee(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var rm={formatters:LR};function hee(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Sa=Object.create(null),$_=Object.create(null);function em(n,e){if(!e)return n;let t=e.split(".");for(let r=0,i=t.length;r<i;++r){let s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function MS(n,e,t){return typeof e=="string"?Cd(em(n,e),t):Cd(em(n,""),e)}var kS=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>AS(i.backgroundColor),this.hoverBorderColor=(r,i)=>AS(i.borderColor),this.hoverColor=(r,i)=>AS(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return MS(this,e,t)}get(e){return em(this,e)}describe(e,t){return MS($_,e,t)}override(e,t){return MS(Sa,e,t)}route(e,t,r,i){let s=em(this,e),o=em(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let u=this[a],c=o[i];return Ue(u)?Object.assign({},c,u):Se(u,c)},set(u){this[a]=u}}})}apply(e){e.forEach(t=>t(this))}},Tt=new kS({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[uee,cee,hee]);function fee(n){return!n||Be(n.size)||Be(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function tm(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function BR(n,e,t,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0,a=t.length,u,c,l,d,h;for(u=0;u<a;u++)if(d=t[u],d!=null&&!wt(d))o=tm(n,i,s,o,d);else if(wt(d))for(c=0,l=d.length;c<l;c++)h=d[c],h!=null&&!wt(h)&&(o=tm(n,i,s,o,h));n.restore();let f=s.length/2;if(f>t.length){for(u=0;u<f;u++)delete i[s[u]];s.splice(0,f)}return o}function Ia(n,e,t){let r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function WS(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function V_(n,e,t,r){GS(n,e,t,r,null)}function GS(n,e,t,r,i){let s,o,a,u,c,l,d,h,f=e.pointStyle,p=e.rotation,g=e.radius,v=(p||0)*ree;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(v),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(g)||g<=0)){switch(n.beginPath(),f){default:i?n.ellipse(t,r,i/2,g,0,0,Et):n.arc(t,r,g,0,Et),n.closePath();break;case"triangle":l=i?i/2:g,n.moveTo(t+Math.sin(v)*l,r-Math.cos(v)*g),v+=mR,n.lineTo(t+Math.sin(v)*l,r-Math.cos(v)*g),v+=mR,n.lineTo(t+Math.sin(v)*l,r-Math.cos(v)*g),n.closePath();break;case"rectRounded":c=g*.516,u=g-c,o=Math.cos(v+pc)*u,d=Math.cos(v+pc)*(i?i/2-c:u),a=Math.sin(v+pc)*u,h=Math.sin(v+pc)*(i?i/2-c:u),n.arc(t-d,r-a,c,v-Ze,v-Vt),n.arc(t+h,r-o,c,v-Vt,v),n.arc(t+d,r+a,c,v,v+Vt),n.arc(t-h,r+o,c,v+Vt,v+Ze),n.closePath();break;case"rect":if(!p){u=Math.SQRT1_2*g,l=i?i/2:u,n.rect(t-l,r-u,2*l,2*u);break}v+=pc;case"rectRot":d=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(i?i/2:g),n.moveTo(t-d,r-a),n.lineTo(t+h,r-o),n.lineTo(t+d,r+a),n.lineTo(t-h,r+o),n.closePath();break;case"crossRot":v+=pc;case"cross":d=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(i?i/2:g),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+h,r-o),n.lineTo(t-h,r+o);break;case"star":d=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(i?i/2:g),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+h,r-o),n.lineTo(t-h,r+o),v+=pc,d=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(i?i/2:g),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+h,r-o),n.lineTo(t-h,r+o);break;case"line":o=i?i/2:Math.cos(v)*g,a=Math.sin(v)*g,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(v)*(i?i/2:g),r+Math.sin(v)*g);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Rs(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function im(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function sm(n){n.restore()}function $R(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function VR(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function pee(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Be(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function mee(n,e,t,r,i){if(i.strikethrough||i.underline){let s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,u=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,l=i.strikethrough?(u+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,l),n.lineTo(a,l),n.stroke()}}function gee(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Ta(n,e,t,r,i,s={}){let o=wt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",u,c;for(n.save(),n.font=i.string,pee(n,s),u=0;u<o.length;++u)c=o[u],s.backdrop&&gee(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Be(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,r,s.maxWidth)),n.fillText(c,t,r,s.maxWidth),mee(n,t,r,c,s),r+=Number(i.lineHeight);n.restore()}function Md(n,e){let{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ze,Ze,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Ze,Vt,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Vt,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-Vt,!0),n.lineTo(t+o.topLeft,r)}var vee=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,yee=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _ee(n,e){let t=(""+n).match(vee);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var bee=n=>+n||0;function j_(n,e){let t={},r=Ue(e),i=r?Object.keys(e):e,s=Ue(n)?r?o=>Se(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of i)t[o]=bee(s(o));return t}function YS(n){return j_(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Aa(n){return j_(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Mn(n){let e=YS(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Kt(n,e){n=n||{},e=e||Tt.font;let t=Se(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=Se(n.style,e.style);r&&!(""+r).match(yee)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:Se(n.family,e.family),lineHeight:_ee(Se(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Se(n.weight,e.weight),string:""};return i.string=fee(i),i}function kd(n,e,t,r){let i=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&wt(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function jR(n,e,t){let{min:r,max:i}=n,s=PS(e,(i-r)/2),o=(a,u)=>t&&a===0?0:a+u;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function vo(n,e){return Object.assign(Object.create(n),e)}function U_(n,e=[""],t,r,i=()=>n[0]){let s=t||n;typeof r>"u"&&(r=zR("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>U_([a,...n],e,s,r)};return new Proxy(o,{deleteProperty(a,u){return delete a[u],delete a._keys,delete n[0][u],!0},get(a,u){return UR(a,u,()=>Tee(u,e,n,a))},getOwnPropertyDescriptor(a,u){return Reflect.getOwnPropertyDescriptor(a._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,u){return bR(a).includes(u)},ownKeys(a){return bR(a)},set(a,u,c){let l=a._storage||(a._storage=i());return a[u]=l[u]=c,delete a._keys,!0}})}function gc(n,e,t,r){let i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:KS(n,r),setContext:s=>gc(n,s,t,r),override:s=>gc(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return UR(s,o,()=>Eee(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function KS(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:po(t)?t:()=>t,isIndexable:po(r)?r:()=>r}}var wee=(n,e)=>n?n+R_(e):e,QS=(n,e)=>Ue(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function UR(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let r=t();return n[e]=r,r}function Eee(n,e,t){let{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n,a=r[e];return po(a)&&o.isScriptable(e)&&(a=Cee(e,a,n,t)),wt(a)&&a.length&&(a=xee(e,a,n,o.isIndexable)),QS(e,a)&&(a=gc(a,i,s&&s[e],o)),a}function Cee(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let u=e(s,o||r);return a.delete(n),QS(n,u)&&(u=XS(i._scopes,i,n,u)),u}function xee(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(Ue(e[0])){let u=e,c=i._scopes.filter(l=>l!==u);e=[];for(let l of u){let d=XS(c,i,n,l);e.push(gc(d,s,o&&o[n],a))}}return e}function HR(n,e,t){return po(n)?n(e,t):n}var Dee=(n,e)=>n===!0?e:typeof n=="string"?go(e,n):void 0;function See(n,e,t,r,i){for(let s of e){let o=Dee(t,s);if(o){n.add(o);let a=HR(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function XS(n,e,t,r){let i=e._rootScopes,s=HR(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let u=_R(a,o,t,s||t,r);return u===null||typeof s<"u"&&s!==t&&(u=_R(a,o,s,u,r),u===null)?!1:U_(Array.from(a),[""],i,s,()=>Iee(e,t,r))}function _R(n,e,t,r,i){for(;t;)t=See(n,e,t,r,i);return t}function Iee(n,e,t){let r=n._getTarget();e in r||(r[e]={});let i=r[e];return wt(i)&&Ue(t)?t:i||{}}function Tee(n,e,t,r){let i;for(let s of e)if(i=zR(wee(s,n),t),typeof i<"u")return QS(n,i)?XS(t,r,n,i):i}function zR(n,e){for(let t of e){if(!t)continue;let r=t[n];if(typeof r<"u")return r}}function bR(n){let e=n._keys;return e||(e=n._keys=Aee(n._scopes)),e}function Aee(n){let e=new Set;for(let t of n)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function ZS(n,e,t,r){let{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r),a,u,c,l;for(a=0,u=r;a<u;++a)c=a+t,l=e[c],o[a]={r:i.parse(go(l,s),c)};return o}var Mee=Number.EPSILON||1e-14,xd=(n,e)=>e<n.length&&!n[e].skip&&n[e],qR=n=>n==="x"?"y":"x";function kee(n,e,t,r){let i=n.skip?e:n,s=e,o=t.skip?e:t,a=O_(s,i),u=O_(o,s),c=a/(a+u),l=u/(a+u);c=isNaN(c)?0:c,l=isNaN(l)?0:l;let d=r*c,h=r*l;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function Pee(n,e,t){let r=n.length,i,s,o,a,u,c=xd(n,0);for(let l=0;l<r-1;++l)if(u=c,c=xd(n,l+1),!(!u||!c)){if(Id(e[l],0,Mee)){t[l]=t[l+1]=0;continue}i=t[l]/e[l],s=t[l+1]/e[l],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[l]=i*o*e[l],t[l+1]=s*o*e[l])}}function Oee(n,e,t="x"){let r=qR(t),i=n.length,s,o,a,u=xd(n,0);for(let c=0;c<i;++c){if(o=a,a=u,u=xd(n,c+1),!a)continue;let l=a[t],d=a[r];o&&(s=(l-o[t])/3,a[`cp1${t}`]=l-s,a[`cp1${r}`]=d-s*e[c]),u&&(s=(u[t]-l)/3,a[`cp2${t}`]=l+s,a[`cp2${r}`]=d+s*e[c])}}function Nee(n,e="x"){let t=qR(e),r=n.length,i=Array(r).fill(0),s=Array(r),o,a,u,c=xd(n,0);for(o=0;o<r;++o)if(a=u,u=c,c=xd(n,o+1),!!u){if(c){let l=c[e]-u[e];i[o]=l!==0?(c[t]-u[t])/l:0}s[o]=a?c?Yi(i[o-1])!==Yi(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Pee(n,i,s),Oee(n,s,e)}function A_(n,e,t){return Math.max(Math.min(n,t),e)}function Ree(n,e){let t,r,i,s,o,a=Rs(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&Rs(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=A_(i.cp1x,e.left,e.right),i.cp1y=A_(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=A_(i.cp2x,e.left,e.right),i.cp2y=A_(i.cp2y,e.top,e.bottom)))}function WR(n,e,t,r,i){let s,o,a,u;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Nee(n,i);else{let c=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],u=kee(c,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=u.previous.x,a.cp1y=u.previous.y,a.cp2x=u.next.x,a.cp2y=u.next.y,c=a}e.capBezierPoints&&Ree(n,t)}function H_(){return typeof window<"u"&&typeof document<"u"}function z_(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function N_(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}var q_=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Fee(n,e){return q_(n).getPropertyValue(e)}var Lee=["top","right","bottom","left"];function mc(n,e,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let s=Lee[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var Bee=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function $ee(n,e){let t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r,o=!1,a,u;if(Bee(i,s,n.target))a=i,u=s;else{let c=e.getBoundingClientRect();a=r.clientX-c.left,u=r.clientY-c.top,o=!0}return{x:a,y:u,box:o}}function Ma(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:r}=e,i=q_(t),s=i.boxSizing==="border-box",o=mc(i,"padding"),a=mc(i,"border","width"),{x:u,y:c,box:l}=$ee(n,t),d=o.left+(l&&a.left),h=o.top+(l&&a.top),{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((u-d)/f*t.width/r),y:Math.round((c-h)/p*t.height/r)}}function Vee(n,e,t){let r,i;if(e===void 0||t===void 0){let s=n&&z_(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=q_(s),u=mc(a,"border","width"),c=mc(a,"padding");e=o.width-c.width-u.width,t=o.height-c.height-u.height,r=N_(a.maxWidth,s,"clientWidth"),i=N_(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||P_,maxHeight:i||P_}}var Da=n=>Math.round(n*10)/10;function GR(n,e,t,r){let i=q_(n),s=mc(i,"margin"),o=N_(i.maxWidth,n,"clientWidth")||P_,a=N_(i.maxHeight,n,"clientHeight")||P_,u=Vee(n,e,t),{width:c,height:l}=u;if(i.boxSizing==="content-box"){let h=mc(i,"border","width"),f=mc(i,"padding");c-=f.width+h.width,l-=f.height+h.height}return c=Math.max(0,c-s.width),l=Math.max(0,r?c/r:l-s.height),c=Da(Math.min(c,o,u.maxWidth)),l=Da(Math.min(l,a,u.maxHeight)),c&&!l&&(l=Da(c/2)),(e!==void 0||t!==void 0)&&r&&u.height&&l>u.height&&(l=u.height,c=Da(Math.floor(l*r))),{width:c,height:l}}function JS(n,e,t){let r=e||1,i=Da(n.height*r),s=Da(n.width*r);n.height=Da(n.height),n.width=Da(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var YR=(function(){let n=!1;try{let e={get passive(){return n=!0,!1}};H_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function eI(n,e){let t=Fee(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function xa(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function KR(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function QR(n,e,t,r){let i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=xa(n,i,t),a=xa(i,s,t),u=xa(s,e,t),c=xa(o,a,t),l=xa(a,u,t);return xa(c,l,t)}var jee=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},Uee=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function yc(n,e,t){return n?jee(e,t):Uee()}function tI(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function nI(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function XR(n){return n==="angle"?{between:Td,compare:see,normalize:Tn}:{between:Ls,compare:(e,t)=>e-t,normalize:e=>e}}function wR({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function Hee(n,e,t){let{property:r,start:i,end:s}=t,{between:o,normalize:a}=XR(r),u=e.length,{start:c,end:l,loop:d}=n,h,f;if(d){for(c+=u,l+=u,h=0,f=u;h<f&&o(a(e[c%u][r]),i,s);++h)c--,l--;c%=u,l%=u}return l<c&&(l+=u),{start:c,end:l,loop:d,style:n.style}}function rI(n,e,t){if(!t)return[n];let{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:u,normalize:c}=XR(r),{start:l,end:d,loop:h,style:f}=Hee(n,e,t),p=[],g=!1,v=null,y,E,M,T=()=>u(i,M,y)&&a(i,M)!==0,R=()=>a(s,y)===0||u(s,M,y),U=()=>g||T(),q=()=>!g||R();for(let H=l,K=l;H<=d;++H)E=e[H%o],!E.skip&&(y=c(E[r]),y!==M&&(g=u(y,i,s),v===null&&U()&&(v=a(y,i)===0?H:K),v!==null&&q()&&(p.push(wR({start:v,end:H,loop:h,count:o,style:f})),v=null),K=H,M=y));return v!==null&&p.push(wR({start:v,end:d,loop:h,count:o,style:f})),p}function iI(n,e){let t=[],r=n.segments;for(let i=0;i<r.length;i++){let s=rI(r[i],n.points,e);s.length&&t.push(...s)}return t}function zee(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function qee(n,e,t,r){let i=n.length,s=[],o=e,a=n[e],u;for(u=e+1;u<=t;++u){let c=n[u%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(u-1)%i,loop:r}),e=o=c.stop?u:null):(o=u,a.skip&&(e=u)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function ZR(n,e){let t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];let s=!!n._loop,{start:o,end:a}=zee(t,i,s,r);if(r===!0)return ER(n,[{start:o,end:a,loop:s}],t,e);let u=a<o?a+i:a,c=!!n._fullLoop&&o===0&&a===i-1;return ER(n,qee(t,o,u,c),t,e)}function ER(n,e,t,r){return!r||!r.setContext||!t?e:Wee(n,e,t,r)}function Wee(n,e,t,r){let i=n._chart.getContext(),s=CR(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,u=t.length,c=[],l=s,d=e[0].start,h=d;function f(p,g,v,y){let E=a?-1:1;if(p!==g){for(p+=u;t[p%u].skip;)p-=E;for(;t[g%u].skip;)g+=E;p%u!==g%u&&(c.push({start:p%u,end:g%u,loop:v,style:y}),l=y,d=g%u)}}for(let p of e){d=a?d:p.start;let g=t[d%u],v;for(h=d+1;h<=p.end;h++){let y=t[h%u];v=CR(r.setContext(vo(i,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%u,p1DataIndex:h%u,datasetIndex:o}))),Gee(v,l)&&f(d,h-1,p.loop,l),g=y,l=v}d<h-1&&f(d,h-1,p.loop,l)}return c}function CR(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Gee(n,e){if(!e)return!1;let t=[],r=function(i,s){return zS(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function M_(n,e,t){return n.options.clip?n[t]:e[t]}function Yee(n,e){let{xScale:t,yScale:r}=n;return t&&r?{left:M_(t,e,"left"),right:M_(t,e,"right"),top:M_(r,e,"top"),bottom:M_(r,e,"bottom")}:e}function sI(n,e){let t=e._clip;if(t.disabled)return!1;let r=Yee(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}var vI=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){let s=t.listeners[i],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=VS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let s=r.items,o=s.length-1,a=!1,u;for(;o>=0;--o)u=s[o],u._active?(u._total>r.duration&&(r.duration=u._total),u.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},yo=new vI,JR="transparent",Kee={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let r=qS(n||JR),i=r.valid&&qS(e||JR);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}},yI=class{constructor(e,t,r,i){let s=t[r];i=kd([e.to,i,s,e.from]);let o=kd([e.from,s,i]);this._active=!0,this._fn=e.fn||Kee[e.type||typeof o],this._easing=Ed[e.easing]||Ed.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=kd([e.to,t,i,e.from]),this._from=kd([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to,u;if(this._active=s!==a&&(o||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=s;return}u=t/r%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(s,a,u)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){let t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},eb=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ue(e))return;let t=Object.keys(Tt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let s=e[i];if(!Ue(s))return;let o={};for(let a of t)o[a]=s[a];(wt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){let r=t.options,i=Xee(e,r);if(!i)return[];let s=this._createAnimations(i,r);return r.$shared&&Qee(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){let r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),u;for(u=o.length-1;u>=0;--u){let c=o[u];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,t));continue}let l=t[c],d=s[c],h=r.get(c);if(d)if(h&&d.active()){d.update(h,l,a);continue}else d.cancel();if(!h||!h.duration){e[c]=l;continue}s[c]=d=new yI(h,e,c,l),i.push(d)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let r=this._createAnimations(e,t);if(r.length)return yo.add(this._chart,r),!0}};function Qee(n,e){let t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function Xee(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function eF(n,e){let t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function Zee(n,e,t){if(t===!1)return!1;let r=eF(n,t),i=eF(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Jee(n){let e,t,r,i;return Ue(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function JF(n,e){let t=[],r=n._getSortedDatasetMetas(e),i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function tF(n,e,t,r={}){let i=n.keys,s=r.mode==="single",o,a,u,c;if(e===null)return;let l=!1;for(o=0,a=i.length;o<a;++o){if(u=+i[o],u===t){if(l=!0,r.all)continue;break}c=n.values[u],Ft(c)&&(s||e===0||Yi(e)===Yi(c))&&(e+=c)}return!l&&!r.all?0:e}function ete(n,e){let{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),u,c,l;for(u=0,c=o.length;u<c;++u)l=o[u],a[u]={[i]:l,[s]:n[l]};return a}function oI(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function tte(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function nte(n){let{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function rte(n,e,t){let r=n[e]||(n[e]={});return r[t]||(r[t]={})}function nF(n,e,t,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function rF(n,e){let{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,u=s.axis,c=o.axis,l=tte(s,o,r),d=e.length,h;for(let f=0;f<d;++f){let p=e[f],{[u]:g,[c]:v}=p,y=p._stacks||(p._stacks={});h=y[c]=rte(i,l,g),h[a]=v,h._top=nF(h,o,!0,r.type),h._bottom=nF(h,o,!1,r.type);let E=h._visualValues||(h._visualValues={});E[a]=v}}function aI(n,e){let t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function ite(n,e){return vo(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function ste(n,e,t){return vo(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function om(n,e){let t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(let i of e){let s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}var uI=n=>n==="reset"||n==="none",iF=(n,e)=>e?n:Object.assign({},n),ote=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:JF(t,!0),values:null},Pa=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=oI(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&om(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,o=r.xAxisID=Se(i.xAxisID,aI(t,"x")),a=r.yAxisID=Se(i.yAxisID,aI(t,"y")),u=r.rAxisID=Se(i.rAxisID,aI(t,"r")),c=r.indexAxis,l=r.iAxisID=s(c,o,a,u),d=r.vAxisID=s(c,a,o,u);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(u),r.iScale=this.getScaleForId(l),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&BS(this._data,this),t._stacked&&om(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(Ue(r)){let s=this._cachedMeta;this._data=ete(r,s)}else if(i!==r){if(i){BS(i,this);let s=this._cachedMeta;om(s),s._parsed=[]}r&&Object.isExtensible(r)&&NR(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let o=r._stacked;r._stacked=oI(r.vScale,r),r.stack!==i.stack&&(s=!0,om(r),r.stack=i.stack),this._resyncElements(t),(s||o!==r._stacked)&&(rF(this,r._parsed),r._stacked=oI(r.vScale,r))}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,u=o.axis,c=t===0&&r===s.length?!0:i._sorted,l=t>0&&i._parsed[t-1],d,h,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{wt(s[t])?f=this.parseArrayData(i,s,t,r):Ue(s[t])?f=this.parseObjectData(i,s,t,r):f=this.parsePrimitiveData(i,s,t,r);let p=()=>h[u]===null||l&&h[u]<l[u];for(d=0;d<r;++d)i._parsed[d+t]=h=f[d],c&&(p()&&(c=!1),l=h);i._sorted=c}a&&rF(this,f)}parsePrimitiveData(t,r,i,s){let{iScale:o,vScale:a}=t,u=o.axis,c=a.axis,l=o.getLabels(),d=o===a,h=new Array(s),f,p,g;for(f=0,p=s;f<p;++f)g=f+i,h[f]={[u]:d||o.parse(l[g],g),[c]:a.parse(r[g],g)};return h}parseArrayData(t,r,i,s){let{xScale:o,yScale:a}=t,u=new Array(s),c,l,d,h;for(c=0,l=s;c<l;++c)d=c+i,h=r[d],u[c]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return u}parseObjectData(t,r,i,s){let{xScale:o,yScale:a}=t,{xAxisKey:u="x",yAxisKey:c="y"}=this._parsing,l=new Array(s),d,h,f,p;for(d=0,h=s;d<h;++d)f=d+i,p=r[f],l[d]={x:o.parse(go(p,u),f),y:a.parse(go(p,c),f)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let s=this.chart,o=this._cachedMeta,a=r[t.axis],u={keys:JF(s,!0),values:r._stacks[t.axis]._visualValues};return tF(u,a,o.index,{mode:i})}updateRangeFromParsed(t,r,i,s){let o=i[r.axis],a=o===null?NaN:o,u=s&&i._stacks[r.axis];s&&u&&(s.values=u,a=tF(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,a=s.length,u=this._getOtherScale(t),c=ote(r,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=nte(u),f,p;function g(){p=s[f];let v=p[u.axis];return!Ft(p[t.axis])||d>v||h<v}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(l,t,p,c),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(l,t,p,c);break}}return l}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][t.axis],Ft(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=Jee(Se(this.options.clip,Zee(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],u=this._drawStart||0,c=this._drawCount||s.length-u,l=this.options.drawActiveElementsOnTop,d;for(i.dataset&&i.dataset.draw(t,o,u,c),d=u;d<u+c;++d){let h=s[d];h.hidden||(h.active&&l?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=ste(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=ite(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let s=r==="active",o=this._cachedDataOpts,a=t+"-"+r,u=o[a],c=this.enableOptionSharing&&Sd(i);if(u)return iF(u,c);let l=this.chart.config,d=l.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=l.getOptionScopes(this.getDataset(),d),p=Object.keys(Tt.elements[t]),g=()=>this.getContext(i,s,r),v=l.resolveNamedOptions(f,p,g,h);return v.$shared&&(v.$shared=c,o[a]=Object.freeze(iF(v,c))),v}_resolveAnimations(t,r,i){let s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,u=o[a];if(u)return u;let c;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,r),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(t,i,r))}let l=new eb(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||uI(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(t,r,i,s){uI(s)?Object.assign(t,i):this._resolveAnimations(r,s).update(t,i)}updateSharedOptions(t,r,i){t&&!uI(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,s){t.active=s;let o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[u,c,l]of this._syncList)this[u](c,l);this._syncList=[];let s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,r,i=!0){let s=this._cachedMeta,o=s.data,a=t+r,u,c=l=>{for(l.length+=r,u=l.length-1;u>=a;u--)l[u]=l[u-r]};for(c(o),u=t;u<a;++u)o[u]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,r),i&&this.updateElements(o,t,r,"reset")}updateElements(t,r,i,s){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(t,r);i._stacked&&om(i,s)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,s]=t;this[r](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function ate(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=$S(r.sort((i,s)=>i-s))}return n._cache.$bar}function ute(n){let e=n.iScale,t=ate(e,n.type),r=e._length,i,s,o,a,u=()=>{o===32767||o===-32768||(Sd(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),u();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),u();return r}function cte(n,e,t,r){let i=t.barThickness,s,o;return Be(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}function lte(n,e,t,r){let i=e.pixels,s=i[n],o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,u=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let c=s-(s-Math.min(o,a))/2*u;return{chunk:Math.abs(a-o)/2*u/r,ratio:t.barPercentage,start:c}}function dte(n,e,t,r){let i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s),u=o,c=a;Math.abs(o)>Math.abs(a)&&(u=a,c=o),e[t.axis]=c,e._custom={barStart:u,barEnd:c,start:i,end:s,min:o,max:a}}function eL(n,e,t,r){return wt(n)?dte(n,e,t,r):e[t.axis]=t.parse(n,r),e}function sF(n,e,t,r){let i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,u=[],c,l,d,h;for(c=t,l=t+r;c<l;++c)h=e[c],d={},d[i.axis]=a||i.parse(o[c],c),u.push(eL(h,d,s,c));return u}function cI(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function hte(n,e,t){return n!==0?Yi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function fte(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}function pte(n,e,t,r){let i=e.borderSkipped,s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:u,top:c,bottom:l}=fte(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=c:(t._bottom||0)===r?i=l:(s[oF(l,o,a,u)]=!0,i=c)),s[oF(i,o,a,u)]=!0,n.borderSkipped=s}function oF(n,e,t,r){return r?(n=mte(n,e,t),n=aF(n,t,e)):n=aF(n,e,t),n}function mte(n,e,t){return n===e?t:n===t?e:n}function aF(n,e,t){return n==="start"?e:n==="end"?t:n}function gte(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var vte=(()=>{class n extends Pa{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,s){return sF(t,r,i,s)}parseArrayData(t,r,i,s){return sF(t,r,i,s)}parseObjectData(t,r,i,s){let{iScale:o,vScale:a}=t,{xAxisKey:u="x",yAxisKey:c="y"}=this._parsing,l=o.axis==="x"?u:c,d=a.axis==="x"?u:c,h=[],f,p,g,v;for(f=i,p=i+s;f<p;++f)v=r[f],g={},g[o.axis]=o.parse(go(v,l),f),h.push(eL(go(v,d),g,a,f));return h}updateRangeFromParsed(t,r,i,s){super.updateRangeFromParsed(t,r,i,s);let o=i._custom;o&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(t),a=o._custom,u=cI(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:u}}=this,c=u.getBasePixel(),l=u.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,s);for(let p=r;p<r+i;p++){let g=this.getParsed(p),v=o||Be(g[u.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,d),E=(g._stacks||{})[u.axis],M={horizontal:l,base:v.base,enableBorderRadius:!E||cI(g._custom)||a===E._top||a===E._bottom,x:l?v.head:y.center,y:l?y.center:v.head,height:l?y.size:Math.abs(v.size),width:l?Math.abs(v.size):y.size};f&&(M.options=h||this.resolveDataElementOptions(p,t[p].active?"active":s));let T=M.options||t[p].options;pte(M,T,E,a),gte(M,T,d.ratio),this.updateElement(t[p],p,M,s)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=i.options.stacked,a=[],u=this._cachedMeta.controller.getParsed(r),c=u&&u[i.axis],l=d=>{let h=d._parsed.find(p=>p[i.axis]===c),f=h&&h[d.vScale.axis];if(Be(f)||isNaN(f))return!0};for(let d of s)if(!(r!==void 0&&l(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){let t={},r=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[Se(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){let s=this._getStacks(t,i),o=r!==void 0?s.indexOf(r):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,s=[],o,a;for(o=0,a=r.data.length;o<a;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));let u=t.barThickness;return{min:u||ute(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:u?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:o,minBarLength:a}}=this,u=o||0,c=this.getParsed(t),l=c._custom,d=cI(l),h=c[r.axis],f=0,p=i?this.applyStack(r,c,i):h,g,v;p!==h&&(f=p-h,p=h),d&&(h=l.barStart,p=l.barEnd-l.barStart,h!==0&&Yi(h)!==Yi(l.barEnd)&&(f=0),f+=h);let y=!Be(o)&&!d?o:f,E=r.getPixelForValue(y);if(this.chart.getDataVisibility(t)?g=r.getPixelForValue(f+p):g=E,v=g-E,Math.abs(v)<a){v=hte(v,r,u)*a,h===u&&(E-=v/2);let M=r.getPixelForDecimal(0),T=r.getPixelForDecimal(1),R=Math.min(M,T),U=Math.max(M,T);E=Math.max(Math.min(E,U),R),g=E+v,i&&!d&&(c._stacks[r.axis]._visualValues[s]=r.getValueForPixel(g)-r.getValueForPixel(E))}if(E===r.getPixelForValue(u)){let M=Yi(v)*r.getLineWidthForValue(u)/2;E+=M,v-=M}return{size:v,base:E,head:g,center:g+v/2}}_calculateBarIndexPixels(t,r){let i=r.scale,s=this.options,o=s.skipNull,a=Se(s.maxBarThickness,1/0),u,c,l=this._getAxisCount();if(r.grouped){let d=o?this._getStackCount(t):r.stackCount,h=s.barThickness==="flex"?lte(t,r,s,d*l):cte(t,r,s,d*l),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(Se(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+p;u=h.start+h.chunk*g+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else u=i.getPixelForValue(this.getParsed(t)[i.axis],t),c=Math.min(a,r.min*r.ratio);return{base:u-c/2,head:u+c/2,center:u,size:c}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,s=i.length,o=0;for(;o<s;++o)this.getParsed(o)[r.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}return n})(),yte=(()=>{class n extends Pa{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,s){let o=super.parsePrimitiveData(t,r,i,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+i).radius;return o}parseArrayData(t,r,i,s){let o=super.parseArrayData(t,r,i,s);for(let a=0;a<o.length;a++){let u=r[i+a];o[a]._custom=Se(u[2],this.resolveDataElementOptions(a+i).radius)}return o}parseObjectData(t,r,i,s){let o=super.parseObjectData(t,r,i,s);for(let a=0;a<o.length;a++){let u=r[i+a];o[a]._custom=Se(u&&u.r&&+u.r,this.resolveDataElementOptions(a+i).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),u=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),l=a._custom;return{label:i[t]||"",value:"("+u+", "+c+(l?", "+l:"")+")"}}update(t){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:u}=this._cachedMeta,{sharedOptions:c,includeOptions:l}=this._getSharedOptions(r,s),d=a.axis,h=u.axis;for(let f=r;f<r+i;f++){let p=t[f],g=!o&&this.getParsed(f),v={},y=v[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[d]),E=v[h]=o?u.getBasePixel():u.getPixelForValue(g[h]);v.skip=isNaN(y)||isNaN(E),l&&(v.options=c||this.resolveDataElementOptions(f,p.active?"active":s),o&&(v.options.radius=0)),this.updateElement(p,f,v,s)}}resolveDataElementOptions(t,r){let i=this.getParsed(t),s=super.resolveDataElementOptions(t,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return r!=="active"&&(s.radius=0),s.radius+=Se(i&&i._custom,o),s}}return n})();function _te(n,e,t){let r=1,i=1,s=0,o=0;if(e<Et){let a=n,u=a+e,c=Math.cos(a),l=Math.sin(a),d=Math.cos(u),h=Math.sin(u),f=(M,T,R)=>Td(M,a,u,!0)?1:Math.max(T,T*t,R,R*t),p=(M,T,R)=>Td(M,a,u,!0)?-1:Math.min(T,T*t,R,R*t),g=f(0,c,d),v=f(Vt,l,h),y=p(Ze,c,d),E=p(Ze+Vt,l,h);r=(g-y)/2,i=(v-E)/2,s=-(g+y)/2,o=-(v+E)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}var BI=(()=>{class n extends Pa{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data,{labels:{pointStyle:i,textAlign:s,color:o,useBorderRadius:a,borderRadius:u}}=t.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((c,l)=>{let h=t.getDatasetMeta(0).controller.getStyle(l);return{text:c,fillStyle:h.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(l),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:s,pointStyle:i,borderRadius:a&&(u||h.borderRadius),index:l}}):[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){let i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=c=>+i[c];if(Ue(i[t])){let{key:c="value"}=this._parsing;o=l=>+go(i[l],c)}let a,u;for(a=t,u=t+r;a<u;++a)s._parsed[a]=o(a)}}_getRotation(){return Ci(this.options.rotation-90)}_getCircumference(){return Ci(this.options.circumference)}_getRotationExtents(){let t=Et,r=-Et;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),r=Math.max(r,o+a)}return{rotation:t,circumference:r-t}}update(t){let r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-a)/2,0),c=Math.min(DR(this.options.cutout,u),1),l=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:v}=_te(h,d,c),y=(i.width-a)/f,E=(i.height-a)/p,M=Math.max(Math.min(y,E)/2,0),T=PS(this.options.radius,M),R=Math.max(T*c,0),U=(T-R)/this._getVisibleDatasetWeightTotal();this.offsetX=g*T,this.offsetY=v*T,s.total=this.calculateTotal(),this.outerRadius=T-U*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-U*l,0),this.updateElements(o,0,o.length,t)}_circumference(t,r){let i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/Et)}updateElements(t,r,i,s){let o=s==="reset",a=this.chart,u=a.chartArea,l=a.options.animation,d=(u.left+u.right)/2,h=(u.top+u.bottom)/2,f=o&&l.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:v,includeOptions:y}=this._getSharedOptions(r,s),E=this._getRotation(),M;for(M=0;M<r;++M)E+=this._circumference(M,o);for(M=r;M<r+i;++M){let T=this._circumference(M,o),R=t[M],U={x:d+this.offsetX,y:h+this.offsetY,startAngle:E,endAngle:E+T,circumference:T,outerRadius:g,innerRadius:p};y&&(U.options=v||this.resolveDataElementOptions(M,R.active?"active":s)),E+=T,this.updateElement(R,M,U,s)}}calculateTotal(){let t=this._cachedMeta,r=t.data,i=0,s;for(s=0;s<r.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){let r=this._cachedMeta.total;return r>0&&!isNaN(t)?Et*(Math.abs(t)/r):0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=Ad(r._parsed[t],i.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let r=0,i=this.chart,s,o,a,u,c;if(!t){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),t=a.data,u=a.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)c=u.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,s=t.length;i<s;++i){let o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(Se(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),bte=(()=>{class n extends Pa{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,a=this.chart._animationsDisabled,{start:u,count:c}=US(r,s,a);this._drawStart=u,this._drawCount=c,HS(r)&&(u=0,c=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;let l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:l},t),this.updateElements(s,u,c,t)}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:u,_stacked:c,_dataset:l}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(r,s),f=a.axis,p=u.axis,{spanGaps:g,segment:v}=this.options,y=vc(g)?g:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||s==="none",M=r+i,T=t.length,R=r>0&&this.getParsed(r-1);for(let U=0;U<T;++U){let q=t[U],H=E?q:{};if(U<r||U>=M){H.skip=!0;continue}let K=this.getParsed(U),pe=Be(K[p]),Ce=H[f]=a.getPixelForValue(K[f],U),De=H[p]=o||pe?u.getBasePixel():u.getPixelForValue(c?this.applyStack(u,K,c):K[p],U);H.skip=isNaN(Ce)||isNaN(De)||pe,H.stop=U>0&&Math.abs(K[f]-R[f])>y,v&&(H.parsed=K,H.raw=l.data[U]),h&&(H.options=d||this.resolveDataElementOptions(U,q.active?"active":s)),E||this.updateElement(q,U,H,s),R=K}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,s=t.data||[];if(!s.length)return i;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),tL=(()=>{class n extends Pa{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:s}}=t.legend.options;return r.labels.map((o,a)=>{let c=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=Ad(r._parsed[t].r,i.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,r,i,s){return ZS.bind(this)(t,r,i,s)}update(t){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){let t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){let t=this.chart,r=t.chartArea,i=t.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),a=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),u=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(t,r,i,s){let o=s==="reset",a=this.chart,c=a.options.animation,l=this._cachedMeta.rScale,d=l.xCenter,h=l.yCenter,f=l.getIndexAngle(0)-.5*Ze,p=f,g,v=360/this.countVisibleElements();for(g=0;g<r;++g)p+=this._computeAngle(g,s,v);for(g=r;g<r+i;g++){let y=t[g],E=p,M=p+this._computeAngle(g,s,v),T=a.getDataVisibility(g)?l.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=M,o&&(c.animateScale&&(T=0),c.animateRotate&&(E=M=f));let R={x:d,y:h,innerRadius:0,outerRadius:T,startAngle:E,endAngle:M,options:this.resolveDataElementOptions(g,y.active?"active":s)};this.updateElement(y,g,R,s)}}countVisibleElements(){let t=this._cachedMeta,r=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?Ci(this.resolveDataElementOptions(t,r).angle||i):0}}return n})(),wte=(()=>{class n extends BI{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),Ete=(()=>{class n extends Pa{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,s){return ZS.bind(this)(t,r,i,s)}update(t){let r=this._cachedMeta,i=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(i.points=s,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let u={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(i,void 0,u,t)}this.updateElements(s,0,s.length,t)}updateElements(t,r,i,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let u=r;u<r+i;u++){let c=t[u],l=this.resolveDataElementOptions(u,c.active?"active":s),d=o.getPointPositionForValue(u,this.getParsed(u).r),h=a?o.xCenter:d.x,f=a?o.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:l};this.updateElement(c,u,p,s)}}}return n})(),Cte=(()=>{class n extends Pa{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),u=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:i[t]||"",value:"("+u+", "+c+")"}}update(t){let r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled,{start:o,count:a}=US(r,i,s);if(this._drawStart=o,this._drawCount=a,HS(r)&&(o=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:u,_dataset:c}=r;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!c._decimated,u.points=i;let l=this.resolveDatasetElementOptions(t);l.segment=this.options.segment,this.updateElement(u,void 0,{animated:!s,options:l},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,o,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:u,_stacked:c,_dataset:l}=this._cachedMeta,d=this.resolveDataElementOptions(r,s),h=this.getSharedOptions(d),f=this.includeOptions(s,h),p=a.axis,g=u.axis,{spanGaps:v,segment:y}=this.options,E=vc(v)?v:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||o||s==="none",T=r>0&&this.getParsed(r-1);for(let R=r;R<r+i;++R){let U=t[R],q=this.getParsed(R),H=M?U:{},K=Be(q[g]),pe=H[p]=a.getPixelForValue(q[p],R),Ce=H[g]=o||K?u.getBasePixel():u.getPixelForValue(c?this.applyStack(u,q,c):q[g],R);H.skip=isNaN(pe)||isNaN(Ce)||K,H.stop=R>0&&Math.abs(q[p]-T[p])>E,y&&(H.parsed=q,H.raw=l.data[R]),f&&(H.options=h||this.resolveDataElementOptions(R,U.active?"active":s)),M||this.updateElement(U,R,H,s),T=q}this.updateSharedOptions(h,s,d)}getMaxOverflow(){let t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let u=0;for(let c=r.length-1;c>=0;--c)u=Math.max(u,r[c].size(this.resolveDataElementOptions(c))/2);return u>0&&u}let i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;let o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}}return n})(),xte=Object.freeze({__proto__:null,BarController:vte,BubbleController:yte,DoughnutController:BI,LineController:bte,PieController:wte,PolarAreaController:tL,RadarController:Ete,ScatterController:Cte});function _c(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var _I=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return _c()}parse(){return _c()}format(){return _c()}add(){return _c()}diff(){return _c()}startOf(){return _c()}endOf(){return _c()}},Dte={_date:_I};function Ste(n,e,t,r){let{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let c=a._reversePixels?kR:Ns;if(r){if(i._sharedOptions){let l=s[0],d=typeof l.getRange=="function"&&l.getRange(e);if(d){let h=c(s,e,t-d),f=c(s,e,t+d);return{lo:h.lo,hi:f.hi}}}}else{let l=c(s,e,t);if(u){let{vScale:d}=i._cachedMeta,{_parsed:h}=n,f=h.slice(0,l.lo+1).reverse().findIndex(g=>!Be(g[d.axis]));l.lo-=Math.max(0,f);let p=h.slice(l.hi).findIndex(g=>!Be(g[d.axis]));l.hi+=Math.max(0,p)}return l}}return{lo:0,hi:s.length-1}}function gm(n,e,t,r,i){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,u=s.length;a<u;++a){let{index:c,data:l}=s[a],{lo:d,hi:h}=Ste(s[a],e,o,i);for(let f=d;f<=h;++f){let p=l[f];p.skip||r(p,c,f)}}}function Ite(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){let s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function lI(n,e,t,r,i){let s=[];return!i&&!n.isPointInArea(e)||gm(n,t,e,function(a,u,c){!i&&!Rs(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:u,index:c})},!0),s}function Tte(n,e,t,r){let i=[];function s(o,a,u){let{startAngle:c,endAngle:l}=o.getProps(["startAngle","endAngle"],r),{angle:d}=LS(o,{x:e.x,y:e.y});Td(d,c,l)&&i.push({element:o,datasetIndex:a,index:u})}return gm(n,t,e,s),i}function Ate(n,e,t,r,i,s){let o=[],a=Ite(t),u=Number.POSITIVE_INFINITY;function c(l,d,h){let f=l.inRange(e.x,e.y,i);if(r&&!f)return;let p=l.getCenterPoint(i);if(!(!!s||n.isPointInArea(p))&&!f)return;let v=a(e,p);v<u?(o=[{element:l,datasetIndex:d,index:h}],u=v):v===u&&o.push({element:l,datasetIndex:d,index:h})}return gm(n,t,e,c),o}function dI(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?Tte(n,e,t,i):Ate(n,e,t,r,i,s)}function uF(n,e,t,r,i){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return gm(n,t,e,(u,c,l)=>{u[o]&&u[o](e[t],i)&&(s.push({element:u,datasetIndex:c,index:l}),a=a||u.inRange(e.x,e.y,i))}),r&&!a?[]:s}var Mte={evaluateInteractionItems:gm,modes:{index(n,e,t,r){let i=Ma(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?lI(n,i,s,r,o):dI(n,i,s,!1,r,o),u=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let l=a[0].index,d=c.data[l];d&&!d.skip&&u.push({element:d,datasetIndex:c.index,index:l})}),u):[]},dataset(n,e,t,r){let i=Ma(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?lI(n,i,s,r,o):dI(n,i,s,!1,r,o);if(a.length>0){let u=a[0].datasetIndex,c=n.getDatasetMeta(u).data;a=[];for(let l=0;l<c.length;++l)a.push({element:c[l],datasetIndex:u,index:l})}return a},point(n,e,t,r){let i=Ma(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return lI(n,i,s,r,o)},nearest(n,e,t,r){let i=Ma(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return dI(n,i,s,t.intersect,r,o)},x(n,e,t,r){let i=Ma(e,n);return uF(n,i,"x",t.intersect,r)},y(n,e,t,r){let i=Ma(e,n);return uF(n,i,"y",t.intersect,r)}}},nL=["left","top","right","bottom"];function am(n,e){return n.filter(t=>t.pos===e)}function cF(n,e){return n.filter(t=>nL.indexOf(t.pos)===-1&&t.box.axis===e)}function um(n,e){return n.sort((t,r)=>{let i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function kte(n){let e=[],t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function Pte(n){let e={};for(let t of n){let{stack:r,pos:i,stackWeight:s}=t;if(!r||!nL.includes(i))continue;let o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Ote(n,e){let t=Pte(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:u}=a.box,c=t[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*r:u&&e.availableWidth,a.height=i):(a.width=r,a.height=l?l*i:u&&e.availableHeight)}return t}function Nte(n){let e=kte(n),t=um(e.filter(c=>c.box.fullSize),!0),r=um(am(e,"left"),!0),i=um(am(e,"right")),s=um(am(e,"top"),!0),o=um(am(e,"bottom")),a=cF(e,"x"),u=cF(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(u).concat(o).concat(a),chartArea:am(e,"chartArea"),vertical:r.concat(i).concat(u),horizontal:s.concat(o).concat(a)}}function lF(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function rL(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Rte(n,e,t,r){let{pos:i,box:s}=t,o=n.maxPadding;if(!Ue(i)){t.size&&(n[i]-=t.size);let d=r[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[i]+=t.size}s.getPadding&&rL(o,s.getPadding());let a=Math.max(0,e.outerWidth-lF(o,n,"left","right")),u=Math.max(0,e.outerHeight-lF(o,n,"top","bottom")),c=a!==n.w,l=u!==n.h;return n.w=a,n.h=u,t.horizontal?{same:c,other:l}:{same:l,other:c}}function Fte(n){let e=n.maxPadding;function t(r){let i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Lte(n,e){let t=e.maxPadding;function r(i){let s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function dm(n,e,t,r){let i=[],s,o,a,u,c,l;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],u=a.box,u.update(a.width||e.w,a.height||e.h,Lte(a.horizontal,e));let{same:d,other:h}=Rte(e,t,a,r);c|=d&&i.length,l=l||h,u.fullSize||i.push(a)}return c&&dm(i,e,t,r)||l}function W_(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function dF(n,e,t,r){let i=t.padding,{x:s,y:o}=e;for(let a of n){let u=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/c.weight||1;if(a.horizontal){let d=e.w*l,h=c.size||u.height;Sd(c.start)&&(o=c.start),u.fullSize?W_(u,i.left,o,t.outerWidth-i.right-i.left,h):W_(u,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=u.bottom}else{let d=e.h*l,h=c.size||u.width;Sd(c.start)&&(s=c.start),u.fullSize?W_(u,s,i.top,h,t.outerHeight-i.bottom-i.top):W_(u,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=u.right}}e.x=s,e.y=o}var Un={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;let i=Mn(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=Nte(n.boxes),u=a.vertical,c=a.horizontal;lt(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let l=u.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/l,hBoxMaxHeight:o/2}),h=Object.assign({},i);rL(h,Mn(r));let f=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),p=Ote(u.concat(c),d);dm(a.fullSize,f,d,p),dm(u,f,d,p),dm(c,f,d,p)&&dm(u,f,d,p),Fte(f),dF(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,dF(a.rightAndBottom,f,d,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},lt(a.chartArea,g=>{let v=g.box;Object.assign(v,n.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},tb=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}},bI=class extends tb{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Z_="$chartjs",Bte={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hF=n=>n===null||n==="";function $te(n,e){let t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Z_]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",hF(i)){let s=eI(n,"width");s!==void 0&&(n.width=s)}if(hF(r))if(n.style.height==="")n.height=n.width/(e||2);else{let s=eI(n,"height");s!==void 0&&(n.height=s)}return n}var iL=YR?{passive:!0}:!1;function Vte(n,e,t){n&&n.addEventListener(e,t,iL)}function jte(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,iL)}function Ute(n,e){let t=Bte[n.type]||n.type,{x:r,y:i}=Ma(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function nb(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function Hte(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||nb(a.addedNodes,r),o=o&&!nb(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function zte(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||nb(a.removedNodes,r),o=o&&!nb(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var fm=new Map,fF=0;function sL(){let n=window.devicePixelRatio;n!==fF&&(fF=n,fm.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function qte(n,e){fm.size||window.addEventListener("resize",sL),fm.set(n,e)}function Wte(n){fm.delete(n),fm.size||window.removeEventListener("resize",sL)}function Gte(n,e,t){let r=n.canvas,i=r&&z_(r);if(!i)return;let s=jS((a,u)=>{let c=i.clientWidth;t(a,u),c<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{let u=a[0],c=u.contentRect.width,l=u.contentRect.height;c===0&&l===0||s(c,l)});return o.observe(i),qte(n,s),o}function hI(n,e,t){t&&t.disconnect(),e==="resize"&&Wte(n)}function Yte(n,e,t){let r=n.canvas,i=jS(s=>{n.ctx!==null&&t(Ute(s,n))},n);return Vte(r,e,i),i}var wI=class extends tb{acquireContext(e,t){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?($te(e,t),r):null}releaseContext(e){let t=e.canvas;if(!t[Z_])return!1;let r=t[Z_].initial;["height","width"].forEach(s=>{let o=r[s];Be(o)?t.removeAttribute(s):t.setAttribute(s,o)});let i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[Z_],!0}addEventListener(e,t,r){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),o={attach:Hte,detach:zte,resize:Gte}[t]||Yte;i[t]=o(e,t,r)}removeEventListener(e,t){let r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:hI,detach:hI,resize:hI}[t]||jte)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return GR(e,t,r,i)}isAttached(e){let t=e&&z_(e);return!!(t&&t.isConnected)}};function Kte(n){return!H_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?bI:wI}var Ki=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return vc(this.x)&&vc(this.y)}getProps(e,t){let r=this.$animations;if(!t||!r)return this;let i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function Qte(n,e){let t=n.options.ticks,r=Xte(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?Jte(e):[],o=s.length,a=s[0],u=s[o-1],c=[];if(o>i)return ene(e,c,s,o/i),c;let l=Zte(s,e,i);if(o>0){let d,h,f=o>1?Math.round((u-a)/(o-1)):null;for(G_(e,c,l,Be(f)?0:a-f,a),d=0,h=o-1;d<h;d++)G_(e,c,l,s[d],s[d+1]);return G_(e,c,l,u,Be(f)?e.length:u+f),c}return G_(e,c,l),c}function Xte(n){let e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function Zte(n,e,t){let r=tne(n),i=e.length/t;if(!r)return Math.max(i,1);let s=TR(r);for(let o=0,a=s.length-1;o<a;o++){let u=s[o];if(u>i)return u}return Math.max(i,1)}function Jte(n){let e=[],t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function ene(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function G_(n,e,t,r,i){let s=Se(r,0),o=Math.min(Se(i,n.length),n.length),a=0,u,c,l;for(t=Math.ceil(t),i&&(u=i-r,t=u/Math.floor(u/t)),l=s;l<0;)a++,l=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===l&&(e.push(n[c]),a++,l=Math.round(s+a*t))}function tne(n){let e=n.length,t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}var nne=n=>n==="left"?"right":n==="right"?"left":n,pF=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,mF=(n,e)=>Math.min(e||n,n);function gF(n,e){let t=[],r=n.length/e,i=n.length,s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function rne(n,e,t){let r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6,u=n.getPixelForTick(i),c;if(!(t&&(r===1?c=Math.max(u-s,o-u):e===0?c=(n.getPixelForTick(1)-u)/2:c=(u-n.getPixelForTick(i-1))/2,u+=i<e?c:-c,u<s-a||u>o+a)))return u}function ine(n,e){lt(n,t=>{let r=t.gc,i=r.length/2,s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function cm(n){return n.drawTicks?n.tickLength:0}function vF(n,e){if(!n.display)return 0;let t=Kt(n.font,e),r=Mn(n.padding);return(wt(n.text)?n.text.length:1)*t.lineHeight+r.height}function sne(n,e){return vo(n,{scale:e,type:"scale"})}function one(n,e,t){return vo(n,{tick:t,index:e,type:"tick"})}function ane(n,e,t){let r=B_(n);return(t&&e!=="right"||!t&&e==="right")&&(r=nne(r)),r}function une(n,e,t,r){let{top:i,left:s,bottom:o,right:a,chart:u}=n,{chartArea:c,scales:l}=u,d=0,h,f,p,g=o-i,v=a-s;if(n.isHorizontal()){if(f=An(r,s,a),Ue(t)){let y=Object.keys(t)[0],E=t[y];p=l[y].getPixelForValue(E)+g-e}else t==="center"?p=(c.bottom+c.top)/2+g-e:p=pF(n,t,e);h=a-s}else{if(Ue(t)){let y=Object.keys(t)[0],E=t[y];f=l[y].getPixelForValue(E)-v+e}else t==="center"?f=(c.left+c.right)/2-v+e:f=pF(n,t,e);p=An(r,o,i),d=t==="left"?-Vt:Vt}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}var wc=class n extends Ki{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Ar(e,Number.POSITIVE_INFINITY),t=Ar(t,Number.NEGATIVE_INFINITY),r=Ar(r,Number.POSITIVE_INFINITY),i=Ar(i,Number.NEGATIVE_INFINITY),{min:Ar(e,r),max:Ar(t,i),minDefined:Ft(e),maxDefined:Ft(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let u=0,c=a.length;u<c;++u)o=a[u].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:Ar(t,Ar(r,t)),max:Ar(r,Ar(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){yt(this.options.beforeUpdate,[this])}update(e,t,r){let{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jR(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let u=a<this.ticks.length;this._convertTicksToLabels(u?gF(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Qte(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){yt(this.options.afterUpdate,[this])}beforeSetDimensions(){yt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){yt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),yt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){yt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=yt(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){yt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){yt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,r=mF(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation,o=i,a,u,c;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let l=this._getLabelSizes(),d=l.widest.width,h=l.highest.height,f=sn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),d+6>a&&(a=f/(r-(e.offset?.5:1)),u=this.maxHeight-cm(e.grid)-t.padding-vF(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=F_(Math.min(Math.asin(sn((l.highest.height+6)/a,-1,1)),Math.asin(sn(u/c,-1,1))-Math.asin(sn(h/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){yt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){yt(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let u=vF(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=cm(s)+u):(e.height=this.maxHeight,e.width=cm(s)+u),r.display&&this.ticks.length){let{first:c,last:l,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,p=Ci(this.labelRotation),g=Math.cos(p),v=Math.sin(p);if(a){let y=r.mirror?0:v*d.width+g*h.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{let y=r.mirror?0:g*d.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,l,v,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){let{ticks:{align:s,padding:o},position:a}=this.options,u=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let l=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;u?c?(h=i*e.width,f=r*t.height):(h=r*e.height,f=i*t.width):s==="start"?f=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=t.width/2),this.paddingLeft=Math.max((h-l+o)*this.width/(this.width-l),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let l=t.height/2,d=e.height/2;s==="start"?(l=0,d=e.height):s==="end"&&(l=t.height,d=0),this.paddingTop=l+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){yt(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Be(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=gF(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){let{ctx:i,_longestTextCache:s}=this,o=[],a=[],u=Math.floor(t/mF(t,r)),c=0,l=0,d,h,f,p,g,v,y,E,M,T,R;for(d=0;d<t;d+=u){if(p=e[d].label,g=this._resolveTickFontOptions(d),i.font=v=g.string,y=s[v]=s[v]||{data:{},gc:[]},E=g.lineHeight,M=T=0,!Be(p)&&!wt(p))M=tm(i,y.data,y.gc,M,p),T=E;else if(wt(p))for(h=0,f=p.length;h<f;++h)R=p[h],!Be(R)&&!wt(R)&&(M=tm(i,y.data,y.gc,M,R),T+=E);o.push(M),a.push(T),c=Math.max(M,c),l=Math.max(T,l)}ine(s,t);let U=o.indexOf(c),q=a.indexOf(l),H=K=>({width:o[K]||0,height:a[K]||0});return{first:H(0),last:H(t-1),widest:H(U),highest:H(q),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return MR(this._alignToPixels?Ia(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let r=t[e];return r.$context||(r.$context=one(this.getContext(),e,r))}return this.$context||(this.$context=sne(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Ci(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,u=s?s.highest.height+o:0;return this.isHorizontal()?u*r>a*i?a/r:u/i:u*i<a*r?u/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,u=s.offset,c=this.isHorizontal(),d=this.ticks.length+(u?1:0),h=cm(s),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,v=g/2,y=function(_t){return Ia(r,_t,g)},E,M,T,R,U,q,H,K,pe,Ce,De,Ct;if(o==="top")E=y(this.bottom),q=this.bottom-h,K=E-v,Ce=y(e.top)+v,Ct=e.bottom;else if(o==="bottom")E=y(this.top),Ce=e.top,Ct=y(e.bottom)-v,q=E+v,K=this.top+h;else if(o==="left")E=y(this.right),U=this.right-h,H=E-v,pe=y(e.left)+v,De=e.right;else if(o==="right")E=y(this.left),pe=e.left,De=y(e.right)-v,U=E+v,H=this.left+h;else if(t==="x"){if(o==="center")E=y((e.top+e.bottom)/2+.5);else if(Ue(o)){let _t=Object.keys(o)[0],dt=o[_t];E=y(this.chart.scales[_t].getPixelForValue(dt))}Ce=e.top,Ct=e.bottom,q=E+v,K=q+h}else if(t==="y"){if(o==="center")E=y((e.left+e.right)/2);else if(Ue(o)){let _t=Object.keys(o)[0],dt=o[_t];E=y(this.chart.scales[_t].getPixelForValue(dt))}U=E-v,H=U-h,pe=e.left,De=e.right}let Hn=Se(i.ticks.maxTicksLimit,d),tt=Math.max(1,Math.ceil(d/Hn));for(M=0;M<d;M+=tt){let _t=this.getContext(M),dt=s.setContext(_t),Pr=a.setContext(_t),At=dt.lineWidth,wo=dt.color,Ec=Pr.dash||[],Ie=Pr.dashOffset,ei=dt.tickWidth,mn=dt.tickColor,Vs=dt.tickBorderDash||[],gn=dt.tickBorderDashOffset;T=rne(this,M,u),T!==void 0&&(R=Ia(r,T,At),c?U=H=pe=De=R:q=K=Ce=Ct=R,f.push({tx1:U,ty1:q,tx2:H,ty2:K,x1:pe,y1:Ce,x2:De,y2:Ct,width:At,color:wo,borderDash:Ec,borderDashOffset:Ie,tickWidth:ei,tickColor:mn,tickBorderDash:Vs,tickBorderDashOffset:gn}))}return this._ticksLength=d,this._borderValue=E,f}_computeLabelItems(e){let t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:u,crossAlign:c,padding:l,mirror:d}=s,h=cm(r.grid),f=h+l,p=d?-l:f,g=-Ci(this.labelRotation),v=[],y,E,M,T,R,U,q,H,K,pe,Ce,De,Ct="middle";if(i==="top")U=this.bottom-p,q=this._getXAxisLabelAlignment();else if(i==="bottom")U=this.top+p,q=this._getXAxisLabelAlignment();else if(i==="left"){let tt=this._getYAxisLabelAlignment(h);q=tt.textAlign,R=tt.x}else if(i==="right"){let tt=this._getYAxisLabelAlignment(h);q=tt.textAlign,R=tt.x}else if(t==="x"){if(i==="center")U=(e.top+e.bottom)/2+f;else if(Ue(i)){let tt=Object.keys(i)[0],_t=i[tt];U=this.chart.scales[tt].getPixelForValue(_t)+f}q=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")R=(e.left+e.right)/2-f;else if(Ue(i)){let tt=Object.keys(i)[0],_t=i[tt];R=this.chart.scales[tt].getPixelForValue(_t)}q=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(u==="start"?Ct="top":u==="end"&&(Ct="bottom"));let Hn=this._getLabelSizes();for(y=0,E=a.length;y<E;++y){M=a[y],T=M.label;let tt=s.setContext(this.getContext(y));H=this.getPixelForTick(y)+s.labelOffset,K=this._resolveTickFontOptions(y),pe=K.lineHeight,Ce=wt(T)?T.length:1;let _t=Ce/2,dt=tt.color,Pr=tt.textStrokeColor,At=tt.textStrokeWidth,wo=q;o?(R=H,q==="inner"&&(y===E-1?wo=this.options.reverse?"left":"right":y===0?wo=this.options.reverse?"right":"left":wo="center"),i==="top"?c==="near"||g!==0?De=-Ce*pe+pe/2:c==="center"?De=-Hn.highest.height/2-_t*pe+pe:De=-Hn.highest.height+pe/2:c==="near"||g!==0?De=pe/2:c==="center"?De=Hn.highest.height/2-_t*pe:De=Hn.highest.height-Ce*pe,d&&(De*=-1),g!==0&&!tt.showLabelBackdrop&&(R+=pe/2*Math.sin(g))):(U=H,De=(1-Ce)*pe/2);let Ec;if(tt.showLabelBackdrop){let Ie=Mn(tt.backdropPadding),ei=Hn.heights[y],mn=Hn.widths[y],Vs=De-Ie.top,gn=0-Ie.left;switch(Ct){case"middle":Vs-=ei/2;break;case"bottom":Vs-=ei;break}switch(q){case"center":gn-=mn/2;break;case"right":gn-=mn;break;case"inner":y===E-1?gn-=mn:y>0&&(gn-=mn/2);break}Ec={left:gn,top:Vs,width:mn+Ie.width,height:ei+Ie.height,color:tt.backdropColor}}v.push({label:T,font:K,textOffset:De,options:{rotation:g,color:dt,strokeColor:Pr,strokeWidth:At,textAlign:wo,textBaseline:Ct,translation:[R,U],backdrop:Ec}})}return v}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Ci(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,u=o.widest.width,c,l;return t==="left"?i?(l=this.right+s,r==="near"?c="left":r==="center"?(c="center",l+=u/2):(c="right",l+=u)):(l=this.right-a,r==="near"?c="right":r==="center"?(c="center",l-=u/2):(c="left",l=this.left)):t==="right"?i?(l=this.left+s,r==="near"?c="right":r==="center"?(c="center",l-=u/2):(c="left",l-=u)):(l=this.left+a,r==="near"?c="left":r==="center"?(c="center",l+=u/2):(c="right",l=this.right)):c="right",{textAlign:c,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(u,c,l)=>{!l.width||!l.color||(r.save(),r.lineWidth=l.width,r.strokeStyle=l.color,r.setLineDash(l.borderDash||[]),r.lineDashOffset=l.borderDashOffset,r.beginPath(),r.moveTo(u.x,u.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){let u=i[s];t.drawOnChartArea&&a({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),t.drawTicks&&a({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;let a=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue,c,l,d,h;this.isHorizontal()?(c=Ia(e,this.left,o)-o/2,l=Ia(e,this.right,a)+a/2,d=h=u):(d=Ia(e,this.top,o)-o/2,h=Ia(e,this.bottom,a)+a/2,c=l=u),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,d),t.lineTo(l,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&im(r,i);let s=this.getLabelItems(e);for(let o of s){let a=o.options,u=o.font,c=o.label,l=o.textOffset;Ta(r,c,0,l,u,a)}i&&sm(r)}drawTitle(){let{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let s=Kt(r.font),o=Mn(r.padding),a=r.align,u=s.lineHeight/2;t==="bottom"||t==="center"||Ue(t)?(u+=o.bottom,wt(r.text)&&(u+=s.lineHeight*(r.text.length-1))):u+=o.top;let{titleX:c,titleY:l,maxWidth:d,rotation:h}=une(this,u,t,a);Ta(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:h,textAlign:ane(a,t,i),textBaseline:"middle",translation:[c,l]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,r=Se(e.grid&&e.grid.z,-1),i=Se(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return Kt(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Od=class{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),r;dne(t)&&(r=this.register(t));let i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,cne(e,o,r),this.override&&Tt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Tt[i]&&(delete Tt[i][r],this.override&&delete Sa[r])}};function cne(n,e,t){let r=Cd(Object.create(null),[t?Tt.get(t):{},Tt.get(e),n.defaults]);Tt.set(e,r),n.defaultRoutes&&lne(e,n.defaultRoutes),n.descriptors&&Tt.describe(e,n.descriptors)}function lne(n,e){Object.keys(e).forEach(t=>{let r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),u=o.join(".");Tt.route(s,i,u,a)})}function dne(n){return"id"in n&&"defaults"in n}var EI=class{constructor(){this.controllers=new Od(Pa,"datasets",!0),this.elements=new Od(Ki,"elements"),this.plugins=new Od(Object,"plugins"),this.scales=new Od(wc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{let s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):lt(i,o=>{let a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){let i=R_(e);yt(r["before"+i],[],r),t[e](r),yt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},$s=new EI,CI=class{constructor(){this._init=void 0}notify(e,t,r,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;let s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,r,i){i=i||{};for(let s of e){let o=s.plugin,a=o[r],u=[t,i,s.options];if(yt(a,u,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let r=e&&e.config,i=Se(r.options&&r.options.plugins,{}),s=hne(r);return i===!1&&!t?[]:pne(e,s,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(u=>a.plugin.id===u.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}};function hne(n){let e={},t=[],r=Object.keys($s.plugins.items);for(let s=0;s<r.length;s++)t.push($s.getPlugin(r[s]));let i=n.plugins||[];for(let s=0;s<i.length;s++){let o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function fne(n,e){return!e&&n===!1?null:n===!0?{}:n}function pne(n,{plugins:e,localIds:t},r,i){let s=[],o=n.getContext();for(let a of e){let u=a.id,c=fne(r[u],i);c!==null&&s.push({plugin:a,options:mne(n.config,{plugin:a,local:t[u]},c,o)})}return s}function mne(n,{plugin:e,local:t},r,i){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xI(n,e){let t=Tt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function gne(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function vne(n,e){return n===e?"_index_":"_value_"}function yF(n){if(n==="x"||n==="y"||n==="r")return n}function yne(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function DI(n,...e){if(yF(n))return n;for(let t of e){let r=t.axis||yne(t.position)||n.length>1&&yF(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function _F(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function _ne(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return _F(n,"x",t[0])||_F(n,"y",t[0])}return{}}function bne(n,e){let t=Sa[n.type]||{scales:{}},r=e.scales||{},i=xI(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{let a=r[o];if(!Ue(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let u=DI(o,a,_ne(o,n),Tt.scales[a.type]),c=vne(u,i),l=t.scales||{};s[o]=Dd(Object.create(null),[{axis:u},a,l[u],l[c]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,u=o.indexAxis||xI(a,e),l=(Sa[a]||{}).scales||{};Object.keys(l).forEach(d=>{let h=gne(d,u),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),Dd(s[f],[{axis:h},r[f],l[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Dd(a,[Tt.scales[a.type],Tt.scale])}),s}function oL(n){let e=n.options||(n.options={});e.plugins=Se(e.plugins,{}),e.scales=bne(n,e)}function aL(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function wne(n){return n=n||{},n.data=aL(n.data),oL(n),n}var bF=new Map,uL=new Set;function Y_(n,e){let t=bF.get(n);return t||(t=e(),bF.set(n,t),uL.add(t)),t}var lm=(n,e,t)=>{let r=go(e,t);r!==void 0&&n.add(r)},SI=class{constructor(e){this._config=wne(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=aL(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),oL(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Y_(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Y_(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Y_(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,r=this.type;return Y_(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let r=this._scopeCache,i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){let{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;let u=new Set;t.forEach(l=>{e&&(u.add(e),l.forEach(d=>lm(u,e,d))),l.forEach(d=>lm(u,i,d)),l.forEach(d=>lm(u,Sa[s]||{},d)),l.forEach(d=>lm(u,Tt,d)),l.forEach(d=>lm(u,$_,d))});let c=Array.from(u);return c.length===0&&c.push(Object.create(null)),uL.has(t)&&o.set(t,c),c}chartOptionScopes(){let{options:e,type:t}=this;return[e,Sa[t]||{},Tt.datasets[t]||{},{type:t},Tt,$_]}resolveNamedOptions(e,t,r,i=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=wF(this._resolverCache,e,i),u=o;if(Cne(o,t)){s.$shared=!1,r=po(r)?r():r;let c=this.createResolver(e,r,a);u=gc(o,r,c)}for(let c of t)s[c]=u[c];return s}createResolver(e,t,r=[""],i){let{resolver:s}=wF(this._resolverCache,e,r);return Ue(t)?gc(s,t,void 0,i):s}};function wF(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));let i=t.join(),s=r.get(i);return s||(s={resolver:U_(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}var Ene=n=>Ue(n)&&Object.getOwnPropertyNames(n).some(e=>po(n[e]));function Cne(n,e){let{isScriptable:t,isIndexable:r}=KS(n);for(let i of e){let s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(po(a)||Ene(a))||o&&wt(a))return!0}return!1}var xne="4.5.1",Dne=["top","bottom","left","right","chartArea"];function EF(n,e){return n==="top"||n==="bottom"||Dne.indexOf(n)===-1&&e==="x"}function CF(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function xF(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),yt(t&&t.onComplete,[n],e)}function Sne(n){let e=n.chart,t=e.options.animation;yt(t&&t.onProgress,[n],e)}function cL(n){return H_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var J_={},DF=n=>{let e=cL(n);return Object.values(J_).filter(t=>t.canvas===e).pop()};function Ine(n,e,t){let r=Object.keys(n);for(let i of r){let s=+i;if(s>=e){let o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function Tne(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}var bo=(()=>{class n{static defaults=Tt;static instances=J_;static overrides=Sa;static registry=$s;static version=xne;static getChart=DF;static register(...t){$s.add(...t),SF()}static unregister(...t){$s.remove(...t),SF()}constructor(t,r){let i=this.config=new SI(r),s=cL(t),o=DF(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Kte(s)),this.platform.updateConfig(i);let u=this.platform.acquireContext(s,a.aspectRatio),c=u&&u.canvas,l=c&&c.height,d=c&&c.width;if(this.id=xR(),this.ctx=u,this.canvas=c,this.width=d,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new CI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=RR(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],J_[this.id]=this,!u||!c){console.error("Failed to create chart: can't acquire context from the given item");return}yo.listen(this,"complete",xF),yo.listen(this,"progress",Sne),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return Be(t)?r&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return $s}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():JS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return WS(this.canvas,this.ctx),this}stop(){return yo.stop(this),this}resize(t,r){yo.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,r,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,JS(this,u,!0)&&(this.notifyPlugins("resize",{size:a}),yt(i.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};lt(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,s=Object.keys(i).reduce((a,u)=>(a[u]=!1,a),{}),o=[];r&&(o=o.concat(Object.keys(r).map(a=>{let u=r[a],c=DI(a,u),l=c==="r",d=c==="x";return{options:u,dposition:l?"chartArea":d?"bottom":"left",dtype:l?"radialLinear":d?"category":"linear"}}))),lt(o,a=>{let u=a.options,c=u.id,l=DI(c,u),d=Se(u.type,a.dtype);(u.position===void 0||EF(u.position,l)!==EF(a.dposition))&&(u.position=a.dposition),s[c]=!0;let h=null;if(c in i&&i[c].type===d)h=i[c];else{let f=$s.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(u,t)}),lt(s,(a,u)=>{a||delete i[u]}),lt(i,a=>{Un.configure(this,a,a.options),Un.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(CF("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){let o=r[i],a=this.getDatasetMeta(i),u=o.type||this.config.type;if(a.type&&a.type!==u&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=u,a.indexAxis=o.indexAxis||xI(u,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let c=$s.getController(u),{datasetElementType:l,dataElementType:d}=Tt.datasets[u];Object.assign(c,{dataElementType:$s.getElement(d),datasetElementType:l&&$s.getElement(l)}),a.controller=new c(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){lt(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,d=this.data.datasets.length;l<d;l++){let{controller:h}=this.getDatasetMeta(l),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||lt(o,l=>{l.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(CF("z","_idx"));let{_active:u,_lastEvent:c}=this;c?this._eventHandler(c,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){lt(this.scales,t=>{Un.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!OS(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:o}of r){let a=i==="_removeElements"?-o:o;Ine(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=o=>new Set(t.filter(a=>a[0]===o).map((a,u)=>u+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!OS(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Un.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],lt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,po(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),s={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(yo.has(this)?this.attached&&!yo.running(this)&&yo.start(this):(this.draw(),xF({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],s,o;for(s=0,o=r.length;s<o;++s){let a=r[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=sI(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&im(r,s),t.controller.draw(),s&&sm(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Rs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,s){let o=Mte.modes[r];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=vo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let s=i?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);Sd(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(o,{visible:i}),this.update(u=>u.datasetIndex===t?s:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),yo.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),WS(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete J_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),t[o]=a},s=(o,a,u)=>{o.offsetX=a,o.offsetY=u,this._eventHandler(o)};lt(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(c,l)=>{r.addEventListener(this,c,l),t[c]=l},s=(c,l)=>{t[c]&&(r.removeEventListener(this,c,l),delete t[c])},o=(c,l)=>{this.canvas&&this.resize(c,l)},a,u=()=>{s("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",u)},r.isAttached(this.canvas)?u():a()}unbindEvents(){lt(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},lt(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let s=i?"set":"remove",o,a,u,c;for(r==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),u=0,c=t.length;u<c;++u){a=t[u];let l=a&&this.getDatasetMeta(a.datasetIndex).controller;l&&l[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:o,index:a})=>{let u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[a],index:a}});!nm(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let s=this.options.hover,o=(c,l)=>c.filter(d=>!l.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(r,t),u=i?t:o(t,r);a.length&&this.updateHoverStyle(a,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let o=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:s=[],options:o}=this,a=r,u=this._getActiveElements(t,s,i,a),c=IR(t),l=Tne(t,this._lastEvent,i,c);i&&(this._lastEvent=null,yt(o.onHover,[t,u,this],this),c&&yt(o.onClick,[t,u,this],this));let d=!nm(u,s);return(d||r)&&(this._active=u,this._updateHoverStyles(u,s,r)),this._lastEvent=l,d}_getActiveElements(t,r,i,s){if(t.type==="mouseout")return[];if(!i)return r;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function SF(){return lt(bo.instances,n=>n._plugins.invalidate())}function Ane(n,e,t){let{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:u}=e,{borderWidth:c,borderJoinStyle:l}=u,d=Math.min(c/o,Tn(r-t));if(n.beginPath(),n.arc(i,s,o-c/2,r+d/2,t-d/2),a>0){let h=Math.min(c/a,Tn(r-t));n.arc(i,s,a+c/2,t-h/2,r+h/2,!0)}else{let h=Math.min(c/2,o*Tn(r-t));if(l==="round")n.arc(i,s,h,t-Ze/2,r+Ze/2,!0);else if(l==="bevel"){let f=2*h*h,p=-f*Math.cos(t+Ze/2)+i,g=-f*Math.sin(t+Ze/2)+s,v=f*Math.cos(r+Ze/2)+i,y=f*Math.sin(r+Ze/2)+s;n.lineTo(p,g),n.lineTo(v,y)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function Mne(n,e,t){let{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:u}=e,c=i/a;n.beginPath(),n.arc(s,o,a,r-c,t+c),u>i?(c=i/u,n.arc(s,o,u,t+c,r-c,!0)):n.arc(s,o,i,t+Vt,r-Vt),n.closePath(),n.clip()}function kne(n){return j_(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Pne(n,e,t,r){let i=kne(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),a=u=>{let c=(t-Math.min(s,u))*r/2;return sn(u,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:sn(i.innerStart,0,o),innerEnd:sn(i.innerEnd,0,o)}}function Pd(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function rb(n,e,t,r,i,s){let{x:o,y:a,startAngle:u,pixelMargin:c,innerRadius:l}=e,d=Math.max(e.outerRadius+r+t-c,0),h=l>0?l+r+t+c:0,f=0,p=i-u;if(r){let tt=l>0?l-r:0,_t=d>0?d-r:0,dt=(tt+_t)/2,Pr=dt!==0?p*dt/(dt+r):p;f=(p-Pr)/2}let g=Math.max(.001,p*d-t/Ze)/d,v=(p-g)/2,y=u+v+f,E=i-v-f,{outerStart:M,outerEnd:T,innerStart:R,innerEnd:U}=Pne(e,h,d,E-y),q=d-M,H=d-T,K=y+M/q,pe=E-T/H,Ce=h+R,De=h+U,Ct=y+R/Ce,Hn=E-U/De;if(n.beginPath(),s){let tt=(K+pe)/2;if(n.arc(o,a,d,K,tt),n.arc(o,a,d,tt,pe),T>0){let At=Pd(H,pe,o,a);n.arc(At.x,At.y,T,pe,E+Vt)}let _t=Pd(De,E,o,a);if(n.lineTo(_t.x,_t.y),U>0){let At=Pd(De,Hn,o,a);n.arc(At.x,At.y,U,E+Vt,Hn+Math.PI)}let dt=(E-U/h+(y+R/h))/2;if(n.arc(o,a,h,E-U/h,dt,!0),n.arc(o,a,h,dt,y+R/h,!0),R>0){let At=Pd(Ce,Ct,o,a);n.arc(At.x,At.y,R,Ct+Math.PI,y-Vt)}let Pr=Pd(q,y,o,a);if(n.lineTo(Pr.x,Pr.y),M>0){let At=Pd(q,K,o,a);n.arc(At.x,At.y,M,y-Vt,K)}}else{n.moveTo(o,a);let tt=Math.cos(K)*d+o,_t=Math.sin(K)*d+a;n.lineTo(tt,_t);let dt=Math.cos(pe)*d+o,Pr=Math.sin(pe)*d+a;n.lineTo(dt,Pr)}n.closePath()}function One(n,e,t,r,i){let{fullCircles:s,startAngle:o,circumference:a}=e,u=e.endAngle;if(s){rb(n,e,t,r,u,i);for(let c=0;c<s;++c)n.fill();isNaN(a)||(u=o+(a%Et||Et))}return rb(n,e,t,r,u,i),n.fill(),u}function Nne(n,e,t,r,i){let{fullCircles:s,startAngle:o,circumference:a,options:u}=e,{borderWidth:c,borderJoinStyle:l,borderDash:d,borderDashOffset:h,borderRadius:f}=u,p=u.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,p?(n.lineWidth=c*2,n.lineJoin=l||"round"):(n.lineWidth=c,n.lineJoin=l||"bevel");let g=e.endAngle;if(s){rb(n,e,t,r,g,i);for(let v=0;v<s;++v)n.stroke();isNaN(a)||(g=o+(a%Et||Et))}p&&Mne(n,e,g),u.selfJoin&&g-o>=Ze&&f===0&&l!=="miter"&&Ane(n,e,g),s||(rb(n,e,t,r,g,i),n.stroke())}var II=class extends Ki{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){let i=this.getProps(["x","y"],r),{angle:s,distance:o}=LS(i,{x:e,y:t}),{startAngle:a,endAngle:u,innerRadius:c,outerRadius:l,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),h=(this.options.spacing+this.options.borderWidth)/2,f=Se(d,u-a),p=Td(s,a,u)&&a!==u,g=f>=Et||p,v=Ls(o,c+h,l+h);return g&&v}getCenterPoint(e){let{x:t,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:c}=this.options,l=(i+s)/2,d=(o+a+c+u)/2;return{x:t+Math.cos(l)*d,y:r+Math.sin(l)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:r}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>Et?Math.floor(r/Et):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);let u=1-Math.sin(Math.min(Ze,r||0)),c=i*u;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,One(e,this,c,s,o),Nne(e,this,c,s,o),e.restore()}};function lL(n,e,t=e){n.lineCap=Se(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Se(t.borderDash,e.borderDash)),n.lineDashOffset=Se(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Se(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Se(t.borderWidth,e.borderWidth),n.strokeStyle=Se(t.borderColor,e.borderColor)}function Rne(n,e,t){n.lineTo(t.x,t.y)}function Fne(n){return n.stepped?$R:n.tension||n.cubicInterpolationMode==="monotone"?VR:Rne}function dL(n,e,t={}){let r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,u=Math.max(i,o),c=Math.min(s,a),l=i<o&&s<o||i>a&&s>a;return{count:r,start:u,loop:e.loop,ilen:c<u&&!l?r+c-u:c-u}}function Lne(n,e,t,r){let{points:i,options:s}=e,{count:o,start:a,loop:u,ilen:c}=dL(i,t,r),l=Fne(s),{move:d=!0,reverse:h}=r||{},f,p,g;for(f=0;f<=c;++f)p=i[(a+(h?c-f:f))%o],!p.skip&&(d?(n.moveTo(p.x,p.y),d=!1):l(n,g,p,h,s.stepped),g=p);return u&&(p=i[(a+(h?c:0))%o],l(n,g,p,h,s.stepped)),!!u}function Bne(n,e,t,r){let i=e.points,{count:s,start:o,ilen:a}=dL(i,t,r),{move:u=!0,reverse:c}=r||{},l=0,d=0,h,f,p,g,v,y,E=T=>(o+(c?a-T:T))%s,M=()=>{g!==v&&(n.lineTo(l,v),n.lineTo(l,g),n.lineTo(l,y))};for(u&&(f=i[E(0)],n.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[E(h)],f.skip)continue;let T=f.x,R=f.y,U=T|0;U===p?(R<g?g=R:R>v&&(v=R),l=(d*l+T)/++d):(M(),n.lineTo(T,R),p=U,d=0,g=v=R),y=R}M()}function TI(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Bne:Lne}function $ne(n){return n.stepped?KR:n.tension||n.cubicInterpolationMode==="monotone"?QR:xa}function Vne(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),lL(n,e.options),n.stroke(i)}function jne(n,e,t,r){let{segments:i,options:s}=e,o=TI(e);for(let a of i)lL(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}var Une=typeof Path2D=="function";function Hne(n,e,t,r){Une&&!e.options.segment?Vne(n,e,t,r):jne(n,e,t,r)}var ob=(()=>{class n extends Ki{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;WR(this._points,i,t,s,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ZR(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,s=t[r],o=this.points,a=iI(this,{property:r,start:s,end:s});if(!a.length)return;let u=[],c=$ne(i),l,d;for(l=0,d=a.length;l<d;++l){let{start:h,end:f}=a[l],p=o[h],g=o[f];if(p===g){u.push(p);continue}let v=Math.abs((s-p[r])/(g[r]-p[r])),y=c(p,g,v,i.stepped);y[r]=t[r],u.push(y)}return u.length===1?u[0]:u}pathSegment(t,r,i){return TI(this)(t,this,r,i)}path(t,r,i){let s=this.segments,o=TI(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let u of s)a&=o(t,this,u,{start:r,end:r+i-1});return!!a}draw(t,r,i,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Hne(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function IF(n,e,t,r){let i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}var zne=(()=>{class n extends Ki{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return IF(this,t,"x",r)}inYRange(t,r){return IF(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!Rs(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,V_(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function hL(n,e){let{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,u,c,l,d;return n.horizontal?(d=o/2,a=Math.min(t,i),u=Math.max(t,i),c=r-d,l=r+d):(d=s/2,a=t-d,u=t+d,c=Math.min(r,i),l=Math.max(r,i)),{left:a,top:c,right:u,bottom:l}}function ka(n,e,t,r){return n?0:sn(e,t,r)}function qne(n,e,t){let r=n.options.borderWidth,i=n.borderSkipped,s=YS(r);return{t:ka(i.top,s.top,0,t),r:ka(i.right,s.right,0,e),b:ka(i.bottom,s.bottom,0,t),l:ka(i.left,s.left,0,e)}}function Wne(n,e,t){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=Aa(i),o=Math.min(e,t),a=n.borderSkipped,u=r||Ue(i);return{topLeft:ka(!u||a.top||a.left,s.topLeft,0,o),topRight:ka(!u||a.top||a.right,s.topRight,0,o),bottomLeft:ka(!u||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:ka(!u||a.bottom||a.right,s.bottomRight,0,o)}}function Gne(n){let e=hL(n),t=e.right-e.left,r=e.bottom-e.top,i=qne(n,t/2,r/2),s=Wne(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function fI(n,e,t,r){let i=e===null,s=t===null,a=n&&!(i&&s)&&hL(n,r);return a&&(i||Ls(e,a.left,a.right))&&(s||Ls(t,a.top,a.bottom))}function Yne(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Kne(n,e){n.rect(e.x,e.y,e.w,e.h)}function pI(n,e,t={}){let r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-r,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+o,radius:n.radius}}var AI=class extends Ki{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Gne(this),a=Yne(o.radius)?Md:Kne;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,pI(o,t,s)),e.clip(),a(e,pI(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,pI(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return fI(this,e,t,r)}inXRange(e,t){return fI(this,e,null,t)}inYRange(e,t){return fI(this,null,e,t)}getCenterPoint(e){let{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},Qne=Object.freeze({__proto__:null,ArcElement:II,BarElement:AI,LineElement:ob,PointElement:zne}),MI=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],TF=MI.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function fL(n){return MI[n%MI.length]}function pL(n){return TF[n%TF.length]}function Xne(n,e){return n.borderColor=fL(e),n.backgroundColor=pL(e),++e}function Zne(n,e){return n.backgroundColor=n.data.map(()=>fL(e++)),e}function Jne(n,e){return n.backgroundColor=n.data.map(()=>pL(e++)),e}function ere(n){let e=0;return(t,r)=>{let i=n.getDatasetMeta(r).controller;i instanceof BI?e=Zne(t,e):i instanceof tL?e=Jne(t,e):i&&(e=Xne(t,e))}}function AF(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function tre(n){return n&&(n.borderColor||n.backgroundColor)}function nre(){return Tt.borderColor!=="rgba(0,0,0,0.1)"||Tt.backgroundColor!=="rgba(0,0,0,0.1)"}var rre={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:r},options:i}=n.config,{elements:s}=i,o=AF(r)||tre(i)||s&&AF(s)||nre();if(!t.forceOverride&&o)return;let a=ere(n);r.forEach(a)}};function ire(n,e,t,r,i){let s=i.samples||r;if(s>=t)return n.slice(e,e+t);let o=[],a=(t-2)/(s-2),u=0,c=e+t-1,l=e,d,h,f,p,g;for(o[u++]=n[l],d=0;d<s-2;d++){let v=0,y=0,E,M=Math.floor((d+1)*a)+1+e,T=Math.min(Math.floor((d+2)*a)+1,t)+e,R=T-M;for(E=M;E<T;E++)v+=n[E].x,y+=n[E].y;v/=R,y/=R;let U=Math.floor(d*a)+1+e,q=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:H,y:K}=n[l];for(f=p=-1,E=U;E<q;E++)p=.5*Math.abs((H-v)*(n[E].y-K)-(H-n[E].x)*(y-K)),p>f&&(f=p,h=n[E],g=E);o[u++]=h,l=g}return o[u++]=n[c],o}function sre(n,e,t,r){let i=0,s=0,o,a,u,c,l,d,h,f,p,g,v=[],y=e+t-1,E=n[e].x,T=n[y].x-E;for(o=e;o<e+t;++o){a=n[o],u=(a.x-E)/T*r,c=a.y;let R=u|0;if(R===l)c<p?(p=c,d=o):c>g&&(g=c,h=o),i=(s*i+a.x)/++s;else{let U=o-1;if(!Be(d)&&!Be(h)){let q=Math.min(d,h),H=Math.max(d,h);q!==f&&q!==U&&v.push(J(C({},n[q]),{x:i})),H!==f&&H!==U&&v.push(J(C({},n[H]),{x:i}))}o>0&&U!==f&&v.push(n[U]),v.push(a),l=R,s=0,p=g=c,d=h=f=o}}return v}function mL(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function MF(n){n.data.datasets.forEach(e=>{mL(e)})}function ore(n,e){let t=e.length,r=0,i,{iScale:s}=n,{min:o,max:a,minDefined:u,maxDefined:c}=s.getUserBounds();return u&&(r=sn(Ns(e,s.axis,o).lo,0,t-1)),c?i=sn(Ns(e,s.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var are={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){MF(n);return}let r=n.width;n.data.datasets.forEach((i,s)=>{let{_data:o,indexAxis:a}=i,u=n.getDatasetMeta(s),c=o||i.data;if(kd([a,n.options.indexAxis])==="y"||!u.controller.supportsDecimation)return;let l=n.scales[u.xAxisID];if(l.type!=="linear"&&l.type!=="time"||n.options.parsing)return;let{start:d,count:h}=ore(u,c),f=t.threshold||4*r;if(h<=f){mL(i);return}Be(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(t.algorithm){case"lttb":p=ire(c,d,h,r,t);break;case"min-max":p=sre(c,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=p})},destroy(n){MF(n)}};function ure(n,e,t){let r=n.segments,i=n.points,s=e.points,o=[];for(let a of r){let{start:u,end:c}=a;c=ab(u,c,i);let l=kI(t,i[u],i[c],a.loop);if(!e.segments){o.push({source:a,target:l,start:i[u],end:i[c]});continue}let d=iI(e,l);for(let h of d){let f=kI(t,s[h.start],s[h.end],h.loop),p=rI(a,i,f);for(let g of p)o.push({source:g,target:h,start:{[t]:kF(l,f,"start",Math.max)},end:{[t]:kF(l,f,"end",Math.min)}})}}return o}function kI(n,e,t,r){if(r)return;let i=e[n],s=t[n];return n==="angle"&&(i=Tn(i),s=Tn(s)),{property:n,start:i,end:s}}function cre(n,e){let{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=ab(o,a,i);let u=i[o],c=i[a];r!==null?(s.push({x:u.x,y:r}),s.push({x:c.x,y:r})):t!==null&&(s.push({x:t,y:u.y}),s.push({x:t,y:c.y}))}),s}function ab(n,e,t){for(;e>n;e--){let r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function kF(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function gL(n,e){let t=[],r=!1;return wt(n)?(r=!0,t=n):t=cre(n,e),t.length?new ob({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function PF(n){return n&&n.fill!==!1}function lre(n,e,t){let i=n[e].fill,s=[e],o;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Ft(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function dre(n,e,t){let r=mre(n);if(Ue(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Ft(i)&&Math.floor(i)===i?hre(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function hre(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function fre(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Ue(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function pre(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:Ue(n)?r=n.value:r=e.getBaseValue(),r}function mre(n){let e=n.options,t=e.fill,r=Se(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function gre(n){let{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,a=vre(e,t);a.push(gL({x:null,y:e.bottom},r));for(let u=0;u<s.length;u++){let c=s[u];for(let l=c.start;l<=c.end;l++)yre(i,o[l],a)}return new ob({points:i,options:{}})}function vre(n,e){let t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function yre(n,e,t){let r=[];for(let i=0;i<t.length;i++){let s=t[i],{first:o,last:a,point:u}=_re(s,e,"x");if(!(!u||o&&a)){if(o)r.unshift(u);else if(n.push(u),!a)break}}n.push(...r)}function _re(n,e,t){let r=n.interpolate(e,t);if(!r)return{};let i=r[t],s=n.segments,o=n.points,a=!1,u=!1;for(let c=0;c<s.length;c++){let l=s[c],d=o[l.start][t],h=o[l.end][t];if(Ls(i,d,h)){a=i===d,u=i===h;break}}return{first:a,last:u,point:r}}var ib=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){let{x:i,y:s,radius:o}=this;return t=t||{start:0,end:Et},e.arc(i,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){let{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}};function bre(n){let{chart:e,fill:t,line:r}=n;if(Ft(t))return wre(e,t);if(t==="stack")return gre(n);if(t==="shape")return!0;let i=Ere(n);return i instanceof ib?i:gL(i,r)}function wre(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function Ere(n){return(n.scale||{}).getPointPositionForValue?xre(n):Cre(n)}function Cre(n){let{scale:e={},fill:t}=n,r=fre(t,e);if(Ft(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function xre(n){let{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=pre(t,e,s),a=[];if(r.grid.circular){let u=e.getPointPositionForValue(0,s);return new ib({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(o)})}for(let u=0;u<i;++u)a.push(e.getPointPositionForValue(u,o));return a}function mI(n,e,t){let r=bre(e),{chart:i,index:s,line:o,scale:a,axis:u}=e,c=o.options,l=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=l||{},p=i.getDatasetMeta(s),g=sI(i,p);r&&o.points.length&&(im(n,t),Dre(n,{line:o,target:r,above:h,below:f,area:t,scale:a,axis:u,clip:g}),sm(n))}function Dre(n,e){let{line:t,target:r,above:i,below:s,area:o,scale:a,clip:u}=e,c=t._loop?"angle":e.axis;n.save();let l=s;s!==i&&(c==="x"?(OF(n,r,o.top),gI(n,{line:t,target:r,color:i,scale:a,property:c,clip:u}),n.restore(),n.save(),OF(n,r,o.bottom)):c==="y"&&(NF(n,r,o.left),gI(n,{line:t,target:r,color:s,scale:a,property:c,clip:u}),n.restore(),n.save(),NF(n,r,o.right),l=i)),gI(n,{line:t,target:r,color:l,scale:a,property:c,clip:u}),n.restore()}function OF(n,e,t){let{segments:r,points:i}=e,s=!0,o=!1;n.beginPath();for(let a of r){let{start:u,end:c}=a,l=i[u],d=i[ab(u,c,i)];s?(n.moveTo(l.x,l.y),s=!1):(n.lineTo(l.x,t),n.lineTo(l.x,l.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function NF(n,e,t){let{segments:r,points:i}=e,s=!0,o=!1;n.beginPath();for(let a of r){let{start:u,end:c}=a,l=i[u],d=i[ab(u,c,i)];s?(n.moveTo(l.x,l.y),s=!1):(n.lineTo(t,l.y),n.lineTo(l.x,l.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(t,d.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function gI(n,e){let{line:t,target:r,property:i,color:s,scale:o,clip:a}=e,u=ure(t,r,i);for(let{source:c,target:l,start:d,end:h}of u){let{style:{backgroundColor:f=s}={}}=c,p=r!==!0;n.save(),n.fillStyle=f,Sre(n,o,a,p&&kI(i,d,h)),n.beginPath();let g=!!t.pathSegment(n,c),v;if(p){g?n.closePath():RF(n,r,h,i);let y=!!r.pathSegment(n,l,{move:g,reverse:!0});v=g&&y,v||RF(n,r,d,i)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function Sre(n,e,t,r){let i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let u,c,l,d;s==="x"?(u=o,c=i.top,l=a,d=i.bottom):(u=i.left,c=o,l=i.right,d=a),n.beginPath(),t&&(u=Math.max(u,t.left),l=Math.min(l,t.right),c=Math.max(c,t.top),d=Math.min(d,t.bottom)),n.rect(u,c,l-u,d-c),n.clip()}}function RF(n,e,t,r){let i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var Ire={id:"filler",afterDatasetsUpdate(n,e,t){let r=(n.data.datasets||[]).length,i=[],s,o,a,u;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,u=null,a&&a.options&&a instanceof ob&&(u={visible:n.isDatasetVisible(o),index:o,fill:dre(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=u,i.push(u);for(o=0;o<r;++o)u=i[o],!(!u||u.fill===!1)&&(u.fill=lre(i,o,t.propagate))},beforeDraw(n,e,t){let r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){let a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&mI(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let s=r[i].$filler;PF(s)&&mI(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let r=e.meta.$filler;!PF(r)||t.drawTime!=="beforeDatasetDraw"||mI(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},FF=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},Tre=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,sb=class extends Ki{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=yt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=Kt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:u}=FF(r,s),c,l;t.font=i.string,this.isHorizontal()?(c=this.maxWidth,l=this._fitRows(o,s,a,u)+10):(l=this.maxHeight,c=this._fitCols(o,i,a,u)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(l,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,u=this.legendHitBoxes=[],c=this.lineWidths=[0],l=i+a,d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-l;return this.legendItems.forEach((p,g)=>{let v=r+t/2+s.measureText(p.text).width;(g===0||c[c.length-1]+v+2*a>o)&&(d+=l,c[c.length-(g>0?0:1)]=0,f+=l,h++),u[g]={left:0,top:f,row:h,width:v,height:i},c[c.length-1]+=v+a}),d}_fitCols(e,t,r,i){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,u=this.legendHitBoxes=[],c=this.columnSizes=[],l=o-e,d=a,h=0,f=0,p=0,g=0;return this.legendItems.forEach((v,y)=>{let{itemWidth:E,itemHeight:M}=Are(r,t,s,v,i);y>0&&f+M+2*a>l&&(d+=h+a,c.push({width:h,height:f}),p+=h+a,g++,h=f=0),u[y]={left:p,top:f,col:g,width:E,height:M},h=Math.max(h,E),f+=M+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=yc(s,this.left,this.width);if(this.isHorizontal()){let a=0,u=An(r,this.left+i,this.right-this.lineWidths[a]);for(let c of t)a!==c.row&&(a=c.row,u=An(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(u),c.width),u+=c.width+i}else{let a=0,u=An(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let c of t)c.col!==a&&(a=c.col,u=An(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=u,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),u+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;im(e,this),this._draw(),sm(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Tt.color,u=yc(e.rtl,this.left,this.width),c=Kt(o.font),{padding:l}=o,d=c.size,h=d/2,f;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;let{boxWidth:p,boxHeight:g,itemHeight:v}=FF(o,d),y=function(U,q,H){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();let K=Se(H.lineWidth,1);if(i.fillStyle=Se(H.fillStyle,a),i.lineCap=Se(H.lineCap,"butt"),i.lineDashOffset=Se(H.lineDashOffset,0),i.lineJoin=Se(H.lineJoin,"miter"),i.lineWidth=K,i.strokeStyle=Se(H.strokeStyle,a),i.setLineDash(Se(H.lineDash,[])),o.usePointStyle){let pe={radius:g*Math.SQRT2/2,pointStyle:H.pointStyle,rotation:H.rotation,borderWidth:K},Ce=u.xPlus(U,p/2),De=q+h;GS(i,pe,Ce,De,o.pointStyleWidth&&p)}else{let pe=q+Math.max((d-g)/2,0),Ce=u.leftForLtr(U,p),De=Aa(H.borderRadius);i.beginPath(),Object.values(De).some(Ct=>Ct!==0)?Md(i,{x:Ce,y:pe,w:p,h:g,radius:De}):i.rect(Ce,pe,p,g),i.fill(),K!==0&&i.stroke()}i.restore()},E=function(U,q,H){Ta(i,H.text,U,q+v/2,c,{strikethrough:H.hidden,textAlign:u.textAlign(H.textAlign)})},M=this.isHorizontal(),T=this._computeTitleHeight();M?f={x:An(s,this.left+l,this.right-r[0]),y:this.top+l+T,line:0}:f={x:this.left+l,y:An(s,this.top+T+l,this.bottom-t[0].height),line:0},tI(this.ctx,e.textDirection);let R=v+l;this.legendItems.forEach((U,q)=>{i.strokeStyle=U.fontColor,i.fillStyle=U.fontColor;let H=i.measureText(U.text).width,K=u.textAlign(U.textAlign||(U.textAlign=o.textAlign)),pe=p+h+H,Ce=f.x,De=f.y;u.setWidth(this.width),M?q>0&&Ce+pe+l>this.right&&(De=f.y+=R,f.line++,Ce=f.x=An(s,this.left+l,this.right-r[f.line])):q>0&&De+R>this.bottom&&(Ce=f.x=Ce+t[f.line].width+l,f.line++,De=f.y=An(s,this.top+T+l,this.bottom-t[f.line].height));let Ct=u.x(Ce);if(y(Ct,De,U),Ce=FR(K,Ce+p+h,M?Ce+pe:this.right,e.rtl),E(u.x(Ce),De,U),M)f.x+=pe+l;else if(typeof U.text!="string"){let Hn=c.lineHeight;f.y+=vL(U,Hn)+l}else f.y+=R}),nI(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,r=Kt(t.font),i=Mn(t.padding);if(!t.display)return;let s=yc(e.rtl,this.left,this.width),o=this.ctx,a=t.position,u=r.size/2,c=i.top+u,l,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),l=this.top+c,d=An(e.align,d,this.right-h);else{let p=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);l=c+An(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}let f=An(a,d,d+h);o.textAlign=s.textAlign(B_(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Ta(o,t.text,f,l,r)}_computeTitleHeight(){let e=this.options.title,t=Kt(e.font),r=Mn(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Ls(e,this.left,this.right)&&Ls(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ls(e,i.left,i.left+i.width)&&Ls(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let t=this.options;if(!Pre(e.type,t))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,s=Tre(i,r);i&&!s&&yt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&yt(t.onHover,[e,r,this],this)}else r&&yt(t.onClick,[e,r,this],this)}};function Are(n,e,t,r,i){let s=Mre(r,n,e,t),o=kre(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Mre(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function kre(n,e,t){let r=n;return typeof e.text!="string"&&(r=vL(e,t)),r}function vL(n,e){let t=n.text?n.text.length:0;return e*t}function Pre(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Ore={id:"legend",_element:sb,start(n,e,t){let r=n.legend=new sb({ctx:n.ctx,options:t,chart:n});Un.configure(n,r,t),Un.addBox(n,r)},stop(n){Un.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let r=n.legend;Un.configure(n,r,t),r.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(u=>{let c=u.controller.getStyle(t?0:void 0),l=Mn(c.borderWidth);return{text:e[u.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!u.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:u.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},pm=class extends Ki{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=wt(r.text)?r.text.length:1;this._padding=Mn(r.padding);let s=i*Kt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align,u=0,c,l,d;return this.isHorizontal()?(l=An(a,r,s),d=t+e,c=s-r):(o.position==="left"?(l=r+e,d=An(a,i,t),u=Ze*-.5):(l=s-e,d=An(a,t,i),u=Ze*.5),c=i-t),{titleX:l,titleY:d,maxWidth:c,rotation:u}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let r=Kt(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:u,rotation:c}=this._drawArgs(s);Ta(e,t.text,0,0,r,{color:t.color,maxWidth:u,rotation:c,textAlign:B_(t.align),textBaseline:"middle",translation:[o,a]})}};function Nre(n,e){let t=new pm({ctx:n.ctx,options:e,chart:n});Un.configure(n,t,e),Un.addBox(n,t),n.titleBlock=t}var Rre={id:"title",_element:pm,start(n,e,t){Nre(n,t)},stop(n){let e=n.titleBlock;Un.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let r=n.titleBlock;Un.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},K_=new WeakMap,Fre={id:"subtitle",start(n,e,t){let r=new pm({ctx:n.ctx,options:t,chart:n});Un.configure(n,r,t),Un.addBox(n,r),K_.set(n,r)},stop(n){Un.removeBox(n,K_.get(n)),K_.delete(n)},beforeUpdate(n,e,t){let r=K_.get(n);Un.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},hm={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let u=a.tooltipPosition();r.add(u.x),i+=u.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,u)=>a+u)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let u=n[s].element;if(u&&u.hasValue()){let c=u.getCenterPoint(),l=O_(e,c);l<i&&(i=l,a=u)}}if(a){let u=a.tooltipPosition();t=u.x,r=u.y}return{x:t,y:r}}};function Bs(n,e){return e&&(wt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function _o(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Lre(n,e){let{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function LF(n,e){let t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,u=Kt(e.bodyFont),c=Kt(e.titleFont),l=Kt(e.footerFont),d=s.length,h=i.length,f=r.length,p=Mn(e.padding),g=p.height,v=0,y=r.reduce((T,R)=>T+R.before.length+R.lines.length+R.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){let T=e.displayColors?Math.max(a,u.lineHeight):u.lineHeight;g+=f*T+(y-f)*u.lineHeight+(y-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*l.lineHeight+(h-1)*e.footerSpacing);let E=0,M=function(T){v=Math.max(v,t.measureText(T).width+E)};return t.save(),t.font=c.string,lt(n.title,M),t.font=u.string,lt(n.beforeBody.concat(n.afterBody),M),E=e.displayColors?o+2+e.boxPadding:0,lt(r,T=>{lt(T.before,M),lt(T.lines,M),lt(T.after,M)}),E=0,t.font=l.string,lt(n.footer,M),t.restore(),v+=p.width,{width:v,height:g}}function Bre(n,e){let{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function $re(n,e,t,r){let{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function Vre(n,e,t,r){let{x:i,width:s}=t,{width:o,chartArea:{left:a,right:u}}=n,c="center";return r==="center"?c=i<=(a+u)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),$re(c,n,e,t)&&(c="center"),c}function BF(n,e,t){let r=t.yAlign||e.yAlign||Bre(n,t);return{xAlign:t.xAlign||e.xAlign||Vre(n,e,t,r),yAlign:r}}function jre(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function Ure(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function $F(n,e,t,r){let{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:u}=t,c=i+s,{topLeft:l,topRight:d,bottomLeft:h,bottomRight:f}=Aa(o),p=jre(e,a),g=Ure(e,u,c);return u==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(l,h)+i:a==="right"&&(p+=Math.max(d,f)+i),{x:sn(p,0,r.width-e.width),y:sn(g,0,r.height-e.height)}}function Q_(n,e,t){let r=Mn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function VF(n){return Bs([],_o(n))}function Hre(n,e,t){return vo(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function jF(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var yL={beforeTitle:Fs,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Fs,beforeBody:Fs,beforeLabel:Fs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Be(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Fs,afterBody:Fs,beforeFooter:Fs,footer:Fs,afterFooter:Fs};function Mr(n,e,t,r){let i=n[e].call(t,r);return typeof i>"u"?yL[e].call(t,r):i}var UF=(()=>{class n extends Ki{static positioners=hm;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new eb(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Hre(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,s=Mr(i,"beforeTitle",this,t),o=Mr(i,"title",this,t),a=Mr(i,"afterTitle",this,t),u=[];return u=Bs(u,_o(s)),u=Bs(u,_o(o)),u=Bs(u,_o(a)),u}getBeforeBody(t,r){return VF(Mr(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,s=[];return lt(t,o=>{let a={before:[],lines:[],after:[]},u=jF(i,o);Bs(a.before,_o(Mr(u,"beforeLabel",this,o))),Bs(a.lines,Mr(u,"label",this,o)),Bs(a.after,_o(Mr(u,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,r){return VF(Mr(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,s=Mr(i,"beforeFooter",this,t),o=Mr(i,"footer",this,t),a=Mr(i,"afterFooter",this,t),u=[];return u=Bs(u,_o(s)),u=Bs(u,_o(o)),u=Bs(u,_o(a)),u}_createItems(t){let r=this._active,i=this.chart.data,s=[],o=[],a=[],u=[],c,l;for(c=0,l=r.length;c<l;++c)u.push(Lre(this.chart,r[c]));return t.filter&&(u=u.filter((d,h,f)=>t.filter(d,h,f,i))),t.itemSort&&(u=u.sort((d,h)=>t.itemSort(d,h,i))),lt(u,d=>{let h=jF(t.callbacks,d);s.push(Mr(h,"labelColor",this,d)),o.push(Mr(h,"labelPointStyle",this,d)),a.push(Mr(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=u,u}update(t,r){let i=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let u=hm[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let c=this._size=LF(this,i),l=Object.assign({},u,c),d=BF(this.chart,i,l),h=$F(i,l,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:u.x,caretY:u.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,s){let o=this.getCaretPosition(t,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(t,r,i){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:u}=i,{topLeft:c,topRight:l,bottomLeft:d,bottomRight:h}=Aa(u),{x:f,y:p}=t,{width:g,height:v}=r,y,E,M,T,R,U;return o==="center"?(R=p+v/2,s==="left"?(y=f,E=y-a,T=R+a,U=R-a):(y=f+g,E=y+a,T=R-a,U=R+a),M=y):(s==="left"?E=f+Math.max(c,d)+a:s==="right"?E=f+g-Math.max(l,h)-a:E=this.caretX,o==="top"?(T=p,R=T-a,y=E-a,M=E+a):(T=p+v,R=T+a,y=E+a,M=E-a),U=T),{x1:y,x2:E,x3:M,y1:T,y2:R,y3:U}}drawTitle(t,r,i){let s=this.title,o=s.length,a,u,c;if(o){let l=yc(i.rtl,this.x,this.width);for(t.x=Q_(this,i.titleAlign,i),r.textAlign=l.textAlign(i.titleAlign),r.textBaseline="middle",a=Kt(i.titleFont),u=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+u,c+1===o&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,r,i,s,o){let a=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:c,boxWidth:l}=o,d=Kt(o.bodyFont),h=Q_(this,"left",o),f=s.x(h),p=c<d.lineHeight?(d.lineHeight-c)/2:0,g=r.y+p;if(o.usePointStyle){let v={radius:Math.min(l,c)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},y=s.leftForLtr(f,l)+l/2,E=g+c/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,V_(t,v,y,E),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,V_(t,v,y,E)}else{t.lineWidth=Ue(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let v=s.leftForLtr(f,l),y=s.leftForLtr(s.xPlus(f,1),l-2),E=Aa(a.borderRadius);Object.values(E).some(M=>M!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Md(t,{x:v,y:g,w:l,h:c,radius:E}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Md(t,{x:y,y:g+1,w:l-2,h:c-2,radius:E}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(v,g,l,c),t.strokeRect(v,g,l,c),t.fillStyle=a.backgroundColor,t.fillRect(y,g+1,l-2,c-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:u,boxHeight:c,boxWidth:l,boxPadding:d}=i,h=Kt(i.bodyFont),f=h.lineHeight,p=0,g=yc(i.rtl,this.x,this.width),v=function(K){r.fillText(K,g.x(t.x+p),t.y+f/2),t.y+=f+o},y=g.textAlign(a),E,M,T,R,U,q,H;for(r.textAlign=a,r.textBaseline="middle",r.font=h.string,t.x=Q_(this,y,i),r.fillStyle=i.bodyColor,lt(this.beforeBody,v),p=u&&y!=="right"?a==="center"?l/2+d:l+2+d:0,R=0,q=s.length;R<q;++R){for(E=s[R],M=this.labelTextColors[R],r.fillStyle=M,lt(E.before,v),T=E.lines,u&&T.length&&(this._drawColorBox(r,t,R,g,i),f=Math.max(h.lineHeight,c)),U=0,H=T.length;U<H;++U)v(T[U]),f=h.lineHeight;lt(E.after,v)}p=0,f=h.lineHeight,lt(this.afterBody,v),t.y-=o}drawFooter(t,r,i){let s=this.footer,o=s.length,a,u;if(o){let c=yc(i.rtl,this.x,this.width);for(t.x=Q_(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=c.textAlign(i.footerAlign),r.textBaseline="middle",a=Kt(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,u=0;u<o;++u)r.fillText(s[u],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,s){let{xAlign:o,yAlign:a}=this,{x:u,y:c}=t,{width:l,height:d}=i,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=Aa(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(u+h,c),a==="top"&&this.drawCaret(t,r,i,s),r.lineTo(u+l-f,c),r.quadraticCurveTo(u+l,c,u+l,c+f),a==="center"&&o==="right"&&this.drawCaret(t,r,i,s),r.lineTo(u+l,c+d-g),r.quadraticCurveTo(u+l,c+d,u+l-g,c+d),a==="bottom"&&this.drawCaret(t,r,i,s),r.lineTo(u+p,c+d),r.quadraticCurveTo(u,c+d,u,c+d-p),a==="center"&&o==="left"&&this.drawCaret(t,r,i,s),r.lineTo(u,c+h),r.quadraticCurveTo(u,c,u+h,c),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){let a=hm[t.position].call(this,this._active,this._eventPosition);if(!a)return;let u=this._size=LF(this,t),c=Object.assign({},a,this._size),l=BF(r,t,c),d=$F(t,c,l,r);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=u.width,this.height=u.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=Mn(r.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,r),tI(t,r.textDirection),o.y+=a.top,this.drawTitle(o,t,r),this.drawBody(o,t,r),this.drawFooter(o,t,r),nI(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,s=t.map(({datasetIndex:u,index:c})=>{let l=this.chart.getDatasetMeta(u);if(!l)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:l.data[c],index:c}}),o=!nm(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,r,i),u=this._positionChanged(a,t),c=r||!nm(a,o)||u;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),c}_getActiveElements(t,r,i,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return r.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:s,options:o}=this,a=hm[o.position].call(this,t,r);return a!==!1&&(i!==a.x||s!==a.y)}}return n})(),zre={id:"tooltip",_element:UF,positioners:hm,afterInit(n,e,t){t&&(n.tooltip=new UF({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",J(C({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yL},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},qre=Object.freeze({__proto__:null,Colors:rre,Decimation:are,Filler:Ire,Legend:Ore,SubTitle:Fre,Title:Rre,Tooltip:zre}),Wre=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Gre(n,e,t,r){let i=n.indexOf(e);if(i===-1)return Wre(n,e,t,r);let s=n.lastIndexOf(e);return i!==s?t:i}var Yre=(n,e)=>n===null?null:sn(Math.round(n),0,e);function HF(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var Kre=(()=>{class n extends wc{static id="category";static defaults={ticks:{callback:HF}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Be(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:Gre(i,t,Se(r,t),this._addedLabels),Yre(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,s=[],o=this.getLabels();o=t===0&&r===o.length-1?o:o.slice(t,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)s.push({value:a});return s}getLabelForValue(t){return HF.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function Qre(n,e){let t=[],{bounds:i,step:s,min:o,max:a,precision:u,count:c,maxTicks:l,maxDigits:d,includeBounds:h}=n,f=s||1,p=l-1,{min:g,max:v}=e,y=!Be(o),E=!Be(a),M=!Be(c),T=(v-g)/(d+1),R=NS((v-g)/p/f)*f,U,q,H,K;if(R<1e-14&&!y&&!E)return[{value:g},{value:v}];K=Math.ceil(v/R)-Math.floor(g/R),K>p&&(R=NS(K*R/p/f)*f),Be(u)||(U=Math.pow(10,u),R=Math.ceil(R*U)/U),i==="ticks"?(q=Math.floor(g/R)*R,H=Math.ceil(v/R)*R):(q=g,H=v),y&&E&&s&&AR((a-o)/s,R/1e3)?(K=Math.round(Math.min((a-o)/R,l)),R=(a-o)/K,q=o,H=a):M?(q=y?o:q,H=E?a:H,K=c-1,R=(H-q)/K):(K=(H-q)/R,Id(K,Math.round(K),R/1e3)?K=Math.round(K):K=Math.ceil(K));let pe=Math.max(FS(R),FS(q));U=Math.pow(10,Be(u)?pe:u),q=Math.round(q*U)/U,H=Math.round(H*U)/U;let Ce=0;for(y&&(h&&q!==o?(t.push({value:o}),q<o&&Ce++,Id(Math.round((q+Ce*R)*U)/U,o,zF(o,T,n))&&Ce++):q<o&&Ce++);Ce<K;++Ce){let De=Math.round((q+Ce*R)*U)/U;if(E&&De>a)break;t.push({value:De})}return E&&h&&H!==a?t.length&&Id(t[t.length-1].value,a,zF(a,T,n))?t[t.length-1].value=a:t.push({value:a}):(!E||H===a)&&t.push({value:H}),t}function zF(n,e,{horizontal:t,minRotation:r}){let i=Ci(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var Nd=class extends wc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Be(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this,o=u=>i=t?i:u,a=u=>s=r?s:u;if(e){let u=Yi(i),c=Yi(s);u<0&&c<0?a(0):u>0&&c>0&&o(0)}if(i===s){let u=s===0?1:Math.abs(s*.05);a(s+u),e||o(i-u)}this.min=i,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=Qre(i,s);return e.bounds==="ticks"&&RS(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Ad(e,this.chart.options.locale,this.options.ticks.format)}},PI=class extends Nd{static id="linear";static defaults={ticks:{callback:rm.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ft(e)?e:0,this.max=Ft(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,r=Ci(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},mm=n=>Math.floor(mo(n)),bc=(n,e)=>Math.pow(10,mm(n)+e);function qF(n){return n/Math.pow(10,mm(n))===1}function WF(n,e,t){let r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function Xre(n,e){let t=e-n,r=mm(t);for(;WF(n,e,r)>10;)r++;for(;WF(n,e,r)<10;)r--;return Math.min(r,mm(n))}function Zre(n,{min:e,max:t}){e=Ar(n.min,e);let r=[],i=mm(e),s=Xre(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),u=i>s?Math.pow(10,i):0,c=Math.round((e-u)*o)/o,l=Math.floor((e-u)/a/10)*a*10,d=Math.floor((c-l)/Math.pow(10,s)),h=Ar(n.min,Math.round((u+l+d*Math.pow(10,s))*o)/o);for(;h<t;)r.push({value:h,major:qF(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((u+l+d*Math.pow(10,s))*o)/o;let f=Ar(n.max,h);return r.push({value:f,major:qF(f),significand:d}),r}var OI=class extends wc{static id="logarithmic";static defaults={ticks:{callback:rm.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let r=Nd.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Ft(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ft(e)?Math.max(0,e):null,this.max=Ft(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ft(this._userMin)&&(this.min=e===bc(this.min,0)?bc(this.min,-1):bc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,s=a=>r=e?r:a,o=a=>i=t?i:a;r===i&&(r<=0?(s(1),o(10)):(s(bc(r,-1)),o(bc(i,1)))),r<=0&&s(bc(i,-1)),i<=0&&o(bc(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},r=Zre(t,this);return e.bounds==="ticks"&&RS(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Ad(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=mo(e),this._valueRange=mo(this.max)-mo(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(mo(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function NI(n){let e=n.ticks;if(e.display&&n.display){let t=Mn(e.backdropPadding);return Se(e.font&&e.font.size,Tt.font.size)+t.height}return 0}function Jre(n,e,t){return t=wt(t)?t:[t],{w:BR(n,e.string,t),h:t.length*e.lineHeight}}function GF(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function eie(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Ze/s:0;for(let u=0;u<s;u++){let c=o.setContext(n.getPointLabelContext(u));i[u]=c.padding;let l=n.getPointPosition(u,n.drawingArea+i[u],a),d=Kt(c.font),h=Jre(n.ctx,d,n._pointLabels[u]);r[u]=h;let f=Tn(n.getIndexAngle(u)+a),p=Math.round(F_(f)),g=GF(p,l.x,h.w,0,180),v=GF(p,l.y,h.h,90,270);tie(t,e,f,g,v)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=iie(n,r,i)}function tie(n,e,t,r,i){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,u=0;r.start<e.l?(a=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(u=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-u)):i.end>e.b&&(u=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+u))}function nie(n,e,t){let r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=t,u=n.getPointPosition(e,r+i+o,s),c=Math.round(F_(Tn(u.angle+Vt))),l=aie(u.y,a.h,c),d=sie(c),h=oie(u.x,a.w,d);return{visible:!0,x:u.x,y:l,textAlign:d,left:h,top:l,right:h+a.w,bottom:l+a.h}}function rie(n,e){if(!e)return!0;let{left:t,top:r,right:i,bottom:s}=n;return!(Rs({x:t,y:r},e)||Rs({x:t,y:s},e)||Rs({x:i,y:r},e)||Rs({x:i,y:s},e))}function iie(n,e,t){let r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,u={extra:NI(s)/2,additionalAngle:o?Ze/i:0},c;for(let l=0;l<i;l++){u.padding=t[l],u.size=e[l];let d=nie(n,l,u);r.push(d),a==="auto"&&(d.visible=rie(d,c),d.visible&&(c=d))}return r}function sie(n){return n===0||n===180?"center":n<180?"left":"right"}function oie(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function aie(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function uie(n,e,t){let{left:r,top:i,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Be(a)){let u=Aa(e.borderRadius),c=Mn(e.backdropPadding);n.fillStyle=a;let l=r-c.left,d=i-c.top,h=s-r+c.width,f=o-i+c.height;Object.values(u).some(p=>p!==0)?(n.beginPath(),Md(n,{x:l,y:d,w:h,h:f,radius:u}),n.fill()):n.fillRect(l,d,h,f)}}function cie(n,e){let{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){let s=n._pointLabelItems[i];if(!s.visible)continue;let o=r.setContext(n.getPointLabelContext(i));uie(t,o,s);let a=Kt(o.font),{x:u,y:c,textAlign:l}=s;Ta(t,n._pointLabels[i],u,c+a.lineHeight/2,a,{color:o.color,textAlign:l,textBaseline:"middle"})}}function _L(n,e,t,r){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Et);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function lie(n,e,t,r,i){let s=n.ctx,o=e.circular,{color:a,lineWidth:u}=e;!o&&!r||!a||!u||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=u,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),_L(n,t,o,r),s.closePath(),s.stroke(),s.restore())}function die(n,e,t){return vo(n,{label:t,index:e,type:"pointLabel"})}var RI=class extends Nd{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:rm.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Mn(NI(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Ft(e)&&!isNaN(e)?e:0,this.max=Ft(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/NI(this.options))}generateTickLabels(e){Nd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{let i=yt(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?eie(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){let t=Et/(this._pointLabels.length||1),r=this.options.startAngle||0;return Tn(e*t+Ci(r))}getDistanceFromCenterForValue(e){if(Be(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Be(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let r=t[e];return die(this.getContext(),e,r)}}getPointPosition(e,t,r=0){let i=this.getIndexAngle(e)-Vt+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),_L(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length,a,u,c;if(t.pointLabels.display&&cie(this,o),i.display&&this.ticks.forEach((l,d)=>{if(d!==0||d===0&&this.min<0){u=this.getDistanceFromCenterForValue(l.value);let h=this.getContext(d),f=i.setContext(h),p=s.setContext(h);lie(this,f,u,o,p)}}),r.display){for(e.save(),a=o-1;a>=0;a--){let l=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=l;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(l.borderDash),e.lineDashOffset=l.borderDashOffset,u=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,u),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,u)=>{if(u===0&&this.min>=0&&!t.reverse)return;let c=r.setContext(this.getContext(u)),l=Kt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[u].value),c.showLabelBackdrop){e.font=l.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;let d=Mn(c.backdropPadding);e.fillRect(-o/2-d.left,-s-l.size/2-d.top,o+d.width,l.size+d.height)}Ta(e,a.label,0,-s,l,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}},ub={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},kr=Object.keys(ub);function YF(n,e){return n-e}function KF(n,e){if(Be(e))return null;let t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts,o=e;return typeof r=="function"&&(o=r(o)),Ft(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(vc(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function QF(n,e,t,r){let i=kr.length;for(let s=kr.indexOf(n);s<i-1;++s){let o=ub[kr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return kr[s]}return kr[i-1]}function hie(n,e,t,r,i){for(let s=kr.length-1;s>=kr.indexOf(t);s--){let o=kr[s];if(ub[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return kr[t?kr.indexOf(t):0]}function fie(n){for(let e=kr.indexOf(n)+1,t=kr.length;e<t;++e)if(ub[kr[e]].common)return kr[e]}function XF(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:r,hi:i}=L_(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function pie(n,e,t,r){let i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value,a,u;for(a=s;a<=o;a=+i.add(a,1,r))u=t[a],u>=0&&(e[u].major=!0);return e}function ZF(n,e,t){let r=[],i={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!t?r:pie(n,r,i,t)}var FI=(()=>{class n extends wc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),s=this._adapter=new Dte._date(t.adapters.date);s.init(r),Dd(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:KF(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:u}=this.getUserBounds();function c(l){!a&&!isNaN(l.min)&&(s=Math.min(s,l.min)),!u&&!isNaN(l.max)&&(o=Math.max(o,l.max))}(!a||!u)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Ft(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=Ft(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,u=PR(s,o,a);return this._unit=r.unit||(i.autoSkip?QF(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):hie(this,u.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:fie(this._unit),this.initOffsets(s),t.reverse&&u.reverse(),ZF(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?r=1-s:r=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=sn(r,0,a),i=sn(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||QF(o.minUnit,r,i,this._getLabelCapacity(r)),u=Se(s.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,l=vc(c)||c===!0,d={},h=r,f,p;if(l&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,l?"day":a),t.diff(i,r,a)>1e5*u)throw new Error(r+" and "+i+" are too far apart with stepSize of "+u+" "+a);let g=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<i;f=+t.add(f,u,a),p++)XF(d,f,g);return(f===i||s.bounds==="ticks"||p===1)&&XF(d,f,g),Object.keys(d).sort(YF).map(v=>+v)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,s){let o=this.options,a=o.ticks.callback;if(a)return yt(a,[t,r,i],this);let u=o.time.displayFormats,c=this._unit,l=this._majorUnit,d=c&&u[c],h=l&&u[l],f=i[r],p=l&&h&&f&&f.major;return this._adapter.format(t,s||(p?h:d))}generateTickLabels(t){let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],s.label=this._tickFormatFunction(s.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,s=Ci(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*a,h:i*a+u*o}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(t,0,ZF(this,[t],this._majorUnit),s),a=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)t=t.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let s=this.getLabels();for(r=0,i=s.length;r<i;++r)t.push(KF(this,s[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return $S(t.sort(YF))}}return n})();function X_(n,e,t){let r=0,i=n.length-1,s,o,a,u;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Ns(n,"pos",e)),{pos:s,time:a}=n[r],{pos:o,time:u}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Ns(n,"time",e)),{time:s,pos:a}=n[r],{time:o,pos:u}=n[i]);let c=o-s;return c?a+(u-a)*(e-s)/c:a}var LI=class extends FI{static id="timeseries";static defaults=FI.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=X_(t,this.min),this._tableRange=X_(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:r}=this,i=[],s=[],o,a,u,c,l;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=r&&i.push(c);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)l=i[o+1],u=i[o-1],c=i[o],Math.round((l+u)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(X_(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return X_(this._table,r*this._tableRange+this._minPos,!0)}},mie=Object.freeze({__proto__:null,CategoryScale:Kre,LinearScale:PI,LogarithmicScale:OI,RadialLinearScale:RI,TimeScale:FI,TimeSeriesScale:LI}),bL=[xte,Qne,qre,mie];bo.register(...bL);var gie=["canvas"];function vie(n,e){n&1&&(x(0,"div",5),P(1," \u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F "),D())}var cb=class n{income=0;expense=0;canvas;chart;get hasData(){return this.income>0||this.expense>0}ngAfterViewInit(){setTimeout(()=>{this.canvas?.nativeElement&&this.hasData&&this.initChart()},0)}ngOnChanges(e){requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(!this.chart){this.canvas?.nativeElement&&this.hasData&&this.initChart();return}(e.income||e.expense)&&this.updateChart()})})}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=null)}initChart(){if(this.chart&&(this.chart.destroy(),this.chart=null),!this.canvas?.nativeElement||!this.hasData)return;let e=this.income||0,t=Math.abs(this.expense||0),r={type:"doughnut",data:{labels:["\u0414\u043E\u0445\u043E\u0434\u044B","\u0420\u0430\u0441\u0445\u043E\u0434\u044B"],datasets:[{data:[e,t],backgroundColor:["rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(16, 185, 129)","rgb(239, 68, 68)"],borderWidth:2,hoverOffset:4}]},options:{cutout:"60%",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:15,font:{size:12,family:"'Inter', sans-serif"},color:"#FFFFFF",usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",padding:12,titleFont:{size:14,weight:"bold",family:"'Inter', sans-serif"},bodyFont:{size:13,family:"'Inter', sans-serif"},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,callbacks:{label:i=>{let s=i.label||"",o=i.parsed??0,a=typeof o=="number"?o:0,l=i.dataset.data.reduce((h,f)=>h+(typeof f=="number"?f:0),0)||0,d=l>0?(a/l*100).toFixed(1):"0";return`${s}: ${a.toFixed(2)} \u20BD (${d}%)`}}}}}};try{this.chart=new bo(this.canvas.nativeElement,r)}catch(i){console.error("Error initializing pie chart:",i)}}updateChart(){if(!this.chart||!this.canvas?.nativeElement){this.hasData&&this.initChart();return}try{let e=this.income||0,t=Math.abs(this.expense||0);if(this.chart.data.datasets[0].data=[e,t],!this.hasData){this.chart.destroy(),this.chart=null;return}this.chart.update("active")}catch(e){console.error("Error updating pie chart:",e),this.initChart()}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["app-pie-chart"]],viewQuery:function(t,r){if(t&1&&Dr(gie,5),t&2){let i;Vn(i=jn())&&(r.canvas=i.first)}},inputs:{income:"income",expense:"expense"},features:[Bn],decls:7,vars:3,consts:[["canvas",""],[1,"pie-chart-container"],[1,"pie-chart-title"],[1,"pie-chart-wrapper"],["class","pie-chart-empty",4,"ngIf"],[1,"pie-chart-empty"]],template:function(t,r){t&1&&(x(0,"div",1)(1,"h3",2),P(2,"\u041E\u0431\u0449\u0430\u044F \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430"),D(),x(3,"div",3),Dt(4,"canvas",null,0),D(),je(6,vie,2,0,"div",4),D()),t&2&&(V(3),ze("hidden",!r.hasData),V(3),X("ngIf",!r.hasData))},dependencies:[et,lr],styles:[".pie-chart-container[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-lg);box-shadow:var(--shadow-sm)}.pie-chart-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-text-primary);margin-bottom:var(--space-lg)}.pie-chart-wrapper[_ngcontent-%COMP%]{position:relative;height:300px;width:100%;display:flex;align-items:center;justify-content:center}.pie-chart-wrapper.hidden[_ngcontent-%COMP%]{display:none}.pie-chart-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:300px;color:var(--color-text-tertiary);font-size:.875rem}@media(max-width:480px){.pie-chart-container[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-sm)}.pie-chart-wrapper[_ngcontent-%COMP%]{height:220px}.pie-chart-empty[_ngcontent-%COMP%]{height:220px;font-size:.8125rem}.pie-chart-title[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:var(--space-md)}}@media(min-width:481px)and (max-width:768px){.pie-chart-container[_ngcontent-%COMP%]{padding:var(--space-md)}.pie-chart-wrapper[_ngcontent-%COMP%], .pie-chart-empty[_ngcontent-%COMP%]{height:250px}}@media(min-width:1921px)and (max-width:2560px){.pie-chart-container[_ngcontent-%COMP%]{padding:var(--space-xl)}.pie-chart-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:var(--space-xl)}.pie-chart-wrapper[_ngcontent-%COMP%]{height:400px}.pie-chart-empty[_ngcontent-%COMP%]{height:400px;font-size:1rem}}@media(min-width:2561px)and (max-width:3840px){.pie-chart-container[_ngcontent-%COMP%]{padding:var(--space-2xl)}.pie-chart-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:var(--space-xl)}.pie-chart-wrapper[_ngcontent-%COMP%]{height:500px}.pie-chart-empty[_ngcontent-%COMP%]{height:500px;font-size:1.125rem}}@media(min-width:3841px){.pie-chart-container[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}.pie-chart-title[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:var(--space-2xl)}.pie-chart-wrapper[_ngcontent-%COMP%]{height:600px}.pie-chart-empty[_ngcontent-%COMP%]{height:600px;font-size:1.25rem}}"]})};var yie=["canvas"];function _ie(n,e){n&1&&(x(0,"div",5),P(1," \u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F "),D())}var lb=class n{categories=[];canvas;chart;hasData(){return this.categories.length>0&&this.categories.some(e=>e.income>0||e.expense>0)}ngAfterViewInit(){setTimeout(()=>{this.canvas?.nativeElement&&this.hasData()&&this.initChart()},0)}ngOnChanges(e){requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(!this.chart){this.canvas?.nativeElement&&this.hasData()&&this.initChart();return}e.categories&&this.updateChart()})})}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=null)}initChart(){if(this.chart&&(this.chart.destroy(),this.chart=null),!this.canvas?.nativeElement||!this.hasData())return;let t=[...this.categories].sort((a,u)=>{let c=Math.abs(a.total);return Math.abs(u.total)-c}).slice(0,10),r=t.map(a=>a.title),i=t.map(a=>a.income||0),s=t.map(a=>Math.abs(a.expense||0)),o={type:"bar",data:{labels:r,datasets:[{label:"\u0414\u043E\u0445\u043E\u0434\u044B",data:i,backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgb(16, 185, 129)",borderWidth:2},{label:"\u0420\u0430\u0441\u0445\u043E\u0434\u044B",data:s,backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgb(239, 68, 68)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:function(a){return a.toLocaleString("ru-RU")+" \u20BD"},color:"#FFFFFF",font:{family:"'Inter', sans-serif"}},grid:{color:"rgba(251,251,251,0.1)"}},x:{ticks:{maxRotation:45,minRotation:45,color:"#FFFFFF",font:{family:"'Inter', sans-serif"}},grid:{color:"rgba(255, 255, 255, 0.1)"}}},plugins:{legend:{position:"top",labels:{padding:15,font:{size:12,family:"'Inter', sans-serif"},color:"#FFFFFF",usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",padding:12,titleFont:{size:14,weight:"bold",family:"'Inter', sans-serif"},bodyFont:{size:13,family:"'Inter', sans-serif"},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,callbacks:{label:a=>{let u=a.dataset.label||"",c=a.parsed.y||0;return`${u}: ${c.toLocaleString("ru-RU")} \u20BD`}}}}}};try{this.chart=new bo(this.canvas.nativeElement,o)}catch(a){console.error("Error initializing categories chart:",a)}}updateChart(){if(!this.chart||!this.canvas?.nativeElement){this.hasData()&&this.initChart();return}try{let t=[...this.categories].sort((o,a)=>{let u=Math.abs(o.total);return Math.abs(a.total)-u}).slice(0,10),r=t.map(o=>o.title),i=t.map(o=>o.income||0),s=t.map(o=>Math.abs(o.expense||0));if(this.chart.data.labels=r,this.chart.data.datasets[0].data=i,this.chart.data.datasets[1].data=s,!this.hasData()){this.chart.destroy(),this.chart=null;return}this.chart.update("active")}catch(e){console.error("Error updating categories chart:",e),this.initChart()}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["app-categories-chart"]],viewQuery:function(t,r){if(t&1&&Dr(yie,5),t&2){let i;Vn(i=jn())&&(r.canvas=i.first)}},inputs:{categories:"categories"},features:[Bn],decls:7,vars:3,consts:[["canvas",""],[1,"categories-chart-container"],[1,"categories-chart-title"],[1,"categories-chart-wrapper"],["class","categories-chart-empty",4,"ngIf"],[1,"categories-chart-empty"]],template:function(t,r){t&1&&(x(0,"div",1)(1,"h3",2),P(2,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438"),D(),x(3,"div",3),Dt(4,"canvas",null,0),D(),je(6,_ie,2,0,"div",4),D()),t&2&&(V(3),ze("hidden",!r.hasData()),V(3),X("ngIf",!r.hasData()))},dependencies:[et,lr],styles:[".categories-chart-container[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-lg);box-shadow:var(--shadow-sm)}.categories-chart-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-text-primary);margin-bottom:var(--space-lg)}.categories-chart-wrapper[_ngcontent-%COMP%]{position:relative;height:400px;width:100%;display:flex;align-items:center;justify-content:center}.categories-chart-wrapper.hidden[_ngcontent-%COMP%]{display:none}.categories-chart-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:400px;color:var(--color-text-tertiary);font-size:.875rem}@media(max-width:480px){.categories-chart-container[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-sm)}.categories-chart-wrapper[_ngcontent-%COMP%]{height:300px}.categories-chart-empty[_ngcontent-%COMP%]{height:300px;font-size:.8125rem}.categories-chart-title[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:var(--space-md)}}@media(min-width:481px)and (max-width:1023px){.categories-chart-wrapper[_ngcontent-%COMP%], .categories-chart-empty[_ngcontent-%COMP%]{height:350px}}"]})};var Oa=class n{transform(e,t="short"){if(!e)return"";let r=typeof e=="string"?new Date(e):e;if(isNaN(r.getTime()))return"";let i=r.getDate().toString().padStart(2,"0"),s=(r.getMonth()+1).toString().padStart(2,"0"),o=r.getFullYear(),a=r.getHours().toString().padStart(2,"0"),u=r.getMinutes().toString().padStart(2,"0"),c=r.getSeconds().toString().padStart(2,"0"),l=["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"],d=["\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0432\u0442\u043E\u0440\u043D\u0438\u043A","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043F\u044F\u0442\u043D\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043E\u0442\u0430"];switch(t){case"short":return`${i}.${s}.${o} ${a}:${u}`;case"medium":return`${i}.${s}.${o} ${a}:${u}:${c}`;case"long":return`${i} ${l[r.getMonth()]} ${o} ${a}:${u}`;case"full":return`${d[r.getDay()]}, ${i} ${l[r.getMonth()]} ${o} ${a}:${u}:${c}`;default:return`${i}.${s}.${o} ${a}:${u}`}}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=Vl({name:"localDate",type:n,pure:!0})};var bie=["overlay"],wie=["container"],Eie=["*"];function Cie(n,e){if(n&1){let t=St();x(0,"div",7)(1,"h3",8),P(2),D(),x(3,"button",9),ye("click",function(){qe(t);let i=oe();return We(i.close())}),P(4," \xD7 "),D()()}if(n&2){let t=oe();V(2),Sr(t.title)}}function xie(n,e){if(n&1){let t=St();x(0,"button",13),ye("click",function(){qe(t);let i=oe(2);return We(i.onCancel())}),P(1),D()}if(n&2){let t=oe(2);V(),Ot(" ",t.cancelText," ")}}function Die(n,e){if(n&1){let t=St();x(0,"button",14),ye("click",function(){qe(t);let i=oe(2);return We(i.onConfirm())}),P(1),D()}if(n&2){let t=oe(2);ze("danger",t.confirmDanger),V(),Ot(" ",t.confirmText," ")}}function Sie(n,e){if(n&1&&(x(0,"div",10),je(1,xie,2,1,"button",11)(2,Die,2,3,"button",12),D()),n&2){let t=oe();V(),X("ngIf",t.showCancel),V(),X("ngIf",t.showConfirm)}}var Na=class n{isOpen=!1;title="";showFooter=!0;showCancel=!0;showConfirm=!0;cancelText="\u041E\u0442\u043C\u0435\u043D\u0430";confirmText="\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C";confirmDanger=!1;closeOnOverlayClick=!0;closeOnEscape=!0;confirm=new ft;cancel=new ft;closeEvent=new ft;overlay;container;escapeListener;ngAfterViewInit(){this.closeOnEscape&&(this.escapeListener=e=>{e.key==="Escape"&&this.isOpen&&this.close()},document.addEventListener("keydown",this.escapeListener))}ngOnDestroy(){this.escapeListener&&document.removeEventListener("keydown",this.escapeListener)}onConfirm(){this.confirm.emit(),this.close()}onCancel(){this.cancel.emit(),this.close()}close(){this.closeEvent.emit()}onOverlayClick(e){this.closeOnOverlayClick&&e.target===this.overlay?.nativeElement&&this.close()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["app-modal"]],viewQuery:function(t,r){if(t&1&&Dr(bie,5)(wie,5),t&2){let i;Vn(i=jn())&&(r.overlay=i.first),Vn(i=jn())&&(r.container=i.first)}},inputs:{isOpen:"isOpen",title:"title",showFooter:"showFooter",showCancel:"showCancel",showConfirm:"showConfirm",cancelText:"cancelText",confirmText:"confirmText",confirmDanger:"confirmDanger",closeOnOverlayClick:"closeOnOverlayClick",closeOnEscape:"closeOnEscape"},outputs:{confirm:"confirm",cancel:"cancel",closeEvent:"closeEvent"},ngContentSelectors:Eie,decls:8,vars:4,consts:[["overlay",""],["container",""],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],["class","modal-header",4,"ngIf"],[1,"modal-body"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button","title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C",1,"modal-close",3,"click"],[1,"modal-footer"],["class","modal-button modal-button-cancel","type","button",3,"click",4,"ngIf"],["class","modal-button modal-button-confirm","type","button",3,"danger","click",4,"ngIf"],["type","button",1,"modal-button","modal-button-cancel",3,"click"],["type","button",1,"modal-button","modal-button-confirm",3,"click"]],template:function(t,r){if(t&1){let i=St();Vx(),x(0,"div",2,0),ye("click",function(o){return qe(i),We(r.onOverlayClick(o))}),x(2,"div",3,1),ye("click",function(o){return qe(i),We(o.stopPropagation())}),je(4,Cie,5,1,"div",4),x(5,"div",5),jx(6),D(),je(7,Sie,3,2,"div",6),D()()}t&2&&(ze("show",r.isOpen),V(4),X("ngIf",r.title),V(3),X("ngIf",r.showFooter))},dependencies:[et,lr],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity var(--transition-fast),visibility var(--transition-fast);padding:var(--space-md);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-overlay.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-container[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border-radius:var(--radius-lg);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;transform:scale(.95);transition:transform var(--transition-fast);border:1px solid var(--color-border)}.modal-overlay.show[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]{transform:scale(1)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--space-lg);border-bottom:1px solid var(--color-border)}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary);margin:0}.modal-close[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:var(--color-bg-secondary);color:var(--color-text-secondary);border:none;font-size:1.5rem;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-fast);flex-shrink:0}.modal-close[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-tertiary);color:var(--color-text-primary);transform:scale(1.1)}.modal-body[_ngcontent-%COMP%]{padding:var(--space-lg);color:var(--color-text-primary);line-height:1.6}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:flex-end;padding:var(--space-lg);border-top:1px solid var(--color-border)}.modal-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-md);font-weight:500;font-size:.9375rem;border:none;cursor:pointer;transition:all var(--transition-fast);min-width:100px}.modal-button-cancel[_ngcontent-%COMP%]{background-color:var(--color-bg-secondary);color:var(--color-text-secondary)}.modal-button-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-tertiary);color:var(--color-text-primary)}.modal-button-confirm[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.modal-button-confirm[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-md)}.modal-button-confirm.danger[_ngcontent-%COMP%]{background-color:var(--color-expense)}.modal-button-confirm.danger[_ngcontent-%COMP%]:hover{background-color:#dc2626}@media(max-width:480px){.modal-container[_ngcontent-%COMP%]{max-width:calc(100% - var(--space-md));margin:var(--space-sm)}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-sm)}.modal-title[_ngcontent-%COMP%]{font-size:1.125rem}.modal-body[_ngcontent-%COMP%]{font-size:.9375rem}.modal-footer[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:var(--space-sm)}.modal-button[_ngcontent-%COMP%]{width:100%;font-size:.9375rem}}@media(min-width:481px)and (max-width:768px){.modal-container[_ngcontent-%COMP%]{max-width:calc(100% - var(--space-md));margin:var(--space-md)}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:var(--space-md)}.modal-footer[_ngcontent-%COMP%]{flex-direction:column-reverse}.modal-button[_ngcontent-%COMP%]{width:100%}}@media(min-width:1921px)and (max-width:2560px){.modal-container[_ngcontent-%COMP%]{max-width:600px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:var(--space-xl)}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem}.modal-body[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.7}.modal-button[_ngcontent-%COMP%]{font-size:1.125rem;padding:var(--space-md) var(--space-xl);min-width:120px}}@media(min-width:2561px)and (max-width:3840px){.modal-container[_ngcontent-%COMP%]{max-width:700px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:var(--space-2xl)}.modal-title[_ngcontent-%COMP%]{font-size:1.75rem}.modal-body[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.8}.modal-button[_ngcontent-%COMP%]{font-size:1.25rem;padding:var(--space-lg) var(--space-2xl);min-width:140px}}@media(min-width:3841px){.modal-container[_ngcontent-%COMP%]{max-width:800px}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}.modal-title[_ngcontent-%COMP%]{font-size:2rem}.modal-body[_ngcontent-%COMP%]{font-size:1.375rem;line-height:1.8}.modal-button[_ngcontent-%COMP%]{font-size:1.375rem;padding:var(--space-xl) var(--space-2xl);min-width:160px}}"]})};var wL=(n,e)=>e.value;function Iie(n,e){if(n&1&&(x(0,"span"),P(1),D()),n&2){let t=oe(2);V(),Is(" \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0437\u0434\u0430\u0442\u044C ",t.DEMO_LIMIT-t.userItemsCount()," \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438",t.DEMO_LIMIT-t.userItemsCount()===1?"\u044E":"\u0438"," \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u0430. \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043D\u0435\u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439. ")}}function Tie(n,e){if(n&1&&(x(0,"span"),P(1),D()),n&2){let t=oe(2);V(),Ot(" \u0414\u043E\u0441\u0442\u0438\u0433\u043D\u0443\u0442 \u043B\u0438\u043C\u0438\u0442 \u0434\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C\u0430 (",t.DEMO_LIMIT," \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438). \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043D\u0435\u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439. ")}}function Aie(n,e){if(n&1&&(x(0,"div",2),Ds(1,Iie,2,2,"span"),Ds(2,Tie,2,1,"span"),D()),n&2){let t=oe();V(),Ss(t.canCreateInDemo()?1:-1),V(),Ss(t.canCreateInDemo()?-1:2)}}function Mie(n,e){if(n&1){let t=St();x(0,"div",27)(1,"div",28)(2,"button",29),ye("click",function(i){let s=qe(t).$implicit,o=oe();return We(o.toggleFavorite(s.id,i))}),P(3," \u2605 "),D(),x(4,"div",30),ye("click",function(){let i=qe(t).$implicit,s=oe();return We(s.open(i.id))}),x(5,"div",31),P(6),D(),x(7,"div",32)(8,"span",33),P(9),ao(10,"localDate"),D()()()()()}if(n&2){let t=e.$implicit;ze("favorite",t.isFavorite),V(2),ze("active",t.isFavorite),X("title",Hx(t.isFavorite?"\u0423\u0431\u0440\u0430\u0442\u044C \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0435")),V(4),Sr(t.title),V(3),Ot(" \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E: ",la(10,8,t.lastUpdated,"short")," ")}}function kie(n,e){n&1&&(x(0,"div",11)(1,"p"),P(2,"\u041D\u0435\u0442 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439. \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E \u0434\u043B\u044F \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u0444\u0438\u043D\u0430\u043D\u0441\u043E\u0432."),D()())}function Pie(n,e){if(n&1){let t=St();x(0,"button",34),ye("click",function(){let i=qe(t).$implicit,s=oe();return We(s.selectedPeriod.set(i.value))}),P(1),D()}if(n&2){let t=e.$implicit,r=oe();ze("active",r.selectedPeriod()===t.value),V(),Ot(" ",t.label," ")}}function Oie(n,e){if(n&1){let t=St();x(0,"button",34),ye("click",function(){let i=qe(t).$implicit,s=oe();return We(s.selectedPeriod.set(i.value))}),P(1),D()}if(n&2){let t=e.$implicit,r=oe();ze("active",r.selectedPeriod()===t.value),V(),Ot(" ",t.label," ")}}var db=class n{itemStore=$(_d);txStore=$(bd);router=$(yi);authService=$(Yt);isMobile(){return typeof window>"u"?!1:window.innerWidth<=768}title="";isDemoMode=this.itemStore.isDemoMode;items=Xe(()=>this.itemStore.items().sort((t,r)=>t.isFavorite&&!r.isFavorite?-1:!t.isFavorite&&r.isFavorite?1:t.sortOrder!==void 0&&r.sortOrder!==void 0?t.sortOrder-r.sortOrder:t.sortOrder!==void 0?-1:r.sortOrder!==void 0?1:new Date(r.lastUpdated).getTime()-new Date(t.lastUpdated).getTime()));allTransactions=this.txStore.all;statistics=Xe(()=>{let e=this.filterByPeriod(this.allTransactions(),this.selectedPeriod()),t=0,r=0;return e.forEach(i=>{i.type==="income"?t+=i.amount:r+=i.amount}),{income:t,expense:r}});categoriesChartData=Xe(()=>{let e=this.itemStore.items(),t=this.filterByPeriod(this.allTransactions(),this.selectedPeriod()),r=new Map;return e.forEach(s=>{r.set(s.id,{income:0,expense:0})}),t.forEach(s=>{let o=r.get(s.item_id);o&&(s.type==="income"?o.income+=s.amount:o.expense+=s.amount)}),e.map(s=>{let o=r.get(s.id)||{income:0,expense:0};return{id:s.id,title:s.title,income:o.income,expense:o.expense,total:o.income-o.expense}}).filter(s=>s.income>0||s.expense>0)});selectedPeriod=Re("month");periods=[{value:"day",label:"\u0414\u0435\u043D\u044C"},{value:"week",label:"\u041D\u0435\u0434\u0435\u043B\u044F"},{value:"month",label:"\u041C\u0435\u0441\u044F\u0446"},{value:"year",label:"\u0413\u043E\u0434"}];showMobileChart=!1;showFavoriteModal=Re(!1);showDemoLimitModal=Re(!1);userItemsCount=Xe(()=>this.isDemoMode()?this.itemStore.items().filter(e=>!e.id.startsWith("demo-")).length:0);DEMO_LIMIT=2;canCreateInDemo=Xe(()=>this.isDemoMode()?this.userItemsCount()<this.DEMO_LIMIT:!0);toggleMobileChart(){this.showMobileChart=!this.showMobileChart}async add(e){if(e&&(e.preventDefault(),e.stopPropagation()),!!this.title.trim()){if(this.isDemoMode()&&!this.canCreateInDemo()){this.showDemoLimitModal.set(!0);return}try{await this.itemStore.create(this.title.trim()),this.title="",this.isDemoMode()&&!this.canCreateInDemo()&&this.showDemoLimitModal.set(!0)}catch(t){t.message==="DEMO_LIMIT_REACHED"?this.showDemoLimitModal.set(!0):alert(t.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438. \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438.")}}}open(e){this.router.navigate(["/item",e])}async toggleFavorite(e,t){if(t.stopPropagation(),this.isDemoMode()){this.showFavoriteModal.set(!0);return}await this.itemStore.toggleFavorite(e)}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}trackByItemId(e,t){return t.id}filterByPeriod(e,t){if(t==="year")return e.filter(s=>{let o=new Date(s.date);return!isNaN(o.getTime())});let r=new Date,i=this.getPeriodStart(r,t);return e.filter(s=>{let o=new Date(s.date);return isNaN(o.getTime())?!1:o>=i&&o<=r})}getPeriodStart(e,t){let r=new Date(e);switch(t){case"day":return r.setHours(0,0,0,0),r;case"week":{let i=r.getDay()||7;return i!==1&&r.setDate(r.getDate()-(i-1)),r.setHours(0,0,0,0),r}case"month":return r.setDate(1),r.setHours(0,0,0,0),r;default:return r}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["ng-component"]],decls:58,vars:25,consts:[[1,"home-page"],[1,"home-layout"],[1,"demo-form-hint"],[1,"home-content"],[1,"home-form"],[3,"submit"],[1,"form-row"],["type","text","name","title","required","",3,"ngModelChange","ngModel","placeholder","disabled"],["type","submit",3,"disabled"],[1,"items-list"],[1,"items-item",3,"favorite"],[1,"items-empty"],[1,"home-chart","desktop-chart"],[1,"home-charts-container"],[1,"home-period-controls"],[1,"home-period-button",3,"active"],[3,"income","expense"],[3,"categories"],[1,"mobile-chart"],[1,"accordion-toggle",3,"click"],[1,"mobile-chart-panel"],[1,"mobile-charts-container"],["title","\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F","confirmText","\u041F\u043E\u043D\u044F\u0442\u043D\u043E",3,"confirm","closeEvent","isOpen","showCancel"],[2,"margin-top","var(--space-md)","color","var(--color-text-secondary)"],["title","\u041B\u0438\u043C\u0438\u0442 \u0434\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C\u0430 \u0434\u043E\u0441\u0442\u0438\u0433\u043D\u0443\u0442","confirmText","\u0412\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443",3,"confirm","closeEvent","isOpen","showCancel","confirmDanger"],[2,"margin-top","var(--space-md)","color","var(--color-text-primary)","font-weight","500"],[2,"margin-top","var(--space-sm)","padding-left","var(--space-lg)","color","var(--color-text-secondary)"],[1,"items-item"],[1,"items-item-content"],[1,"favorite-button",3,"click","title"],[1,"items-item-info",3,"click"],[1,"items-item-title"],[1,"items-item-meta"],[1,"items-item-date"],[1,"home-period-button",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1),Ds(2,Aie,3,2,"div",2),x(3,"div",3)(4,"div",4)(5,"form",5),ye("submit",function(s){return r.add(s)}),x(6,"div",6)(7,"input",7),ur("ngModelChange",function(s){return Ir(r.title,s)||(r.title=s),s}),D(),x(8,"button",8),P(9,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),D()()()(),x(10,"div",9),qu(11,Mie,11,11,"div",10,r.trackByItemId,!0),Ds(13,kie,3,0,"div",11),D()(),x(14,"div",12)(15,"div",13)(16,"div",14),qu(17,Pie,2,3,"button",15,wL),D(),Dt(19,"app-pie-chart",16)(20,"app-categories-chart",17),D()()(),x(21,"div",18)(22,"button",19),ye("click",function(){return r.toggleMobileChart()}),P(23),D(),x(24,"div",20)(25,"div",21)(26,"div",14),qu(27,Oie,2,3,"button",15,wL),D(),Dt(29,"app-pie-chart",16)(30,"app-categories-chart",17),D()()(),x(31,"app-modal",22),ye("confirm",function(){return r.showFavoriteModal.set(!1)})("closeEvent",function(){return r.showFavoriteModal.set(!1)}),x(32,"p"),P(33,"\u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0438\u0437\u043C\u0435\u043D\u044F\u0442\u044C \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0435."),D(),x(34,"p",23),P(35," \u0410\u0432\u0442\u043E\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044C \u0447\u0435\u0440\u0435\u0437 VK, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u0441\u0442\u0443\u043F \u043A\u043E \u0432\u0441\u0435\u043C \u0444\u0443\u043D\u043A\u0446\u0438\u044F\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F. "),D()(),x(36,"app-modal",24),ye("confirm",function(){return r.scrollToTop(),r.showDemoLimitModal.set(!1)})("closeEvent",function(){return r.showDemoLimitModal.set(!1)}),x(37,"p"),P(38," \u0412 \u0434\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C\u0435 \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E "),x(39,"strong"),P(40),D(),P(41," \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u0430. "),D(),x(42,"p",23),P(43),D(),x(44,"p",25),P(45," \u{1F510} "),x(46,"strong"),P(47,"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044C \u0447\u0435\u0440\u0435\u0437 VK"),D(),P(48,", \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u043E\u043B\u043D\u044B\u0439 \u0434\u043E\u0441\u0442\u0443\u043F \u043A\u043E \u0432\u0441\u0435\u043C \u0444\u0443\u043D\u043A\u0446\u0438\u044F\u043C: "),D(),x(49,"ul",26)(50,"li"),P(51,"\u041D\u0435\u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0435 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439"),D(),x(52,"li"),P(53,"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445 \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"),D(),x(54,"li"),P(55,"\u0414\u043E\u0441\u0442\u0443\u043F \u0441 \u043B\u044E\u0431\u043E\u0433\u043E \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430"),D(),x(56,"li"),P(57,"\u041F\u043E\u043B\u043D\u0430\u044F \u0438\u0441\u0442\u043E\u0440\u0438\u044F \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439"),D()()()()),t&2&&(V(2),Ss(r.isDemoMode()?2:-1),V(2),ze("demo-disabled",r.isDemoMode()&&!r.canCreateInDemo()),V(3),ar("ngModel",r.title),X("placeholder",r.isDemoMode()&&!r.canCreateInDemo()?"\u041B\u0438\u043C\u0438\u0442 \u0434\u043E\u0441\u0442\u0438\u0433\u043D\u0443\u0442. \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F":r.isDemoMode()?`\u0414\u0435\u043C\u043E: \u043C\u043E\u0436\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u0442\u044C ${r.DEMO_LIMIT-r.userItemsCount()} \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438${r.DEMO_LIMIT-r.userItemsCount()===1?"\u044E":"\u0438"}`:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438")("disabled",r.isDemoMode()&&!r.canCreateInDemo()),V(),X("disabled",r.isDemoMode()&&!r.canCreateInDemo()),V(3),Wu(r.items()),V(2),Ss(r.items().length===0?13:-1),V(4),Wu(r.periods),V(2),X("income",r.statistics().income)("expense",r.statistics().expense),V(),X("categories",r.categoriesChartData()),V(3),Ot(" ",r.showMobileChart?"\u0421\u043A\u0440\u044B\u0442\u044C \u0433\u0440\u0430\u0444\u0438\u043A":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0433\u0440\u0430\u0444\u0438\u043A"," "),V(),ze("open",r.showMobileChart),V(3),Wu(r.periods),V(2),X("income",r.statistics().income)("expense",r.statistics().expense),V(),X("categories",r.categoriesChartData()),V(),X("isOpen",r.showFavoriteModal())("showCancel",!1),V(5),X("isOpen",r.showDemoLimitModal())("showCancel",!1)("confirmDanger",!1),V(4),Ot("",r.DEMO_LIMIT," \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438"),V(3),Is(" \u0412\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043B\u0438 ",r.userItemsCount()," \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438",r.userItemsCount()===1?"\u044E":"\u0438"," \u0438 \u0443\u0432\u0438\u0434\u0435\u043B\u0438, \u043A\u0430\u043A \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435. "))},dependencies:[et,vd,__,gd,g_,v_,Qp,Kp,Yp,cb,lb,Na,Oa],styles:['@charset "UTF-8";.home-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl);width:100%;max-width:100%;box-sizing:border-box}@media(max-width:768px){.home-page[_ngcontent-%COMP%]{touch-action:pan-y;overflow-y:auto;-webkit-overflow-scrolling:touch}}.demo-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:var(--space-md) var(--space-lg);border-radius:var(--radius-lg);box-shadow:var(--shadow-md)}.demo-banner-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);flex-wrap:wrap;justify-content:space-between}.demo-text[_ngcontent-%COMP%]{flex:1;font-size:.9375rem;line-height:1.5;min-width:200px}.demo-login-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);background-color:#fff;color:#667eea;border:none;border-radius:var(--radius-md);font-weight:600;font-size:.875rem;cursor:pointer;transition:all var(--transition-fast);white-space:nowrap}.demo-login-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:var(--shadow-md)}.demo-login-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@media(max-width:768px){.demo-banner-content[_ngcontent-%COMP%]{align-items:flex-start;gap:var(--space-sm)}.demo-login-btn[_ngcontent-%COMP%]{width:100%}}.home-period-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-sm);margin-bottom:var(--space-md);flex-wrap:wrap}.home-period-button[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-md);font-size:.875rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background-color:var(--color-bg-secondary);color:var(--color-text-secondary);transition:all var(--transition-fast);cursor:pointer}.home-period-button[_ngcontent-%COMP%]:hover{border-color:var(--color-border-hover);background-color:var(--color-bg-tertiary)}.home-period-button.active[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;border-color:var(--color-primary)}.home-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:var(--space-xl);align-items:start;width:100%;max-width:100%;box-sizing:border-box}.home-form[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-lg);box-shadow:var(--shadow-sm);transition:all var(--transition-fast);margin-bottom:var(--space-lg)}.home-form.demo-disabled[_ngcontent-%COMP%]{position:relative}.home-form.demo-disabled[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-color:#00000008;border-radius:var(--radius-lg);pointer-events:none;z-index:1}.home-form.demo-disabled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .home-form.demo-disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .home-form.demo-disabled[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{pointer-events:none}.home-form[_ngcontent-%COMP%]:not(.demo-disabled){border-color:var(--color-border-hover)}.home-form[_ngcontent-%COMP%]:not(.demo-disabled).demo-active{border-color:var(--color-primary);box-shadow:0 0 0 2px #6366f11a}.home-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.home-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);flex-wrap:wrap}.home-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1;min-width:200px;padding:var(--space-md) var(--space-md);font-size:1rem}.home-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.home-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);font-size:1rem;min-width:150px;cursor:pointer}.home-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.home-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);background-color:var(--color-primary);color:#fff;border-radius:var(--radius-md);font-weight:500;transition:all var(--transition-fast)}.home-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--color-primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-md)}.home-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.home-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.demo-form-hint[_ngcontent-%COMP%]{margin-top:var(--space-md);padding:var(--space-md);background:linear-gradient(135deg,#6366f11a,#8b5cf61a);border-left:3px solid var(--color-primary);border-radius:var(--radius-md);font-size:.875rem;color:var(--color-text-primary);line-height:1.6}.demo-form-hint[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:600}.home-filter[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);margin-bottom:var(--space-md);flex-wrap:wrap}.filter-button[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-md);font-size:.875rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background-color:var(--color-bg-secondary);color:var(--color-text-secondary);transition:all var(--transition-fast);cursor:pointer}.filter-button[_ngcontent-%COMP%]:hover{border-color:var(--color-border-hover);background-color:var(--color-bg-tertiary)}.filter-button.active[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;border-color:var(--color-primary)}.items-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.items-item[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-md) var(--space-lg);transition:all var(--transition-fast);display:flex;justify-content:space-between;align-items:center;gap:var(--space-md)}.items-item.favorite[_ngcontent-%COMP%]{border-left:3px solid #fbbf24;background-color:var(--color-bg-secondary)}.items-item[_ngcontent-%COMP%]:hover{border-color:var(--color-border-hover);box-shadow:var(--shadow-sm);transform:translateY(-1px);background-color:var(--color-bg-secondary)}.items-item[_ngcontent-%COMP%]   .items-item-content[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:var(--space-md);cursor:pointer}.items-item[_ngcontent-%COMP%]   .items-item-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-xs);min-width:0}.items-item.cdk-drag[_ngcontent-%COMP%]{cursor:move}.items-item.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.items-item.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:var(--shadow-lg);opacity:.9;transform:rotate(2deg)}.items-item.drag-active[_ngcontent-%COMP%]{transform:scale(1.05);box-shadow:var(--shadow-md);opacity:.9}@media(max-width:768px){.items-item[_ngcontent-%COMP%]{touch-action:pan-y!important;-webkit-user-select:none;user-select:none}.items-item.cdk-drag[_ngcontent-%COMP%]:not(.drag-active):not(.cdk-drag-dragging){touch-action:pan-y!important}.items-item.cdk-drag-dragging[_ngcontent-%COMP%]{touch-action:none!important}.items-item.cdk-drag-dragging[_ngcontent-%COMP%]   .items-item-content[_ngcontent-%COMP%]{pointer-events:none}.items-item.drag-active[_ngcontent-%COMP%]{touch-action:pan-y pinch-zoom}.items-item.cdk-drag-preview[_ngcontent-%COMP%]{touch-action:none!important;z-index:1000}}.items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .items-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3;background-color:var(--color-bg-tertiary);border:2px dashed var(--color-border)}.favorite-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:transparent;border:1px solid var(--color-border);color:var(--color-text-tertiary);font-size:1.25rem;line-height:1;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);flex-shrink:0;cursor:pointer;padding:0}.favorite-button[_ngcontent-%COMP%]:hover{border-color:#fbbf24;color:#fbbf24}.favorite-button.active[_ngcontent-%COMP%]{background-color:#fbbf24;border-color:#fbbf24;color:#fff}.items-item-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.items-item-title[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-primary);font-size:1rem}.items-item-meta[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);font-size:.875rem;color:var(--color-text-secondary);flex-wrap:wrap}.items-item-amount[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem}.items-item-amount.income[_ngcontent-%COMP%]{color:var(--color-income)}.items-item-amount.expense[_ngcontent-%COMP%]{color:var(--color-expense)}.items-item-date[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-tertiary)}.items-empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-tertiary)}.items-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:var(--space-md)}.delete-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:var(--color-expense);color:#fff;font-size:1.5rem;line-height:1;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);flex-shrink:0}.delete-button[_ngcontent-%COMP%]:hover{background-color:#dc2626;transform:scale(1.1)}.delete-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.home-chart[_ngcontent-%COMP%]{position:sticky;top:var(--space-md);height:fit-content}.home-charts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);padding:var(--space-md);background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);width:100%;box-sizing:border-box}.desktop-chart[_ngcontent-%COMP%]{display:block}.mobile-chart[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:var(--space-sm)}@media(min-width:320px)and (max-width:1023px){.desktop-chart[_ngcontent-%COMP%]{display:none}.mobile-chart[_ngcontent-%COMP%]{display:flex;align-items:center}}@media(min-width:1024px){.desktop-chart[_ngcontent-%COMP%]{display:block}.mobile-chart[_ngcontent-%COMP%]{display:none}}.accordion-toggle[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background-color:var(--color-bg-card);border:1px solid var(--color-border);color:var(--color-text-primary);border-radius:var(--radius-md);cursor:pointer;font-weight:500;text-align:left;transition:all var(--transition-fast)}.accordion-toggle[_ngcontent-%COMP%]:hover{border-color:var(--color-border-hover);box-shadow:var(--shadow-sm)}.mobile-chart-panel[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height var(--transition-base)}.mobile-chart-panel.open[_ngcontent-%COMP%]{max-height:2000px}.mobile-charts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);padding-top:var(--space-md);width:100%;box-sizing:border-box}@media(max-width:480px){.home-page[_ngcontent-%COMP%]{gap:var(--space-lg);padding:0;width:100%;max-width:100%}.home-layout[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--space-lg);width:100%;max-width:100%;padding:0 var(--space-sm)}.home-content[_ngcontent-%COMP%]{width:100%;max-width:100%;min-width:0}.demo-banner[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);margin-left:var(--space-sm);margin-right:var(--space-sm)}.demo-text[_ngcontent-%COMP%]{font-size:.875rem;min-width:unset}.home-form[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-sm);width:100%;max-width:100%;box-sizing:border-box;margin-bottom:var(--space-md)}.home-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-sm);width:100%}.home-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .home-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;min-width:unset;font-size:.9375rem;box-sizing:border-box}.home-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-size:.9375rem}.home-filter[_ngcontent-%COMP%]{gap:var(--space-xs);width:100%;max-width:100%}.filter-button[_ngcontent-%COMP%]{flex:1;min-width:80px;font-size:.8125rem;padding:var(--space-xs) var(--space-sm);text-align:center}.items-list[_ngcontent-%COMP%]{width:100%;max-width:100%;min-width:0;gap:var(--space-sm)}.items-item[_ngcontent-%COMP%]{padding:var(--space-lg) var(--space-md);gap:var(--space-sm);width:100%;max-width:100%;box-sizing:border-box;min-width:0}.items-item-content[_ngcontent-%COMP%]{width:100%;min-width:0;overflow:hidden}.items-item-info[_ngcontent-%COMP%]{min-width:0;overflow:hidden}.items-item-title[_ngcontent-%COMP%]{font-size:.9375rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.items-item-meta[_ngcontent-%COMP%]{font-size:.8125rem;gap:var(--space-xs)}.home-charts-container[_ngcontent-%COMP%], .mobile-charts-container[_ngcontent-%COMP%]{padding:var(--space-sm);display:flex;flex-direction:column;gap:var(--space-lg);width:100%}}@media(min-width:481px)and (max-width:1023px){.home-layout[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--space-lg);width:100%;max-width:100%}.home-content[_ngcontent-%COMP%], .items-list[_ngcontent-%COMP%]{width:100%;max-width:100%}.items-item[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box}.home-form[_ngcontent-%COMP%]{padding:var(--space-md);margin-bottom:var(--space-md)}.home-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.home-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1;min-width:200px}.home-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-width:150px}}@media(max-width:768px){.home-form[_ngcontent-%COMP%]{padding:var(--space-md);margin-bottom:var(--space-md)}.home-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column}.home-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .home-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;min-width:unset}.items-item[_ngcontent-%COMP%]{padding:var(--space-lg);flex-direction:column;align-items:flex-start;gap:var(--space-sm)}.items-item-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.items-item-amount[_ngcontent-%COMP%]{font-size:1.25rem}}@media(min-width:1921px)and (max-width:2560px){.home-page[_ngcontent-%COMP%], .home-layout[_ngcontent-%COMP%]{gap:var(--space-2xl)}.home-form[_ngcontent-%COMP%]{padding:var(--space-xl)}.items-item[_ngcontent-%COMP%]{padding:var(--space-lg) var(--space-xl)}.items-item-title[_ngcontent-%COMP%]{font-size:1.125rem}.filter-button[_ngcontent-%COMP%], .home-period-button[_ngcontent-%COMP%]{font-size:1rem;padding:var(--space-sm) var(--space-lg)}.home-charts-container[_ngcontent-%COMP%]{padding:var(--space-xl)}}@media(min-width:2561px)and (max-width:3840px){.home-page[_ngcontent-%COMP%], .home-layout[_ngcontent-%COMP%]{gap:var(--space-2xl)}.home-form[_ngcontent-%COMP%]{padding:var(--space-2xl)}.home-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .home-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:1.125rem;padding:var(--space-md) var(--space-lg)}.home-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.125rem;padding:var(--space-md) var(--space-xl)}.items-item[_ngcontent-%COMP%]{padding:var(--space-xl) var(--space-2xl)}.items-item-title[_ngcontent-%COMP%]{font-size:1.25rem}.items-item-meta[_ngcontent-%COMP%]{font-size:1rem}.filter-button[_ngcontent-%COMP%], .home-period-button[_ngcontent-%COMP%]{font-size:1.125rem;padding:var(--space-md) var(--space-xl)}.home-charts-container[_ngcontent-%COMP%]{padding:var(--space-2xl)}}@media(min-width:3841px){.home-page[_ngcontent-%COMP%], .home-layout[_ngcontent-%COMP%]{gap:var(--space-2xl)}.home-form[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}.home-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .home-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:1.25rem;padding:var(--space-lg) var(--space-xl)}.home-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.25rem;padding:var(--space-lg) var(--space-2xl)}.items-item[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}.items-item-title[_ngcontent-%COMP%]{font-size:1.5rem}.items-item-meta[_ngcontent-%COMP%]{font-size:1.125rem}.filter-button[_ngcontent-%COMP%], .home-period-button[_ngcontent-%COMP%]{font-size:1.25rem;padding:var(--space-lg) var(--space-2xl)}.home-charts-container[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}}']})};var hb=class n{constructor(e){this.supabase=e}fromRow(e){return{id:e.id,item_id:e.item_id,title:e.title,sortOrder:e.sort_order,createdAt:e.created_at,updatedAt:e.updated_at}}toRow(e){let t={id:e.id,item_id:e.item_id,title:e.title,created_at:e.createdAt,updated_at:e.updatedAt};return e.sortOrder!==void 0&&(t.sort_order=e.sortOrder),t}async getByItemId(e){let{data:t,error:r}=await this.supabase.client.from("subcategories").select("id, item_id, title, sort_order, created_at, updated_at").eq("item_id",e).order("sort_order",{ascending:!0,nullsFirst:!1});if(r)throw r;return(t??[]).map(i=>this.fromRow(i))}async getAll(){let{data:e,error:t}=await this.supabase.client.from("subcategories").select("id, item_id, title, sort_order, created_at, updated_at").order("item_id",{ascending:!0}).order("sort_order",{ascending:!0,nullsFirst:!1});if(t)throw t;return(e??[]).map(r=>this.fromRow(r))}async save(e){let t=this.toRow(e),{error:r}=await this.supabase.client.from("subcategories").upsert(t,{onConflict:"id"});if(r)throw console.error("Error saving subcategory:",r),r}async delete(e){let{error:t}=await this.supabase.client.from("subcategories").delete().eq("id",e);if(t)throw console.error("Error deleting subcategory:",t),t}async update(e,t){let r={updated_at:new Date().toISOString()};t.title!==void 0&&(r.title=t.title),t.sortOrder!==void 0&&(r.sort_order=t.sortOrder);let{error:i}=await this.supabase.client.from("subcategories").update(r).eq("id",e);if(i)throw console.error("Error updating subcategory:",i),i}static \u0275fac=function(t){return new(t||n)(ce(Os))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var fb=class n{repo=$(hb);_subcategories=Re([]);all=Xe(()=>this._subcategories());constructor(){this.load()}async load(){let e=await this.repo.getAll();this._subcategories.set(e)}byItemId(e){return Xe(()=>[...this._subcategories().filter(i=>i.item_id===e)].sort((i,s)=>{let o=i.sortOrder??1/0,a=s.sortOrder??1/0;return o-a}))}async create(e,t){let r=new Date().toISOString(),i=this.byItemId(e)(),s={id:crypto.randomUUID(),item_id:e,title:t.trim(),sortOrder:i.length,createdAt:r,updatedAt:r};return await this.repo.save(s),this._subcategories.update(o=>[...o,s]),s}async update(e,t){let r=this._subcategories().find(s=>s.id===e);if(!r)return;let i=J(C(C({},r),t),{updatedAt:new Date().toISOString()});await this.repo.update(e,t),this._subcategories.update(s=>s.map(o=>o.id===e?i:o))}async delete(e){await this.repo.delete(e),this._subcategories.update(t=>t.filter(r=>r.id!==e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var CL=BL(EL()),xL=CL.default;var Nie=["dateInput"],pb=class n{placeholder="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043C\u044F";minDate;maxDate;dateTimeChange=new ft;dateInput;picker;_value=new Date().toISOString();onChange=e=>{};onTouched=()=>{};get displayValue(){return this.formatDisplay(new Date(this._value))}ngAfterViewInit(){this.initPicker()}ngOnDestroy(){this.picker?.destroy()}initPicker(){if(this.dateInput?.nativeElement&&(this.picker=new xL(this.dateInput.nativeElement,{timepicker:!0,isMobile:!1,autoClose:!0,dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",locale:{days:["\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430"],daysShort:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],daysMin:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],monthsShort:["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"]},selectedDates:[new Date(this._value)],minDate:this.minDate?new Date(this.minDate):void 0,maxDate:this.maxDate?new Date(this.maxDate):void 0,onSelect:({date:e})=>{if(!e)return;let t=Array.isArray(e)?e[0]:e;if(!t)return;let r=new Date(t).toISOString();this.setValue(r,!0)}}),this._value)){let e=new Date(this._value);isNaN(e.getTime())||(this.dateInput.nativeElement.value=this.formatDisplay(e))}}setValue(e,t=!1){this._value=e,this.onChange(e),this.onTouched(),t&&this.dateTimeChange.emit(e),this.picker&&this.dateInput?.nativeElement&&(this.dateInput.nativeElement.value=this.formatDisplay(new Date(e)))}setNow(){let e=new Date().toISOString();this.setValue(e,!0),this.picker?.selectDate(new Date(e),{silent:!0})}writeValue(e){if(e&&(this._value=e,this.picker&&this.dateInput?.nativeElement)){let t=new Date(this._value);isNaN(t.getTime())||(this.picker.selectDate(t,{silent:!0}),this.dateInput.nativeElement.value=this.formatDisplay(t))}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}formatDisplay(e){let t=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getFullYear(),s=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0");return`${t}.${r}.${i} ${s}:${o}`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["app-date-time-picker"]],viewQuery:function(t,r){if(t&1&&Dr(Nie,5),t&2){let i;Vn(i=jn())&&(r.dateInput=i.first)}},inputs:{placeholder:"placeholder",minDate:"minDate",maxDate:"maxDate"},outputs:{dateTimeChange:"dateTimeChange"},features:[Kr([{provide:fc,useExisting:Ln(()=>n),multi:!0}])],decls:5,vars:2,consts:[["dateInput",""],[1,"date-time-picker"],["type","text","autocomplete","off",1,"date-time-input",3,"placeholder","value"],["type","button","title","\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0435\u0435 \u0432\u0440\u0435\u043C\u044F",1,"now-button",3,"click"]],template:function(t,r){if(t&1){let i=St();or(0,"div",1),jl(1,"input",2,0),or(3,"button",3),oo("click",function(){return qe(i),We(r.setNow())}),P(4," \u0421\u0435\u0439\u0447\u0430\u0441 "),xr()()}t&2&&(V(),zv("placeholder",r.placeholder)("value",r.displayValue))},dependencies:[et,vd],styles:[".date-time-picker[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);align-items:center;flex:1;min-width:220px}.date-time-input[_ngcontent-%COMP%]{flex:1;padding:var(--space-sm) var(--space-md);font-size:.95rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background-color:var(--color-bg-card);color:var(--color-text-primary);transition:all var(--transition-fast)}.date-time-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #6366f11a}.now-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);font-size:.875rem;background-color:var(--color-bg-secondary);color:var(--color-text-secondary);border:1px solid var(--color-border);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast);white-space:nowrap}.now-button[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-tertiary);border-color:var(--color-border-hover);color:var(--color-text-primary)}@media(max-width:768px){.date-time-picker[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.now-button[_ngcontent-%COMP%]{width:100%}}"]})};var Rie=["canvas"];function Fie(n,e){if(n&1){let t=St();x(0,"button",8),ye("click",function(){let i=qe(t).$implicit,s=oe();return We(s.onPeriodChange(i.value))}),P(1),D()}if(n&2){let t=e.$implicit,r=oe();ze("active",r.period===t.value),V(),Ot(" ",t.label," ")}}function Lie(n,e){n&1&&(x(0,"div",9),P(1," \u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F "),D())}var mb=class n{labels=[];data=[];period="day";periodChange=new ft;canvas;chart;periods=[{value:"day",label:"\u0414\u0435\u043D\u044C"},{value:"week",label:"\u041D\u0435\u0434\u0435\u043B\u044F"},{value:"month",label:"\u041C\u0435\u0441\u044F\u0446"},{value:"year",label:"\u0413\u043E\u0434"}];ngAfterViewInit(){requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.canvas?.nativeElement&&this.hasData&&this.initChart()})})}ngOnChanges(e){requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(!this.chart){this.canvas?.nativeElement&&this.hasData&&this.initChart();return}(e.labels||e.data||e.period)&&(this.hasData?this.updateChart():this.chart&&(this.chart.destroy(),this.chart=null))})})}initChart(){if(this.chart&&(this.chart.destroy(),this.chart=null),!this.canvas?.nativeElement||!this.hasData)return;let e=this.calculateCumulativeData(this.data),t={type:"line",data:{labels:this.labels.length>0?this.labels:[],datasets:[{label:"\u041D\u0430\u043A\u043E\u043F\u043B\u0435\u043D\u043D\u0430\u044F \u0441\u0443\u043C\u043C\u0430",data:e,borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",tension:.4,fill:!0,pointRadius:this.data.length>20?0:4,pointHoverRadius:6,pointBackgroundColor:"rgb(99, 102, 241)",pointBorderColor:"#fff",pointBorderWidth:2,borderWidth:2,spanGaps:!1}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750,easing:"easeInOutQuart"},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.85)",padding:12,titleFont:{size:14,weight:"bold",family:"'Inter', sans-serif"},bodyFont:{size:13,family:"'Inter', sans-serif"},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{title:r=>r.length>0&&r[0].label||"",label:r=>{let i=r.parsed.y;return i==null?"":`\u0421\u0443\u043C\u043C\u0430: ${i>=0?"+":""}${i.toFixed(2)} \u20BD`},afterLabel:r=>{let i=r.dataIndex;if(i>=0&&i<this.data.length){let s=this.data[i];if(s!==0)return`\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435: ${s>=0?"+":""}${s.toFixed(2)} \u20BD`}return""}}}},scales:{x:{display:!0,grid:{display:!1},border:{display:!1},ticks:{maxRotation:45,minRotation:0,font:{size:11,family:"'Inter', sans-serif"},color:"rgba(0, 0, 0, 0.6)",padding:8}},y:{display:!0,beginAtZero:!1,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},border:{display:!1},ticks:{font:{size:11,family:"'Inter', sans-serif"},color:"rgba(0, 0, 0, 0.6)",padding:8,callback:r=>typeof r=="number"?Math.abs(r)>=1e6?`${(r/1e6).toFixed(1)}M \u20BD`:Math.abs(r)>=1e3?`${(r/1e3).toFixed(1)}K \u20BD`:`${r.toFixed(0)} \u20BD`:r}}},interaction:{intersect:!1,mode:"index"},elements:{line:{borderJoinStyle:"round",borderCapStyle:"round"},point:{hoverBorderWidth:3}}}};try{this.chart=new bo(this.canvas.nativeElement,t)}catch(r){console.error("Error initializing chart:",r)}}calculateCumulativeData(e){if(e.length===0)return[];let t=[],r=0;for(let i of e)r+=i,t.push(r);return t}updateChart(){if(!this.chart||!this.canvas?.nativeElement){this.labels.length>0&&this.data.length>0&&requestAnimationFrame(()=>{!this.chart&&this.canvas?.nativeElement&&this.initChart()});return}try{let e=this.calculateCumulativeData(this.data);this.chart.data.labels=this.labels.length>0?this.labels:[],this.chart.data.datasets[0].data=e.length>0?e:[];let t=this.chart.data.datasets[0];this.data.length>20?t.pointRadius=0:t.pointRadius=4,this.chart.update("active")}catch(e){console.error("Error updating chart:",e),this.initChart()}}onPeriodChange(e){this.period!==e&&this.periodChange.emit(e)}get hasData(){return this.data.length>0&&this.labels.length>0}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=null)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["app-chart"]],viewQuery:function(t,r){if(t&1&&Dr(Rie,5),t&2){let i;Vn(i=jn())&&(r.canvas=i.first)}},inputs:{labels:"labels",data:"data",period:"period"},outputs:{periodChange:"periodChange"},features:[Bn],decls:10,vars:4,consts:[["canvas",""],[1,"chart-container"],[1,"chart-header"],[1,"chart-title"],[1,"chart-controls"],["class","chart-period-button",3,"active","click",4,"ngFor","ngForOf"],[1,"chart-wrapper"],["class","chart-empty",4,"ngIf"],[1,"chart-period-button",3,"click"],[1,"chart-empty"]],template:function(t,r){t&1&&(x(0,"div",1)(1,"div",2)(2,"h3",3),P(3,"\u0413\u0440\u0430\u0444\u0438\u043A \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439"),D(),x(4,"div",4),je(5,Fie,2,3,"button",5),D()(),x(6,"div",6),Dt(7,"canvas",null,0),D(),je(9,Lie,2,0,"div",7),D()),t&2&&(V(5),X("ngForOf",r.periods),V(),ze("hidden",!r.hasData),V(3),X("ngIf",!r.hasData))},dependencies:[et,ql,lr],styles:['@charset "UTF-8";.chart-container[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-lg);box-shadow:var(--shadow-sm)}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-lg);flex-wrap:wrap;gap:var(--space-md)}.chart-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-text-primary)}.chart-controls[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);flex-wrap:wrap}.chart-period-button[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-md);font-size:.875rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background-color:var(--color-bg-secondary);color:var(--color-text-secondary);transition:all var(--transition-fast);cursor:pointer}.chart-period-button[_ngcontent-%COMP%]:hover{border-color:var(--color-border-hover);background-color:var(--color-bg-tertiary)}.chart-period-button.active[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;border-color:var(--color-primary)}.chart-wrapper[_ngcontent-%COMP%]{position:relative;height:300px;width:100%}.chart-wrapper.hidden[_ngcontent-%COMP%]{display:none}.chart-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:300px;color:var(--color-text-tertiary);font-size:.875rem}@media(max-width:480px){.chart-container[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-sm)}.chart-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--space-sm)}.chart-controls[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;gap:var(--space-xs)}.chart-period-button[_ngcontent-%COMP%]{flex:1;min-width:70px;text-align:center;font-size:.8125rem;padding:var(--space-xs) var(--space-sm)}.chart-wrapper[_ngcontent-%COMP%]{height:220px}.chart-empty[_ngcontent-%COMP%]{height:220px;font-size:.8125rem}.chart-title[_ngcontent-%COMP%]{font-size:1rem}}@media(min-width:481px)and (max-width:768px){.chart-container[_ngcontent-%COMP%]{padding:var(--space-md)}.chart-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.chart-controls[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.chart-period-button[_ngcontent-%COMP%]{flex:1;min-width:80px;text-align:center}.chart-wrapper[_ngcontent-%COMP%], .chart-empty[_ngcontent-%COMP%]{height:250px}}@media(min-width:1921px)and (max-width:2560px){.chart-container[_ngcontent-%COMP%]{padding:var(--space-xl)}.chart-title[_ngcontent-%COMP%]{font-size:1.25rem}.chart-period-button[_ngcontent-%COMP%]{font-size:1rem;padding:var(--space-sm) var(--space-lg)}.chart-wrapper[_ngcontent-%COMP%]{height:400px}.chart-empty[_ngcontent-%COMP%]{height:400px;font-size:1rem}}@media(min-width:2561px)and (max-width:3840px){.chart-container[_ngcontent-%COMP%]{padding:var(--space-2xl)}.chart-title[_ngcontent-%COMP%]{font-size:1.5rem}.chart-period-button[_ngcontent-%COMP%]{font-size:1.125rem;padding:var(--space-md) var(--space-xl)}.chart-wrapper[_ngcontent-%COMP%]{height:500px}.chart-empty[_ngcontent-%COMP%]{height:500px;font-size:1.125rem}}@media(min-width:3841px){.chart-container[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}.chart-title[_ngcontent-%COMP%]{font-size:1.75rem}.chart-period-button[_ngcontent-%COMP%]{font-size:1.25rem;padding:var(--space-lg) var(--space-2xl)}.chart-wrapper[_ngcontent-%COMP%]{height:600px}.chart-empty[_ngcontent-%COMP%]{height:600px;font-size:1.25rem}}']})};function DL(n,e="day"){let t=new Map;for(let o of n){let a=new Date(o.date);if(isNaN(a.getTime()))continue;let u;switch(e){case"day":let l=a.getFullYear(),d=(a.getMonth()+1).toString().padStart(2,"0"),h=a.getDate().toString().padStart(2,"0");u=`${l}-${d}-${h}`;break;case"week":let f=$ie(a);u=`${a.getFullYear()}-W${f.toString().padStart(2,"0")}`;break;case"month":u=`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}`;break;case"year":u=a.getFullYear().toString();break;default:let p=a.getFullYear(),g=(a.getMonth()+1).toString().padStart(2,"0"),v=a.getDate().toString().padStart(2,"0");u=`${p}-${g}-${v}`}let c=o.type==="income"?o.amount:-o.amount;t.set(u,(t.get(u)??0)+c)}let r=[...t.entries()].sort(([o],[a])=>o.localeCompare(a)),i=r.map(([o])=>Bie(o,e)),s=r.map(([,o])=>o);return{labels:i,data:s}}function Bie(n,e){switch(e){case"day":let[t,r,i]=n.split("-");return`${i}.${r}.${t}`;case"week":let[s,o]=n.split("-W");return`\u041D\u0435\u0434\u0435\u043B\u044F ${o}, ${s}`;case"month":let[a,u]=n.split("-");return`${["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"][parseInt(u)-1]} ${a}`;case"year":return n;default:return n}}function $ie(n){let e=new Date(n.getFullYear(),n.getMonth(),n.getDate()),t=e.getDay()||7;e.setDate(e.getDate()+4-t);let r=new Date(e.getFullYear(),0,1),i=Math.floor((e.getTime()-r.getTime())/864e5);return Math.ceil((i+1)/7)}function Vie(n,e){n&1&&(x(0,"div",36)(1,"div",37)(2,"span",38),P(3,"\u{1F3AD}"),D(),x(4,"span",39),P(5,"\u0414\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C: \u0432\u044B \u0432\u0438\u0434\u0438\u0442\u0435 \u043F\u0440\u0438\u043C\u0435\u0440 \u0434\u0430\u043D\u043D\u044B\u0445. \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0442\u044C \u0441\u0432\u043E\u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438."),D()()())}function jie(n,e){if(n&1){let t=St();x(0,"button",40),ye("click",function(){qe(t);let i=oe();return We(i.openDeleteCategoryModal())}),P(1," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E "),D()}}function Uie(n,e){if(n&1&&(x(0,"div",41)(1,"h2",42),P(2),D()()),n&2){let t=oe();V(2),Sr(t.currentItem().title)}}function Hie(n,e){n&1&&(x(0,"span"),P(1," \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0437\u0434\u0430\u0442\u044C 2 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u0430. "),x(2,"strong"),P(3,"\u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443"),D(),P(4,", \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043D\u0435\u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439. "),D())}function zie(n,e){n&1&&(x(0,"span"),P(1," \u0414\u043E\u0441\u0442\u0438\u0433\u043D\u0443\u0442 \u043B\u0438\u043C\u0438\u0442 \u0434\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C\u0430 (2 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438). "),x(2,"strong"),P(3,"\u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443"),D(),P(4,", \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043D\u0435\u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439. "),D())}function qie(n,e){if(n&1&&(x(0,"div",43),je(1,Hie,5,0,"span",44)(2,zie,5,0,"span",44),D()),n&2){let t=oe();V(),X("ngIf",t.canCreateTransactionInDemo()),V(),X("ngIf",!t.canCreateTransactionInDemo())}}function Wie(n,e){if(n&1&&(x(0,"span",45),P(1),D()),n&2){let t=oe();V(),Is(" ",t.subcategories().length," ",t.subcategories().length===1?"\u0442\u0435\u0433":"\u0442\u0435\u0433\u043E\u0432"," ")}}function Gie(n,e){if(n&1){let t=St();x(0,"button",26),ye("click",function(){let i=qe(t).$implicit,s=oe();return We(s.selectedSubcategoryId=i.id)}),P(1),D()}if(n&2){let t=e.$implicit,r=oe();ze("active",r.selectedSubcategoryId===t.id),X("disabled",r.isDemoMode()||r.isSaving()),V(),Ot(" ",t.title," ")}}function Yie(n,e){if(n&1){let t=St();x(0,"div",46)(1,"input",47),ur("ngModelChange",function(i){qe(t);let s=oe();return Ir(s.newSubcategoryName,i)||(s.newSubcategoryName=i),We(i)}),D()()}if(n&2){let t=oe();V(),ar("ngModel",t.newSubcategoryName),X("disabled",t.isSaving())}}function Kie(n,e){if(n&1&&(x(0,"span",59),P(1),D()),n&2){let t=oe(2).$implicit,r=oe();V(),Ot(" ",r.getSubcategoryName(t.subcategory_id)," ")}}function Qie(n,e){if(n&1&&(x(0,"div",60),P(1),ao(2,"slice"),D()),n&2){let t=oe(2).$implicit;X("title",t.notes.length>50?t.notes:""),V(),Ot(" ",t.notes.length>50?zx(2,2,t.notes,0,50)+"...":t.notes," ")}}function Xie(n,e){if(n&1){let t=St();x(0,"button",61),ye("click",function(){qe(t);let i=oe(2).$implicit,s=oe();return We(s.startEdit(i))}),P(1," \u270E "),D()}}function Zie(n,e){if(n&1){let t=St();x(0,"button",62),ye("click",function(){qe(t);let i=oe(2).$implicit,s=oe();return We(s.deleteTransaction(i.id))}),P(1," \xD7 "),D()}}function Jie(n,e){if(n&1&&(Yf(0),x(1,"div",49)(2,"div",50)(3,"div",51)(4,"span",52),P(5),ao(6,"localDate"),D(),je(7,Kie,2,1,"span",53),D(),je(8,Qie,3,6,"div",54),D()(),x(9,"div",55)(10,"div",56),P(11),ao(12,"number"),D(),je(13,Xie,2,0,"button",57)(14,Zie,2,0,"button",58),D(),Kf()),n&2){let t=oe().$implicit,r=oe();V(5),Ot(" ",la(6,11,t.date,"short")," "),V(2),X("ngIf",t.subcategory_id),V(),X("ngIf",t.notes),V(2),ze("income",t.type==="income")("expense",t.type==="expense"),V(),Is(" ",t.type==="income"?"+":"-","",la(12,14,t.amount,"1.2-2")," \u20BD "),V(2),X("ngIf",!r.isDemoMode()),V(),X("ngIf",!r.isDemoMode())}}function ese(n,e){if(n&1&&(x(0,"option",69),P(1),D()),n&2){let t=e.$implicit;X("value",t.id),V(),Ot(" ",t.title," ")}}function tse(n,e){if(n&1){let t=St();Yf(0),x(1,"div",63)(2,"form",11),ye("submit",function(i){qe(t);let s=oe().$implicit;return oe().saveEdit(s.id),We(i.preventDefault())}),x(3,"div",64)(4,"select",65),ur("ngModelChange",function(i){qe(t);let s=oe(2);return Ir(s.editTransactionType,i)||(s.editTransactionType=i),We(i)}),x(5,"option",14),P(6,"\u0414\u043E\u0445\u043E\u0434"),D(),x(7,"option",15),P(8,"\u0420\u0430\u0441\u0445\u043E\u0434"),D()(),x(9,"input",66),ur("ngModelChange",function(i){qe(t);let s=oe(2);return Ir(s.editAmount,i)||(s.editAmount=i),We(i)}),D(),x(10,"app-date-time-picker",67),ur("ngModelChange",function(i){qe(t);let s=oe(2);return Ir(s.editDate,i)||(s.editDate=i),We(i)}),D()(),x(11,"div",64)(12,"select",68),ur("ngModelChange",function(i){qe(t);let s=oe(2);return Ir(s.editSubcategoryId,i)||(s.editSubcategoryId=i),We(i)}),x(13,"option",69),P(14,"\u0411\u0435\u0437 \u0442\u0435\u0433\u0430"),D(),je(15,ese,2,2,"option",70),D(),x(16,"input",71),ur("ngModelChange",function(i){qe(t);let s=oe(2);return Ir(s.editNotes,i)||(s.editNotes=i),We(i)}),D()(),x(17,"div",72)(18,"button",73),P(19,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),D(),x(20,"button",74),ye("click",function(){qe(t);let i=oe(2);return We(i.cancelEdit())}),P(21,"\u041E\u0442\u043C\u0435\u043D\u0430"),D()()()(),Kf()}if(n&2){let t=oe(2);V(4),ar("ngModel",t.editTransactionType),V(5),ar("ngModel",t.editAmount),V(),ar("ngModel",t.editDate),V(2),ar("ngModel",t.editSubcategoryId),V(),X("value",null),V(2),X("ngForOf",t.subcategories()),V(),ar("ngModel",t.editNotes)}}function nse(n,e){if(n&1&&(x(0,"div",48),je(1,Jie,15,17,"ng-container",44)(2,tse,22,7,"ng-container",44),D()),n&2){let t=e.$implicit,r=oe();V(),X("ngIf",r.editingTransactionId!==t.id),V(),X("ngIf",r.editingTransactionId===t.id)}}function rse(n,e){n&1&&(x(0,"p"),P(1,"\u041D\u0435\u0442 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439. \u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E \u0434\u043B\u044F \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u0444\u0438\u043D\u0430\u043D\u0441\u043E\u0432."),D())}function ise(n,e){n&1&&(x(0,"p"),P(1,"\u041D\u0435\u0442 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E \u0442\u0438\u043F\u0430."),D())}function sse(n,e){if(n&1&&(x(0,"div",75),je(1,rse,2,0,"p",44)(2,ise,2,0,"p",44),D()),n&2){let t=oe();V(),X("ngIf",t.transactions().length===0),V(),X("ngIf",t.transactions().length>0)}}var gb=class n{route=$(qi);router=$(yi);txStore=$(bd);itemStore=$(_d);subcategoryStore=$(fb);authService=$(Yt);isDemoMode=this.itemStore.isDemoMode;itemId=this.route.snapshot.paramMap.get("id");amount=0;transactionType="income";transactionDate=new Date().toISOString();notes="";selectedSubcategoryId=null;newSubcategoryName="";editingTransactionId=null;editAmount=0;editTransactionType="income";editDate="";editNotes="";editSubcategoryId=null;selectedPeriod=Re("day");subcategories=this.subcategoryStore.byItemId(this.itemId);transactionFilter=Re("all");_isSaving=Re(!1);isSaving=Xe(()=>this._isSaving());showDeleteCategoryModal=!1;showDeleteSubcategoryModal=!1;subcategoryToDelete=null;getSubcategoryName(e){return this.subcategories().find(r=>r.id===e)?.title||""}currentItem=Xe(()=>this.itemStore.items().find(e=>e.id===this.itemId));filteredTransactions=Xe(()=>{let e=this.transactions();return this.transactionFilter()!=="all"&&(e=e.filter(t=>t.type===this.transactionFilter())),e});transactions=this.txStore.byItem(this.itemId);chartData=Xe(()=>{let e=this.transactions();return e.length===0?{labels:[],data:[]}:DL(e,this.selectedPeriod())});canCreateTransactionInDemo(){return this.isDemoMode()?this.transactions().filter(t=>!t.id.startsWith("demo-tx-")).length<2:!0}async addTransaction(e){if(e&&(e.preventDefault(),e.stopPropagation()),this._isSaving())return;if(!this.amount||this.amount<=0){alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043C\u043C\u0443 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438");return}if(this.isDemoMode()&&!this.canCreateTransactionInDemo()){alert("\u0412 \u0434\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C\u0435 \u043C\u043E\u0436\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E 2 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438. \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043D\u0435\u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439.");return}if(!this.currentItem()){alert("\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430");return}this._isSaving.set(!0);try{let r=this.transactionType,i;if(this.selectedSubcategoryId==="__create_new__"){if(!this.newSubcategoryName.trim()){alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0434\u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438"),this._isSaving.set(!1);return}i=(await this.subcategoryStore.create(this.itemId,this.newSubcategoryName.trim())).id}else this.selectedSubcategoryId&&(i=this.selectedSubcategoryId);let s=await this.txStore.add(this.itemId,r,this.amount,this.transactionDate,this.notes,i);await this.itemStore.applyDelta(this.itemId,s),this.resetForm()}catch(r){r.message==="DEMO_TRANSACTION_LIMIT_REACHED"?alert("\u0412 \u0434\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C\u0435 \u043C\u043E\u0436\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E 2 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438. \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043D\u0435\u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439."):alert(r.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438")}finally{this._isSaving.set(!1)}}resetForm(){this.amount=0,this.transactionType="income",this.transactionDate=new Date().toISOString(),this.notes="",this.selectedSubcategoryId=null,this.newSubcategoryName=""}onSubcategoryNameBlur(){}async deleteTransaction(e){if(this.isDemoMode()){alert("\u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0443\u0434\u0430\u043B\u044F\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438");return}try{let t=await this.txStore.delete(e);await this.itemStore.applyDelta(this.itemId,t)}catch(t){alert(t.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438")}}startEdit(e){this.editingTransactionId=e.id,this.editTransactionType=e.type,this.editAmount=e.amount,this.editDate=e.date,this.editNotes=e.notes||"",this.editSubcategoryId=e.subcategory_id||null}cancelEdit(){this.editingTransactionId=null,this.editAmount=0,this.editTransactionType="income",this.editDate="",this.editNotes="",this.editSubcategoryId=null}async saveEdit(e){if(this.isDemoMode()){alert("\u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0447\u0442\u043E\u0431\u044B \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438");return}if(this.editAmount<=0)return;let t=this.editDate;if(!t||t.trim()==="")t=new Date().toISOString();else{let i=new Date(t);isNaN(i.getTime())?t=new Date().toISOString():t=i.toISOString()}let r=this.transactions().find(i=>i.id===e);if(r){if(r.type!==this.editTransactionType){let i=await this.txStore.delete(e);await this.itemStore.applyDelta(this.itemId,i);let s=await this.txStore.add(this.itemId,this.editTransactionType,this.editAmount,t,this.editNotes,this.editSubcategoryId||void 0);await this.itemStore.applyDelta(this.itemId,s)}else{let i=await this.txStore.update(e,{amount:this.editAmount,date:t,notes:this.editNotes,subcategory_id:this.editSubcategoryId||void 0});await this.itemStore.applyDelta(this.itemId,i)}this.cancelEdit()}}openDeleteCategoryModal(){this.showDeleteCategoryModal=!0}async confirmDeleteCategory(){try{await this.itemStore.delete(this.itemId),this.showDeleteCategoryModal=!1,this.router.navigate(["/"])}catch(e){alert(e.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438"),this.showDeleteCategoryModal=!1}}openDeleteSubcategoryModal(e){this.subcategoryToDelete=e,this.showDeleteSubcategoryModal=!0}async confirmDeleteSubcategory(){this.subcategoryToDelete&&(await this.subcategoryStore.delete(this.subcategoryToDelete),this.subcategoryToDelete=null),this.showDeleteSubcategoryModal=!1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["ng-component"]],decls:59,vars:45,consts:[[1,"item-details-page"],["class","demo-banner",4,"ngIf"],[1,"page-header"],["routerLink","/",1,"back-button"],["class","delete-category-button","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",3,"click",4,"ngIf"],[1,"chart-section"],[3,"periodChange","labels","data","period"],[1,"transaction-filter"],[1,"filter-button",3,"click"],[1,"transaction-form"],["class","form-header",4,"ngIf"],[3,"submit"],[1,"form-row"],["name","transactionType",3,"ngModelChange","ngModel","disabled"],["value","income"],["value","expense"],["type","number","name","amount","min","0.01","step","0.01","required","",3,"ngModelChange","ngModel","placeholder","disabled"],["name","transactionDate",3,"ngModelChange","ngModel","disabled"],["type","submit",3,"disabled"],["type","text","name","notes","maxlength","500",3,"ngModelChange","ngModel","placeholder","disabled"],["class","demo-form-hint",4,"ngIf"],[1,"subcategories-section"],[1,"subcategories-header"],[1,"subcategories-title"],["class","subcategories-count",4,"ngIf"],[1,"subcategories-tags"],["type","button",1,"subcategory-tag",3,"click","disabled"],["type","button","class","subcategory-tag",3,"active","disabled","click",4,"ngFor","ngForOf"],["type","button",1,"subcategory-tag","subcategory-tag-create",3,"click","disabled"],["class","create-subcategory-form",4,"ngIf"],[1,"transactions-list"],["class","transaction-item",4,"ngFor","ngForOf"],["class","transactions-empty",4,"ngIf"],["title","\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438","confirmText","\u0423\u0434\u0430\u043B\u0438\u0442\u044C",3,"confirm","closeEvent","isOpen","confirmDanger"],[2,"color","var(--color-expense)","margin-top","var(--space-md)"],["title","\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0442\u0435\u0433\u0430","confirmText","\u0423\u0434\u0430\u043B\u0438\u0442\u044C",3,"confirm","closeEvent","isOpen","confirmDanger"],[1,"demo-banner"],[1,"demo-banner-content"],[1,"demo-icon"],[1,"demo-text"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",1,"delete-category-button",3,"click"],[1,"form-header"],[1,"category-title"],[1,"demo-form-hint"],[4,"ngIf"],[1,"subcategories-count"],[1,"create-subcategory-form"],["type","text","name","newSubcategoryName","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0433\u043E \u0442\u0435\u0433\u0430","maxlength","100","autofocus","",1,"subcategory-name-input",3,"ngModelChange","ngModel","disabled"],[1,"transaction-item"],[1,"transaction-item-content"],[1,"transaction-main-info"],[1,"transaction-header"],[1,"transaction-date"],["class","transaction-subcategory-badge",4,"ngIf"],["class","transaction-notes",3,"title",4,"ngIf"],[1,"transaction-item-actions"],[1,"transaction-amount"],["class","edit-button","title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E",3,"click",4,"ngIf"],["class","delete-button","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E",3,"click",4,"ngIf"],[1,"transaction-subcategory-badge"],[1,"transaction-notes",3,"title"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E",1,"edit-button",3,"click"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E",1,"delete-button",3,"click"],[1,"transaction-edit-form"],[1,"edit-form-row"],["name","editTransactionType",3,"ngModelChange","ngModel"],["type","number","name","editAmount","placeholder","\u0421\u0443\u043C\u043C\u0430","min","0.01","step","0.01","required","",3,"ngModelChange","ngModel"],["name","editDate",3,"ngModelChange","ngModel"],["name","editSubcategoryId",1,"subcategory-select",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","editNotes","placeholder","\u041F\u0440\u0438\u043C\u0435\u0447\u0430\u043D\u0438\u0435 (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E)","maxlength","500",3,"ngModelChange","ngModel"],[1,"edit-form-actions"],["type","submit",1,"save-button"],["type","button",1,"cancel-button",3,"click"],[1,"transactions-empty"]],template:function(t,r){if(t&1&&(x(0,"div",0),je(1,Vie,6,0,"div",1),x(2,"div",2)(3,"a",3),P(4,"\u2190 \u041D\u0430\u0437\u0430\u0434 \u043A \u0441\u043F\u0438\u0441\u043A\u0443"),D(),je(5,jie,2,0,"button",4),D(),x(6,"div",5)(7,"app-chart",6),ye("periodChange",function(s){return r.selectedPeriod.set(s)}),D()(),x(8,"div",7)(9,"button",8),ye("click",function(){return r.transactionFilter.set("all")}),P(10," \u0412\u0441\u0435 "),D(),x(11,"button",8),ye("click",function(){return r.transactionFilter.set("income")}),P(12," \u0414\u043E\u0445\u043E\u0434\u044B "),D(),x(13,"button",8),ye("click",function(){return r.transactionFilter.set("expense")}),P(14," \u0420\u0430\u0441\u0445\u043E\u0434\u044B "),D()(),x(15,"div",9),je(16,Uie,3,1,"div",10),x(17,"form",11),ye("submit",function(s){return r.addTransaction(s)}),x(18,"div",12)(19,"select",13),ur("ngModelChange",function(s){return Ir(r.transactionType,s)||(r.transactionType=s),s}),x(20,"option",14),P(21,"\u0414\u043E\u0445\u043E\u0434"),D(),x(22,"option",15),P(23,"\u0420\u0430\u0441\u0445\u043E\u0434"),D()(),x(24,"input",16),ur("ngModelChange",function(s){return Ir(r.amount,s)||(r.amount=s),s}),D(),x(25,"app-date-time-picker",17),ur("ngModelChange",function(s){return Ir(r.transactionDate,s)||(r.transactionDate=s),s}),D(),x(26,"button",18),P(27),D()(),x(28,"div",12)(29,"input",19),ur("ngModelChange",function(s){return Ir(r.notes,s)||(r.notes=s),s}),D()(),je(30,qie,3,2,"div",20),D(),x(31,"div",21)(32,"div",22)(33,"label",23),P(34,"\u0422\u0435\u0433 (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E)"),D(),je(35,Wie,2,2,"span",24),D(),x(36,"div",25)(37,"button",26),ye("click",function(){return r.selectedSubcategoryId=null}),P(38," \u0411\u0435\u0437 \u0442\u0435\u0433\u0430 "),D(),je(39,Gie,2,4,"button",27),x(40,"button",28),ye("click",function(){return r.selectedSubcategoryId="__create_new__"}),P(41," + \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E "),D()(),je(42,Yie,2,2,"div",29),D()(),x(43,"div",30),je(44,nse,3,2,"div",31)(45,sse,3,2,"div",32),D(),x(46,"app-modal",33),ye("confirm",function(){return r.confirmDeleteCategory()})("closeEvent",function(){return r.showDeleteCategoryModal=!1}),x(47,"p"),P(48,"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E "),x(49,"strong"),P(50),D(),P(51,"?"),D(),x(52,"p",34),P(53,"\u0412\u0441\u0435 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438 \u0438 \u0442\u0435\u0433\u0438 \u0442\u0430\u043A\u0436\u0435 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u044B. \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C."),D()(),x(54,"app-modal",35),ye("confirm",function(){return r.confirmDeleteSubcategory()})("closeEvent",function(){return r.showDeleteSubcategoryModal=!1}),x(55,"p"),P(56,"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0442\u0435\u0433?"),D(),x(57,"p",34),P(58,"\u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C."),D()()()),t&2){let i;V(),X("ngIf",r.isDemoMode()),V(4),X("ngIf",!r.isDemoMode()),V(2),X("labels",r.chartData().labels)("data",r.chartData().data)("period",r.selectedPeriod()),V(2),ze("active",r.transactionFilter()==="all"),V(2),ze("active",r.transactionFilter()==="income"),V(2),ze("active",r.transactionFilter()==="expense"),V(2),ze("demo-disabled",r.isDemoMode()&&!r.canCreateTransactionInDemo()),V(),X("ngIf",r.currentItem()),V(3),ar("ngModel",r.transactionType),X("disabled",r.isDemoMode()&&!r.canCreateTransactionInDemo()||r.isSaving()),V(5),ar("ngModel",r.amount),X("placeholder",r.isDemoMode()&&!r.canCreateTransactionInDemo()?"\u041B\u0438\u043C\u0438\u0442 \u0434\u043E\u0441\u0442\u0438\u0433\u043D\u0443\u0442. \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F":"\u0421\u0443\u043C\u043C\u0430")("disabled",r.isDemoMode()&&!r.canCreateTransactionInDemo()||r.isSaving()),V(),ar("ngModel",r.transactionDate),X("disabled",r.isDemoMode()&&!r.canCreateTransactionInDemo()||r.isSaving()),V(),X("disabled",r.isDemoMode()&&!r.canCreateTransactionInDemo()||r.isSaving()||r.amount<=0),V(),Ot(" ",r.isSaving()?"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435...":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"," "),V(2),ar("ngModel",r.notes),X("placeholder",r.isDemoMode()?"\u0412\u043E\u0439\u0434\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0442\u044C \u043F\u0440\u0438\u043C\u0435\u0447\u0430\u043D\u0438\u044F":"\u041F\u0440\u0438\u043C\u0435\u0447\u0430\u043D\u0438\u0435 (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E)")("disabled",r.isDemoMode()||r.isSaving()),V(),X("ngIf",r.isDemoMode()),V(),ze("demo-disabled",r.isDemoMode()),V(4),X("ngIf",r.subcategories().length>0),V(2),ze("active",r.selectedSubcategoryId===null),X("disabled",r.isDemoMode()||r.isSaving()),V(2),X("ngForOf",r.subcategories()),V(),ze("active",r.selectedSubcategoryId==="__create_new__"),X("disabled",r.isDemoMode()||r.isSaving()),V(2),X("ngIf",r.selectedSubcategoryId==="__create_new__"&&!r.isDemoMode()),V(2),X("ngForOf",r.filteredTransactions()),V(),X("ngIf",r.filteredTransactions().length===0),V(),X("isOpen",r.showDeleteCategoryModal)("confirmDanger",!0),V(4),Sr((i=r.currentItem())==null?null:i.title),V(4),X("isOpen",r.showDeleteSubcategoryModal)("confirmDanger",!0)}},dependencies:[et,ql,lr,vd,__,nR,iR,gd,bS,b_,g_,v_,Qp,CS,ES,Kp,Yp,Tr,pb,mb,Na,sD,iD,Oa],styles:['@charset "UTF-8";.item-details-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl);width:100%;max-width:100%;box-sizing:border-box}.demo-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:var(--space-md) var(--space-lg);border-radius:var(--radius-lg);box-shadow:var(--shadow-md)}.demo-banner-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);flex-wrap:wrap}.demo-icon[_ngcontent-%COMP%]{font-size:1.5rem}.demo-text[_ngcontent-%COMP%]{flex:1;font-size:.9375rem;line-height:1.5;min-width:200px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md)}.back-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);color:var(--color-text-secondary);font-size:.875rem;transition:color var(--transition-fast)}.back-button[_ngcontent-%COMP%]:hover{color:var(--color-text-primary)}.delete-category-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);background-color:var(--color-expense);color:#fff;border:none;border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}.delete-category-button[_ngcontent-%COMP%]:hover{background-color:#dc2626;transform:translateY(-1px);box-shadow:var(--shadow-md)}.delete-category-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.transaction-form[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-lg);box-shadow:var(--shadow-sm);margin-bottom:var(--space-lg)}.transaction-form.demo-disabled[_ngcontent-%COMP%]{opacity:.7;position:relative}.transaction-form.demo-disabled[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-color:#00000005;border-radius:var(--radius-lg);pointer-events:none}.transaction-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{margin-bottom:var(--space-lg);padding-bottom:var(--space-lg);border-bottom:2px solid var(--color-border)}.transaction-form[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);flex-wrap:wrap}.transaction-form[_ngcontent-%COMP%]   .category-badge[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-md);border-radius:var(--radius-md);font-size:.875rem;font-weight:500}.transaction-form[_ngcontent-%COMP%]   .category-badge.income[_ngcontent-%COMP%]{background-color:#10b9811a;color:var(--color-income)}.transaction-form[_ngcontent-%COMP%]   .category-badge.expense[_ngcontent-%COMP%]{background-color:#ef44441a;color:var(--color-expense)}.transaction-form[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--color-text-primary);margin:0}.transaction-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.transaction-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);flex-wrap:wrap;align-items:flex-start}.transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;min-width:150px;padding:var(--space-sm) var(--space-md);font-size:1rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background-color:var(--color-bg-card);color:var(--color-text-primary);transition:all var(--transition-fast)}.transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus, .transaction-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #6366f11a}.transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .transaction-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::-webkit-inner-spin-button, .transaction-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::-webkit-outer-spin-button, .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-webkit-inner-spin-button, .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-webkit-outer-spin-button{opacity:1}.transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled, .transaction-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:disabled, .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.transaction-form[_ngcontent-%COMP%]   .demo-form-hint[_ngcontent-%COMP%]{margin-top:var(--space-sm);padding:var(--space-sm) var(--space-md);background-color:var(--color-bg-secondary);border-left:3px solid var(--color-primary);border-radius:var(--radius-sm);font-size:.875rem;color:var(--color-text-secondary)}.transaction-form[_ngcontent-%COMP%]   .subcategories-section[_ngcontent-%COMP%]{margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.transaction-form[_ngcontent-%COMP%]   .subcategories-section.demo-disabled[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}.transaction-form[_ngcontent-%COMP%]   .subcategories-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-md)}.transaction-form[_ngcontent-%COMP%]   .subcategories-title[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;color:var(--color-text-primary);margin:0}.transaction-form[_ngcontent-%COMP%]   .subcategories-count[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-tertiary);font-weight:400}.transaction-form[_ngcontent-%COMP%]   .subcategories-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm);margin-bottom:var(--space-md)}.transaction-form[_ngcontent-%COMP%]   .subcategories-tags[_ngcontent-%COMP%]   .subcategory-tag[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.transaction-form[_ngcontent-%COMP%]   .subcategory-tag[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background-color:var(--color-bg-secondary);color:var(--color-text-secondary);border:1px solid var(--color-border);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast);white-space:nowrap}.transaction-form[_ngcontent-%COMP%]   .subcategory-tag[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--color-bg-tertiary);border-color:var(--color-border-hover);color:var(--color-text-primary);transform:translateY(-1px)}.transaction-form[_ngcontent-%COMP%]   .subcategory-tag.active[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;border-color:var(--color-primary);box-shadow:0 2px 4px #6366f133}.transaction-form[_ngcontent-%COMP%]   .subcategory-tag.subcategory-tag-create[_ngcontent-%COMP%]{border-style:dashed}.transaction-form[_ngcontent-%COMP%]   .subcategory-tag.subcategory-tag-create.active[_ngcontent-%COMP%]{border-style:solid}.transaction-form[_ngcontent-%COMP%]   .create-subcategory-form[_ngcontent-%COMP%]{margin-top:var(--space-md);padding:var(--space-md);background-color:var(--color-bg-secondary);border-radius:var(--radius-md);border:1px solid var(--color-border)}.transaction-form[_ngcontent-%COMP%]   .subcategory-name-input[_ngcontent-%COMP%]{width:100%;padding:var(--space-sm) var(--space-md);font-size:.9375rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background-color:var(--color-bg-card);color:var(--color-text-primary);transition:all var(--transition-fast)}.transaction-form[_ngcontent-%COMP%]   .subcategory-name-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #6366f11a}.transaction-form[_ngcontent-%COMP%]   app-date-time-picker[_ngcontent-%COMP%]{flex:1;min-width:200px}.transaction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);background-color:var(--color-primary);color:#fff;border-radius:var(--radius-md);font-weight:500;transition:all var(--transition-fast)}.transaction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--color-primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-md)}.transaction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.transaction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.transactions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.transaction-item[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-md) var(--space-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);transition:all var(--transition-fast)}.transaction-item[_ngcontent-%COMP%]:hover{border-color:var(--color-border-hover);box-shadow:var(--shadow-sm)}.transaction-item-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.transaction-item-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-xs);min-width:0}.transaction-main-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.transaction-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);flex-wrap:wrap}.transaction-notes[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);font-style:italic;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%;cursor:help}.transaction-type[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;text-transform:uppercase}.transaction-type.income[_ngcontent-%COMP%]{background-color:#10b9811a;color:var(--color-income)}.transaction-type.expense[_ngcontent-%COMP%]{background-color:#ef44441a;color:var(--color-expense)}.transaction-amount[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem}.transaction-amount.income[_ngcontent-%COMP%]{color:var(--color-income)}.transaction-amount.expense[_ngcontent-%COMP%]{color:var(--color-expense)}.transaction-date[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-tertiary)}.transaction-subcategory-badge[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);background-color:#6366f11a;color:var(--color-primary);border:1px solid rgba(99,102,241,.2);border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;display:inline-flex;align-items:center}.transaction-subcategory-badge[_ngcontent-%COMP%]:before{content:"\\2192";margin-right:var(--space-xs);opacity:.6}.transactions-empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-tertiary)}.transactions-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.edit-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:var(--color-primary);color:#fff;font-size:1.25rem;line-height:1;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);flex-shrink:0;border:none;cursor:pointer}.edit-button[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-hover);transform:scale(1.1)}.edit-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.delete-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:var(--color-expense);color:#fff;font-size:1.5rem;line-height:1;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast);flex-shrink:0;border:none;cursor:pointer}.delete-button[_ngcontent-%COMP%]:hover{background-color:#dc2626;transform:scale(1.1)}.delete-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.transaction-edit-form[_ngcontent-%COMP%]{width:100%;padding:var(--space-md);background-color:var(--color-bg-secondary);border-radius:var(--radius-md);border:2px solid var(--color-primary)}.transaction-edit-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.transaction-edit-form[_ngcontent-%COMP%]   .edit-form-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);flex-wrap:wrap;align-items:flex-start}.transaction-edit-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .transaction-edit-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1;min-width:150px;padding:var(--space-sm) var(--space-md);font-size:1rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background-color:var(--color-bg-card)}.transaction-edit-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .transaction-edit-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .transaction-edit-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::-webkit-inner-spin-button, .transaction-edit-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::-webkit-outer-spin-button{opacity:1}.transaction-edit-form[_ngcontent-%COMP%]   app-date-time-picker[_ngcontent-%COMP%]{flex:1;min-width:200px}.transaction-edit-form[_ngcontent-%COMP%]   .edit-form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:flex-end}.transaction-edit-form[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%], .transaction-edit-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-md);font-weight:500;transition:all var(--transition-fast);border:none;cursor:pointer}.transaction-edit-form[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.transaction-edit-form[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-md)}.transaction-edit-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{background-color:var(--color-bg-tertiary);color:var(--color-text-secondary)}.transaction-edit-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-card);color:var(--color-text-primary)}.subcategories-section[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-lg);box-shadow:var(--shadow-sm);margin-bottom:var(--space-lg)}.subcategories-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary);margin-bottom:var(--space-md);padding-bottom:var(--space-md);border-bottom:1px solid var(--color-border)}.subcategory-form[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.subcategory-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);flex-wrap:wrap;align-items:flex-start}.subcategory-form[_ngcontent-%COMP%]   .subcategory-input[_ngcontent-%COMP%]{flex:1;min-width:200px;padding:var(--space-sm) var(--space-md);font-size:1rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background-color:var(--color-bg-card);color:var(--color-text-primary);transition:all var(--transition-fast)}.subcategory-form[_ngcontent-%COMP%]   .subcategory-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #6366f11a}.subcategory-form[_ngcontent-%COMP%]   .add-subcategory-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);background-color:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-weight:500;cursor:pointer;transition:all var(--transition-fast);white-space:nowrap}.subcategory-form[_ngcontent-%COMP%]   .add-subcategory-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--color-primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-md)}.subcategory-form[_ngcontent-%COMP%]   .add-subcategory-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.subcategory-form[_ngcontent-%COMP%]   .add-subcategory-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.subcategories-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.subcategory-item[_ngcontent-%COMP%]{background-color:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-md) var(--space-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);transition:all var(--transition-fast)}.subcategory-item[_ngcontent-%COMP%]:hover{border-color:var(--color-border-hover);box-shadow:var(--shadow-sm)}.subcategory-content[_ngcontent-%COMP%]{flex:1;min-width:0}.subcategory-title[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-primary);font-size:1rem}.subcategory-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);flex-shrink:0}.subcategory-edit-form[_ngcontent-%COMP%]{width:100%;padding:var(--space-md);background-color:var(--color-bg-card);border-radius:var(--radius-md);border:2px solid var(--color-primary)}.subcategory-edit-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.subcategory-edit-form[_ngcontent-%COMP%]   .subcategory-edit-input[_ngcontent-%COMP%]{width:100%;padding:var(--space-sm) var(--space-md);font-size:1rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background-color:var(--color-bg-card);color:var(--color-text-primary)}.subcategory-edit-form[_ngcontent-%COMP%]   .subcategory-edit-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #6366f11a}.subcategory-edit-form[_ngcontent-%COMP%]   .subcategory-edit-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:flex-end}.subcategory-edit-form[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%], .subcategory-edit-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-md);font-weight:500;transition:all var(--transition-fast);border:none;cursor:pointer}.subcategory-edit-form[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.subcategory-edit-form[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-md)}.subcategory-edit-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{background-color:var(--color-bg-tertiary);color:var(--color-text-secondary)}.subcategory-edit-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-card);color:var(--color-text-primary)}.subcategories-empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-xl);color:var(--color-text-tertiary)}.subcategories-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}@media(max-width:480px){.item-details-page[_ngcontent-%COMP%]{gap:var(--space-lg)}.demo-banner[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);margin-bottom:var(--space-md)}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--space-sm)}.delete-category-button[_ngcontent-%COMP%]{width:100%;font-size:.875rem}.transaction-form[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-sm)}.transaction-form[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:1.125rem}.transaction-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-sm)}.transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;min-width:unset;font-size:.9375rem}.transaction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-size:.9375rem}.transaction-item[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);flex-direction:column;align-items:flex-start;gap:var(--space-sm)}.transaction-item-content[_ngcontent-%COMP%]{width:100%;gap:var(--space-xs)}.transaction-amount[_ngcontent-%COMP%]{font-size:1rem}.transaction-date[_ngcontent-%COMP%]{font-size:.8125rem}.subcategories-section[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-sm)}.subcategories-title[_ngcontent-%COMP%]{font-size:1rem}.subcategory-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-sm)}.subcategory-form[_ngcontent-%COMP%]   .subcategory-input[_ngcontent-%COMP%], .subcategory-form[_ngcontent-%COMP%]   .add-subcategory-button[_ngcontent-%COMP%]{width:100%;min-width:unset;font-size:.9375rem}.subcategory-item[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);flex-direction:column;align-items:flex-start;gap:var(--space-sm)}.subcategory-title[_ngcontent-%COMP%]{font-size:.9375rem}}@media(min-width:481px)and (max-width:768px){.page-header[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.delete-category-button[_ngcontent-%COMP%]{width:auto}.transaction-form[_ngcontent-%COMP%]{padding:var(--space-md)}.transaction-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column}.transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;min-width:unset}.transaction-item[_ngcontent-%COMP%]{padding:var(--space-md);flex-direction:row;align-items:center}.transaction-item-content[_ngcontent-%COMP%]{width:auto}.subcategories-section[_ngcontent-%COMP%]{padding:var(--space-md)}.subcategory-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.subcategory-form[_ngcontent-%COMP%]   .subcategory-input[_ngcontent-%COMP%]{flex:1;min-width:200px}.subcategory-form[_ngcontent-%COMP%]   .add-subcategory-button[_ngcontent-%COMP%]{width:auto}.subcategory-item[_ngcontent-%COMP%]{flex-direction:row;align-items:center}}@media(min-width:1921px)and (max-width:2560px){.item-details-page[_ngcontent-%COMP%]{gap:var(--space-2xl)}.transaction-form[_ngcontent-%COMP%]{padding:var(--space-xl)}.transaction-form[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:1.75rem}.transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:1.125rem;padding:var(--space-md) var(--space-lg)}.transaction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.125rem;padding:var(--space-md) var(--space-xl)}.transaction-item[_ngcontent-%COMP%]{padding:var(--space-lg) var(--space-xl)}.transaction-amount[_ngcontent-%COMP%]{font-size:1.375rem}.subcategories-section[_ngcontent-%COMP%]{padding:var(--space-xl)}.subcategories-title[_ngcontent-%COMP%]{font-size:1.5rem}.subcategory-input[_ngcontent-%COMP%]{font-size:1.125rem;padding:var(--space-md) var(--space-lg)}.subcategory-title[_ngcontent-%COMP%]{font-size:1.125rem}}@media(min-width:2561px)and (max-width:3840px){.item-details-page[_ngcontent-%COMP%]{gap:var(--space-2xl)}.transaction-form[_ngcontent-%COMP%]{padding:var(--space-2xl)}.transaction-form[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:2rem}.transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:1.25rem;padding:var(--space-lg) var(--space-xl)}.transaction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.25rem;padding:var(--space-lg) var(--space-2xl)}.transaction-item[_ngcontent-%COMP%]{padding:var(--space-xl) var(--space-2xl)}.transaction-amount[_ngcontent-%COMP%]{font-size:1.5rem}.subcategories-section[_ngcontent-%COMP%]{padding:var(--space-2xl)}.subcategories-title[_ngcontent-%COMP%]{font-size:1.75rem}.subcategory-input[_ngcontent-%COMP%]{font-size:1.25rem;padding:var(--space-lg) var(--space-xl)}.subcategory-title[_ngcontent-%COMP%]{font-size:1.25rem}}@media(min-width:3841px){.item-details-page[_ngcontent-%COMP%]{gap:var(--space-2xl)}.transaction-form[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}.transaction-form[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:2.25rem}.transaction-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .transaction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.375rem;padding:var(--space-xl) var(--space-2xl)}.transaction-item[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}.transaction-amount[_ngcontent-%COMP%]{font-size:1.75rem}.subcategories-section[_ngcontent-%COMP%]{padding:var(--space-2xl) var(--space-xl)}.subcategories-title[_ngcontent-%COMP%]{font-size:2rem}.subcategory-input[_ngcontent-%COMP%]{font-size:1.375rem;padding:var(--space-xl) var(--space-2xl)}.subcategory-title[_ngcontent-%COMP%]{font-size:1.375rem}}']})};var ose=(n,e)=>e.id;function ase(n,e){n&1&&(x(0,"span"),P(1,"+"),D())}function use(n,e){n&1&&(x(0,"span"),P(1,"\xD7"),D())}function cse(n,e){if(n&1&&(x(0,"div",10)(1,"div",11),Ds(2,ase,2,0,"span"),Ds(3,use,2,0,"span"),D(),x(4,"div",12)(5,"div",13)(6,"span",14),P(7),D(),x(8,"span",15),P(9),ao(10,"localDate"),D()()()()),n&2){let t=e.$implicit;ze("created",t.action==="created")("deleted",t.action==="deleted"),V(2),Ss(t.action==="created"?2:-1),V(),Ss(t.action==="deleted"?3:-1),V(4),Sr(t.entityTitle),V(2),Gv(" ",t.entityType==="item"?"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F":"\u0422\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044F"," \u2022 ",t.action==="created"?"\u0441\u043E\u0437\u0434\u0430\u043D\u0430":"\u0443\u0434\u0430\u043B\u0435\u043D\u0430"," \u2022 ",la(10,10,t.timestamp,"short")," ")}}function lse(n,e){n&1&&(x(0,"div",7)(1,"p"),P(2,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043F\u0443\u0441\u0442\u0430"),D()())}var vb=class n{historyStore=$(wa);history=this.historyStore.history;showClearHistoryModal=Re(!1);openClearHistoryModal(){this.showClearHistoryModal.set(!0)}confirmClearHistory(){this.historyStore.clear(),this.showClearHistoryModal.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["ng-component"]],decls:17,vars:3,consts:[[1,"history-page"],[1,"history-header"],["routerLink","/",1,"back-button"],[1,"history-title"],[1,"clear-button",3,"click"],[1,"history-list"],[1,"history-item",3,"created","deleted"],[1,"history-empty"],["title","\u041E\u0447\u0438\u0441\u0442\u043A\u0430 \u0438\u0441\u0442\u043E\u0440\u0438\u0438","confirmText","\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",3,"confirm","closeEvent","isOpen","confirmDanger"],[2,"color","var(--color-expense)","margin-top","var(--space-md)"],[1,"history-item"],[1,"history-item-icon"],[1,"history-item-content"],[1,"history-item-main"],[1,"history-item-title"],[1,"history-item-meta"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"a",2),P(3,"\u2190 \u041D\u0430\u0437\u0430\u0434"),D(),x(4,"h2",3),P(5,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439"),D(),x(6,"button",4),ye("click",function(){return r.openClearHistoryModal()}),P(7,"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C"),D()(),x(8,"div",5),qu(9,cse,11,13,"div",6,ose),Ds(11,lse,3,0,"div",7),D(),x(12,"app-modal",8),ye("confirm",function(){return r.confirmClearHistory()})("closeEvent",function(){return r.showClearHistoryModal.set(!1)}),x(13,"p"),P(14,"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0432\u0441\u044E \u0438\u0441\u0442\u043E\u0440\u0438\u044E \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439?"),D(),x(15,"p",9),P(16,"\u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C."),D()()()),t&2&&(V(9),Wu(r.history()),V(2),Ss(r.history().length===0?11:-1),V(),X("isOpen",r.showClearHistoryModal())("confirmDanger",!0))},dependencies:[et,Tr,Na,Oa],styles:[".history-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.history-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md)}.back-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);color:var(--color-text-secondary);font-size:.875rem;transition:color var(--transition-fast)}.history-title[_ngcontent-%COMP%]{position:relative;top:7px}.back-button[_ngcontent-%COMP%]:hover{color:var(--color-text-primary)}.clear-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background-color:var(--color-expense);color:#fff;border-radius:var(--radius-md);font-size:.875rem;transition:all var(--transition-fast)}.clear-button[_ngcontent-%COMP%]:hover{background-color:#dc2626}.history-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.history-item[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-sm) var(--space-md);display:flex;gap:var(--space-sm);align-items:center;transition:all var(--transition-fast)}.history-item[_ngcontent-%COMP%]:hover{border-color:var(--color-border-hover);box-shadow:var(--shadow-sm)}.history-item.created[_ngcontent-%COMP%]{border-left:3px solid var(--color-income)}.history-item.deleted[_ngcontent-%COMP%]{border-left:3px solid var(--color-expense)}.history-item-icon[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:600;flex-shrink:0}.history-item.created[_ngcontent-%COMP%]   .history-item-icon[_ngcontent-%COMP%]{background-color:#10b9811a;color:var(--color-income)}.history-item.deleted[_ngcontent-%COMP%]   .history-item-icon[_ngcontent-%COMP%]{background-color:#ef44441a;color:var(--color-expense)}.history-item-content[_ngcontent-%COMP%]{flex:1;min-width:0}.history-item-main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);flex-wrap:wrap}.history-item-title[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-primary);font-size:.875rem}.history-item-meta[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-tertiary);white-space:nowrap}.history-empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-tertiary)}@media(max-width:768px){.history-header[_ngcontent-%COMP%]{align-items:flex-start}}"]})};var yb=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["ng-component"]],decls:100,vars:0,consts:[[1,"faq-page"],[1,"faq-header"],["routerLink","/",1,"back-button"],[1,"faq-content"],[1,"faq-section"],[1,"faq-section-title"],[1,"faq-item"],[1,"faq-question"],[1,"faq-answer"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"a",2),P(3,"\u2190 \u041D\u0430\u0437\u0430\u0434"),D(),x(4,"h1"),P(5,"\u0427\u0430\u0441\u0442\u043E \u0437\u0430\u0434\u0430\u0432\u0430\u0435\u043C\u044B\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B"),D()(),x(6,"div",3)(7,"div",4)(8,"h2",5),P(9,"\u041E\u0431\u0449\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B"),D(),x(10,"div",6)(11,"h3",7),P(12,"\u0427\u0442\u043E \u0442\u0430\u043A\u043E\u0435 Finance Tracker?"),D(),x(13,"div",8)(14,"p"),P(15,"Finance Tracker \u2014 \u044D\u0442\u043E \u0443\u0434\u043E\u0431\u043D\u043E\u0435 \u0432\u0435\u0431-\u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0434\u043B\u044F \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u043B\u0438\u0447\u043D\u044B\u0445 \u0444\u0438\u043D\u0430\u043D\u0441\u043E\u0432. \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0434\u043E\u0445\u043E\u0434\u043E\u0432 \u0438 \u0440\u0430\u0441\u0445\u043E\u0434\u043E\u0432, \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438, \u0430\u043D\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0443 \u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E \u0433\u0440\u0430\u0444\u0438\u043A\u043E\u0432 \u0438 \u043C\u043D\u043E\u0433\u043E\u0435 \u0434\u0440\u0443\u0433\u043E\u0435."),D()()(),x(16,"div",6)(17,"h3",7),P(18,"\u041A\u0430\u043A \u043D\u0430\u0447\u0430\u0442\u044C \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435?"),D(),x(19,"div",8)(20,"p"),P(21,"\u0414\u043B\u044F \u043D\u0430\u0447\u0430\u043B\u0430 \u0440\u0430\u0431\u043E\u0442\u044B \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0447\u0435\u0440\u0435\u0437 VK ID. \u041F\u043E\u0441\u043B\u0435 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0432\u044B \u0441\u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438. \u0412 \u0434\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C\u0435 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439 \u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439 \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u0430."),D()()(),x(22,"div",6)(23,"h3",7),P(24,"\u0427\u0442\u043E \u0442\u0430\u043A\u043E\u0435 \u0434\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C?"),D(),x(25,"div",8)(26,"p"),P(27,"\u0414\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0435\u0442 \u043F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0431\u0435\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438. \u0412 \u0434\u0435\u043C\u043E-\u0440\u0435\u0436\u0438\u043C\u0435 \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0434\u043E 2 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439 \u0438 2 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439. \u0414\u043B\u044F \u043F\u043E\u043B\u043D\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A\u043E \u0432\u0441\u0435\u043C \u0444\u0443\u043D\u043A\u0446\u0438\u044F\u043C \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0447\u0435\u0440\u0435\u0437 VK ID."),D()()()(),x(28,"div",4)(29,"h2",5),P(30,"\u0420\u0430\u0431\u043E\u0442\u0430 \u0441 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F\u043C\u0438"),D(),x(31,"div",6)(32,"h3",7),P(33,"\u041A\u0430\u043A \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E?"),D(),x(34,"div",8)(35,"p"),P(36,'\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0432 \u043F\u043E\u043B\u0435 \u0432\u0432\u043E\u0434\u0430 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043A\u043D\u043E\u043F\u043A\u0443 "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C". \u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u0441\u043E\u0437\u0434\u0430\u0435\u0442\u0441\u044F \u0431\u0435\u0437 \u043F\u0440\u0438\u0432\u044F\u0437\u043A\u0438 \u043A \u0442\u0438\u043F\u0443 (\u0434\u043E\u0445\u043E\u0434/\u0440\u0430\u0441\u0445\u043E\u0434), \u0442\u0438\u043F \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u044F\u0435\u0442\u0441\u044F \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u043F\u0435\u0440\u0432\u043E\u0439 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438 \u0432 \u044D\u0442\u043E\u0439 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438.'),D()()(),x(37,"div",6)(38,"h3",7),P(39,"\u0427\u0442\u043E \u0442\u0430\u043A\u043E\u0435 \u0442\u0435\u0433\u0438 (\u043F\u043E\u0434\u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438)?"),D(),x(40,"div",8)(41,"p"),P(42,'\u0422\u0435\u0433\u0438 \u2014 \u044D\u0442\u043E \u043F\u043E\u0434\u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043C\u043E\u0436\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u0432\u043D\u0443\u0442\u0440\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439 \u0434\u043B\u044F \u0431\u043E\u043B\u0435\u0435 \u0434\u0435\u0442\u0430\u043B\u044C\u043D\u043E\u0439 \u043A\u043B\u0430\u0441\u0441\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439. \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u0432 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 "\u041F\u0440\u043E\u0434\u0443\u043A\u0442\u044B" \u043C\u043E\u0436\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0442\u0435\u0433\u0438 "\u041C\u043E\u043B\u043E\u0447\u043D\u044B\u0435 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u044B", "\u041E\u0432\u043E\u0449\u0438 \u0438 \u0444\u0440\u0443\u043A\u0442\u044B" \u0438 \u0442.\u0434.'),D()()(),x(43,"div",6)(44,"h3",7),P(45,"\u041A\u0430\u043A \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E?"),D(),x(46,"div",8)(47,"p"),P(48,'\u041F\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043A\u043D\u043E\u043F\u043A\u0443 "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E" \u0432 \u043F\u0440\u0430\u0432\u043E\u043C \u0432\u0435\u0440\u0445\u043D\u0435\u043C \u0443\u0433\u043B\u0443. \u041F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0432\u0441\u0435 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438 \u0438 \u0442\u0435\u0433\u0438 \u0442\u0430\u043A\u0436\u0435 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u044B. \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.'),D()()()(),x(49,"div",4)(50,"h2",5),P(51,"\u0422\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438"),D(),x(52,"div",6)(53,"h3",7),P(54,"\u041A\u0430\u043A \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E?"),D(),x(55,"div",8)(56,"p"),P(57,'\u041E\u0442\u043A\u0440\u043E\u0439\u0442\u0435 \u043D\u0443\u0436\u043D\u0443\u044E \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043F \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438 (\u0434\u043E\u0445\u043E\u0434 \u0438\u043B\u0438 \u0440\u0430\u0441\u0445\u043E\u0434), \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043C\u043C\u0443, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043C\u044F, \u043F\u0440\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E\u0441\u0442\u0438 \u0434\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043F\u0440\u0438\u043C\u0435\u0447\u0430\u043D\u0438\u0435 \u0438 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0435\u0433. \u0417\u0430\u0442\u0435\u043C \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043A\u043D\u043E\u043F\u043A\u0443 "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C".'),D()()(),x(58,"div",6)(59,"h3",7),P(60,"\u041A\u0430\u043A \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E?"),D(),x(61,"div",8)(62,"p"),P(63,'\u041D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u043D\u0430\u0439\u0434\u0438\u0442\u0435 \u043D\u0443\u0436\u043D\u0443\u044E \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043A\u043D\u043E\u043F\u043A\u0443 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F (\u270E). \u041F\u043E\u0441\u043B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C".'),D()()(),x(64,"div",6)(65,"h3",7),P(66,"\u041A\u0430\u043A \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E?"),D(),x(67,"div",8)(68,"p"),P(69,"\u041D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u043D\u0430\u0439\u0434\u0438\u0442\u0435 \u043D\u0443\u0436\u043D\u0443\u044E \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043A\u043D\u043E\u043F\u043A\u0443 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F (\xD7). \u0422\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044F \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430, \u0430 \u043E\u0431\u0449\u0430\u044F \u0441\u0443\u043C\u043C\u0430 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u0431\u0443\u0434\u0435\u0442 \u043F\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u0430\u043D\u0430 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438."),D()()()(),x(70,"div",4)(71,"h2",5),P(72,"\u0413\u0440\u0430\u0444\u0438\u043A\u0438 \u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430"),D(),x(73,"div",6)(74,"h3",7),P(75,"\u041A\u0430\u043A \u0440\u0430\u0431\u043E\u0442\u0430\u044E\u0442 \u0433\u0440\u0430\u0444\u0438\u043A\u0438?"),D(),x(76,"div",8)(77,"p"),P(78,"\u041F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0441\u0442\u0440\u043E\u0438\u0442 \u0433\u0440\u0430\u0444\u0438\u043A\u0438 \u043D\u0430 \u043E\u0441\u043D\u043E\u0432\u0435 \u0432\u0430\u0448\u0438\u0445 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439. \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0432\u044B\u0431\u0438\u0440\u0430\u0442\u044C \u043F\u0435\u0440\u0438\u043E\u0434 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F (\u0434\u0435\u043D\u044C, \u043D\u0435\u0434\u0435\u043B\u044F, \u043C\u0435\u0441\u044F\u0446, \u0433\u043E\u0434). \u0413\u0440\u0430\u0444\u0438\u043A\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u044F\u044E\u0442\u0441\u044F \u0432 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u043F\u0440\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0438 \u0438\u043B\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439."),D()()(),x(79,"div",6)(80,"h3",7),P(81,"\u041F\u043E\u0447\u0435\u043C\u0443 \u0433\u0440\u0430\u0444\u0438\u043A \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442 \u043D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435?"),D(),x(82,"div",8)(83,"p"),P(84,"\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C, \u0447\u0442\u043E \u0434\u0430\u0442\u044B \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439 \u0443\u043A\u0430\u0437\u0430\u043D\u044B \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E. \u0413\u0440\u0430\u0444\u0438\u043A \u0433\u0440\u0443\u043F\u043F\u0438\u0440\u0443\u0435\u0442 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438 \u043F\u043E \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u043C\u0443 \u043F\u0435\u0440\u0438\u043E\u0434\u0443. \u0415\u0441\u043B\u0438 \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u0442\u0441\u044F, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043E\u0442\u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044E \u0438 \u043F\u0435\u0440\u0435\u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0435\u0451."),D()()()(),x(85,"div",4)(86,"h2",5),P(87,"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F \u0438 \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C"),D(),x(88,"div",6)(89,"h3",7),P(90,"\u0411\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u044B \u043B\u0438 \u043C\u043E\u0438 \u0434\u0430\u043D\u043D\u044B\u0435?"),D(),x(91,"div",8)(92,"p"),P(93,"\u0414\u0430, \u0432\u0441\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0445\u0440\u0430\u043D\u044F\u0442\u0441\u044F \u0432 \u0437\u0430\u0449\u0438\u0449\u0435\u043D\u043D\u043E\u0439 \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445 Supabase. \u041A\u0430\u0436\u0434\u044B\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0438\u043C\u0435\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F \u0442\u043E\u043B\u044C\u043A\u043E \u043A \u0441\u0432\u043E\u0438\u043C \u0434\u0430\u043D\u043D\u044B\u043C. \u0414\u0430\u043D\u043D\u044B\u0435 \u043D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u044E\u0442\u0441\u044F \u0442\u0440\u0435\u0442\u044C\u0438\u043C \u043B\u0438\u0446\u0430\u043C."),D()()(),x(94,"div",6)(95,"h3",7),P(96,"\u041C\u043E\u0433\u0443 \u043B\u0438 \u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043D\u0430 \u0440\u0430\u0437\u043D\u044B\u0445 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430\u0445?"),D(),x(97,"div",8)(98,"p"),P(99,"\u0414\u0430, \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043D\u0430 \u043B\u044E\u0431\u043E\u043C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435 (\u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440, \u043F\u043B\u0430\u043D\u0448\u0435\u0442, \u0441\u043C\u0430\u0440\u0442\u0444\u043E\u043D). \u0414\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0441 \u0442\u043E\u0433\u043E \u0436\u0435 VK \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430, \u0438 \u0432\u044B \u0443\u0432\u0438\u0434\u0438\u0442\u0435 \u0432\u0441\u0435 \u0441\u0432\u043E\u0438 \u0434\u0430\u043D\u043D\u044B\u0435."),D()()()()()())},dependencies:[et,Tr],styles:[".faq-page[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:var(--space-xl) var(--space-md)}.faq-header[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl)}.back-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) 0;color:var(--color-text-secondary);text-decoration:none;font-size:.875rem;transition:color var(--transition-fast);margin-bottom:var(--space-lg)}.back-button[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.faq-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0}.faq-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2xl)}.faq-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.faq-section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--color-text-primary);margin:0;padding-bottom:var(--space-md);border-bottom:2px solid var(--color-border)}.faq-item[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-lg);transition:all var(--transition-fast)}.faq-item[_ngcontent-%COMP%]:hover{border-color:var(--color-border-hover);box-shadow:var(--shadow-sm)}.faq-question[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--space-md) 0}.faq-answer[_ngcontent-%COMP%]{color:var(--color-text-secondary);line-height:1.7}.faq-answer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9375rem}@media(max-width:768px){.faq-page[_ngcontent-%COMP%]{padding:var(--space-lg) var(--space-md)}.faq-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.faq-section-title[_ngcontent-%COMP%]{font-size:1.25rem}.faq-question[_ngcontent-%COMP%]{font-size:1rem}.faq-item[_ngcontent-%COMP%]{padding:var(--space-md)}}"]})};var _b=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qe({type:n,selectors:[["ng-component"]],decls:112,vars:0,consts:[[1,"about-page"],[1,"about-header"],["routerLink","/",1,"back-button"],[1,"about-content"],[1,"about-section"],[1,"section-title"],[1,"section-text"],[1,"license-badge"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"license-icon"],["d","M12 2L2 7L12 12L22 7L12 2Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M2 17L12 22L22 17","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M2 12L12 17L22 12","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"tech-stack"],[1,"tech-item"],[1,"tech-name"],[1,"tech-desc"],[1,"about-section","donation-section"],[1,"donation-header"],[1,"donation-emoji"],[1,"donation-methods"],[1,"donation-card"],[1,"donation-icon"],[1,"donation-title"],[1,"donation-details"],[1,"donation-note"],["href","https://yoomoney.ru/fundraise/1F73Q5FAJ0R.260110","target","_blank","rel","noopener noreferrer",1,"donation-link-button"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"external-icon"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["href","https://donate.stream/yoomoney4100118748728821","target","_blank","rel","noopener noreferrer",1,"donation-link-button"],[1,"donation-thanks"],[1,"donation-subtext"],[1,"contacts"],["href","https://vk.com/emuhamadeev","target","_blank","rel","noopener noreferrer",1,"contact-link"],[1,"contact-emoji"],["href","mailto:trisemerka@gmail.com","target","_blank","rel","noopener noreferrer",1,"contact-link"],["href","https://t.me/emuhamadeev","target","_blank","rel","noopener noreferrer",1,"contact-link"],[1,"section-text",2,"margin-top","var(--space-md)"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"a",2),P(3,"\u2190 \u041D\u0430\u0437\u0430\u0434"),D(),x(4,"h1"),P(5,"\u041E \u043F\u0440\u043E\u0435\u043A\u0442\u0435"),D()(),x(6,"div",3)(7,"section",4)(8,"h2",5),P(9,"Finance Tracker"),D(),x(10,"p",6),P(11," Finance Tracker \u2014 \u044D\u0442\u043E \u043F\u0440\u043E\u043F\u0440\u0438\u0435\u0442\u0430\u0440\u043D\u043E\u0435 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0434\u043B\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043B\u0438\u0447\u043D\u044B\u043C\u0438 \u0444\u0438\u043D\u0430\u043D\u0441\u0430\u043C\u0438. \u041F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0441\u043E\u0437\u0434\u0430\u043D\u043E \u0441 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435\u043C \u0441\u043E\u0432\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0445 \u0432\u0435\u0431-\u0442\u0435\u0445\u043D\u043E\u043B\u043E\u0433\u0438\u0439 \u0438 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u0430\u0431\u0441\u043E\u043B\u044E\u0442\u043D\u043E \u0431\u0435\u0441\u043F\u043B\u0430\u0442\u043D\u043E \u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439. "),D()(),x(12,"section",4)(13,"div",7),ta(),x(14,"svg",8),Dt(15,"path",9)(16,"path",10)(17,"path",11),D(),na(),x(18,"div")(19,"h3"),P(20,"Proprietary License"),D(),x(21,"p"),P(22,"\u041F\u0440\u043E\u043F\u0440\u0438\u0435\u0442\u0430\u0440\u043D\u043E\u0435 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u043D\u043E\u0435 \u043E\u0431\u0435\u0441\u043F\u0435\u0447\u0435\u043D\u0438\u0435"),D()()(),x(23,"p",6),P(24," Finance Tracker \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u044F\u0435\u0442\u0441\u044F \u043F\u043E\u0434 \u043F\u0440\u043E\u043F\u0440\u0438\u0435\u0442\u0430\u0440\u043D\u043E\u0439 \u043B\u0438\u0446\u0435\u043D\u0437\u0438\u0435\u0439. \u0412\u0441\u0435 \u043F\u0440\u0430\u0432\u0430 \u043D\u0430 \u0435\u0433\u043E \u0438\u0441\u0445\u043E\u0434\u043D\u044B\u0439 \u043A\u043E\u0434 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B \u043F\u0440\u0438\u043D\u0430\u0434\u043B\u0435\u0436\u0430\u0442 \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0443. \u041F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u0434\u043B\u044F \u043B\u0438\u0447\u043D\u043E\u0433\u043E \u043D\u0435\u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F. \u0417\u0430\u043F\u0440\u0435\u0449\u0430\u0435\u0442\u0441\u044F \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435, \u043C\u043E\u0434\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u044F, \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0438\u043B\u0438 \u043A\u043E\u043C\u043C\u0435\u0440\u0447\u0435\u0441\u043A\u043E\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 \u0431\u0435\u0437 \u043F\u0438\u0441\u044C\u043C\u0435\u043D\u043D\u043E\u0433\u043E \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u044F \u043F\u0440\u0430\u0432\u043E\u043E\u0431\u043B\u0430\u0434\u0430\u0442\u0435\u043B\u044F. "),D()(),x(25,"section",4)(26,"h2",5),P(27,"\u0422\u0435\u0445\u043D\u043E\u043B\u043E\u0433\u0438\u0438"),D(),x(28,"div",12)(29,"div",13)(30,"span",14),P(31,"Angular"),D(),x(32,"span",15),P(33,"Frontend \u0444\u0440\u0435\u0439\u043C\u0432\u043E\u0440\u043A"),D()(),x(34,"div",13)(35,"span",14),P(36,"TypeScript"),D(),x(37,"span",15),P(38,"\u0422\u0438\u043F\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 JavaScript"),D()(),x(39,"div",13)(40,"span",14),P(41,"Supabase"),D(),x(42,"span",15),P(43,"Backend \u0438 \u0431\u0430\u0437\u0430 \u0434\u0430\u043D\u043D\u044B\u0445"),D()(),x(44,"div",13)(45,"span",14),P(46,"Chart.js"),D(),x(47,"span",15),P(48,"\u0413\u0440\u0430\u0444\u0438\u043A\u0438 \u0438 \u0432\u0438\u0437\u0443\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F"),D()(),x(49,"div",13)(50,"span",14),P(51,"VK ID"),D(),x(52,"span",15),P(53,"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F"),D()()()(),x(54,"section",16)(55,"div",17)(56,"span",18),P(57,"\u2615"),D(),x(58,"h2",5),P(59,"\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043F\u0440\u043E\u0435\u043A\u0442"),D()(),x(60,"p",6),P(61," \u0415\u0441\u043B\u0438 \u0432\u0430\u043C \u043D\u0440\u0430\u0432\u0438\u0442\u0441\u044F Finance Tracker, \u0438 \u0432\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u0430, \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043E\u0442\u0431\u043B\u0430\u0433\u043E\u0434\u0430\u0440\u0438\u0442\u044C \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0430 \u0447\u0430\u0448\u0435\u0447\u043A\u043E\u0439 \u043A\u043E\u0444\u0435! \u042D\u0442\u043E \u043F\u043E\u043C\u043E\u0436\u0435\u0442 \u043C\u043E\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043D\u0430 \u0434\u0430\u043B\u044C\u043D\u0435\u0439\u0448\u0435\u0435 \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u0435 \u0438 \u0443\u043B\u0443\u0447\u0448\u0435\u043D\u0438\u0435 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F. "),D(),x(62,"div",19)(63,"div",20)(64,"div",21),P(65,"\u{1F4B3}"),D(),x(66,"h3",22),P(67,"\u042EMoney"),D(),x(68,"div",23)(69,"p",24),P(70," \u0411\u044B\u0441\u0442\u0440\u0430\u044F \u0438 \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u0430\u044F \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430 \u0447\u0435\u0440\u0435\u0437 \u042EMoney (\u042F\u043D\u0434\u0435\u043A\u0441.\u0414\u0435\u043D\u044C\u0433\u0438) "),D(),x(71,"a",25)(72,"span"),P(73,"\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0447\u0435\u0440\u0435\u0437 \u042EMoney"),D(),ta(),x(74,"svg",26),Dt(75,"path",27),D()()()(),na(),x(76,"div",20)(77,"div",21),P(78,"\u{1F4F1}"),D(),x(79,"h3",22),P(80,"Donate-stream"),D(),x(81,"div",23)(82,"p",24),P(83," \u0411\u044B\u0441\u0442\u0440\u0430\u044F, \u0438 \u0443\u0434\u043E\u0431\u043D\u0430\u044F \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430 \u0447\u0435\u0440\u0435\u0437 Donate-stream "),D(),x(84,"a",28)(85,"span"),P(86,"\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0447\u0435\u0440\u0435\u0437 Donate-stream"),D(),ta(),x(87,"svg",26),Dt(88,"path",27),D()()()()(),na(),x(89,"div",29)(90,"p"),P(91,"\u0421\u043F\u0430\u0441\u0438\u0431\u043E \u0437\u0430 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0443! \u{1F64F}"),D(),x(92,"p",30),P(93,"\u041A\u0430\u0436\u0434\u0430\u044F \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430 \u043E\u0447\u0435\u043D\u044C \u0432\u0430\u0436\u043D\u0430 \u0438 \u043C\u043E\u0442\u0438\u0432\u0438\u0440\u0443\u0435\u0442 \u043D\u0430 \u0434\u0430\u043B\u044C\u043D\u0435\u0439\u0448\u0443\u044E \u0440\u0430\u0431\u043E\u0442\u0443 \u043D\u0430\u0434 \u043F\u0440\u043E\u0435\u043A\u0442\u043E\u043C."),D()()(),x(94,"section",4)(95,"h2",5),P(96,"\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u044B"),D(),x(97,"div",31)(98,"a",32)(99,"span",33),P(100,"\u{1F4AC}"),D(),P(101," VK "),D(),x(102,"a",34)(103,"span",33),P(104,"\u{1F4AC}"),D(),P(105," Email "),D(),x(106,"a",35)(107,"span",33),P(108,"\u{1F4AC}"),D(),P(109," Telegram "),D()(),x(110,"p",36),P(111," \u041F\u043E \u0432\u043E\u043F\u0440\u043E\u0441\u0430\u043C \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F, \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0439 \u043F\u043E \u0443\u043B\u0443\u0447\u0448\u0435\u043D\u0438\u044E \u0438\u043B\u0438 \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u043E\u0431\u0440\u0430\u0449\u0430\u0439\u0442\u0435\u0441\u044C \u0447\u0435\u0440\u0435\u0437 \u0443\u043A\u0430\u0437\u0430\u043D\u043D\u044B\u0435 \u043A\u043E\u043D\u0442\u0430\u043A\u0442\u044B. "),D()()()())},dependencies:[et,Tr],styles:['@charset "UTF-8";.about-page[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:var(--space-xl) var(--space-md)}.about-header[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl)}.back-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) 0;color:var(--color-text-secondary);text-decoration:none;font-size:.875rem;transition:color var(--transition-fast);margin-bottom:var(--space-lg)}.back-button[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.about-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0}.about-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2xl)}.about-section[_ngcontent-%COMP%]{background-color:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-xl)}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--space-md) 0}.section-text[_ngcontent-%COMP%]{color:var(--color-text-secondary);line-height:1.7;font-size:.9375rem;margin:0}.license-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);background-color:var(--color-bg-secondary);border-radius:var(--radius-md);margin-bottom:var(--space-lg)}.license-icon[_ngcontent-%COMP%]{width:48px;height:48px;color:var(--color-text-primary);flex-shrink:0}.license-badge[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--space-xs) 0}.license-badge[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);margin:0}.tech-stack[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--space-md);margin-top:var(--space-md)}.tech-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);padding:var(--space-md);background-color:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-md)}.tech-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text-primary);font-size:1rem}.tech-desc[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}.donation-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f11a,#8b5cf61a);border-color:var(--color-primary)}.donation-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);margin-bottom:var(--space-lg)}.donation-emoji[_ngcontent-%COMP%]{font-size:2rem}.donation-methods[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--space-lg);margin:var(--space-xl) 0}.donation-card[_ngcontent-%COMP%]{background-color:var(--color-bg-secondary);border:2px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-lg);transition:all var(--transition-fast)}.donation-card[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);box-shadow:var(--shadow-md);transform:translateY(-2px)}.donation-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--space-md)}.donation-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--space-md) 0}.donation-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.donation-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-tertiary);text-transform:uppercase;letter-spacing:.5px;margin:0}.donation-value[_ngcontent-%COMP%]{font-size:.9375rem;color:var(--color-text-primary);margin:0;position:relative}.donation-link-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background-color:var(--color-primary);color:#fff;text-decoration:none;border-radius:var(--radius-md);font-weight:500;font-size:.9375rem;transition:all var(--transition-fast);margin-top:var(--space-md);width:100%}.donation-link-button[_ngcontent-%COMP%]:hover{background-color:#6366f1;transform:translateY(-2px);box-shadow:var(--shadow-md)}.donation-link-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.external-icon[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}.donation-note[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);margin-top:var(--space-sm);padding:var(--space-sm);background-color:#6366f11a;border-radius:var(--radius-sm);border-left:3px solid var(--color-primary)}.donation-link[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;font-weight:500;transition:color var(--transition-fast)}.donation-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.donation-thanks[_ngcontent-%COMP%]{text-align:center;padding:var(--space-xl);background-color:#6366f11a;border-radius:var(--radius-md);margin-top:var(--space-lg)}.donation-thanks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-size:1.125rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--space-sm) 0}.donation-subtext[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);margin:0}.contacts[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-md);margin-top:var(--space-md)}.contact-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background-color:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-md);color:var(--color-text-primary);text-decoration:none;font-weight:500;transition:all var(--transition-fast)}.contact-link[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.contact-icon[_ngcontent-%COMP%]{width:20px;height:20px}.contact-emoji[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1}@media(max-width:768px){.about-page[_ngcontent-%COMP%]{padding:var(--space-lg) var(--space-md)}.about-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.about-section[_ngcontent-%COMP%]{padding:var(--space-lg)}.section-title[_ngcontent-%COMP%]{font-size:1.25rem}.donation-methods[_ngcontent-%COMP%], .tech-stack[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};var SL=[{path:"",component:db},{path:"item/:id",component:gb},{path:"history",component:vb},{path:"faq",component:yb},{path:"about",component:_b}];(function(){let e=console.error,t=console.warn;console.error=function(...r){let i=r.join(" ");i.includes("runtime.lastError")||i.includes("Unchecked runtime.lastError")||i.includes("message port closed")||i.includes("Extension context invalidated")||i.includes("The message port closed before a response was received")||i.includes("Could not establish connection")||e.apply(console,r)},console.warn=function(...r){let i=r.join(" ");i.includes("runtime.lastError")||i.includes("Unchecked runtime.lastError")||i.includes("message port closed")||i.includes("Extension context invalidated")||i.includes("The message port closed before a response was received")||i.includes("Could not establish connection")||t.apply(console,r)}})();window.addEventListener("error",n=>{let e=n.message||"";return e.includes("runtime.lastError")||e.includes("Unchecked runtime.lastError")||e.includes("message port closed")||e.includes("Extension context invalidated")||e.includes("The message port closed before a response was received")||e.includes("Could not establish connection")?(n.preventDefault(),n.stopPropagation(),!1):!0});window.addEventListener("unhandledrejection",n=>{let e=n.reason,t=(typeof e=="string"?e:"")||e?.message||""||e?.toString?.()||"";return t.includes("runtime.lastError")||t.includes("Unchecked runtime.lastError")||t.includes("message port closed")||t.includes("Extension context invalidated")||t.includes("The message port closed before a response was received")||t.includes("Could not establish connection")?(n.preventDefault(),!1):!0});pD(o_,{providers:[BD(SL),{provide:Ts,useClass:nD}]}).catch(n=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u043F\u0443\u0441\u043A\u0435 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F:",n)});
