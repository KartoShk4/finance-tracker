<div class="app">
  <header class="app-header">
    <h1>Finance Tracker</h1>
    <nav class="app-nav">
      <a routerLink="/" routerLinkActive="active">Главная</a>
      <a routerLink="/history" routerLinkActive="active">История</a>
    </nav>
    <div class="app-auth">
      <div *ngIf="authService.loading()" class="auth-loading">
        Загрузка...
      </div>
      <div *ngIf="!authService.loading()">
        <div *ngIf="!authService.isAuthenticated()" class="auth-actions">
          <app-vk-login></app-vk-login>
        </div>
        <div *ngIf="authService.isAuthenticated()" class="auth-user">
          <div class="auth-user-info">
            <img 
              *ngIf="authService.user()?.photo" 
              [src]="authService.user()?.photo" 
              [alt]="authService.user()?.firstName"
              class="auth-user-photo" />
            <span class="auth-user-name">
              {{ authService.user()?.firstName }} {{ authService.user()?.lastName }}
            </span>
          </div>
          <button
            class="auth-button auth-button-out"
            (click)="signOut()"
            title="Выйти">
            Выйти
          </button>
        </div>
      </div>
    </div>
  </header>

  <main class="app-content">
    <router-outlet />
  </main>

  <!-- FloatingOneTap для неавторизованных пользователей -->
  <app-floating-one-tap *ngIf="!authService.isAuthenticated() && !authService.loading()"></app-floating-one-tap>
</div>
