<header class="app-header">
  <div class="header-container">
    <div class="app-logo" (click)="goToHome()" title="Перейти на главную">
      <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <h1>Finance Tracker</h1>
    </div>

    <!-- Десктопная навигация -->
    <nav class="app-nav desktop-nav">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">Главная</a>
      <a routerLink="/history" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">История</a>
      <a routerLink="/faq" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">FAQ</a>
      <a routerLink="/about" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">О нас</a>
    </nav>

    <!-- Десктопная авторизация -->
    <div class="app-auth desktop-auth">
      @if (authService.loading()) {
        <div class="auth-loading">
          Загрузка...
        </div>
      }

      @if (!authService.loading()) {
        <div>
          @if (!authService.isAuthenticated()) {
            <div class="auth-actions">
              <app-vk-login></app-vk-login>
            </div>
          }
          @if (authService.isAuthenticated()) {
            <div class="auth-user">
              <div class="auth-user-info">
                <img 
                  *ngIf="authService.user()?.photo" 
                  [src]="authService.user()?.photo" 
                  [alt]="authService.user()?.firstName"
                  class="auth-user-photo" />
                <span class="auth-user-name">
                  {{ authService.user()?.firstName }} {{ authService.user()?.lastName }}
                </span>
              </div>
              <button
                class="auth-button auth-button-out"
                (click)="signOut()"
                title="Выйти">
                Выйти
              </button>
            </div>
          }
        </div>
      }
    </div>

    <!-- Бургер-кнопка для мобильных -->
    <button 
      class="burger-menu-button"
      [class.active]="isMobileMenuOpen()"
      (click)="toggleMobileMenu()"
      aria-label="Меню"
      type="button">
      <span class="burger-line"></span>
      <span class="burger-line"></span>
      <span class="burger-line"></span>
    </button>
  </div>

  <!-- Мобильное меню -->
  <nav class="mobile-nav" [class.open]="isMobileMenuOpen()">
    <div class="mobile-nav-content">
      <a 
        routerLink="/" 
        routerLinkActive="active" 
        [routerLinkActiveOptions]="{ exact: true }"
        (click)="closeMobileMenu()">
        Главная
      </a>
      <a 
        routerLink="/history" 
        routerLinkActive="active" 
        [routerLinkActiveOptions]="{ exact: true }"
        (click)="closeMobileMenu()">
        История
      </a>
      <a 
        routerLink="/faq" 
        routerLinkActive="active" 
        [routerLinkActiveOptions]="{ exact: true }"
        (click)="closeMobileMenu()">
        FAQ
      </a>
      <a 
        routerLink="/about" 
        routerLinkActive="active" 
        [routerLinkActiveOptions]="{ exact: true }"
        (click)="closeMobileMenu()">
        О нас
      </a>

      <div class="mobile-auth">
        @if (authService.loading()) {
          <div class="auth-loading">
            Загрузка...
          </div>
        }

        @if (!authService.loading()) {
          <div>
            @if (!authService.isAuthenticated()) {
              <div class="auth-actions">
                <app-vk-login></app-vk-login>
              </div>
            }
            @if (authService.isAuthenticated()) {
              <div class="auth-user">
                <div class="auth-user-info">
                  <img 
                    *ngIf="authService.user()?.photo" 
                    [src]="authService.user()?.photo" 
                    [alt]="authService.user()?.firstName"
                    class="auth-user-photo" />
                  <span class="auth-user-name">
                    {{ authService.user()?.firstName }} {{ authService.user()?.lastName }}
                  </span>
                </div>
                <button
                  class="auth-button auth-button-out"
                  (click)="signOut(); closeMobileMenu()"
                  title="Выйти">
                  Выйти
                </button>
              </div>
            }
          </div>
        }
      </div>
    </div>
  </nav>
</header>
